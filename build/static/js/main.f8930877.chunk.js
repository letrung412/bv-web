(this.webpackJsonphospital_management=this.webpackJsonphospital_management||[]).push([[0],{212:function(e,t,n){},229:function(e,t,n){},230:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(16),r=n(21),i=n(33),o=n.n(i),l=n(4),d=function e(){Object(l.a)(this,e)},u=n(8),h=n.n(u),j=n(11),b=n(5),m=n(31),x=n(27),O=n(6),p=n(7),f=n(15),v="https://bv-web.vercel.app/api",g={RECEPTIONIST:{name:"L\u1ec5 T\xe2n",value:"le_tan"},DOCTOR:{name:"B\xe1c S\u0129",value:"bac_si"},NURSING:{name:"\u0110i\u1ec1u D\u01b0\u1ee1ng",value:"dieu_duong"},TEST_OPERATOR:{name:"X\xe9t Nghi\u1ec7m",value:"ki_thuat"},ACCOUNTER:{name:"Thu Ng\xe2n",value:"thu_ngan"},PHARMACIST:{name:"D\u01b0\u1ee3c S\u0129",value:"duoc_si"},ADMIN:{name:"Admin",value:"admin"},ULTRASOUND:{name:"Si\xeau \xc2m",value:"sieu_am"},ENT:{name:"N\u1ed9i Soi",value:"noi_soi"},XRAY:{name:"X-Quang",value:"x_quang"},INVENTORY:{name:"Kho",value:"kho"}},y="KL3D",N="CBNV",S="KDV",C={"X\xe9t nghi\u1ec7m n\u01b0\u1edbc ti\u1ec3u t\u1ebf b\xe0o":{"S\u1ed1 l\u01b0\u1ee3ng HC/vi tr\u01b0\u1eddng(40X)":"","S\u1ed1 l\u01b0\u1ee3ng BC/vi tr\u01b0\u1eddng(40X)":"","Tr\u1ee5 HC/vi tr\u01b0\u1eddng(40X)":"","Tr\u1ee5 BC/vi tr\u01b0\u1eddng(40X)":"","Tr\u1ee5 h\u1ea1t/vi tr\u01b0\u1eddng(40X)":"","Tr\u1ee5 kh\xe1c/vi tr\u01b0\u1eddng(40X)":"","Tinh th\u1ec3/vi tr\u01b0\u1eddng(40X)":"","T\u1ebf b\xe0o bi\u1ec3u m\xf4/vi tr\u01b0\u1eddng(40X)":""},"Th\u1eddi gian m\xe1u ch\u1ea3y ph\u01b0\u01a1ng ph\xe1p Duke":{"Th\u1eddi gian m\xe1u ch\u1ea3y":"","Th\u1eddi gian m\xe1u \u0111\xf4ng":""},"M\xe1u l\u1eafng":{"M\xe1u l\u1eafng 1h":"","M\xe1u l\u1eafng 2h":""},"Vi n\u1ea5m soi t\u01b0\u01a1i":{"N\u1ea5m men":"","N\u1ea5m s\u1ee3i":"","K\xed sinh tr\xf9ng trong da":""},"Vi n\u1ea5m nhu\u1ed9m soi":{"N\u1ea5m men":"","N\u1ea5m s\u1ee3i":"","K\xed sinh tr\xf9ng trong da":""},"Nhu\u1ed9m soi d\u1ecbch h\u1ecdng":{"B\u1ea1ch c\u1ea7u":"","C\u1ea7u khu\u1ea9n Gram (+)":"","Tr\u1ef1c khu\u1ea9n Gram (-)":"","Vi khu\u1ea9n kh\xe1c":""},"Tr\u1ee9ng giun, s\xe1n soi t\u01b0\u01a1i":{"Tr\u1ee9ng giun":"","Tr\u1ee9ng s\xe1n":""},"L\u1eacU (neisseria gonorrhoeae)":{"C\u1ea7u khu\u1ea9n Gram \xe2m x\u1ebfp \u0111\xf4i ":""},"Soi ph\xe2n ( H\u1ed3ng c\u1ea7u, b\u1ea1ch c\u1ea7u , \u0111\u01a1n b\xe0o \u0111\u01b0\u1eddng ru\u1ed9t, c\u1eb7n d\u01b0 ph\xe2n)":{"Vi khu\u1ea9n nhu\u1ed9m soi":{"C\u1ea7u khu\u1ea9n Gram (+)":"","Tr\u1ef1c khu\u1ea9n Gram (-)":"","K\u1ebft lu\u1eadn":""},"Soi t\u01b0\u01a1i":{"H\u1ed3ng c\u1ea7u":"","B\u1ea1ch c\u1ea7u":""},"L\u1ef5 Amip":"","C\u1eb7n d\u01b0 trong ph\xe2n":""},"Strongyloides stercoralis(Giun l\u01b0\u01a1n) \u1ea5u tr\xf9ng soi t\u01b0\u01a1i":{"Giun l\u01b0\u01a1n":""},"Demodex soi t\u01b0\u01a1i":{"Demodex soi t\u01b0\u01a1i":""},"Demodex nhu\u1ed9m soi":{"Demodex nhu\u1ed9m soi":""},"H\u1ec7 RH":{"H\u1ec7 nh\xf3m RH":""},"H\u1ec7 nh\xf3m ABO":{"H\u1ec7 nh\xf3m ABO":""},"Soi t\u01b0\u01a1i d\u1ecbch \xe2m \u0111\u1ea1o (n\u1ea5m,b\u1ea1ch c\u1ea7u, tr\xf9ng roi)":{"B\u1ea1ch c\u1ea7u ":"","Vi khu\u1ea9n nhu\u1ed9m soi":{"C\u1ea7u khu\u1ea9n Gram (+)":"","C\u1ea7u khu\u1ea9n Gram (-)":"","Song c\u1ea7u Gram":"","T\u1ea1p khu\u1ea9n":""},"N\u1ea5m":"",Trichomonasvaginalis:"",".":""},"Nhu\u1ed9m soi d\u1ecbch \xe2m \u0111\u1ea1o (vi khu\u1ea9n,n\u1ea5m)":{"B\u1ea1ch c\u1ea7u ":"","Vi khu\u1ea9n nhu\u1ed9m soi":{"C\u1ea7u khu\u1ea9n Gram (+)":"","C\u1ea7u khu\u1ea9n Gram (-)":"","Song c\u1ea7u Gram":"","T\u1ea1p khu\u1ea9n":""},"N\u1ea5m":"",Trichomonasvaginalis:"",".":""},"Nhu\u1ed9m soi d\u1ecbch ni\u1ec7u \u0111\u1ea1o (vi khu\u1ea9n,n\u1ea5m)":Object(f.a)({"B\u1ea1ch c\u1ea7u ":"","Vi khu\u1ea9n nhu\u1ed9m soi":{"C\u1ea7u khu\u1ea9n Gram (+)":"","Tr\u1ef1c khu\u1ea9n Gram (-)":"","Song c\u1ea7u Gram":""},"N\u1ea5m":"","":""},"",""),"Soi t\u01b0\u01a1i d\u1ecbch ni\u1ec7u \u0111\u1ea1o (n\u1ea5m,b\u1ea1ch c\u1ea7u, tr\xf9ng roi)":Object(f.a)({"B\u1ea1ch c\u1ea7u ":"","Vi khu\u1ea9n nhu\u1ed9m soi":{"C\u1ea7u khu\u1ea9n Gram d\u01b0\u01a1ng":"","Tr\u1ef1c khu\u1ea9n Gram \xe2m":"","Song c\u1ea7u Gram \xe2m":""},"N\u1ea5m":"","":""},"",""),"\u0110i\u1ec7n gi\u1ea3i \u0111\u1ed3":{"Na+":"","K+":"","Cl-":""},"T\xecm c\u1eb7n d\u01b0 trong ph\xe2n":{"C\u1eb7n d\u01b0 trong ph\xe2n":""},Phospho:{Phospho:""},"N\u1ea5m trong ph\xe2n":{"N\u1ea5m trong ph\xe2n":""}},_="new",T="ready",w="running",k="cancel",D="done",I="paid",L="token",E="user",P="location",R="exam",M="test",B="ultrasound",A="x-ray",F="ent",U="other",H="exam",K="test",G="buy",J="cancel",X={code:"otc_drug",label:"\u0110\u01a1n b\u1ed5 sung"},V={code:"etc_drug",label:"\u0110\u01a1n ch\u1ec9 \u0111\u1ecbnh"},q={code:"other",label:"\u0110\u01a1n kh\xe1c"},z="PK",W="CC",Y="QT",Q="XQ",$="XN",Z="SA",ee="NS",te="^0\\d{9,11}$",ne="^(0?[1-9]|[12][0-9]|3[01])[/](0?[1-9]|1[012])[/]\\d{4}$",ce="Sai \u0111\u1ecbnh d\u1ea1ng email, vui l\xf2ng ki\u1ec3m tra l\u1ea1i",ae="*",se="Gi\xe1 tr\u1ecb ph\u1ea3i l\u1edbn h\u01a1n: ",re="Gi\xe1 tr\u1ecb ph\u1ea3i nh\u1ecf h\u01a1n: ",ie="\u0110\u1ed9 d\xe0i ph\u1ea3i l\u1edbn h\u01a1n: ",oe="\u0110\u1ed9 d\xe0i ph\u1ea3i nh\u1ecf h\u01a1n: ",le="Vui l\xf2ng ki\u1ec3m tra l\u1ea1i s\u1ed1 \u0111i\u1ec7n tho\u1ea1i",de="Sai \u0111\u1ecbnh d\u1ea1ng th\u1eddi gian, vui l\xf2ng ki\u1ec3m tra l\u1ea1i",ue="M\u1eadt kh\u1ea9u kh\xf4ng tr\xf9ng nhau",he=864e5;function je(e,t){return"date"==t?e<10?"0".concat(e):e.toString():"service"==t?e<10?"00".concat(e):e<100?"0".concat(e):e.toString():void 0}var be=function(e,t){var n;"string"==typeof e&&(n=new Date(e)),"now"==e&&(n=new Date);var c=n.getFullYear().toString().substr(2,4),a=je(n.getMonth()+1,"date"),s=je(n.getDate(),"date"),r=je(n.getHours(),"date"),i=je(n.getMinutes(),"date"),o=je(n.getSeconds(),"date");if("YYMMDDHHMMSS"===t)return c+a+s+r+i+o;if("DDMMYYYY"===t){var l=n.getFullYear();return"".concat(s,"-").concat(a,"-").concat(l)}return c+a+s+r+i+o},me=function(e,t){return 0==Array.isArray(e)||0==Array.isArray(t)?"".concat(e," or ").concat(t," not array"):e.length===t.length&&e.every((function(e,n){return e==t[n]}))},xe=function(e){var t=e.split(" ");return"T\u1ec9nh"==t[0]?(t.splice(0,1),t.join(" ")):"Th\xe0nh"==t[0]?(t.splice(0,2),"TP. "+t.join(" ")):"Th\u1ecb"==t[0]?(t.splice(0,2),"TT. "+t.join(" ")):"Qu\u1eadn"==t[0]||"Huy\u1ec7n"==t[0]||"Ph\u01b0\u1eddng"==t[0]||"X\xe3"==t[0]?(t.splice(0,1),t.join(" ")):void 0},Oe={code:"ml",label:"ml"},pe={code:"mg",label:"mg"},fe={code:"tablet",label:"vi\xean"},ve=[{code:"tablet",label:"vi\xean"},{code:"cans",label:"lon"},{code:"pack",label:"g\xf3i"},{code:"tube",label:"\u1ed1ng"},{code:"tup",label:"tu\xfdp"},{code:"bottle",label:"l\u1ecd"},{code:"box",label:"h\u1ed9p"},{code:"piece",label:"c\xe1i"}],ge=[{value:"nose ",name:"Nh\u1ecf m\u0169i"},{value:"buccal",name:"Ng\u1eadm trong m\xe1"},{value:"enteral",name:"\u0110\u01b0\u1eddng ru\u1ed9t"},{value:"inhalable",name:"H\xedt"},{value:"infused",name:"\u0110\u01b0\u1eddng truy\u1ec1n"},{value:"intramuscular",name:"Ti\xeam v\xe0o c\u01a1"},{value:"intrathecal",name:"Ti\xeam v\xe0o c\u1ed9t s\u1ed1ng"},{value:"intravenous",name:"Ti\xeam t\u0129nh m\u1ea1ch"},{value:"nasal",name:"X\u1ecbt m\u0169i"},{value:"ophthalmic",name:"Tra m\u1eaft"},{value:"oral",name:"\u0110\u01b0\u1eddng u\u1ed1ng"},{value:"otic",name:"Nh\u1ecf v\xe0o tai"},{value:"rectal",name:"\u0110\u1eb7t tr\u1ef1c tr\xe0ng"},{value:"subcutaneous",name:"Ti\xeam d\u01b0\u1edbi da"},{value:"sublingual",name:"Ng\u1eadm d\u01b0\u1edbi l\u01b0\u1ee1i"},{value:"topical",name:"Ti\xeam v\xe0o c\u01a1"},{value:"buctransdermalcal",name:"D\xe1n l\xean da"}],ye="Test",Ne="Other",Se="BS-200E",Ce="UA-66",_e="BC-2800",Te="Immune",we={code:"cash",label:"ti\u1ec1n m\u1eb7t"},ke="all",De="T\u1ea4T C\u1ea2",Ie=n(53),Le=n.n(Ie),Ee=function(){function e(){Object(l.a)(this,e)}return Object(b.a)(e,null,[{key:"_getHeader",value:function(){return{Authorization:"Bearer ".concat(window.sessionStorage.getItem(L)||"")}}}]),e}();Ee.get=function(e,t){var n={headers:Ee._getHeader()};return t&&Object.keys(t).length&&(n.params=t),Le.a.get(v+e,n)},Ee.post=function(e,t){return Le.a.post(v+e,t,{headers:Ee._getHeader()})},Ee.put=function(e,t){return Le.a.put(v+e,t,{headers:Ee._getHeader()})},Ee.patch=function(e,t){return Le.a.patch(v+e,t,{headers:Ee._getHeader()})},Ee.delete=function(e,t){return Le.a.delete(v+e+"/"+t,{headers:Ee._getHeader()})};var Pe="/auth/login",Re="/auth/me",Me=new(function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).userInfo=JSON.parse(window.sessionStorage.getItem(E)||"null"),n._instance?Object(m.a)(e,n._instance):(n._instance=Object(x.a)(e),e)}return Object(b.a)(n,[{key:"login",value:function(){var e=Object(j.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.post(Pe,{username:t,password:n});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getUserInfo",value:function(){var e=Object(j.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.get(Re);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"hasRole",value:function(e){if(e&&this.userInfo)return me(this.userInfo.roles,e)}},{key:"isRole",value:function(e){if(e&&this.userInfo)return!!this.userInfo.roles.includes(e)}}]),n}(d)),Be=n(65),Ae=n.n(Be),Fe=n(34),Ue=n.n(Fe),He="/job/step/list",Ke="/job/job/list",Ge="/job/job/state",Je="/job/job/list?customer_id=",Xe="/job/job/list",Ve="/location/list",qe=new(function(){function e(){if(Object(l.a)(this,e),this.print=function(e){Fe({printable:e,type:"html",targetStyles:["*"],style:"@page {\n          size: A5;\n          margin: 0;\n                  },\n               @media print {\n                  .medPrintId{\n                    margin: 0;\n                    border: initial;\n                    border-radius: initial;\n                    width: initial;\n                    min-height: initial;\n                    box-shadow: initial;\n                    background: initial;\n                    page-break-after: always;\n                  }",header:null,footer:null})},this.printhorizontal=function(e){Fe({printable:e,type:"html",targetStyles:["*"],style:"@page {\n          size: Letter landscape;\n        }",header:null,footer:null})},this.printBarCode=function(e){Fe({printable:e,type:"html",scanStyles:!1,targetStyles:["*"],style:"@page { size: landscape;}",header:null,footer:null})},e._instance)return e._instance;e._instance=this}return Object(b.a)(e,[{key:"getListLocation",value:function(){return Ee.get(Ve)}},{key:"getResult",value:function(e){var t=e.customer_id,n=e.date;return Ee.get(Xe+"?customer_id="+t+"&&date="+n)}},{key:"getCustomerByCode",value:function(e){return Ee.get("/customer/customer/search",{text:e})}},{key:"getJobByCustomerId",value:function(e){return Ee.get(Je+e)}},{key:"getListJobStep",value:function(e){return Ee.get(He,e)}},{key:"getListJob",value:function(e){return Ee.get(Ke,e)}},{key:"postSubclinical",value:function(e){return Ee.post(Ge,e)}},{key:"createBarcode",value:function(e){try{return Ae.a.toCanvas("canvas_id",{bcid:"code128",text:e,scale:5,includetext:!0,textxalign:"center"})}catch(t){throw t}}},{key:"createEtccode",value:function(e,t){try{return Ae.a.toCanvas(t,{bcid:"code128",text:e,scale:1,height:8,includetext:!0,textxalign:"center"})}catch(n){throw n}}},{key:"createOtccode",value:function(e,t){try{return Ae.a.toCanvas(t,{bcid:"code128",text:e,scale:1,height:8,includetext:!0,textxalign:"center"})}catch(n){throw n}}},{key:"createCusCode",value:function(e){try{return Ae.a.toCanvas("canvasCustomer",{bcid:"code128",text:e,scale:1,height:8,includetext:!0,textxalign:"center"})}catch(t){throw t}}}]),e}()),ze=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e))._fillForm=function(e){c.setState((function(t){var n={};return Object.keys(e).forEach((function(t){n[t]={value:e[t],err:""}})),n.dirty=!1,t.form=n,t}))},c._setValue=function(e,t){e.persist(),c.setState((function(n){return n.form[t]={value:e.target.value,err:c._getInvalidErr(e.target)},n}))},c.state={form:{dirty:!1}},c}return Object(b.a)(n,[{key:"_getInitFormData",value:function(e){var t={};return Object.keys(e).forEach((function(n){t[n]={value:e[n],err:""}})),t.dirty=!1,t}},{key:"_getInvalidErr",value:function(e){return e.validity.valid?"":"email"===e.type&&e.validity.typeMismatch?ce:e.validity.valueMissing?ae:e.validity.rangeOverflow?re+e.max:e.validity.rangeUnderflow?se+e.min:e.validity.tooLong?oe+e.maxLength:e.validity.tooShort?ie+e.minLength:e.validity.patternMismatch&&e.pattern===te?le:e.validity.patternMismatch&&e.pattern===ne?de:"Got err"}},{key:"_validateForm",value:function(){var e=this,t=this.state.form;t.dirty=!0,Object.keys(t).forEach((function(n){if("dirty"!=n){var c=document.getElementsByName(n);c[0]&&(t[n].err=e._getInvalidErr(c[0]))}})),this.setState({form:t})}},{key:"_isFormValid",value:function(){var e=this.state.form;return!Object.keys(e).find((function(t){return!!e[t].err}))}}]),n}(c.Component),We=n(254),Ye=n(234),Qe=n(235),$e=n(236),Ze=n(122),et=n(0),tt=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.message,n=e.answer;return Object(et.jsx)("div",{className:"modalConfirmContainer",children:Object(et.jsxs)(We.a,{isOpen:!!t,children:[Object(et.jsx)(Ye.a,{children:"Th\xf4ng B\xe1o!"}),Object(et.jsx)(Qe.a,{children:t}),Object(et.jsxs)($e.a,{children:[Object(et.jsx)(Ze.a,{onClick:function(){n(!0)},children:"Yes"})," ",Object(et.jsx)(Ze.a,{color:"danger",onClick:function(){n()},children:"No"})]})]})})}}]),n}(a.a.Component),nt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],ct=function e(){Object(l.a)(this,e)};ct.typeName=function(e){try{switch(e=Number.parseInt(e)){case 1:return"Create";case 2:return"Update";case 3:return"Remove";default:return"Unknown"}}catch(t){return"Unknown"}},ct.statusName=function(e){try{switch(e=Number.parseInt(e)){case 1:return"Pendding";case 2:return"Approved";case 3:return"Rejected";default:return"Unknown"}}catch(t){return"Unknown"}},ct.dateString=function(e){var t=new Date(e);return"".concat(nt[t.getMonth()]," ").concat(t.getDate(),", ").concat(t.getFullYear())},ct.timeString=function(e){},ct.getModelName=function(e){return(e=e||"").split(/(?=[A-Z])/).join(" ")},ct.onKeyDown=function(e){if(13===e.keyCode){var t=parseInt(e.target.dataset.index);if(null==document.querySelector('[data-index="'+(t+1)+'"]'))return;document.querySelector('[data-index="'+(t+1)+'"]').focus()}},ct.formatPrice=function(e){return new Intl.NumberFormat("de-DE").format(e)};var at=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.message,n=e.done;return Object(et.jsx)("div",{className:"modalNotiContainer",children:Object(et.jsxs)(We.a,{isOpen:!!t,children:[Object(et.jsx)(Ye.a,{children:"Th\xf4ng B\xe1o !"}),Object(et.jsx)(Qe.a,{children:t}),Object(et.jsx)($e.a,{children:Object(et.jsx)(Ze.a,{onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"18",color:"primary",onClick:function(){n()},children:"OK"})})]})})}}]),n}(a.a.Component);n.p;var st,rt,it,ot,lt,dt,ut,ht,jt,bt,mt,xt,Ot,pt,ft,vt,gt,yt,Nt=["title","titleId"];function St(){return(St=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e}).apply(this,arguments)}function Ct(e,t){if(null==e)return{};var n,c,a=function(e,t){if(null==e)return{};var n,c,a={},s=Object.keys(e);for(c=0;c<s.length;c++)n=s[c],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(c=0;c<s.length;c++)n=s[c],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function _t(e,t){var n=e.title,a=e.titleId,s=Ct(e,Nt);return c.createElement("svg",St({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",ref:t,"aria-labelledby":a},s),n?c.createElement("title",{id:a},n):null,st||(st=c.createElement("g",null,c.createElement("g",null,c.createElement("path",{d:"M125.696,125.994c-5.52,0-10,4.48-10,10s4.48,10,10,10c5.52,0,10-4.48,10-10S131.216,125.994,125.696,125.994z"})))),rt||(rt=c.createElement("g",null,c.createElement("g",null,c.createElement("path",{d:"M215.691,312.984h-29.998v-29.998c0-5.522-4.478-10-10-10s-9.999,4.478-9.999,10v29.998h-29.998 c-5.522,0-10,4.478-10,9.999s4.478,10,10,10h29.998v29.998c0,5.522,4.478,10,9.999,10s10-4.478,10-10v-29.998h29.998 c5.522,0,10-4.478,10-10S221.214,312.984,215.691,312.984z"})))),it||(it=c.createElement("g",null,c.createElement("g",null,c.createElement("path",{d:"M485.578,321.984c-22.105-38.286-70.981-51.389-109.274-29.279l-40.618,23.45v-86.836c0-10.735-3.55-21.388-9.999-29.998 l-49.997-66.661v-28.386c11.638-4.128,19.999-15.242,19.999-28.279V29.998C295.687,13.457,282.23,0,265.689,0H85.698 C69.157,0,55.699,13.457,55.699,29.998v45.998c0,13.035,8.361,24.151,19.999,28.279v28.386l-50.001,66.665 c-6.446,8.606-9.996,19.258-9.996,29.993v193.66c0,27.569,22.429,49.997,49.997,49.997h160.702 c22.421,37.583,70.767,50.161,108.664,28.279L456.3,431.258C494.255,409.34,507.794,360.479,485.578,321.984z M75.698,29.998 c0-5.514,4.486-10,9.999-10h179.991c5.514,0,10,4.486,10,10v45.998c0,5.514-4.486,9.999-10,9.999H85.698 c-5.514,0-9.999-4.486-9.999-9.999V29.998z M41.701,211.319l51.996-69.326c1.298-1.73,2-3.836,2-6v-29.998h159.992v19.999h-89.995 c-5.522,0-10,4.478-10,10s4.478,10,10,10h94.995l48.993,65.322c3.202,4.275,5.191,9.39,5.792,14.674H35.913 C36.513,220.705,38.502,215.59,41.701,211.319z M65.699,452.977c-16.541,0-29.998-13.457-29.998-29.998v-10.099h181.675 c-3.171,12.965-3.15,26.813,0.481,40.098H65.699z M225.219,392.98H35.7V245.987h279.986V327.7l-60.619,35.002 C242.428,370.003,232.212,380.396,225.219,392.98z M325.066,483.935c-28.697,16.571-65.367,6.771-81.949-21.946 c-16.661-28.994-6.564-65.498,21.952-81.969l54.277-31.338l59.997,103.915L325.066,483.935z M446.3,413.939l-49.637,28.659 l-59.998-103.917l49.638-28.656c28.716-16.578,65.373-6.761,81.955,21.957C484.913,360.844,474.785,397.49,446.3,413.939z"})))),ot||(ot=c.createElement("g",null)),lt||(lt=c.createElement("g",null)),dt||(dt=c.createElement("g",null)),ut||(ut=c.createElement("g",null)),ht||(ht=c.createElement("g",null)),jt||(jt=c.createElement("g",null)),bt||(bt=c.createElement("g",null)),mt||(mt=c.createElement("g",null)),xt||(xt=c.createElement("g",null)),Ot||(Ot=c.createElement("g",null)),pt||(pt=c.createElement("g",null)),ft||(ft=c.createElement("g",null)),vt||(vt=c.createElement("g",null)),gt||(gt=c.createElement("g",null)),yt||(yt=c.createElement("g",null)))}var Tt=c.forwardRef(_t);n.p;n.p;var wt,kt,Dt,It,Lt,Et,Pt,Rt,Mt,Bt,At,Ft,Ut,Ht,Kt,Gt,Jt,Xt,Vt=["title","titleId"];function qt(){return(qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e}).apply(this,arguments)}function zt(e,t){if(null==e)return{};var n,c,a=function(e,t){if(null==e)return{};var n,c,a={},s=Object.keys(e);for(c=0;c<s.length;c++)n=s[c],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(c=0;c<s.length;c++)n=s[c],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Wt(e,t){var n=e.title,a=e.titleId,s=zt(e,Vt);return c.createElement("svg",qt({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512.001 512.001",style:{enableBackground:"new 0 0 512.001 512.001"},xmlSpace:"preserve",ref:t,"aria-labelledby":a},s),n?c.createElement("title",{id:a},n):null,wt||(wt=c.createElement("g",null,c.createElement("g",null,c.createElement("path",{d:"M286,382.001c-5.52,0-10,4.48-10,10c0,5.52,4.48,10,10,10c5.52,0,10-4.48,10-10C296,386.481,291.52,382.001,286,382.001z"})))),kt||(kt=c.createElement("g",null,c.createElement("g",null,c.createElement("g",null,c.createElement("path",{d:"M426.542,422.015l-8.195-24.586C442.673,371.408,456,337.766,456,302.001c0-62.984-42.061-118.048-101.212-135.262 l24.512-42.458c2.761-4.783,1.122-10.898-3.661-13.66l-8.66-5l10-17.32l8.66,5c4.772,2.755,10.892,1.134,13.66-3.66l20-34.64 c2.76-4.78,1.121-10.899-3.66-13.66l-69.28-40c-4.781-2.76-10.899-1.122-13.66,3.66l-20,34.64 c-2.76,4.78-1.122,10.899,3.66,13.66l8.66,5l-10,17.32l-8.66-5c-4.779-2.76-10.9-1.122-13.66,3.66l-75,129.909l-8.66-5 c-4.778-2.761-10.899-1.122-13.66,3.66l-20,34.641c-2.762,4.783-1.123,10.898,3.66,13.66l103.92,60 c4.75,2.744,10.882,1.151,13.66-3.66l20-34.641c2.762-4.783,1.123-10.898-3.66-13.66l-8.66-5l7.385-12.791 C346.55,238.9,376,266.9,376,302.001c0,10.702-2.759,20.919-8.02,29.983c-12.981-6.552-27.317-9.983-41.98-9.983 c-20.945,0-41.28,7.08-57.693,20H170.72c-19.057,0-36.194,10.59-44.726,27.641l-8.94,17.89c-1.549,3.1-1.383,6.78,0.439,9.728 c1.822,2.948,5.041,4.742,8.506,4.742h106.129l-6.667,20H86v-0.001c-16.542,0-30,13.458-30,30v50c0,5.522,4.477,10,10,10h380 c5.523,0,10-4.478,10-10v-50C456,435.641,442.834,422.306,426.542,422.015z M345.02,23.661l51.96,30l-10,17.319 c-11.567-6.678-38.465-22.209-51.96-30L345.02,23.661z M342.341,68.301l17.319,10l-10,17.32l-17.319-10L342.341,68.301z  M284.3,288.831l-86.6-50l10-17.32c9.192,5.307,65.786,37.983,77.937,44.999c0.001,0.001,0.002,0.001,0.004,0.002 c0.001,0,0.002,0.001,0.003,0.001l8.656,4.998L284.3,288.831z M286.979,244.19l-51.96-30L305.02,92.941 c20.351,11.75,32.291,18.644,38.899,22.459c-1.511-0.873-2.695-1.556-2.832-1.635c0.251,0.145,4.159,2.401,15.893,9.176 C346.645,140.843,295.739,229.017,286.979,244.19z M323.128,221.579l21.316-36.922C397.896,197.665,436,245.933,436,302.001 c0,27.143-8.963,52.862-25.498,73.886c-5.964-12.775-14.785-24.088-25.723-32.994C392.145,330.579,396,316.626,396,302.001 C396,259.896,363.912,225.233,323.128,221.579z M326,342.001c31.894,0,59.634,20.538,69.482,50.077l9.974,29.923H246.545 l9.972-29.918C266.574,361.917,294.789,342.001,326,342.001z M142.177,382.001c0.692-0.81,7.059-20.1,28.544-20.1h78.749 c-4.312,6.198-7.868,13.021-10.572,20.1H142.177z M436,492.001H76v-40c0-5.514,4.486-10,10-10c8.23,0,322.997,0,340,0 c5.515,0,10,4.486,10,10V492.001z"}),c.createElement("path",{d:"M345.137,116.103c0.604,0.349,1.158,0.668,1.658,0.957C346.244,116.742,345.683,116.418,345.137,116.103z"}),c.createElement("path",{d:"M345.071,116.065c0.022,0.013,0.044,0.025,0.066,0.038C345.114,116.09,345.093,116.078,345.071,116.065z"}),c.createElement("path",{d:"M343.919,115.4c0.032,0.019,0.065,0.037,0.097,0.056C343.984,115.437,343.951,115.418,343.919,115.4z"}),c.createElement("path",{d:"M344.016,115.456c0.367,0.212,0.72,0.416,1.054,0.609C344.709,115.856,344.355,115.651,344.016,115.456z"}),c.createElement("path",{d:"M346.795,117.06c0.093,0.054,0.186,0.107,0.278,0.16C346.98,117.167,346.891,117.115,346.795,117.06z"}),c.createElement("path",{d:"M350.946,119.457c0.034,0.02,0.063,0.037,0.087,0.05C351.01,119.494,350.981,119.477,350.946,119.457z"}),c.createElement("path",{d:"M350.695,119.312c0.105,0.061,0.188,0.109,0.251,0.145C350.881,119.419,350.798,119.371,350.695,119.312z"}),c.createElement("path",{d:"M351.033,119.507C351.128,119.562,351.122,119.559,351.033,119.507L351.033,119.507z"}),c.createElement("path",{d:"M349.295,118.504c0.074,0.043,0.147,0.085,0.216,0.125C349.441,118.588,349.369,118.546,349.295,118.504z"}),c.createElement("path",{d:"M349.511,118.628c0.494,0.285,0.904,0.522,1.184,0.684C350.438,119.163,350.051,118.94,349.511,118.628z"}),c.createElement("path",{d:"M348.971,118.317c0.111,0.064,0.219,0.126,0.324,0.187C349.192,118.444,349.084,118.382,348.971,118.317z"}),c.createElement("path",{d:"M347.072,117.22c0.748,0.432,1.378,0.795,1.899,1.096C348.397,117.985,347.748,117.61,347.072,117.22z"}))))),Dt||(Dt=c.createElement("g",null,c.createElement("g",null,c.createElement("path",{d:"M366,382.001h-40c-5.523,0-10,4.478-10,10c0,5.522,4.477,10,10,10h40c5.523,0,10-4.478,10-10 C376,386.479,371.523,382.001,366,382.001z"})))),It||(It=c.createElement("g",null)),Lt||(Lt=c.createElement("g",null)),Et||(Et=c.createElement("g",null)),Pt||(Pt=c.createElement("g",null)),Rt||(Rt=c.createElement("g",null)),Mt||(Mt=c.createElement("g",null)),Bt||(Bt=c.createElement("g",null)),At||(At=c.createElement("g",null)),Ft||(Ft=c.createElement("g",null)),Ut||(Ut=c.createElement("g",null)),Ht||(Ht=c.createElement("g",null)),Kt||(Kt=c.createElement("g",null)),Gt||(Gt=c.createElement("g",null)),Jt||(Jt=c.createElement("g",null)),Xt||(Xt=c.createElement("g",null)))}var Yt=c.forwardRef(Wt);n.p;n.p;var Qt=n.p+"static/media/logo.253fbbb6.png",$t=n(237),Zt=n(240),en=n(241),tn=n(242),nn=n(255),cn=n(256),an=n(243),sn=n(238),rn=n(239),on=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={dropdownUserOpen:!1,dropdownMasterDataOpen:!1,dropdownInventoryOpen:!1},e.toggleUser=function(){e.setState({dropdownUserOpen:!e.state.dropdownUserOpen})},e.toggleMasterData=function(){e.setState({dropdownMasterDataOpen:!e.state.dropdownMasterDataOpen})},e.toggleWareHouse=function(){e.setState({dropdownInventoryOpen:!e.state.dropdownInventoryOpen})},e}return Object(b.a)(n,[{key:"goTo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=window.location.origin+"/"+e,window.location.replace(e)}},{key:"logout",value:function(){Me.userInfo=null,window.sessionStorage.clear(),window.location.replace("login")}},{key:"render",value:function(){var e=this;return Object(et.jsx)($t.a,{pills:!0,children:Object(et.jsxs)(sn.a,{className:"appHeaderContainer",children:[Object(et.jsx)(rn.a,{xs:"1",children:Object(et.jsx)(Zt.a,{className:"mt-1",children:Object(et.jsx)("img",{src:Qt,alt:"img company",style:{height:30}})})}),!0===me(Me.userInfo.roles,[g.ADMIN.value])?Object(et.jsx)(rn.a,{sm:"9",children:Object(et.jsxs)(sn.a,{style:{margin:"0px"},children:[Object(et.jsx)(Zt.a,{className:"pointer",children:Object(et.jsx)(en.a,{onClick:function(){return e.goTo("app/transaction/order")},children:"Thu Ng\xe2n"})}),Object(et.jsx)(Zt.a,{className:"pointer",children:Object(et.jsx)(en.a,{onClick:function(){return e.goTo("app/reception")},children:"L\u1ec5 T\xe2n"})}),Object(et.jsx)(Zt.a,{className:"pointer",children:Object(et.jsx)(en.a,{onClick:function(){return e.goTo("app/doctor")},children:"Kh\xe1m B\u1ec7nh"})}),Object(et.jsx)(Zt.a,{className:"pointer",children:Object(et.jsx)(en.a,{onClick:function(){return e.goTo("app/exam")},children:"X\xe9t Nghi\u1ec7m"})}),Object(et.jsx)(Zt.a,{className:"pointer",children:Object(et.jsx)(en.a,{onClick:function(){return e.goTo("app/xray")},children:"X-Quang"})}),Object(et.jsx)(Zt.a,{className:"pointer",children:Object(et.jsx)(en.a,{onClick:function(){return e.goTo("app/endoscopic")},children:"N\u1ed9i soi"})}),Object(et.jsx)(Zt.a,{className:"pointer",children:Object(et.jsx)(en.a,{onClick:function(){return e.goTo("app/ultrasound")},children:"Si\xeau \xe2m"})}),Object(et.jsx)(Zt.a,{className:"pointer",children:Object(et.jsx)(en.a,{onClick:function(){return e.goTo("app/pharmacy")},children:"Nh\xe0 thu\u1ed1c"})}),Object(et.jsx)(Zt.a,{className:"pointer",children:Object(et.jsx)(en.a,{onClick:function(){return e.goTo("app/transaction/transaction")},children:"Giao d\u1ecbch"})}),Object(et.jsxs)(tn.a,{nav:!0,isOpen:this.state.dropdownInventoryOpen,toggle:this.toggleWareHouse,children:[Object(et.jsx)(nn.a,{nav:!0,caret:!0,children:"Kho"}),Object(et.jsxs)(cn.a,{children:[Object(et.jsx)(an.a,{onClick:function(){return e.goTo("app/inventory/lot")},children:"Nh\u1eadp L\xf4"}),Object(et.jsx)(an.a,{onClick:function(){return e.goTo("app/inventory/transaction")},children:"Xu\u1ea5t Kho"}),Object(et.jsx)(an.a,{onClick:function(){return e.goTo("app/product")},children:"Thu\u1ed1c"}),Object(et.jsx)(an.a,{onClick:function(){return e.goTo("app/product/part")},children:"Th\xe0nh ph\u1ea7n"}),Object(et.jsx)(an.a,{onClick:function(){return e.goTo("app/inventory/producer")},children:"Nh\xe0 Cung C\u1ea5p"})]})]}),Object(et.jsxs)(tn.a,{nav:!0,isOpen:this.state.dropdownMasterDataOpen,toggle:this.toggleMasterData,children:[Object(et.jsx)(nn.a,{nav:!0,caret:!0,children:"Qu\u1ea3n l\xfd"}),Object(et.jsxs)(cn.a,{children:[Object(et.jsx)(an.a,{onClick:function(){return e.goTo("app/user")},children:"Nh\xe2n Vi\xean"}),Object(et.jsx)(an.a,{onClick:function(){return e.goTo("app/location")},children:"Ph\xf2ng Ban"}),Object(et.jsx)(an.a,{onClick:function(){return e.goTo("app/service")},children:"D\u1ecbch V\u1ee5"}),Object(et.jsx)(an.a,{onClick:function(){return e.goTo("app/transaction/statistical")},children:"Th\u1ed1ng k\xea b\xe1c s\u0129"})]})]})]})}):Object(et.jsx)(rn.a,{sm:9,children:Object(et.jsx)(sn.a,{style:{margin:"0px"},children:Me.userInfo.roles.map((function(t){return t===g.ACCOUNTER.value||t===g.RECEPTIONIST.value?Object(et.jsxs)(c.Fragment,{children:[Object(et.jsx)(Zt.a,{className:"pointer",children:Object(et.jsx)(en.a,{onClick:function(){return e.goTo("app/transaction/order")},children:"Thu Ng\xe2n"})}),Object(et.jsx)(Zt.a,{className:"pointer",children:Object(et.jsx)(en.a,{onClick:function(){return e.goTo("app/reception")},children:"L\u1ec5 T\xe2n"})}),Object(et.jsx)(Zt.a,{className:"pointer",children:Object(et.jsx)(en.a,{onClick:function(){return e.goTo("app/transaction/transaction")},children:"Giao d\u1ecbch"})})]}):t===g.DOCTOR.value?Object(et.jsxs)(c.Fragment,{children:[Object(et.jsx)(Zt.a,{className:"pointer",children:Object(et.jsx)(en.a,{onClick:function(){return e.goTo("app/doctor")},children:"Kh\xe1m B\u1ec7nh"})}),Object(et.jsx)(Zt.a,{className:"pointer",children:Object(et.jsx)(en.a,{onClick:function(){return e.goTo("app/transaction/statistical")},children:"Th\u1ed1ng k\xea"})})]}):t===g.TEST_OPERATOR.value?Object(et.jsx)(Zt.a,{className:"pointer",children:Object(et.jsx)(en.a,{onClick:function(){return e.goTo("app/exam")},children:"X\xe9t Nghi\u1ec7m"})}):t===g.XRAY.value?Object(et.jsx)(Zt.a,{className:"pointer",children:Object(et.jsx)(en.a,{onClick:function(){return e.goTo("app/xray")},children:"X-Quang"})}):t===g.ENT.value?Object(et.jsx)(Zt.a,{className:"pointer",children:Object(et.jsx)(en.a,{onClick:function(){return e.goTo("app/endoscopic")},children:"N\u1ed9i soi"})}):t===g.ULTRASOUND.value?Object(et.jsx)(Zt.a,{className:"pointer",children:Object(et.jsx)(en.a,{onClick:function(){return e.goTo("app/ultrasound")},children:"Si\xeau \xe2m"})}):t===g.PHARMACIST.value?Object(et.jsxs)(c.Fragment,{children:[Object(et.jsx)(Zt.a,{className:"pointer",children:Object(et.jsx)(en.a,{onClick:function(){return e.goTo("app/pharmacy")},children:"Nh\xe0 thu\u1ed1c"})}),Object(et.jsx)(Zt.a,{className:"pointer",children:Object(et.jsx)(en.a,{onClick:function(){return e.goTo("app/transaction/transaction")},children:"Giao d\u1ecbch"})}),Object(et.jsxs)(tn.a,{nav:!0,isOpen:e.state.dropdownInventoryOpen,toggle:e.toggleWareHouse,children:[Object(et.jsx)(nn.a,{nav:!0,caret:!0,children:"Kho"}),Object(et.jsxs)(cn.a,{children:[Object(et.jsx)(an.a,{onClick:function(){return e.goTo("app/inventory/lot")},children:"Nh\u1eadp L\xf4"}),Object(et.jsx)(an.a,{onClick:function(){return e.goTo("app/inventory/transaction")},children:"Xu\u1ea5t Kho"}),Object(et.jsx)(an.a,{onClick:function(){return e.goTo("app/product")},children:"Thu\u1ed1c"}),Object(et.jsx)(an.a,{onClick:function(){return e.goTo("app/product/part")},children:"Th\xe0nh ph\u1ea7n"}),Object(et.jsx)(an.a,{onClick:function(){return e.goTo("app/inventory/producer")},children:"Nh\xe0 Cung C\u1ea5p"})]})]})]}):t===g.INVENTORY.value?Object(et.jsx)(c.Fragment,{children:Object(et.jsxs)(tn.a,{nav:!0,isOpen:e.state.dropdownInventoryOpen,toggle:e.toggleWareHouse,children:[Object(et.jsx)(nn.a,{nav:!0,caret:!0,children:"Kho"}),Object(et.jsxs)(cn.a,{children:[Object(et.jsx)(an.a,{onClick:function(){return e.goTo("app/inventory/producer")},children:"Nh\xe0 Cung C\u1ea5p"}),Object(et.jsx)(an.a,{onClick:function(){return e.goTo("app/inventory/lot")},children:"Nh\u1eadp L\xf4"}),Object(et.jsx)(an.a,{onClick:function(){return e.goTo("app/inventory/transaction")},children:"Xu\u1ea5t Kho"}),Object(et.jsx)(an.a,{onClick:function(){return e.goTo("app/product")},children:"Thu\u1ed1c"}),Object(et.jsx)(an.a,{onClick:function(){return e.goTo("app/product/part")},children:"Th\xe0nh ph\u1ea7n"})]})]})}):void 0}))})}),Object(et.jsx)(rn.a,{sm:"2",children:Object(et.jsxs)(tn.a,{nav:!0,isOpen:this.state.dropdownUserOpen,toggle:this.toggleUser,children:[Object(et.jsxs)(nn.a,{nav:!0,caret:!0,children:[Object(et.jsx)("span",{className:"material-icons",children:"account_box"})," ",Me.userInfo.full_name]}),Object(et.jsxs)(cn.a,{children:[Object(et.jsxs)(an.a,{onClick:function(){return e.goTo("app/user/setpassword/"+Me.userInfo.id)},children:[Object(et.jsx)("span",{className:"material-icons",children:"lock"})," \u0110\u1ed5i m\u1eadt kh\u1ea9u"]}),Object(et.jsx)(an.a,{divider:!0}),Object(et.jsxs)(an.a,{onClick:function(){return e.logout()},children:[Object(et.jsx)("span",{className:"material-icons",children:"exit_to_app"})," \u0110\u0103ng xu\u1ea5t"]})]})]})})]})})}}]),n}(a.a.Component),ln=Object(r.h)(on),dn="/job",un="/location/list",hn="/step/list",jn="/location/service/list",bn="/service/service/get",mn="/step/finish",xn="/step/update",On="/org/user?id=",pn=new(function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).userList=[],e.selectedUser=-1,e.getUserById=function(e){return Ee.post(On+e)},e.printExamResult=function(e){Fe({printable:e,type:"html",header:null,footer:null})},e.print=function(e){Fe({printable:e,type:"html",targetStyles:["*"],style:"@page {\n          size: A4;\n          margin: 0;\n                  },\n               @media print {\n                  .medPrintId{\n                    margin: 0;\n                    border: initial;\n                    border-radius: initial;\n                    width: initial;\n                    min-height: initial;\n                    box-shadow: initial;\n                    background: initial;\n                    page-break-after: always;\n                      \nh1 {\n  page-break-before: always;\n}\n\nh1, h2, h3, h4, h5 {\n  page-break-after: avoid;\n}\n\ntable, figure {\n  page-break-inside: avoid;\n}\n                  }",header:null,footer:null})},e.takeSample=function(){var e=Object(j.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(dn).concat(xn),e.next=3,Ee.post(n,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n._instance?Object(m.a)(e,n._instance):(n._instance=Object(x.a)(e),e)}return Object(b.a)(n,[{key:"location",get:function(){return JSON.parse(sessionStorage.getItem(P)||"{}")},set:function(e){sessionStorage.setItem(P,JSON.stringify(e))}},{key:"getCustomerByLocationAndStatus",value:function(){var e=Object(j.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(dn).concat(hn),e.next=3,Ee.get(n,t);case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getExamByLocation",value:function(){var e=Object(j.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(jn),e.next=3,Ee.get(n,t);case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getExamIndexListByServiceID",value:function(){var e=Object(j.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(bn),e.next=3,Ee.get(n,t);case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getListLocation",value:function(){var e=Object(j.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.get("".concat(un));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"createSampleIdByRef",value:function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.post("/sample/create",{order_id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getResultsByStepId",value:function(){var e=Object(j.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.get("/job/step/get",{id:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateExamResult",value:function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.post("/job/step/finish",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"finishExamResult",value:function(e){return Ee.post("".concat(dn).concat(mn),e)}}]),n}(d)),fn=n(72),vn=n(3),gn=n(245),yn=n(246),Nn=n(244),Sn=(n(231),n(47)),Cn=n.n(Sn),_n=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).componentDidUpdate=function(e){var t=c.props,n=(t.TestId,t.cm_name);if(e.cm_name!==c.props.cm_name){var a=n.split(" ");c.setState({name:"".concat(a[a.length-1])})}},c.state={},c}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.TestId,c=(t.cm_name,this.props.nameDevice?this.props.nameDevice:[]);return Object(et.jsx)("div",{style:{display:"none"},children:Object(et.jsx)("div",{id:"barcodeCanvas",style:{fontSize:"20px"},children:c.map((function(t,c){var a=0==c?"0px":"20px";return Object(et.jsxs)("div",{style:{display:"flex",flexDirection:"row",minHeight:"94px",marginTop:a},children:[Object(et.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:[Object(et.jsxs)("small",{children:[e.state.name," ",t]}),Object(et.jsx)(Cn.a,{fontSize:"15px",value:n[c],height:"35px"})]}),Object(et.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:[Object(et.jsxs)("small",{children:[e.state.name," ",t]}),Object(et.jsx)(Cn.a,{fontSize:"15px",value:n[c],height:"35px"})]})]})}))})})}}]),n}(a.a.Component),Tn=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).interval=null,c.setShowComboTest=function(e){c.setState({showComboTest:!0})},c.fetchPatientList=function(){var e=c.props,t=e.status,n=e.type,a=e.location_id,s=e.resultList,r=e.hasNoti;t=t.join(","),qe.getListJobStep({location_id:a,status:t}).then((function(e){for(var t=e.data.filter((function(e){return e.type===n})).reverse(),a=0;a<t.length;a++){0==t[a].order.items.filter((function(e){return 0!=e.quantity})).length&&(t.splice(a,1),a--)}var i="";r&&t.map((function(e){return e.status===w&&(i.length>0?i+=","+e.order.customer_id:i+=e.order.customer_id),s.forEach((function(t){t.customerId===e.job_ref_id&&(e.seen&&!t.seen?e.seen=!1:e.seen=t.seen)})),e})),c.setState({patientList:t,queryCustomer:i}),r&&c.getResult()})).catch((function(e){console.log(e)}))},c.getResult=function(){var e=c.state.queryCustomer,t={customer_id:e,date:(new Date).toISOString().slice(0,10)};e.length>0&&qe.getResult(t).then((function(e){var t=e.data,n=c.props.resultList;t.forEach((function(e){var t;0===n.length?e.steps.forEach((function(e){if(e.type!==H&&e.type!==G&&e.status===D){var t={jobId:e.job_id,customerId:e.job_ref_id,orderId:e.order_id,seen:!1};n.push(t)}})):(null===(t=e.steps[0])||void 0===t?void 0:t.type)===H&&e.steps.forEach((function(e){if(e.type!==H&&e.type!==G&&e.status===D){var t=0;if(n.map((function(n){e.order_id===n.orderId&&t++})),0===t){var c={jobId:e.job_id,customerId:e.job_ref_id,orderId:e.order_id,seen:!1};n.push(c)}}}))})),c.countResult()}))},c.countResult=function(){var e=c.state.patientList,t=c.props.resultList,n=[];t.map((function(t){e.map((function(e){return t.customerId===e.job_ref_id&&(e.seen&&!t.seen?e.seen=!1:e.seen=t.seen),e}))})),c.setState({patientList:e}),n=t.filter((function(e){return n.includes(e.jobId)?null:n.push(e.jobId)})),c.props.setNotiQuantity(n.length)},c.onSelectJobStep=function(e){if(Object.entries(c.state.currentPatient).length>0&&e.id==c.state.currentPatient.id?(c.setState({currentPatient:{}}),c.props.onSelectJobStep({})):(c.setState({currentPatient:e}),c.props.onSelectJobStep(e)),e){var t=e.order.items.map((function(e){return 0==e.quantity?void 0:e.ref_value.name})).filter((function(e){return void 0!=e}));c.setState({comboTest:t})}c.setState({selectedJob:e.id,textFilter:"",tabs:"1"}),c.props.hiddenPatientList&&c.props.hiddenPatientList()},c.makeNewTestId=function(){c.props.ref_id&&pn.getIdByRef(c.props.ref_id).then((function(e){var t=e.data.id;c.setState({TestId:t})}))},c.onFilterChange=function(e){c.setState({textFilter:e.target.value})},c.sortByName=function(e,t){var n=e.toUpperCase(),c=t.toUpperCase();return n<c?-1:n>c?1:0},c.state={selectedJob:-1,patientList:[],textFilter:"",tabs:"1",comboTest:[],customerSearch:{},queryCustomer:"",showComboTest:!1,currentPatient:{}},c}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.action.refresh=this.fetchPatientList,this.fetchPatientList(),this.interval=setInterval((function(){e.fetchPatientList()}),3e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"onSelectBarcode",value:function(e){var t=this.props,n=t.examEditState,c=t.examEditSetState,a=n.TestId,s=n.resultsExam,r=n.nameDevice,i=s[e.target.value],o=i.sample_id,l=i.device;console.log("onSelectBarcode",a,o),"3"===n.activeTab&&(e.target.checked?(a.push(o),r.push(l)):(a.splice(a.indexOf(o),1),r.splice(r.indexOf(l))),console.log(a,"onSelectBarcode"),c({TestId:a,nameDevice:r}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.patientList,c=(t.tabs,t.textFilter),a=t.customerSearch,s=t.comboTest,r=this.props,i=r.mode,o=r.examEditState,l=r.checkSelectBarcode,d=(a&&a.steps&&a.steps,n.sort((function(t,n){return e.sortByName(n.status,t.status)})).filter((function(e){return e.order.customer.code.search(c)>=0})).map((function(t,n){return Object(et.jsxs)("tr",{onClick:function(n){return e.onSelectJobStep(t)},className:"pointer ".concat(e.state.selectedJob==t.id&&o&&o.resultsExam.length?" active ":"","\n          ").concat(!1===t.seen?"notiResult":""),children:[Object(et.jsx)("td",{className:"dw-10",children:n+1}),Object(et.jsx)("td",{children:t.order.customer.code}),Object(et.jsx)("td",{className:"dw-60",children:Object(et.jsx)("div",{children:t.order.customer.full_name})}),Object(et.jsx)("td",{children:"male"==t.order.customer.gender?"nam":"n\u1eef"}),Object(et.jsx)("td",{children:new Date(t.order.customer.birthday).toLocaleString("en-GB").slice(0,10)}),Object(et.jsx)("td",{children:t.order.customer.contacts[0].address.province}),Object(et.jsx)("td",{children:t.status===w?!1===t.seen||t.seen?"\u0110\xc3 C\xd3 K\u1ebeT QU\u1ea2":"\u0110ANG X\xc9T NGHI\u1ec6M":"CH\u1edc KH\xc1M"})]},t.id)})));return Object(et.jsxs)("div",{className:"patientList ",children:[Object(et.jsxs)("div",{className:"title-card mb-5",children:[Object(et.jsx)("span",{className:"material-icons",children:"people"})," ",this.props.titleOfList]}),Object(et.jsx)("div",{className:"patientList-search mb-3",children:Object(et.jsx)(Nn.a,{maxLength:"12",autoFocus:!0,style:{fontFamily:"Arial, Material Icons"},type:"text",placeholder:"\ue8b6 L\u1ecdc theo m\xe3...",value:c,onChange:function(t){return e.onFilterChange(t)}})}),Object(et.jsxs)("div",{className:"tableFixHead",children:["doctor"===i&&Object(et.jsx)("div",{className:"table-responsive min-h-60 df-h-90",children:Object(et.jsxs)("table",{className:"table table-head-fixed table-bordered",onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"1",children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{className:"dw-5",children:"STT"}),Object(et.jsx)("th",{className:"dw-15",children:"M\xe3 b\u1ec7nh nh\xe2n"}),Object(et.jsx)("th",{className:"dw-60",children:"B\u1ec7nh nh\xe2n"}),Object(et.jsx)("th",{children:"Gi\u1edbi t\xednh"}),Object(et.jsx)("th",{children:"Ng\xe0y sinh"}),Object(et.jsx)("th",{children:"\u0110\u1ecba ch\u1ec9"}),Object(et.jsx)("th",{children:"Tr\u1ea1ng th\xe1i"})]})}),Object(et.jsx)("tbody",{className:"body-half-screen",children:d})]})}),"exam"===i&&Object(et.jsx)("div",{className:"table-responsive min-h-60 df-h-61",children:Object(et.jsxs)("table",{className:"table table-head-fixed table-bordered",children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{className:"dw-3",children:"STT"}),Object(et.jsx)("th",{children:"M\xe3 b\u1ec7nh nh\xe2n"}),Object(et.jsx)("th",{className:"dw-40",children:"B\u1ec7nh nh\xe2n"}),Object(et.jsx)("th",{children:"T\xean X\xe9t nghi\xeam"})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:n?n.filter((function(e){return e.order.customer.code.search(c)>=0})).map((function(t,n){return Object(et.jsxs)(et.Fragment,{children:[Object(et.jsxs)("tr",{onClick:function(n){return e.onSelectJobStep(t)},className:"pointer".concat(t.id==e.state.currentPatient.id&&o.resultsExam.length?" active":""),children:[Object(et.jsx)("td",{className:"dw-3",children:n+1}),Object(et.jsx)("td",{children:t.order.customer.code}),Object(et.jsx)("td",{className:"dw-40",children:Object(et.jsx)("div",{children:t.order.customer.full_name})}),Object(et.jsx)("td",{className:"status-cus",children:Object(et.jsx)("p",{title:s,children:"ComBo x\xe9t nghi\u1ec7m"})})]},t.id),o.resultsExam.length?o.resultsExam.map((function(c,a){return Object(et.jsxs)("tr",{className:t.id==e.state.currentPatient.id?"active":"inactive",children:[Object(et.jsxs)("td",{colSpan:"1",children:[n+1,".",a+1]}),l?Object(et.jsx)("td",{colSpan:"2",children:c.device}):Object(et.jsx)("td",{colSpan:"3",children:c.device}),l?Object(et.jsx)("td",{colSpan:"1",children:Object(et.jsx)("input",{onChange:function(t){return e.onSelectBarcode(t)},name:c.device,value:a,type:"checkbox"})}):""]})})):""]})})):Object(et.jsx)("span",{})})]})}),"examDone"===i&&Object(et.jsx)("div",{className:"table-responsive min-h-60 df-h-61",children:Object(et.jsxs)("table",{className:"table table-head-fixed table-bordered",children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{className:"dw-3",children:"STT"}),Object(et.jsx)("th",{children:"M\xe3 b\u1ec7nh nh\xe2n"}),Object(et.jsx)("th",{className:"dw-40",children:"B\u1ec7nh nh\xe2n"}),Object(et.jsx)("th",{children:"T\xean X\xe9t nghi\xeam"})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:n?n.filter((function(e){return e.order.customer.code.search(c)>=0})).map((function(t,n){return Object(et.jsxs)(et.Fragment,{children:[Object(et.jsxs)("tr",{onClick:function(n){return e.onSelectJobStep(t)},className:"pointer".concat(e.state.selectedJob==t.id&&o.resultsExam.length?" active":""),children:[Object(et.jsx)("td",{className:"dw-3",children:n+1}),Object(et.jsx)("td",{children:t.order.customer.code}),Object(et.jsx)("td",{className:"dw-40",children:Object(et.jsx)("div",{children:t.order.customer.full_name})}),Object(et.jsx)("td",{className:"status-cus",children:Object(et.jsx)("p",{title:s,children:"ComBo x\xe9t nghi\u1ec7m"})})]},t.id),s&&s.map((function(c,a){return Object(et.jsxs)("tr",{className:t.id==e.state.currentPatient.id?"active":"inactive",children:[Object(et.jsxs)("td",{colSpan:"1",children:[n+1,".",a+1]}),Object(et.jsx)("td",{colSpan:"3",children:c})]})}))]})})):Object(et.jsx)("span",{})})]})}),"other"===i&&Object(et.jsx)("div",{className:"table-responsive min-h-60 df-h-60",children:Object(et.jsxs)("table",{className:"table table-head-fixed table-bordered",children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{className:"dw-10",children:"STT"}),Object(et.jsx)("td",{children:"M\xe3 b\u1ec7nh nh\xe2n"}),Object(et.jsx)("th",{children:"B\u1ec7nh nh\xe2n"})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:n?n.filter((function(e){return e.order.customer.code.search(c)>=0})).map((function(t,n){return Object(et.jsxs)("tr",{onClick:function(n){return e.onSelectJobStep(t)},className:"pointer".concat(e.state.selectedJob==t.id),children:[Object(et.jsx)("td",{className:"dw-10",children:n+1}),Object(et.jsx)("td",{children:t.order.customer.code}),Object(et.jsx)("td",{className:"dw-40",children:Object(et.jsx)("div",{children:t.order.customer.full_name})})]},t.id)})):Object(et.jsx)("span",{})})]})})]})]})}}]),n}(c.Component),wn=n(13),kn=n(14),Dn=n.n(kn),In=function(e){var t=e.result,n=e.device,a=e.examEditState.activeTab;if(Object(c.useEffect)((function(){}),[t]),Object.entries(t).length>0&&"BS-200E"==n)return Object(et.jsx)("div",{className:"patientResult customCard ",children:Object(et.jsx)("div",{className:"table-responsive min-h-80 df-h-58",children:"1"===a?Object(et.jsx)("div",{className:"text-left",children:Object.keys(t).map((function(e){return"device"==e||"sample_id"==e||"ctime"==e?Object(et.jsx)(et.Fragment,{}):Object(et.jsx)("table",{className:"table table-head-fixed table-bordered",children:Object(et.jsx)("thead",{children:Object(et.jsx)("tr",{children:Object(et.jsx)("th",{children:e})})})})}))}):Object(et.jsx)("div",{className:"text-left",children:Object(et.jsxs)("table",{className:"table table-head-fixed table-bordered",children:[Object(et.jsxs)("thead",{children:[Object(et.jsx)("tr",{children:Object(et.jsxs)("th",{colspan:"5",children:["T\xean m\xe1y XN : ",n]})}),Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{className:"dw-3",children:" STT "}),Object(et.jsx)("th",{className:"dw-30",children:" T\xean X\xe9t Nghi\u1ec7m "}),Object(et.jsx)("th",{className:"dw-14",children:" K\u1ebft qu\u1ea3 "}),Object(et.jsx)("th",{className:"dw-24",children:"Ch\u1ec9 s\u1ed1 b\xecnh th\u01b0\u1eddng"}),Object(et.jsx)("th",{className:"dw-16",children:" \u0110\u01a1n v\u1ecb "})]})]}),Object(et.jsx)("tbody",{className:"bodyTable",children:Object.entries(t).map((function(e,t){return"ctime"==e[0]||"device"==e[0]||"sample_id"==e[0]||"name"==e[0]?Object(et.jsx)(et.Fragment,{}):Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{children:t-1}),Object(et.jsx)("td",{children:e[0]}),Object(et.jsx)("td",{style:{color:e[1].value>e[1].range[1]?"red":e[1].value<e[1].range[0]?"blue":"#333"},children:e[1].value}),Object(et.jsx)("td",{children:null==e[1].range[0]&&null==e[1].range[1]?"":e[1].range[0]+"-"+e[1].range[1]}),Object(et.jsx)("td",{children:e[1].unit})]})}))})]})})})})},Ln=function(e){var t=e.result,n=e.device,a=e.examEditState.activeTab;if(Object(c.useEffect)((function(){}),[t]),Object.entries(t).length>0&&"BC-2800"==n)return Object(et.jsx)("div",{className:"patientResult customCard ",children:Object(et.jsx)("div",{className:"table-responsive min-h-80 df-h-58",children:"1"===a?Object(et.jsx)("div",{className:"text-left",children:Object.keys(t).map((function(e){return"device"==e||"sample_id"==e||"ctime"==e?Object(et.jsx)(et.Fragment,{}):Object(et.jsx)("table",{className:"table table-head-fixed table-bordered",children:Object(et.jsx)("thead",{children:Object(et.jsx)("tr",{children:Object(et.jsx)("th",{children:e})})})})}))}):Object(et.jsx)("div",{className:"text-left",children:Object(et.jsxs)("table",{className:"table table-head-fixed table-bordered",children:[Object(et.jsxs)("thead",{children:[Object(et.jsx)("tr",{children:Object(et.jsxs)("th",{colspan:"5",children:["T\xean m\xe1y XN : ",n]})}),Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{className:"dw-3",children:" STT "}),Object(et.jsx)("th",{className:"dw-30",children:" T\xean X\xe9t Nghi\u1ec7m "}),Object(et.jsx)("th",{className:"dw-14",children:" K\u1ebft qu\u1ea3 "}),Object(et.jsx)("th",{className:"dw-24",children:"Ch\u1ec9 s\u1ed1 b\xecnh th\u01b0\u1eddng"}),Object(et.jsx)("th",{className:"dw-16",children:" \u0110\u01a1n v\u1ecb "})]})]}),Object(et.jsx)("tbody",{className:"bodyTable",children:Object.entries(t).map((function(e,t){return"ctime"==e[0]||""==e[1].value||"device"==e[0]||"sample_id"==e[0]||"name"==e[0]?Object(et.jsx)(et.Fragment,{}):Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{children:t-1}),Object(et.jsx)("td",{children:e[0]}),Object(et.jsx)("td",{style:{color:e[1].value>e[1].range[1]?"red":e[1].value<e[1].range[0]?"blue":"#333"},children:e[1].value}),Object(et.jsx)("td",{children:null==e[1].range[0]&&null==e[1].range[1]?"":e[1].range[0]+"-"+e[1].range[1]}),Object(et.jsx)("td",{children:e[1].unit})]})}))})]})})})})},En=function(e){var t=e.result,n=e.device,a=e.examEditState.activeTab;return Object(c.useEffect)((function(){}),[t]),Object(et.jsx)(et.Fragment,{children:Object.entries(t).length>0&&"UA-66"==n&&Object(et.jsx)("div",{className:"patientResult customCard ",children:Object(et.jsx)("div",{className:"table-responsive min-h-80 df-h-58",children:"1"===a?Object(et.jsx)("div",{className:"text-left",children:Object(et.jsx)("table",{className:"table table-head-fixed table-bordered",children:Object(et.jsx)("thead",{children:Object(et.jsx)("tr",{children:Object(et.jsx)("th",{children:"T\u1ed5ng ph\xe2n t\xedch n\u01b0\u1edbc ti\u1ec3u"})})})})}):Object(et.jsx)("div",{className:"text-left",children:Object(et.jsxs)("table",{className:"table table-head-fixed table-bordered",children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{className:"dw-3",children:" STT "}),Object(et.jsx)("th",{className:"dw-30",children:" T\xean X\xe9t Nghi\u1ec7m "}),Object(et.jsx)("th",{className:"dw-14",children:" K\u1ebft qu\u1ea3 "}),Object(et.jsx)("th",{className:"dw-24",children:"Ch\u1ec9 s\u1ed1 b\xecnh th\u01b0\u1eddng"})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:Object.entries(t).map((function(e,t){return"ctime"==e[0]||""==e[1].value||"device"==e[0]||"sample_id"==e[0]||"name"==e[0]?Object(et.jsx)(et.Fragment,{}):Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{children:t}),Object(et.jsx)("td",{children:e[0]}),Object(et.jsx)("td",{style:{color:"URO"===e[0]&&"norm."!=e[1].value||"SG"===e[0]&&e[1].value>e[1].range[1]||"pH"===e[0]&&e[1].value>e[1].range[1]||"+"===e[1].value||"2+"===e[1].value||"3+"===e[1].value||"4+"===e[1].value?"red":"SG"===e[0]&&e[1].value<e[1].range[0]||"pH"===e[0]&&e[1].value<e[1].range[0]?"blue":"#333"},children:e[1].value}),Object(et.jsxs)("td",{children:["Negative"===e[1].range[0]||"Normal"===e[1].range[0]?e[1].range[0]:e[1].range[0]+"-"+e[1].range[1]," "]})]})}))})]})})})})})},Pn=function(e){var t=e.result,n=e.device,a=e.examEditState.activeTab;if(Object(c.useEffect)((function(){}),[t]),Object.entries(t).length>0&&"Test"==n)return Object(et.jsx)("div",{className:"patientResult customCard ",children:Object(et.jsx)("div",{className:"table-responsive min-h-80 df-h-58",children:"1"===a?Object(et.jsx)("div",{className:"text-left",children:Object.keys(t).map((function(e){return"device"==e||"sample_id"==e?Object(et.jsx)(et.Fragment,{}):Object(et.jsx)("table",{className:"table table-head-fixed table-bordered",children:Object(et.jsx)("thead",{children:Object(et.jsx)("tr",{children:Object(et.jsx)("th",{children:e})})})})}))}):Object(et.jsx)("div",{className:"text-left",children:Object(et.jsxs)("table",{className:"table table-head-fixed table-bordered",children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{className:"dw-3",children:" STT "}),Object(et.jsx)("th",{className:"dw-30",children:" T\xean X\xe9t Nghi\u1ec7m "}),Object(et.jsx)("th",{className:"dw-14",children:" K\u1ebft qu\u1ea3 "})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:Object.entries(t).map((function(t,n){return"ctime"==t[0]||"device"==t[0]||"sample_id"==t[0]?Object(et.jsx)(et.Fragment,{}):Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{children:n}),Object(et.jsx)("td",{children:t[0]}),Object(et.jsxs)("td",{children:["  ",Object(et.jsx)(Nn.a,{value:t[1].value,placeholder:"nh\u1eadp k\u1ebft qu\u1ea3 XN",onChange:function(n){return e.setValueService(n,t[0],"Test")}})]})]})}))})]})})})})},Rn=function(e){var t=e.resultIndex,n=e.device;Object(c.useEffect)((function(){var n=e.examEditState.resultsExam;Object.keys(e.examEditState.resultsExam[t]).forEach((function(e){"device"===e||"sample_id"===e||n[t][e]||(n[t][e]=C[e])})),e.examEditSetState({resultsExam:n})}),[]);var a=e.examEditState,s=a.resultsExam,r=a.activeTab;return Object(et.jsx)("div",{children:"Other"==n&&Object.keys(s[t]).map((function(n){return"device"!==n&&"sample_id"!==n&&"ctime"!==n?Object(et.jsx)("div",{children:"1"===r?Object(et.jsx)("table",{className:"table table-head-fixed table-bordered",children:Object(et.jsx)("thead",{children:Object(et.jsx)("tr",{children:Object(et.jsxs)("th",{className:"dw-14",children:[" ",n," "]})})})}):Object(et.jsx)("div",{className:"patientResult customCard ",children:Object(et.jsx)("div",{className:"table-responsive ",children:Object(et.jsx)("div",{className:"text-left",children:Object(et.jsxs)("table",{className:"table table-head-fixed table-bordered",children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsxs)("th",{className:"dw-14",colSpan:2,style:{maxWidth:"15vh"},children:[" ",n," "]}),Object(et.jsx)("th",{className:"dw-30",children:" K\u1ebft qu\u1ea3 "})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:s[t][n]?Object.keys(s[t][n]).map((function(c){return"object"===typeof s[t][n][c]?Object(et.jsxs)(et.Fragment,{children:[Object(et.jsx)("tr",{children:Object(et.jsx)("td",{rowSpan:Object.keys(s[t][n][c]).length+1,children:c})}),Object.keys(s[t][n][c]).map((function(a){return Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{children:a}),Object(et.jsx)("td",{children:Object(et.jsx)(Nn.a,{value:s[t][n][c][a]?s[t][n][c][a]:"",onChange:function(s){return function(n,c,a,s){var r=e.examEditState.resultsExam;r[t][n][c][a]=s.target.value,e.examEditSetState({resultsExam:r})}(n,c,a,s)}})})]})}))]}):Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{colSpan:2,children:c}),Object(et.jsx)("td",{children:Object(et.jsx)(Nn.a,{value:s[t][n][c]?s[t][n][c]:"",onChange:function(a){return function(n,c,a){var s=e.examEditState.resultsExam;s[t][n][c]=a.target.value,e.examEditSetState({resultsExam:s})}(n,c,a)}})})]})})):""})]})})})})}):""}))})},Mn=function(e){var t=e.result,n=e.device,a=e.examEditState.activeTab;if(Object(c.useEffect)((function(){}),[t]),Object.entries(t).length>0&&"Immune"==n)return Object(et.jsx)("div",{className:"patientResult customCard ",children:Object(et.jsx)("div",{className:"table-responsive min-h-80 df-h-58",children:"1"===a?Object(et.jsx)("div",{className:"text-left",children:Object.keys(t).map((function(e){return"device"==e||"sample_id"==e||"ctime"==e?Object(et.jsx)(et.Fragment,{}):Object(et.jsx)("table",{className:"table table-head-fixed table-bordered",children:Object(et.jsx)("thead",{children:Object(et.jsx)("tr",{children:Object(et.jsx)("th",{children:e})})})})}))}):Object(et.jsx)("div",{className:"text-left",children:Object(et.jsxs)("table",{className:"table table-head-fixed table-bordered",children:[Object(et.jsxs)("thead",{children:[Object(et.jsx)("tr",{children:Object(et.jsxs)("th",{colspan:"5",children:["T\xean m\xe1y XN : ",n]})}),Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{className:"dw-3",children:" STT "}),Object(et.jsx)("th",{className:"dw-30",children:" T\xean X\xe9t Nghi\u1ec7m "}),Object(et.jsx)("th",{className:"dw-14",children:" K\u1ebft qu\u1ea3 "}),Object(et.jsx)("th",{className:"dw-24",children:"Ch\u1ec9 s\u1ed1 b\xecnh th\u01b0\u1eddng"}),Object(et.jsx)("th",{className:"dw-16",children:" \u0110\u01a1n v\u1ecb "})]})]}),Object(et.jsx)("tbody",{className:"bodyTable",children:Object.entries(t).map((function(e,t){return"ctime"==e[0]||"device"==e[0]||"sample_id"==e[0]||"name"==e[0]?Object(et.jsx)(et.Fragment,{}):Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{children:t-1}),Object(et.jsx)("td",{children:e[0]}),Object(et.jsx)("td",{style:{color:e[1].value>e[1].range[1]?"red":e[1].value<e[1].range[0]?"blue":"#333"},children:e[1].value}),Object(et.jsx)("td",{children:null==e[1].range[0]&&null==e[1].range[1]?"":e[1].range[0]+"-"+e[1].range[1]}),Object(et.jsx)("td",{children:e[1].unit})]})}))})]})})})})},Bn=function(e){var t=e.resultsExam,n=e.nameDeviceObj,a=e.devices,s=void 0===a?[]:a,r=e.setDeviceValue,i=Object(c.useState)(),o=Object(wn.a)(i,2),l=o[0],d=o[1],u=Object(c.useState)(),h=Object(wn.a)(u,2),j=h[0],b=h[1],m=Object(c.useState)(0),x=Object(wn.a)(m,2),O=x[0],p=x[1];Object(c.useEffect)((function(){s.forEach((function(e){"BC-2800"==e.name?d(e):"Immune"==e.name&&b(e)}))}),[s]);return t.length>0?Object(et.jsxs)(et.Fragment,{children:[Object(et.jsx)($t.a,{tabs:!0,className:"selectTabs",children:t.map((function(e,t){return Object(et.jsx)(Zt.a,{className:"titleTabs",children:Object(et.jsx)(en.a,{className:Dn()({active:O===t}),onClick:function(){!function(e){p(e)}(t)},children:Object(et.jsx)("b",{className:"title-card",children:e.device})})})}))}),Object(et.jsx)(gn.a,{activeTab:O,children:t.map((function(t,c){return Object(et.jsx)(yn.a,{tabId:c,className:"customCard",children:Object(et.jsxs)("div",{className:"text-left",children:["Test"==t.device&&Object(et.jsx)(Pn,{setValueService:e.setValueService,examEditState:e.examEditState,device:t.device,result:t}),"BS-200E"==t.device&&t.device==n.BS200E&&Object(et.jsx)(In,{examEditState:e.examEditState,device:t.device,result:t}),"BC-2800"==t.device&&t.device==n.BC2800&&Object(et.jsx)(Ln,{examEditState:e.examEditState,deviceBC2800:l,setDeviceValue:r,device:t.device,result:t}),"Immune"==t.device&&t.device==n.IMMUNE&&Object(et.jsx)(Mn,{examEditState:e.examEditState,deviceIMMUNE:j,setDeviceValue:r,device:t.device,result:t}),"UA-66"==t.device&&t.device==n.UA66&&Object(et.jsx)(En,{examEditState:e.examEditState,device:t.device,result:t}),"Other"==t.device&&t.device==n.Other&&Object(et.jsx)(Rn,{device:t.device,resultIndex:c,examEditSetState:function(t){return e.examEditSetState(t)},examEditState:e.examEditState})]})})}))})]}):Object(et.jsx)(et.Fragment,{})},An=function(e){var t=e.result,n=e.device;return Object(c.useEffect)((function(){}),[t]),Object(et.jsx)(et.Fragment,{children:Object.entries(t).length>0&&"UA-66"==n&&Object(et.jsx)("div",{className:"patientResult  ",children:Object(et.jsx)("div",{children:Object(et.jsx)("div",{className:"text-left",style:{padding:"10px"},children:Object(et.jsxs)("table",{className:"table table-head-fixed table-bordered",children:[Object(et.jsxs)("thead",{children:[Object(et.jsx)("tr",{children:Object(et.jsx)("th",{colSpan:5,children:"X\xe9t nghi\u1ec7m n\u01b0\u1edbc ti\u1ec3u"})}),Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{className:"dw-3",children:" STT "}),Object(et.jsx)("th",{className:"dw-30",children:" T\xean X\xe9t Nghi\u1ec7m "}),Object(et.jsx)("th",{className:"dw-14",children:" K\u1ebft qu\u1ea3 "}),Object(et.jsx)("th",{className:"dw-24",children:"Ch\u1ec9 s\u1ed1 b\xecnh th\u01b0\u1eddng"}),Object(et.jsx)("th",{className:"dw-16",children:" Ghi ch\xfa "})]})]}),Object(et.jsx)("tbody",{className:"bodyTable",children:Object.entries(t).map((function(e,t){return"ctime"==e[0]||""==e[1].value||"device"==e[0]||"sample_id"==e[0]||"name"==e[0]?Object(et.jsx)(et.Fragment,{}):Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{className:"examPrint",children:t}),Object(et.jsx)("td",{className:"examPrint",children:e[0]}),Object(et.jsx)("td",{className:"examPrint",style:{color:"URO"===e[0]&&"norm."!=e[1].value||"SG"===e[0]&&e[1].value>e[1].range[1]||"pH"===e[0]&&e[1].value>e[1].range[1]||"+"===e[1].value||"2+"===e[1].value||"3+"===e[1].value||"4+"===e[1].value?"red":"SG"===e[0]&&e[1].value<e[1].range[0]||"pH"===e[0]&&e[1].value<e[1].range[0]?"blue":"#333"},children:e[1].value}),Object(et.jsxs)("td",{className:"examPrint",children:["Negative"===e[1].range[0]||"Normal"===e[1].range[0]?e[1].range[0]:e[1].range[0]+"-"+e[1].range[1]," "]}),Object(et.jsx)("td",{className:"examPrint"})]})}))})]})})})})})},Fn=function(e){var t=e.result,n=e.device;if(Object(c.useEffect)((function(){console.log(t,"result")}),[]),Object.entries(t).length>0&&"Test"==n)return Object(et.jsx)("div",{className:"patientResult  ",children:Object(et.jsx)("div",{className:"table-responsive ",children:Object(et.jsx)("div",{className:"text-left",style:{padding:"10px"},children:Object(et.jsxs)("table",{className:"table table-head-fixed table-bordered",children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{className:"dw-3",children:" STT "}),Object(et.jsx)("th",{className:"dw-16",children:" T\xean X\xe9t Nghi\u1ec7m "}),Object(et.jsx)("th",{className:"dw-28",children:" K\u1ebft qu\u1ea3 "}),Object(et.jsx)("th",{className:"dw-16",children:" Ghi ch\xfa "})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:Object.entries(t).map((function(e,t){return"ctime"==e[0]||"device"==e[0]||"sample_id"==e[0]?Object(et.jsx)(et.Fragment,{}):Object(et.jsxs)("tr",{style:{height:"90px"},children:[Object(et.jsx)("td",{children:t}),Object(et.jsx)("td",{children:e[0]}),Object(et.jsx)("td",{children:e[1].value}),Object(et.jsx)("td",{})]})}))})]})})})})},Un=function(e){var t=e.resultIndex,n=e.device,a=e.data;return Object(c.useEffect)((function(){console.log(1123)}),[]),Object(et.jsx)("div",{children:"Other"==n&&Object.keys(a[t]).map((function(e){return"device"!==e&&"sample_id"!==e&&"ctime"!==e?Object(et.jsx)("div",{className:"patientResult",children:Object(et.jsx)("div",{className:" min-h-20 ",children:Object(et.jsx)("div",{className:"text-left",style:{padding:"10px"},children:Object(et.jsxs)("table",{style:{border:"1px solid #333"},children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsxs)("th",{className:"dw-14",colSpan:2,children:[" ",e," "]}),Object(et.jsx)("th",{className:"dw-30",children:" K\u1ebft qu\u1ea3 "}),Object(et.jsx)("th",{className:"dw-20",children:" Ghi ch\xfa "})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:a[t][e]?Object.keys(a[t][e]).map((function(n){return"object"===typeof a[t][e][n]?Object(et.jsxs)(et.Fragment,{children:[Object(et.jsx)("tr",{children:Object(et.jsx)("td",{rowSpan:Object.keys(a[t][e][n]).length+1,children:n})}),Object.entries(a[t][e][n]).map((function(e){return Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{children:e[0]}),Object(et.jsx)("td",{children:e[1]}),Object(et.jsx)("td",{})]})}))]}):Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{colSpan:2,children:n}),Object(et.jsx)("td",{children:a[t][e][n]?a[t][e][n]:""}),Object(et.jsx)("td",{})]})})):""})]})})})}):""}))})},Hn=function(e){var t=e.result,n=e.device,a=e.deviceIMMUNE,s=e.show_form_input,r=void 0===s||s;Object(c.useEffect)((function(){}),[a]);return Object.entries(t).length>0&&"Immune"==n?Object(et.jsx)("div",{className:"patientResult  ",children:Object(et.jsx)("div",{className:"table-responsive min-h-80 ",children:Object(et.jsxs)("div",{className:"text-left",children:[Object(et.jsxs)("table",{className:"table table-head-fixed table-bordered",children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{className:"dw-3",children:" STT "}),Object(et.jsx)("th",{className:"dw-30",children:" T\xean X\xe9t Nghi\u1ec7m "}),Object(et.jsx)("th",{className:"dw-14",children:" K\u1ebft qu\u1ea3 "}),Object(et.jsx)("th",{className:"dw-24",children:"Ch\u1ec9 s\u1ed1 b\xecnh th\u01b0\u1eddng"}),Object(et.jsx)("th",{className:"dw-16",children:" Ghi ch\xfa "})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:a&&a.attr.map((function(e,t){return function(e,t){return e.value&&e.value.range?"ctime"==e.name||""==e.value.value||"device"==e.label||"sample_id"==e.label||"name"==e.name?void 0:Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{className:"examPrint",children:t}),Object(et.jsx)("td",{className:"examPrint",children:e.label2}),Object(et.jsx)("td",{className:"examPrint",children:e.value.value}),Object(et.jsx)("td",{className:"examPrint",children:null==e.value.range[0]&&null==e.value.range[1]?"":e.value.range[0]+"-"+e.value.range[1]}),Object(et.jsx)("td",{className:"examPrint",children:e.value.unit})]}):"ctime"==e.name||"device"==e.label||"sample_id"==e.label||"name"==e.name?void 0:Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{className:"examPrint",children:t}),Object(et.jsx)("td",{className:"examPrint",children:e.label2}),Object(et.jsx)("td",{className:"examPrint"}),Object(et.jsx)("td",{className:"examPrint"}),Object(et.jsx)("td",{className:"examPrint"})]})}(e,t)}))})]}),Object(et.jsx)("div",{children:r&&a&&a.attr.map((function(t,n){return t.isInput?Object(et.jsxs)("div",{children:[Object(et.jsx)("label",{for:"IMMUNE".concat(t.name),children:t.label}),Object(et.jsx)(Nn.a,{id:"IMMUNE".concat(t.name),className:"note-time",value:t.value.value,onChange:function(n){e.setDeviceValue(n,a,t)}})]},n):Object(et.jsx)(et.Fragment,{})}))})]})})}):Object(et.jsx)(et.Fragment,{})},Kn=function(e){var t=e.result,n=e.device;if(Object(c.useEffect)((function(){}),[t]),Object.entries(t).length>0&&"BC-2800"==n)return Object(et.jsx)("div",{className:"patientResult  ",children:Object(et.jsx)("div",{children:Object(et.jsx)("div",{className:"text-left",style:{padding:"10px"},children:Object(et.jsxs)("table",{className:"table table-head-fixed table-bordered",children:[Object(et.jsxs)("thead",{children:[Object(et.jsx)("tr",{children:Object(et.jsx)("th",{colSpan:5,children:"X\xe9t nghi\u1ec7m huy\u1ebft h\u1ecdc"})}),Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{className:"dw-30",children:" T\xean X\xe9t Nghi\u1ec7m "}),Object(et.jsx)("th",{className:"dw-14",children:" K\u1ebft qu\u1ea3 "}),Object(et.jsx)("th",{className:"dw-24",children:"Ch\u1ec9 s\u1ed1 b\xecnh th\u01b0\u1eddng"}),Object(et.jsx)("th",{className:"dw-16",children:" \u0110\u01a1n v\u1ecb "}),Object(et.jsx)("th",{className:"dw-16",children:" Ghi ch\xfa "})]})]}),Object(et.jsx)("tbody",{className:"bodyTable",children:Object.entries(t).map((function(e,t){return"ctime"==e[0]||""==e[1]||"RDW_CV"==e[0]||"LYMPH"==e[0]||"MID"==e[0]||"GRAN"==e[0]||"MPV"==e[0]||"PDW"==e[0]||"PCT"==e[0]||"device"==e[0]||"X\xe9t nghi\u1ec7m s\u1ed1 l\u01b0\u1ee3ng v\xe0 \u0111\u1ed9 t\u1eadp trung ti\u1ec3u c\u1ea7u"==e[0]||"sample_id"==e[0]||"name"==e[0]?Object(et.jsx)(et.Fragment,{}):Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{className:"examPrint",children:e[0]}),Object(et.jsx)("td",{className:"examPrint",style:{color:e[1].value>e[1].range[1]?"red":e[1].value<e[1].range[0]?"blue":"#333"},children:e[1].value}),Object(et.jsx)("td",{className:"examPrint",children:e[1].range[0]+"-"+e[1].range[1]}),Object(et.jsx)("td",{className:"examPrint",children:e[1].unit}),Object(et.jsx)("td",{className:"examPrint"})]})}))})]})})})})},Gn=function(e){var t=e.result,n=e.device;if(Object(c.useEffect)((function(){}),[t]),Object.entries(t).length>0&&"BS-200E"==n)return Object(et.jsx)("div",{className:"patientResult  ",children:Object(et.jsx)("div",{children:Object(et.jsx)("div",{className:"text-left",style:{padding:"10px"},children:Object(et.jsxs)("table",{className:"table table-head-fixed table-bordered",children:[Object(et.jsxs)("thead",{children:[Object(et.jsx)("tr",{children:Object(et.jsx)("th",{colSpan:6,children:"BS-200E"})}),Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{className:"dw-3",children:" STT "}),Object(et.jsx)("th",{className:"dw-30",children:" T\xean X\xe9t Nghi\u1ec7m "}),Object(et.jsx)("th",{className:"dw-14",children:" K\u1ebft qu\u1ea3 "}),Object(et.jsx)("th",{className:"dw-24",children:"Ch\u1ec9 s\u1ed1 b\xecnh th\u01b0\u1eddng"}),Object(et.jsx)("th",{className:"dw-16",children:" \u0110\u01a1n v\u1ecb "}),Object(et.jsx)("th",{className:"dw-16",children:" Ghi ch\xfa "})]})]}),Object(et.jsx)("tbody",{className:"bodyTable",children:Object.entries(t).map((function(e,t){return"ctime"==e[0]||""==e[1]||"device"==e[0]||"sample_id"==e[0]||"name"==e[0]?Object(et.jsx)(et.Fragment,{}):Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{className:"examPrint",children:t-1}),Object(et.jsx)("td",{className:"examPrint",children:e[0]}),Object(et.jsx)("td",{className:"examPrint",style:{color:e[1].value>e[1].range[1]?"red":e[1].value<e[1].range[0]?"blue":"#333"},children:e[1].value}),Object(et.jsx)("td",{className:"examPrint",children:e[1].range[0]+"-"+e[1].range[1]}),Object(et.jsx)("td",{className:"examPrint",children:e[1].unit}),Object(et.jsx)("td",{className:"examPrint"})]})}))})]})})})})},Jn=function(e){var t=e.style,n=e.resultsExam,a=e.selectedJobStepRunning,s=e.prognostic,r=e.textDiagnosis,i=e.nameDeviceObj,o=e.devices,l=void 0===o?[]:o,d=e.setDeviceValue,u=(e.sendReq,Object(c.useState)({})),h=Object(wn.a)(u,2),j=h[0],b=h[1],m=Object(c.useState)(),x=Object(wn.a)(m,2),O=x[0],p=x[1],f=Object(c.useState)(),v=Object(wn.a)(f,2),g=v[0],y=v[1],N=Object(c.useState)({}),S=Object(wn.a)(N,2),C=S[0],_=S[1],T=Object(c.useState)({}),w=Object(wn.a)(T,2),k=w[0],D=w[1],I=Object(c.useState)([]),L=Object(wn.a)(I,2),E=L[0],P=L[1],R=Object(c.useState)([]),M=Object(wn.a)(R,2),B=M[0],A=M[1];Object(c.useEffect)((function(){if(n&&n.length>0){var e=n.filter((function(e){return"Other"===e.device||"Test"===e.device}));P(e);var t=n.filter((function(e){return"BC-2800"===e.device||"BS-200E"===e.device||"Immune"===e.device||"UA-66"===e.device}));A(t)}}),[n]),Object(c.useEffect)((function(){l.forEach((function(e){"BC-2800"==e.name?p(e):"Immune"==e.name&&y(e)}))}),[l]),Object(c.useEffect)((function(){Object.entries(a).length>0&&(_(new Date(a.ctime).toLocaleString()),D(new Date(a.mtime).toLocaleString())),t&&b(t)}),[a,t]);var F=((a||{}).order||{}).customer||{},U=(new Date,new Date(F.birthday),F.contacts?F.contacts[0].address:{}),H=U.ward?"  -".concat(U.ward):"",K=U.district?"-".concat(U.district):"",G=U.province?"-".concat(U.province):"",J=F.contacts?F.contacts[0].phone:"",X=JSON.parse(window.sessionStorage.getItem("user"));return Object(et.jsx)("div",{className:"border border-secondary font-print",style:{display:j},children:Object(et.jsxs)("div",{id:"printExam",className:"printExamResult position-relative mt-3",children:[B&&B.length>0&&Object(et.jsx)("div",{className:"resultDevice",style:{height:"297mm"},children:B.map((function(e,t){if(e.device)return Object(et.jsxs)("div",{className:"absolute",style:{height:"297mm"},children:[Object(et.jsxs)(sn.a,{style:{marginBot:"0px"},children:[Object(et.jsx)(rn.a,{sm:"8",children:Object(et.jsxs)(sn.a,{className:"text-left m-0",children:[Object(et.jsx)(rn.a,{sm:"4",children:Object(et.jsx)(sn.a,{children:Object(et.jsx)("img",{className:"image",src:Qt,height:"90px"})})}),Object(et.jsxs)(rn.a,{sm:"8",children:[Object(et.jsx)(sn.a,{className:"m-0",children:"Ph\xf2ng Kh\xe1m \u0110a Khoa Vi\u1ec7t \u0110o\xe0n"}),Object(et.jsx)(sn.a,{className:"m-0",children:" B\xe1ch M\xf4n,Vi\u1ec7t \u0110o\xe0n, Ti\xean Du, B\u1eafc Ninh"}),Object(et.jsx)(sn.a,{className:"m-0",children:"hotline: 0869.968.688"})]})]})}),Object(et.jsx)(rn.a,{className:"end"})]}),Object(et.jsx)("h5",{className:"text-center m-0 ,resultDevice",children:Object(et.jsx)("b",{children:" K\u1ebeT QU\u1ea2 X\xc9T NGHI\u1ec6M"})}),Object(et.jsxs)(sn.a,{className:"cusInfo",children:[Object(et.jsxs)(rn.a,{className:"asign-left",children:["H\u1ecd t\xean: ",Object(et.jsx)("b",{children:Object(et.jsx)("span",{className:"text-uppercase font-weight-bold",children:F.full_name})}),Object(et.jsx)("br",{}),Object(et.jsxs)("span",{children:["Ng\xe0y sinh: ",F.birthday," "]}),Object(et.jsxs)("span",{className:"mr-3 ",children:["Gi\u1edbi t\xednh: ",F.gender?"male"===F.gender?"Nam":"N\u1eef":null]}),Object(et.jsx)("br",{}),"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i: ",J," ",Object(et.jsx)("br",{}),"\u0110\u1ecba ch\u1ec9 : ","".concat(H).concat(K).concat(G),Object(et.jsx)("br",{}),"Ph\xf2ng khoa : ",Object(et.jsx)("b",{children:"KHOA X\xc9T NGHI\u1ec6M"}),Object(et.jsx)("br",{})]}),Object(et.jsxs)(rn.a,{className:"asign-right",children:["Ng\u01b0\u1eddi l\u1ea5y m\u1eabu : T\u1ea1 Th\u1ecb H\xf2a   ",Object(et.jsx)("br",{}),"Th\u1eddi gian l\u1ea5y m\u1eabu: ",C,"  ",Object(et.jsx)("br",{}),"Ng\u01b0\u1eddi nh\u1eadn m\u1eabu : ",X.full_name,Object(et.jsx)("br",{}),"Th\u1eddi gian nh\u1eadn m\u1eabu: ",k,Object(et.jsx)("br",{}),"Ch\u1ea9n \u0111o\xe1n : ",Object(et.jsx)("b",{children:s?s.textDiagnosis:r}),Object(et.jsx)("br",{})]})]}),Object(et.jsxs)("div",{className:"text-left text-center m-0 ,resultDevice",children:["BS-200E"==e.device&&Object(et.jsx)(Gn,{deviceBC2800:O,device:e.device,result:e}),"Immune"==e.device&&e.device==i.IMMUNE&&Object(et.jsx)(Hn,{deviceIMMUNE:g,show_form_input:!1,setDeviceValue:d,device:e.device,result:e}),"BC-2800"==e.device&&Object(et.jsx)(Kn,{xscroll:!1,show_form_input:!1,deviceBC2800:O,setDeviceValue:d,device:e.device,result:e}),"UA-66"==e.device&&Object(et.jsx)(An,{device:e.device,result:e})]}),Object(et.jsxs)("div",{className:"d-flex footer mt-1",children:[Object(et.jsxs)("div",{className:"text-center mr-auto ml-5",children:[Object(et.jsx)("strong",{children:"B\xe1c s\u0129 \u0111i\u1ec1u tr\u1ecb"}),Object(et.jsx)("br",{}),Object(et.jsx)("i",{children:"(k\xfd, ghi r\xf5 h\u1ecd t\xean)"})," ",Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{})]}),Object(et.jsxs)("div",{className:"text-center mr-auto ml-5",children:[Object(et.jsx)("strong",{children:"Ph\xf2ng X\xe9t Nghi\u1ec7m"}),Object(et.jsx)("br",{}),Object(et.jsx)("i",{children:"(k\xfd, ghi r\xf5 h\u1ecd t\xean)"})," ",Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("b",{className:"mt-5",children:X.full_name})]})]})]})}))}),E&&E.length>0&&Object(et.jsxs)("div",{className:"absolute resultDevice",style:{height:"297mm"},children:[Object(et.jsx)("div",{children:Object(et.jsxs)(sn.a,{style:{marginBot:"0px"},children:[Object(et.jsx)(rn.a,{sm:"8",children:Object(et.jsxs)(sn.a,{className:"text-left m-0",children:[Object(et.jsx)(rn.a,{sm:"4",children:Object(et.jsx)(sn.a,{children:Object(et.jsx)("img",{className:"image",src:Qt,height:"90px"})})}),Object(et.jsxs)(rn.a,{sm:"8",children:[Object(et.jsx)(sn.a,{className:"m-0",children:"Ph\xf2ng Kh\xe1m \u0110a Khoa Vi\u1ec7t \u0110o\xe0n"}),Object(et.jsx)(sn.a,{className:"m-0",children:" B\xe1ch M\xf4n,Vi\u1ec7t \u0110o\xe0n, Ti\xean Du, B\u1eafc Ninh"}),Object(et.jsx)(sn.a,{className:"m-0",children:"hotline: 0869.968.688"})]})]})}),Object(et.jsx)(rn.a,{className:"end"})]})}),Object(et.jsx)("h5",{className:"text-center m-0 ,resultDevice",children:Object(et.jsx)("b",{children:" K\u1ebeT QU\u1ea2 X\xc9T NGHI\u1ec6M"})}),Object(et.jsxs)(sn.a,{className:"cusInfo",children:[Object(et.jsxs)(rn.a,{className:"asign-left",children:["H\u1ecd t\xean: ",Object(et.jsx)("b",{children:Object(et.jsx)("span",{className:"text-uppercase font-weight-bold",children:F.full_name})}),Object(et.jsx)("br",{}),Object(et.jsxs)("span",{children:["Ng\xe0y sinh: ",F.birthday," "]}),Object(et.jsxs)("span",{className:"mr-3 ",children:["Gi\u1edbi t\xednh: ",F.gender?"male"===F.gender?"Nam":"N\u1eef":null]}),Object(et.jsx)("br",{}),"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i: ",J," ",Object(et.jsx)("br",{}),"\u0110\u1ecba ch\u1ec9 : ","".concat(H).concat(K).concat(G),Object(et.jsx)("br",{}),"Ph\xf2ng khoa : ",Object(et.jsx)("b",{children:"KHOA X\xc9T NGHI\u1ec6M"}),Object(et.jsx)("br",{})]}),Object(et.jsxs)(rn.a,{className:"asign-right",children:["Ng\u01b0\u1eddi l\u1ea5y m\u1eabu : T\u1ea1 Th\u1ecb H\xf2a   ",Object(et.jsx)("br",{}),"Th\u1eddi gian l\u1ea5y m\u1eabu: ",C,"  ",Object(et.jsx)("br",{}),"Ng\u01b0\u1eddi nh\u1eadn m\u1eabu : ",X.full_name,Object(et.jsx)("br",{}),"Th\u1eddi gian nh\u1eadn m\u1eabu: ",k,Object(et.jsx)("br",{}),"Ch\u1ea9n \u0111o\xe1n : ",Object(et.jsx)("b",{children:s?s.textDiagnosis:r}),Object(et.jsx)("br",{})]})]}),Object(et.jsx)("div",{style:{padding:"10px",fontWeight:"600"},children:"K\u1ebeT QU\u1ea2 X\xc9T NGHI\u1ec6M"}),E.length>0&&E.map((function(t,c){return Object(et.jsxs)("div",{children:["Test"==t.device&&Object(et.jsx)(Fn,{resultsExam:n,setValueService:e.setValueService,device:t.device,result:t}),"Other"==t.device&&Object(et.jsx)(Un,{device:t.device,result:t,resultIndex:c,examEditSetState:function(t){return e.examEditSetState(t)},data:E})]})})),Object(et.jsxs)("div",{className:"d-flex footer mt-1",children:[Object(et.jsxs)("div",{className:"text-center mr-auto ml-5",children:[Object(et.jsx)("strong",{children:"B\xe1c s\u0129 \u0111i\u1ec1u tr\u1ecb"}),Object(et.jsx)("br",{}),Object(et.jsx)("i",{children:"(k\xfd, ghi r\xf5 h\u1ecd t\xean)"})," ",Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{})]}),Object(et.jsxs)("div",{className:"text-center mr-auto ml-5",children:[Object(et.jsx)("strong",{children:"Ph\xf2ng X\xe9t Nghi\u1ec7m"}),Object(et.jsx)("br",{}),Object(et.jsx)("i",{children:"(k\xfd, ghi r\xf5 h\u1ecd t\xean)"})," ",Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("b",{className:"mt-5",children:X.full_name})]})]})]})]})})},Xn=n(248),Vn=n(249),qn=n(247),zn=function(e){var t=["kh\xf4ng","m\u1ed9t","hai","ba","b\u1ed1n","n\u0103m","s\xe1u","b\u1ea3y","t\xe1m","ch\xedn"],n="",c=Array.from(e.toString()).map(Number).reverse();return c[2]&&(n+=t[c[2]]+" tr\u0103m"),c[1]?1===c[1]?n+=" m\u01b0\u1eddi":n+=" "+t[c[1]]+" m\u01b0\u01a1i":c[2]&&c[0]&&(n+=" linh"),c[0]&&(5===c[0]&&c[1]?n+=" l\u0103m":1===c[0]&&c[1]&&1!==c[1]?n+=" m\u1ed1t":n+=" "+t[c[0]]),n},Wn=function(e){if(!e)return"Kh\xf4ng \u0111\u1ed3ng";for(var t="",n=e,c=[];n>0;)c.push(n%1e3),n=Math.floor(n/1e3);return c[0]&&(t+=zn(c[0])+" "),c[1]&&(t=zn(c[1])+" ngh\xecn "+t),c[2]&&(t=zn(c[2])+" tri\u1ec7u "+t),c[3]&&(t=zn(c[3])+" t\u1ef7 "+t),c[4]&&(t=zn(c[4])+" ngh\xecn "+t),c[5]&&(t=zn(c[5])+" tri\u1ec7u "+t),e%1e12||(t+="t\u1ef7 "),void 0!==c[6]?"Money too much":t+"\u0111\u1ed3ng"};function Yn(e){return e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."):0}function Qn(e){var t=new Date,n=function(e){var t=e.split("/"),n=Object(wn.a)(t,3),c=n[0],a=n[1],s=n[2];return new Date(s,a-1,c)}(e),c=t.getFullYear()-n.getFullYear(),a=t.getMonth()-n.getMonth();return(a<0||0===a&&t.getDate()<n.getDate())&&c--,0===c?function(e,t){var n=(e.getTime()-t.getTime())/1e3;return n/=604800,Math.abs(Math.round(n))}(t,n)+" tu\u1ea7n tu\u1ed5i":c+" tu\u1ed5i"}function $n(e){var t=e.split("/").reverse(),n=t[0],c=t[1];return 1===n.length&&(t[0]="0"+n),1===c.length&&(t[1]="0"+c),t.join("-")}function Zn(e){return e?e.split("-").reverse().join("/"):""}var ec=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).state={},c}return Object(b.a)(n,[{key:"render",value:function(){return Object(et.jsx)("div",{className:"HeaderPrint",children:Object(et.jsxs)("div",{className:"logo",children:[Object(et.jsx)("img",{alt:"",className:"image",src:Qt}),Object(et.jsxs)("p",{className:"address",children:["Ph\xf2ng Kh\xe1m \u0110a Khoa Vi\u1ec7t \u0110o\xe0n ",Object(et.jsx)("br",{}),"Ph\u1ed1 B\xe1ch M\xf4n, Vi\u1ec7t \u0110o\xe0n, Ti\xean Du, B\u1eafc Ninh",Object(et.jsx)("br",{}),"S\u0110T: 0869 968 688"]})]})})}}]),n}(c.Component),tc=ec,nc=function(){function e(){if(Object(l.a)(this,e),e._instance)return e._instance;e._instance=this}return Object(b.a)(e,[{key:"getJobByCustomerId",value:function(e){return Ee.get("/job/job/list",{customer_id:e})}},{key:"getBookList",value:function(e){return Ee.get("/accounting/book/list",{status:e})}},{key:"getOrder",value:function(e){return Ee.get("/order/order/get",{code:e})}},{key:"postTransaction",value:function(e){return Ee.post("/accounting/transaction/create",e)}},{key:"getLocationAllCity",value:function(e,t){return Ee.get("/region/region/list",{type:e,parent_id:t})}},{key:"getLocationAllDistrict",value:function(e,t){return Ee.get("/region/region/list",{type:e,parent_id:t})}},{key:"getLocationAllWard",value:function(e,t){return Ee.get("/region/region/list",{type:e,parent_id:t})}},{key:"postAddress",value:function(e){return Ee.post("/customer/contact/add",e)}},{key:"postJob",value:function(e){return Ee.post("/job/job/customer/service",e)}},{key:"postJobTest",value:function(e){return Ee.post("/job/job/customer/test",e)}},{key:"getRetailOrder",value:function(e){return Ee.get("/retail/get",{code:e})}},{key:"getCmbyCode",value:function(e){return Ee.get("/customer/customer/get",{code:e})}},{key:"getContactByCmId",value:function(e){return Ee.get("/customer/contact/get",{customer_id:e})}},{key:"getLocationByService",value:function(e){return Ee.get("/location/service/location",{id:e})}},{key:"getCmList",value:function(e){return Ee.get("/customer/customer/list",e)}},{key:"getExamHistory",value:function(e,t){return Ee.get("/job/job/list",{customer_id:e,type:t})}},{key:"getExamHistoryWithType",value:function(e,t){return Ee.get("/job/job/list",{customer_id:e,type:t})}},{key:"getJobStepList",value:function(e,t,n){return Ee.get("/job/step/list",{location_id:e,status:t,type:n})}},{key:"getJobById",value:function(e){return Ee.get("/job/job/get",{id:e})}},{key:"searchCustomer",value:function(e){return Ee.get("/customer/customer/search",{text:e})}}]),e}(),cc=new nc,ac=cc,sc=function(e){var t=Object(c.useState)({}),n=Object(wn.a)(t,2),a=n[0],s=n[1],r=e.item,i=(e.submidPrint,r&&r.steps?r.steps:[]),o=r?r.ref_value:{},l=o?o.full_name:"",d=o?o.birthday:"",u=o?o.full_name:"",h=o?o.code:"",j=a&&a.contacts?a.contacts[0].phone:"",b=a&&a.contacts?a.contacts[0].address:{},m=b.street?"".concat(b.street):"",x=b.ward?"  -".concat(b.ward):"",O=b.district?"-".concat(b.district):"",p=b.province?"-".concat(b.province):"";Object(c.useEffect)((function(){h&&(ac.getCmbyCode(h).then((function(e){s(e.data)})),i.map((function(e,t){qe.createEtccode(h,"customerCode"+t)})))}),[h]);var f=JSON.parse(window.sessionStorage.getItem("user")),v=new Date;return Object(et.jsx)(c.Fragment,{children:Object(et.jsx)("div",{className:"d-flex justify-content-center font-print mt-3",children:Object(et.jsx)("div",{className:"border border-secondary historyMedicalPrint",children:Object(et.jsx)("div",{className:"p-2 position-relative",id:"historyMedicalPrint",children:i.map((function(e,t){var n=0,c=0;e.order.items.filter((function(e){return e.quantity>0})).map((function(e){return n+=parseInt(e.price)})),e.order.items.filter((function(e){return e.quantity>0})).map((function(e){return c+=e.origin_price}));var a=parseInt(c)-parseInt(n);return Object(et.jsxs)("div",{className:"receiptFromPrint",children:[Object(et.jsx)("div",{className:"absolute",children:Object(et.jsx)("div",{className:"text-right",children:Object(et.jsx)("canvas",{id:"customerCode"+t,style:{height:"13mm"}})})}),Object(et.jsx)(tc,{}),Object(et.jsx)("h4",{className:"text-center font-weight-bold mb-0",children:Object(et.jsx)("b",{children:"BI\xcaN LAI THU TI\u1ec0N"})}),Object(et.jsx)("div",{className:"text-center",children:Object(et.jsxs)("i",{children:[v.getHours()," gi\u1edd ",v.getMinutes()," ph\xfat,Ng\xe0y ",v.getDate()," Th\xe1ng ",v.getMonth()+1," N\u0103m ",v.getFullYear()]})}),Object(et.jsxs)("div",{className:"d-block",children:["H\u1ecd t\xean: ",Object(et.jsx)("b",{children:Object(et.jsx)("span",{className:"text-uppercase font-weight-bold",children:l})}),Object(et.jsxs)("span",{className:"ml-25",children:["NS:  ",Zn(d)]}),Object(et.jsxs)("span",{className:"ml-25 ",children:["GT: ","male"===u?" Nam":" N\u1eef"," "]}),Object(et.jsxs)("span",{className:"ml-25",children:["S\u0110T:  ",j]}),Object(et.jsx)("br",{}),Object(et.jsxs)("span",{children:["\u0110\u1ecba ch\u1ec9: ","".concat(m).concat(x).concat(O).concat(p)]})]}),Object(et.jsx)("div",{className:"d-flex justify-content-between f-flex",children:Object(et.jsxs)("div",{children:["D\u1ecbch v\u1ee5 :",Object(et.jsxs)("b",{style:{fontSize:"13px"},children:[" ",e.order.items.filter((function(e){return e.quantity>0})).map((function(e){return e.ref_value.name})).join(",")]}),Object(et.jsx)("br",{}),"Gi\xe1 g\u1ed1c : ",Object(et.jsx)("span",{className:"font-weight-bold",children:Object(et.jsxs)("b",{children:[new Intl.NumberFormat("de-DE").format(c)," VN\u0110"]})}),Object(et.jsxs)("span",{className:"font-weight-bold ml-20 ",children:[" T\u1ed5ng ti\u1ec1n khuy\u1ebfn m\xe3i:",Object(et.jsxs)("b",{className:"d-inline discount_price",children:[new Intl.NumberFormat("de-DE").format(a)," VN\u0110   "]})]}),Object(et.jsx)("br",{}),Object(et.jsxs)("span",{className:"font-weight-bold",children:[" T\u1ed5ng s\u1ed1 ti\u1ec1n thanh to\xe1n: ",Object(et.jsxs)("b",{children:[new Intl.NumberFormat("de-DE").format(n)," VN\u0110 "]})]}),Object(et.jsx)("br",{}),"Vi\u1ebft b\u1eb1ng ch\u1eef: ",Object(et.jsx)("span",{className:"font-weight-bold",children:Object(et.jsx)("b",{children:Wn(n||0)})})]})}),Object(et.jsx)("br",{}),Object(et.jsxs)("div",{className:"d-flex justify-content-between px-1 ",children:[Object(et.jsxs)("div",{className:"text-center mr-auto ml-5 nt",children:[Object(et.jsx)("b",{children:"Ng\u01b0\u1eddi n\u1ed9p ti\u1ec1n"}),Object(et.jsx)("br",{}),Object(et.jsx)("i",{children:"(k\xfd, h\u1ecd t\xean)"})]}),Object(et.jsxs)("div",{className:"text-center mr-5 tt",children:[Object(et.jsx)("strong",{children:"Ng\u01b0\u1eddi thu ti\u1ec1n"}),Object(et.jsx)("br",{}),Object(et.jsx)("i",{className:"mb-2",children:"(k\xfd, ghi r\xf5 h\u1ecd t\xean)"})," ",Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("b",{className:"mt-5",children:f.full_name})]})]})]})}))})})})})},rc=function(e){var t=e.items,n=Object(c.useState)({}),a=Object(wn.a)(n,2),s=a[0],r=a[1],i=Object(c.useState)(!1),o=Object(wn.a)(i,2),l=o[0],d=o[1];Object(c.useEffect)((function(){}),[t]);return Object(et.jsxs)("div",{className:"MedicalHistoryTable",children:[Object(et.jsxs)(qn.a,{hover:!0,bordered:!0,className:"historyMedical",children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"STT"}),Object(et.jsx)("th",{className:"nameCm",children:"T\xean b\u1ec7nh nh\xe2n"}),Object(et.jsx)("th",{className:"testDay",children:"Ng\xe0y kh\xe1m"}),Object(et.jsx)("th",{children:"D\u1ecbch v\u1ee5"}),Object(et.jsx)("th",{children:"M\xe3 d\u1ecbch v\u1ee5"}),Object(et.jsx)("th",{className:"optionHistory",children:"T\xf9y ch\u1ecdn"})]})}),Object(et.jsx)("tbody",{children:null===t||void 0===t?void 0:t.map((function(e,t){var n=e.steps,c=n.map((function(e){if(e.order){var t=[e.order.code];return Object(et.jsx)("div",{children:t},t)}})),a=n.map((function(e){if(e.order.items.length>0){var t=[e.order.items.map((function(e){return e.ref_value.name})).join(",")];return Object(et.jsx)("div",{children:t})}}));return Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{scope:"row",children:t+1}),Object(et.jsx)("td",{children:e.ref_value.full_name}),Object(et.jsx)("td",{children:be(e.date,"DDMMYYYY")}),Object(et.jsx)("td",{children:a}),Object(et.jsx)("td",{children:c}),Object(et.jsx)("td",{children:Object(et.jsx)(Ze.a,{onClick:function(){return function(e){r(e),d(!0)}(e)},children:"in"})})]},e.id)}))})]}),Object(et.jsxs)(We.a,{isOpen:l,children:[Object(et.jsx)(Qe.a,{children:Object(et.jsx)(sc,{item:s})}),Object(et.jsxs)($e.a,{children:[Object(et.jsx)(Ze.a,{color:"danger",onClick:function(){return d(!1)},children:"H\u1ee7y"}),Object(et.jsx)(Ze.a,{onClick:function(){qe.printhorizontal("historyMedicalPrint")},children:"In"})]})]})]})},ic=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return Object(et.jsx)(et.Fragment,{children:Object(et.jsx)("span",{className:"text-danger",children:"*"})})}}]),n}(a.a.Component),oc=ic,lc=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).componentDidUpdate=function(e){var t=c.props;t.customerCode,t.customerName},c.state={},c}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.customerCode,n=e.customerName;return Object(et.jsx)("div",{style:{display:"none"},children:Object(et.jsx)("div",{id:"barcodeCanvas",children:Object(et.jsxs)("div",{style:{display:"flex",flexDirection:"row",minHeight:"94px"},children:[Object(et.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:[Object(et.jsx)("small",{children:n}),Object(et.jsx)(Cn.a,{fontSize:"15px",value:t,height:"35px"})]}),Object(et.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:[Object(et.jsx)("small",{children:n}),Object(et.jsx)(Cn.a,{fontSize:"15px",value:t,height:"35px"})]})]})})})}}]),n}(a.a.Component),dc=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).componentDidMount=function(){var e=c.props.id;qe.createBarcode(e)},c.state={},c}return Object(b.a)(n,[{key:"render",value:function(){return Object(et.jsx)("div",{id:"printCode",className:"m-0",children:Object(et.jsx)("canvas",{id:"canvas_id",style:{height:"15mm",width:"35mm"}})})}}]),n}(a.a.Component),uc=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).componentDidUpdate=function(){c.props.printShortKey&&c.print()},c.CloseHistory=function(){c.setState({show:!1})},c.setHistory=function(e){qe.getJobByCustomerId(e).then((function(e){var t=e.data.reverse();t.splice(6),c.setState({items:t,show:!0})}))},c.printBarcode=Object(j.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.printBarCode("barcodeCanvas");case 2:case"end":return e.stop()}}),e)}))),c.print=function(){qe.printBarCode("printCode"),c.props.staShortKey()},c.state={show:!1,items:[],printShortKey:!1},c}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props.data||{},n=t.cm_code,c=t.cm_full_name,a=t.cm_gender,s=t.cm_birthday,r=t.dirty,i=t.contact_phone_number,o=this.props,l=o.reExamination,d=o.officialsExam,u=o._setValue,h=o.mode,j=t.contacts?t.contacts[0].address:{},b=j.ward?"  ".concat(j.ward):"",m=j.district?"-".concat(j.district):"",x=j.province?"-".concat(j.province):"";return Object(et.jsxs)("div",{className:"customerForm_container",children:[Object(et.jsxs)("h5",{className:"title-card",children:[Object(et.jsx)("span",{className:"material-icons",children:"person"})," Th\xf4ng tin b\u1ec7nh nh\xe2n"]}),"pharmacy"===h&&Object(et.jsxs)(sn.a,{className:"infoCustomer ",children:[Object(et.jsx)(rn.a,{sm:11,className:"ml-10",children:Object(et.jsxs)(sn.a,{className:"mb-1",children:[Object(et.jsx)(rn.a,{xs:"2",children:"M\xe3 b\u1ec7nh nh\xe2n:"}),Object(et.jsx)(rn.a,{xs:"4",children:t.code}),Object(et.jsx)(rn.a,{xs:"2",children:"H\u1ecd t\xean:"}),Object(et.jsx)(rn.a,{xs:"4",children:t.full_name})]})}),Object(et.jsx)(rn.a,{sm:11,className:"ml-10",children:Object(et.jsxs)(sn.a,{className:"mb-1",children:[Object(et.jsx)(rn.a,{xs:"2",children:"Gi\u1edbi t\xednh:"}),Object(et.jsx)(rn.a,{xs:"4",children:t.gender?"male"===t.gender?"Nam":"N\u1eef":null}),Object(et.jsx)(rn.a,{xs:"2",children:"Ng\xe0y sinh:"}),Object(et.jsx)(rn.a,{xs:"4",children:Zn(t.birthday)})]})}),Object(et.jsx)(rn.a,{sm:11,className:"ml-10",children:Object(et.jsxs)(sn.a,{className:"mb-1",children:[Object(et.jsx)(rn.a,{xs:"2",children:"\u0110\u1ecba ch\u1ec9:"}),Object(et.jsx)(rn.a,{xs:"10",children:"".concat(b," ").concat(m," ").concat(x)||t.address})]})})]}),"input"===h&&Object(et.jsxs)("div",{children:[Object(et.jsxs)(Xn.a,{row:!0,children:[Object(et.jsxs)(Vn.a,{for:"cm_code",sm:5,children:["M\xe3 b\u1ec7nh nh\xe2n ",Object(et.jsx)(oc,{})]}),Object(et.jsx)(rn.a,{sm:6,children:Object(et.jsx)(Nn.a,{placeholder:"nh\u1eadp 12 s\u1ed1 m\xe3 b\u1ec7nh nh\xe2n",autoFocus:!0,onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"1",name:"cm_code",value:n.value,type:"text",id:"cm_code",onChange:function(e){return u(e,"cm_code")},disabled:l})}),Object(et.jsx)(lc,{customerCode:n.value,customerName:c.value}),Object(et.jsx)(rn.a,{sm:1,children:Object(et.jsx)(Ze.a,{onClick:function(){return e.printBarcode()},children:"In"})})]}),Object(et.jsxs)(Xn.a,{row:!0,children:[Object(et.jsxs)(Vn.a,{for:"cm_full_name",sm:5,children:["H\u1ecd t\xean ",Object(et.jsx)(oc,{})]}),Object(et.jsxs)(rn.a,{sm:7,children:[Object(et.jsx)(Nn.a,{onKeyDown:function(e){return ct.onKeyDown(e)},disabled:d,"data-index":"2",type:"text",name:"cm_full_name",value:c.value,id:"cm_full_name",onChange:function(e){return u(e,"cm_full_name")},required:!0,className:"text-uppercase"}),r&&Object(et.jsx)("span",{className:"text-danger",children:c.err})]})]}),Object(et.jsxs)(Xn.a,{row:!0,className:"customer-birthday",children:[Object(et.jsxs)(Vn.a,{for:"cm_birthday",sm:5,children:["Ng\xe0y sinh ",Object(et.jsx)(oc,{})]}),Object(et.jsxs)(rn.a,{sm:5,children:[Object(et.jsx)(Nn.a,{onKeyDown:function(e){return ct.onKeyDown(e)},disabled:d,"data-index":"3",type:"text",name:"cm_birthday",id:"cm_birthday",value:s.value,onChange:function(e){e.target.value=function(e){var t=e;return t[2]&&"/"!==t[2]&&(t=t.slice(0,2)+"/"+t.slice(2)),t[5]&&"/"!==t[5]&&(t=t.slice(0,5)+"/"+t.slice(5)),t}(e.target.value),u(e,"cm_birthday")},pattern:ne,placeholder:"dd/mm/yyyy",required:!0}),r&&Object(et.jsx)("span",{className:"text-danger",children:s.err})]}),s.value&&!s.err&&Object(et.jsx)(rn.a,{sm:2,children:Object(et.jsx)("div",{className:" align-items-center get-age",children:Qn(s.value)})})]}),Object(et.jsxs)(sn.a,{className:"gender",children:[Object(et.jsxs)(Vn.a,{for:"cm_gender",sm:5,children:["Gi\u1edbi t\xednh ",Object(et.jsx)(oc,{})]}),Object(et.jsxs)(rn.a,{sm:7,children:[Object(et.jsxs)(Nn.a,{onKeyDown:function(e){return ct.onKeyDown(e)},disabled:d,"data-index":"4",type:"select",id:"cm_gender",value:a.value,onChange:function(e){return u(e,"cm_gender")},required:!0,children:[Object(et.jsx)("option",{value:"male",children:"Nam"}),Object(et.jsx)("option",{value:"female",children:"N\u1eef"})]}),r&&Object(et.jsx)("span",{className:"text-danger",children:a.err})]})]}),Object(et.jsxs)(Xn.a,{row:!0,className:"customer-phone",children:[Object(et.jsxs)(Vn.a,{for:"contact_phone_number",sm:5,children:["S\u1ed1 \u0111i\u1ec7n tho\u1ea1i ",Object(et.jsx)(oc,{})]}),Object(et.jsxs)(rn.a,{sm:7,children:[Object(et.jsx)(Nn.a,{onKeyDown:function(e){return ct.onKeyDown(e)},disabled:d,"data-index":"5",type:"text",name:"contact_phone_number",id:"contact_phone_number",value:i.value,pattern:te,onChange:function(e){return u(e,"contact_phone_number")},required:!0}),r&&Object(et.jsx)("span",{className:"text-danger",children:i.err})]})]}),Object(et.jsx)("div",{className:"print",children:Object(et.jsx)(dc,{id:n.value.toString()})})]}),"input"!==h&&"pharmacy"!==h&&Object(et.jsxs)("div",{children:[Object(et.jsxs)(sn.a,{className:"infoCustomer ",children:[Object(et.jsxs)(rn.a,{sm:5,className:"ml-10",children:[Object(et.jsxs)(sn.a,{className:"mb-1",children:[Object(et.jsx)(rn.a,{xs:"5",children:"M\xe3 b\u1ec7nh nh\xe2n:"}),Object(et.jsx)(rn.a,{xs:"7",children:t.code})]}),Object(et.jsxs)(sn.a,{className:"mb-1",children:[Object(et.jsx)(rn.a,{xs:"5",children:"H\u1ecd t\xean:"}),Object(et.jsx)(rn.a,{xs:"7",children:t.full_name})]}),Object(et.jsxs)(sn.a,{className:"mb-1",children:[Object(et.jsx)(rn.a,{xs:"5",children:"\u0110\u1ecba ch\u1ec9:"}),Object(et.jsx)(rn.a,{xs:"7",children:"".concat(b).concat(m).concat(x)||t.address})]})]}),Object(et.jsxs)(rn.a,{sm:5,children:[Object(et.jsxs)(sn.a,{className:"mb-1",children:[Object(et.jsx)(rn.a,{xs:"5",children:"Gi\u1edbi t\xednh:"}),Object(et.jsx)(rn.a,{xs:"7",children:t.gender?"male"===t.gender?"Nam":"N\u1eef":null})]}),Object(et.jsxs)(sn.a,{className:"mb-1",children:[Object(et.jsx)(rn.a,{xs:"5",children:"Ng\xe0y sinh:"}),Object(et.jsx)(rn.a,{xs:"5",children:Zn(t.birthday)})]})]})]}),"easyInfo"===h&&Object(et.jsxs)(et.Fragment,{children:[Object(et.jsxs)(sn.a,{className:"mb-1",children:[Object(et.jsx)(rn.a,{xs:"5",children:"Gi\u1edbi t\xednh:"}),Object(et.jsx)(rn.a,{xs:"7",children:t.gender?"male"===t.gender?"Nam":"N\u1eef":null})]}),Object(et.jsxs)(sn.a,{className:"mb-1",children:[Object(et.jsx)(rn.a,{xs:"5",children:"Ng\xe0y sinh:"}),Object(et.jsx)(rn.a,{xs:"5",children:Zn(t.birthday)})]}),Object(et.jsxs)(sn.a,{className:"mb-1",children:[Object(et.jsx)(rn.a,{xs:"5",children:"\u0110\u1ecba ch\u1ec9:"}),Object(et.jsx)(rn.a,{xs:"7",children:t&&t.contacts?t.contacts[0].address.province:""})]})]})]})]})}}]),n}(a.a.Component),hc={GETLISTCUSTOMER:"/job/step/list?location_id=",GETLISTSERVICES:"/service/service/list",GETONECUSTOMER:"/customer/customer/get?id=",GETLISTLOCATION:"/location/list",GETLOCATIONBYSERVICE:"/location/service/location",GETLISTPRODUCT:"/product/list",GET_JOB_BY_ID:"/job/job/get",POST_ALLERGY_TO_CUS:"/customer/customer/allergy?id=",POSTUPDATECUSTOMER:"/customer/customer/update",ADD_JOB_STEP:"/job/step/add",POSTDIAGNOSIS:"/job/step/finish",POSTSUBCLINICAL:"/job/job/state",UPDATE_JOB_STEP:"/job/step/update",GET_JOB:"/job/job/list?customer_id="},jc=function(){function e(){if(Object(l.a)(this,e),this.getJobById=function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.get(hc.GET_JOB_BY_ID,t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e._instance)return e._instance;e._instance=this}return Object(b.a)(e,[{key:"location",get:function(){return JSON.parse(sessionStorage.getItem(P)||"{}")},set:function(e){sessionStorage.setItem(P,JSON.stringify(e))}},{key:"getOneCustomer",value:function(e){return Ee.get(hc.GETONECUSTOMER+e)}},{key:"getListServices",value:function(){return Ee.get(hc.GETLISTSERVICES)}},{key:"postUpdateCustomer",value:function(){return Ee.post(hc.POSTUPDATECUSTOMER)}},{key:"postAllergyToCus",value:function(e,t){return Ee.post(hc.POST_ALLERGY_TO_CUS+e,t)}},{key:"addJobStep",value:function(e){return Ee.post(hc.ADD_JOB_STEP,e)}},{key:"finishDiagnosis",value:function(e){return Ee.post(hc.POSTDIAGNOSIS,e)}},{key:"updateJobStep",value:function(e){return Ee.post(hc.UPDATE_JOB_STEP,e)}},{key:"getListLocation",value:function(){return Ee.get(hc.GETLISTLOCATION)}},{key:"getLocationsByService",value:function(e){return Ee.get("".concat(hc.GETLOCATIONBYSERVICE,"?id=").concat(e))}},{key:"getListProduct",value:function(){return Ee.get(hc.GETLISTPRODUCT)}},{key:"getInfoService",value:function(e){return Ee.get(hc.GETINFOSERVICE+e)}},{key:"postSubclinical",value:function(e){return Ee.post(hc.POSTSUBCLINICAL,e)}},{key:"searchCustomer",value:function(e){return Ee.get("/customer/customer/search",{text:e})}},{key:"getJob",value:function(e){return Ee.get(hc.GET_JOB+e)}}]),e}(),bc=new jc,mc=bc,xc=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).setNotiMessage=function(e){c.setState({notiMessage:e})},c.setShowBarcode=function(e){c.setState({showBarcode:e})},c.readyJobListAction={refresh:null},c.runningJobListAction={refresh:null},c.setValueService=function(e,t,n){var a=c.state.resultsExam;e.target.value;c.state.resultsExam.forEach((function(c){c.device==n&&(c[t]={value:e.target.value,unit:"",range:[null,null]})})),c.setState({resultsExam:a}),console.log(c.state.resultsExam,"fak ne")},c.refreshJobList=function(){c.readyJobListAction.refresh(),c.runningJobListAction.refresh()},c.setDeviceValue=function(e,t,n){if(e&&e.target){var a=c.state.resultsExam,s=c.state.devices;s.forEach((function(c){c.name==t.name&&c.attr.forEach((function(t){t.name==n.name&&(t.value.value=e.target.value,t.value.unit=t.value.unit,t.value.range=t.value.range)}))})),c.setState({devices:s}),a.forEach((function(c){("Immune"==c.device&&"Immune"==t.name||"Test"==c.device&&"Test"==t.name)&&(c[n.label2]={value:e.target.value,unit:"",range:[null,null]})})),c.setState({resultsExam:a})}},c.selectTypeStatusTest=function(e){c.setState({resultsExam:{},nameDeviceObj:{},TestId:[],nameDevice:[],inWaitingData:!1}),c.state.activeTab!==e&&c.setState({activeTab:e})},c.selectTypeStatusDevice=function(e){c.setState({inWaitingData:!1}),c.state.activeDevice!==e&&c.setState({activeDevice:e})},c.myRef=a.a.createRef(),c.handleClickOutside=function(e){c.myRef.current.contains(e.target)||c.setState({navActiveListPeople:!1})},c.handleShowBarcode=function(){c.setShowBarcode(!0)},c.handleSwitchStatus=Object(j.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:c.state.IdUpdate,status:w},e.next=3,pn.takeSample(t);case 3:case"end":return e.stop()}}),e)}))),c.handleResultExam=function(e){for(var t=[],n=[],a=[],s={},r=e.length-1;r>=0;r--){var i=e[r];i.sample_id&&("BC-2800"==i.device&&"undefined"===typeof s.BC2800?(s.BC2800="BC-2800",t.push(i.sample_id),n.push(i.device),a.push(i)):"BS-200E"==i.device&&"undefined"===typeof s.BS200E?(s.BS200E="BS-200E",t.push(i.sample_id),n.push(i.device),a.push(i)):"UA-66"==i.device&&"undefined"===typeof s.UA66?(s.UA66="UA-66",t.push(i.sample_id),n.push(i.device),a.push(i)):"Test"==i.device&&"undefined"===typeof s.Test?(s.Test="Test",t.push(i.sample_id),n.push(i.device),a.push(i)):"Other"==i.device&&"undefined"===typeof s.Other?(s.Other="Other",t.push(i.sample_id),n.push(i.device),a.push(i)):"Immune"!=i.device||s.IMMUNE||(s.IMMUNE="Immune",t.push(i.sample_id),n.push(i.device),a.push(i)))}"3"===c.state.activeTab&&(t=[],n=[]),c.setState({resultsExam:a,nameDeviceObj:s,TestId:t,nameDevice:n}),console.log(c.state.resultsExam,"exam n\xe8")},c.handleDataTable=function(){var e=Object(j.a)(h.a.mark((function e(t){var n,a,s,r,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pn.getResultsByStepId(t);case 2:if(n=e.sent,console.log("handleDataTable",n),a=n.data,s=n.data.id,r=n.data.order.items.map((function(e){return e.ref_value.name})),c.setState({nameServiceTest:r,TestTotal:a,IdUpdate:s}),i=n.data.results,c.checkSample(i)){e.next=13;break}return e.next=12,pn.createSampleIdByRef(c.state.order_id);case 12:return e.abrupt("return",c.handleDataTable(t));case 13:c.handleResultExam(i),i.forEach((function(e){var t=e.device;c.state.devices.forEach((function(n){n.name==t&&Object.entries(e).map((function(e){var t=!1;if(n.attr.forEach((function(n){n.label2==e[0]&&(t=!0,n.value=e[1])})),!t){var c={name:e[0],label:e[0],label2:e[0],value:{value:e[1].value,unit:e[1].unit,range:e[1].range},isInput:!1};n.attr.unshift(c)}}))}))}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.createSample=function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pn.createSampleIdByRef(t);case 2:return e.next=4,c.handleDataTable(c.state.examResultId);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.updateJobId=function(){var e=Object(j.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(new Date).toLocaleString("en-GB"),e.next=3,mc.getJobById({id:t.job_id});case 3:(a=e.sent).state.subclinical=a.state.subclinical||{},c.setState({selectedJob:a,prognostic:a.state,ctime:n,subclinical:a.state.textDiagnosis,selectedJobStepRunning:t,order_id:t.order_id,examResultId:t.id,selectecPatientReady:t.order.customer,stepID:t.id});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.onSelectJobRunning=function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.setState({inWaitingData:!1}),!t){e.next=6;break}return e.next=4,c.updateJobId(t);case 4:return e.next=6,c.handleDataTable(c.state.examResultId);case 6:c.setState({inWaitingData:!0});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.handleResetForm=function(){c.setState({resultsBC2800:void 0}),c.setState({resultsUA66:void 0}),c.setState({resultsBS200E:void 0})},c.handleConfirm=function(e){c.setState((function(t){return Object(vn.a)(Object(vn.a)({},t),{},{modalConfirm:Object(vn.a)(Object(vn.a)({},t.modalConfirm),{},{message:e})})}))},c.handleUpdateResult=function(){var e=Object(j.a)(h.a.mark((function e(t){var n,a,s,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.state,a=n.resultsExam,n.devices,s=c.state.stepID,r={id:s,results:a},!t){e.next=20;break}return e.prev=4,c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{modalConfirm:Object(vn.a)(Object(vn.a)({},e.modalConfirm),{},{message:""})})})),pn.updateExamResult(r).then((function(e){c.refreshJobList()})).catch((function(e){console.log(e)})),e.next=9,c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{printResult:"block"})}));case 9:return e.next=11,c.print("printExam");case 11:return e.next=13,c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{printResult:"none"})}));case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:e.next=21;break;case 20:c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{modalConfirm:Object(vn.a)(Object(vn.a)({},e.modalConfirm),{},{message:""})})}));case 21:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t){return e.apply(this,arguments)}}(),c.handleChangeGetValue=function(e){var t=e.target.value;c.setState({doctor_write:t})},c.printBarcode=Object(j.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.setState({inWaitingData:!0}),e.next=3,qe.printBarCode("barcodeCanvas");case 3:return e.next=5,c.handleSwitchStatus();case 5:c.setState({inWaitingData:!1,resultsExam:[],nameDeviceObj:{},TestId:[],nameDevice:[]});case 6:case"end":return e.stop()}}),e)}))),c.print=function(e){pn.print(e)},c.handleChangeResult=function(e,t,n){var a=c.state.examResult.result;a[e].ref_value.service_step.map((function(e){if(e.id===t)return e.resultValue=n,e})),c.setState({result:a})},c.state={nameDevice:[],sendReq:!1,otherData:{},inWaitingData:!1,doctor_write:"",notiMessage:"",devices:[{name:"Immune",attr:[{name:"Beta HCG",label2:"Beta HCG",label:"Beta HCG",value:{value:"",unit:"",range:[0,0]},isInput:!0},{name:"T3",label2:"T3",label:"T3",value:{value:"",unit:"",range:[0,0]},isInput:!0},{name:"FT3",label2:"FT3",label:"FT3",value:{value:"",unit:"",range:[0,0]},isInput:!0},{name:"HbA1c",label2:"HbA1c",label:"HbA1c",value:{value:"",unit:"",range:[0,0]},isInput:!0},{name:"TESTOSTERON",label2:"TESTOSTERON",label:"TESTOSTERON",value:{value:"",unit:"",range:[0,0]},isInput:!0},{name:"PROGESTERON",label2:"PROGESTERON",label:"PROGESTERON",value:{value:"",unit:"",range:[0,0]},isInput:!0},{name:"FT4",label2:"FT4",label:"FT4",value:{value:"",unit:"",range:[0,0]},isInput:!0},{name:"T4",label:"T4",label2:"T4",value:{value:"",unit:"",range:[0,0]},isInput:!0},{name:"FSH",label2:"FSH",label:"FSH",value:{value:"",unit:"",range:[0,0]},isInput:!0},{name:"TSH",label2:"TSH",label:"TSH",value:{value:"",unit:"",range:[0,0]},isInput:!0},{name:"AFP",label2:"AFP",label:"AFP",value:{value:"",unit:"",range:[0,0]},isInput:!0},{name:"Phosphat AFP",label2:"Phosphat AFP",label:"Phosphat AFP",value:{value:"",unit:"",range:[0,0]},isInput:!0},{name:"ESTRADIOL",label2:"ESTRADIOL",label:"ESTRADIOL",value:{value:"",unit:"",range:[0,0]},isInput:!0},{name:"LH",label2:"LH",label:"LH",value:{value:"",unit:"",range:[0,0]},isInput:!0},{name:"Cortisol",label2:"Cortisol",label:"Cortisol",value:{value:"",unit:"",range:[0,0]},isInput:!0},{name:"CRP",label2:"CRP",label:"CRP",value:{value:"",unit:"",range:[0,0]},isInput:!0}]}],resultsExam:[],examName:"",subclinical:"",ctime:"",jobStepReady:[],jobStepRunning:[],selectedJob:[],examResultId:"",selectedJobStepRunning:{},selectecPatientReady:{},stepID:"",showBarcode:!1,order_id:"",activeTab:"1",activeDevice:"4",titleWaitForExam:"Danh s\xe1ch b\u1ec7nh nh\xe2n ch\u1edd x\xe9t nghi\u1ec7m:",titleWaitForExamDone:"Danh s\xe1ch b\u1ec7nh nh\xe2n c\xf3 k\u1ebft qu\u1ea3 x\xe9t nghi\u1ec7m:",titleWaitForResult:"Danh s\xe1ch b\u1ec7nh nh\xe2n ch\u1edd k\u1ebft qu\u1ea3:",modalConfirm:{message:"",saveExamResult:!1},printResult:"none"},c}return Object(b.a)(n,[{key:"checkSample",value:function(e){var t,n=Object(fn.a)(e);try{for(n.s();!(t=n.n()).done;){if(t.value.sample_id)return!0}}catch(c){n.e(c)}finally{n.f()}}},{key:"render",value:function(){var e,t,n=this,c=pn.location.id,a=this.state,s=a.activeTab,r=a.notiMessage,i=a.inWaitingData,o=a.nameDevice;return Object(et.jsxs)("div",{className:"examEdit",children:[Object(et.jsx)(at,{message:r,done:function(){return n.setNotiMessage("")}}),Object(et.jsxs)(sn.a,{className:"mb-5 title-card",children:[Object(et.jsx)(rn.a,{xs:"6",children:null===(e=pn.location)||void 0===e?void 0:e.name}),Object(et.jsx)(rn.a,{xs:"6",className:"end pointer pr-30",onClick:function(){pn.location={},window.location.replace("/app/exam")},children:Object(et.jsx)("u",{children:"Chuy\u1ec3n ph\xf2ng"})})]}),Object(et.jsxs)(sn.a,{className:"content",children:[Object(et.jsxs)(rn.a,{sm:"8",className:"content-left",children:[Object(et.jsx)(sn.a,{className:"info-customer customCard",children:i?Object(et.jsx)(uc,{data:this.state.selectecPatientReady}):Object(et.jsx)(uc,{})}),i?Object(et.jsx)(Bn,{nameDeviceObj:this.state.nameDeviceObj,prognostic:this.state.prognostic,setValueService:this.setValueService,devices:this.state.devices,setDeviceValue:this.setDeviceValue,resultsExam:this.state.resultsExam,examEditSetState:function(e){return n.setState(e)},examEditState:this.state}):""]}),Object(et.jsxs)(rn.a,{sm:"4",className:"content-right",children:[Object(et.jsxs)("div",{ref:this.myRef,children:[Object(et.jsxs)($t.a,{tabs:!0,className:"selectTabs",children:[Object(et.jsx)(Zt.a,{className:"titleTabs",children:Object(et.jsx)(en.a,{className:Dn()({active:"1"===s}),onClick:function(){n.selectTypeStatusTest("1")},children:Object(et.jsx)("b",{className:"title-card",children:"B\u1ec7nh nh\xe2n ch\u1edd l\u1ea5y m\u1eabu"})})}),Object(et.jsx)(Zt.a,{className:"titleTabs",children:Object(et.jsx)(en.a,{className:Dn()({active:"3"===s}),onClick:function(){n.selectTypeStatusTest("3")},children:Object(et.jsx)("b",{className:"title-card",children:"B\u1ec7nh nh\xe2n \u0111ang ch\u1edd XN"})})}),Object(et.jsx)(Zt.a,{className:"titleTabs",children:Object(et.jsx)(en.a,{className:Dn()({active:"2"===s}),onClick:function(){n.selectTypeStatusTest("2")},children:Object(et.jsx)("b",{className:"title-card",children:"B\u1ec7nh nh\xe2n c\xf3 k\u1ebft qu\u1ea3"})})})]}),Object(et.jsxs)(gn.a,{activeTab:s,children:[Object(et.jsx)(yn.a,{tabId:"1",className:"customCard",children:Object(et.jsx)(Tn,{examEditState:this.state,examEditSetState:function(e){return n.setState(e)},selectedJob:this.state.selectedJob,order_id:this.state.order_id,titleOfList:this.state.titleWaitForExam,onSelectJobStep:function(e){return n.onSelectJobRunning(e)},location_id:c,status:[T],action:this.readyJobListAction,type:M,mode:"exam"})}),Object(et.jsx)(yn.a,{tabId:"3",className:"customCard",children:Object(et.jsx)(Tn,{checkSelectBarcode:!0,examEditState:this.state,examEditSetState:function(e){return n.setState(e)},selectedJob:this.state.selectedJob,order_id:this.state.order_id,titleOfList:this.state.titleWaitForExam,onSelectJobStep:function(e){return n.onSelectJobRunning(e)},location_id:c,status:[w],action:this.readyJobListAction,type:M,mode:"exam"})}),Object(et.jsx)(yn.a,{tabId:"2",className:"customCard",children:Object(et.jsx)(Tn,{examEditState:this.state,examEditSetState:function(e){return n.setState(e)},selectedJob:this.state.selectedJob,order_id:this.state.order_id,titleOfList:this.state.titleWaitForExamDone,onSelectJobStep:function(e){return n.onSelectJobRunning(e)},location_id:c,status:[D],action:this.readyJobListAction,type:M,mode:"exam"})})]})]}),Object(et.jsx)(sn.a,{className:"btn-Comfirm end",style:{marginTop:"10px"},children:Object(et.jsxs)(rn.a,{sm:"12",children:[i&&o.length&&("3"===s||"1"===s)?Object(et.jsx)(Ze.a,{outline:!0,color:"primary",onClick:function(){n.printBarcode()},children:"L\u1ea5y m\u1eabu"}):""," ",Object(et.jsxs)(We.a,{isOpen:this.state.showBarcode,children:[Object(et.jsx)(Ye.a,{children:"L\u1ecbch s\u1eed Kh\xe1m"}),Object(et.jsx)(Qe.a,{}),Object(et.jsx)($e.a,{children:Object(et.jsx)(Ze.a,{children:"Close"})})]}),!i||"2"!==s&&"3"!==s?"":Object(et.jsx)(Ze.a,{color:"primary",onClick:function(){n.handleUpdateResult(),n.handleConfirm("B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n c\u1eadp nh\u1eadt k\u1ebft qu\u1ea3?")},children:"G\u1eedi k\u1ebft qu\u1ea3"})]})})]})]}),Object(et.jsx)(sn.a,{children:Object(et.jsx)(rn.a,{sm:12,children:Object(et.jsx)(Jn,(t={sendReq:this.state.sendReq,examEditSetState:function(e){return n.setState(e)},examEditState:this.state,setDeviceValue:this.setDeviceValue,devices:this.state.devices,nameDeviceObj:this.state.nameDeviceObj,prognostic:this.state.prognostic,setValueService:this.setValueService,style:this.state.printResult,selectedJobStepRunning:this.state.selectedJobStepRunning,ctime:this.state.ctime,subclinical:this.state.subclinical,resultsExam:this.state.resultsExam},Object(f.a)(t,"examEditSetState",(function(e){return n.setState(e)})),Object(f.a)(t,"examEditState",this.state),t))})}),Object(et.jsx)(_n,{TestId:this.state.TestId,nameDevice:this.state.nameDevice,cm_name:this.state.selectecPatientReady.full_name}),Object(et.jsx)(tt,{message:this.state.modalConfirm.message,answer:this.handleUpdateResult})]})}}]),n}(c.Component),Oc=xc,pc=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).updateStorage=function(e){sessionStorage.setItem(P,JSON.stringify(e))},c.state={},c}return Object(b.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,n=t.list,c=t.onSelect;return Object(et.jsxs)("div",{className:"locationSelecterContainer customCard",children:[Object(et.jsx)("h1",{className:"header",children:"M\u1eddi ch\u1ecdn ph\xf2ng"}),Object(et.jsx)(sn.a,{children:n&&n.length?n.map((function(t){return Object(et.jsx)(rn.a,{sm:"3",className:"item",children:Object(et.jsx)(Ze.a,{outline:!0,color:"primary",onClick:function(){c(t.id,t.name),e.updateStorage(t)},children:t.name})})})):Object(et.jsx)("p",{children:"----------------------"})})]})}}]),n}(c.Component),fc=pc,vc=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).componentDidMount=Object(j.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pn.getListLocation();case 2:t=e.sent,n=t.filter((function(e){return e.type===$})),c.setState({locationList:n});case 5:case"end":return e.stop()}}),e)}))),c.onSelect=function(e){c.props.history.push("exam/room/"+e)},c.state={locationList:[],selectedLocation:-1},c}return Object(b.a)(n,[{key:"render",value:function(){return Object(et.jsx)("div",{style:{padding:"20px"},children:Object(et.jsx)(fc,{list:this.state.locationList,onSelect:this.onSelect})})}}]),n}(ze),gc=Object(r.h)(vc),yc=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.match.path;return Object(et.jsx)("div",{className:"Exam",children:Object(et.jsxs)(r.d,{children:[Object(et.jsx)(r.b,{exact:!0,path:"".concat(e,"/"),render:function(){return Me.hasRole(g.TEST_OPERATOR)||Me.hasRole(g.ADMIN)?pn.location.id&&pn.location.type===$?Object(et.jsx)(r.a,{to:"".concat(e,"/room/").concat(pn.location.id)}):Object(et.jsx)(gc,{}):Object(et.jsx)(r.a,{to:"/app/org/notauthorized"})}}),Object(et.jsx)(r.b,{exact:!0,path:"".concat(e,"/room/:id"),component:Oc}),Object(et.jsx)(r.b,{exact:!0,path:"".concat(e,"/12345"),component:Jn})]})})}}]),n}(c.Component),Nc=yc,Sc=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).checkMale=function(e){return"Nam"===e},e.checkFemale=function(e){return"N\u1eef"===e},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.customer,t=e.full_name,n=e.idnum,c=e.gender,a=e.birthday,s=this.props,r=s.onChangeName,i=s.onChangeBirthday,o=s.onChangeGender,l=s.onChangeIdent;return Object(et.jsxs)("div",{className:"customer-basic",children:[Object(et.jsx)("p",{children:"1. Th\xf4ng tin c\u01a1 b\u1ea3n:"}),Object(et.jsxs)(sn.a,{children:[Object(et.jsxs)(rn.a,{xs:"4",children:["H\u1ecd t\xean ",Object(et.jsx)("span",{className:"customer-basic-important",children:"*"}),": "]}),Object(et.jsx)(rn.a,{children:Object(et.jsx)(Nn.a,{type:"text",placeholder:"",value:t,onChange:function(e){return r(e.target.value)}})})]}),Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"4",children:"CMND/Th\u1ebb CC: "}),Object(et.jsx)(rn.a,{children:Object(et.jsx)(Nn.a,{type:"text",placeholder:"",value:n,onChange:function(e){return l(e.target.value)}})})]}),Object(et.jsxs)(sn.a,{children:[Object(et.jsxs)(rn.a,{xs:"4",children:["Gi\u1edbi t\xednh ",Object(et.jsx)("span",{className:"customer-basic-important",children:"*"}),": "]}),Object(et.jsxs)(rn.a,{className:"customer-basic-select",children:[Object(et.jsxs)(Vn.a,{check:!0,children:[Object(et.jsx)(Nn.a,{type:"checkbox",onChange:function(e){return o(e.target.value)},value:"Nam",checked:this.checkMale(c)})," Nam"]}),Object(et.jsxs)(Vn.a,{check:!0,children:[Object(et.jsx)(Nn.a,{type:"checkbox",onChange:function(e){return o(e.target.value)},value:"N\u1eef",checked:this.checkFemale(c)})," N\u1eef"]})]})]}),Object(et.jsxs)(sn.a,{children:[Object(et.jsxs)(rn.a,{xs:"4",children:["Ng\xe0y sinh ",Object(et.jsx)("span",{className:"customer-basic-important",children:"*"}),": "]}),Object(et.jsx)(rn.a,{children:Object(et.jsx)(Nn.a,{type:"date",placeholder:"",value:a,onChange:function(e){return i(e.target.value)}})})]}),Object(et.jsxs)("p",{children:[Object(et.jsx)("span",{className:"customer-basic-important",children:"*"})," : C\xe1c th\xf4ng tin b\u1eaft bu\u1ed9c. "]})]})}}]),n}(c.Component),Cc=Sc,_c=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.customer_contact,t=e.full_name,n=e.phone_number,c=e.address,a=e.email,s=e.relation,r=this.props,i=r.onChangeName,o=r.onChangePhone,l=r.onChangeAddress,d=r.onChangeEmail,u=r.onChangeRelation,h=r.onSearchPhone;return Object(et.jsxs)("div",{className:"customer-contact",children:[Object(et.jsx)("p",{children:" 2. Th\xf4ng tin li\xean h\u1ec7 (kh\xe1ch h\xe0ng ho\u1eb7c ng\u01b0\u1eddi th\xe2n):"}),Object(et.jsxs)(sn.a,{children:[Object(et.jsxs)(rn.a,{xs:"4",children:["H\u1ecd t\xean ",Object(et.jsx)("span",{className:"customer-contact-important",children:"*"}),": "]}),Object(et.jsx)(rn.a,{children:Object(et.jsx)(Nn.a,{type:"text",placeholder:"",value:t,onChange:function(e){return i(e.target.value)}})})]}),Object(et.jsxs)(sn.a,{children:[Object(et.jsxs)(rn.a,{xs:"4",children:["S\u1ed1 \u0110T ",Object(et.jsx)("span",{className:"customer-contact-important",children:"*"}),": "]}),Object(et.jsx)(rn.a,{children:Object(et.jsx)(Nn.a,{type:"text",placeholder:"",value:n,onChange:function(e){return o(e.target.value)},onBlur:function(){return h(n)}})})]}),Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"4",children:"\u0110\u1ecba ch\u1ec9: "}),Object(et.jsx)(rn.a,{children:Object(et.jsx)(Nn.a,{type:"text",placeholder:"",value:c,onChange:function(e){return l(e.target.value)}})})]}),Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"4",children:"Email: "}),Object(et.jsx)(rn.a,{children:Object(et.jsx)(Nn.a,{type:"email",placeholder:"",value:a,onChange:function(e){return d(e.target.value)}})})]}),Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"4",children:"Quan h\u1ec7: "}),Object(et.jsx)(rn.a,{children:Object(et.jsx)(Nn.a,{type:"text",placeholder:"B\u1ed1, m\u1eb9, anh, ch\u1ecb,... (n\u1ebfu c\xf3)",value:s,onChange:function(e){return u(e.target.value)}})})]})]})}}]),n}(c.Component),Tc=_c,wc=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.search_customer,t=e.full_name,n=e.idnum,c=this.props,a=c.showHistory,s=c.onHistory,r=c.onMatchHistory,i=this.props.search_history.time;return Object(et.jsxs)("div",{className:"customer-result",children:[Object(et.jsx)("div",{className:"customer-result-header",children:Object(et.jsx)(Ze.a,{className:"history-btn",color:"success",onClick:function(){return s()},children:"K\u1ebft qu\u1ea3 t\xecm ki\u1ebfm: "})}),a?Object(et.jsxs)("div",{className:"history-table",children:[Object(et.jsx)("p",{children:" Th\xf4ng tin c\u01a1 b\u1ea3n: "}),Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xl:"3",lg:"3",md:"3",sm:"12",xs:"12",children:Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xl:"6",lg:"6",md:"6",sm:"12",xs:"12",children:"H\u1ecd t\xean: "}),Object(et.jsx)(rn.a,{children:t})]})}),Object(et.jsx)(rn.a,{xl:"3",lg:"3",md:"3",sm:"12",xs:"12",children:Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xl:"5",lg:"5",md:"5",sm:"12",xs:"12",children:"CMND/CC: "}),Object(et.jsx)(rn.a,{children:n})]})}),Object(et.jsx)(rn.a,{xl:"6",lg:"6",md:"6",sm:"12",xs:"12",children:Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xl:"5",lg:"5",md:"5",sm:"12",xs:"12",children:"Ng\xe0y \u0111\xe3 kh\xe1m: "}),Object(et.jsx)(rn.a,{children:i})]})})]}),Object(et.jsx)("div",{className:"customer-result-footer",children:Object(et.jsx)(Ze.a,{className:"history-btn",color:"info",onClick:function(){return r()},children:"L\u1ea5y d\u1eef li\u1ec7u v\xe0o b\u1ea3ng"})})]}):Object(et.jsx)("span",{})]})}}]),n}(c.Component),kc=wc,Dc="/customer/customer/create",Ic="/customer/contact/add",Lc="/customer/customer/update",Ec="/customer/contact/update",Pc="/customer/customer/search",Rc=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).getCmByPhone=function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.post(Pc,{phone_number:t});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.addCm=function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.post(Dc,t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.addCmContact=function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.post(Ic,t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.modifyCm=function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.post(Lc,t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.modifyCmContact=function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.post(Ec,t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n._instance?Object(m.a)(e,n._instance):(n._instance=Object(x.a)(e),e)}return n}(d),Mc=new Rc,Bc=Mc,Ac={customer:{full_name:"",idnum:"",gender:"",birthday:""},customer_contact:{full_name:"",phone_number:"",address:"",email:"",relation:""},search_customer:{full_name:"",idnum:"",gender:"",birthday:"",id:""},search_contact:{full_name:"",phone_number:"",address:"",email:"",relation:""},search_history:{time:""},old_customer:!1,showHistory:!0,modalConfirm:{message:"",modalMatchDataDisplay:!1,modalCancelDisplay:!1,modalSaveDisplay:!1}},Fc=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).changeName=function(e){c.setState((function(t){return Object(vn.a)(Object(vn.a)({},t),{},{customer:Object(vn.a)(Object(vn.a)({},t.customer),{},{full_name:e})})}))},c.changeIdent=function(e){c.setState((function(t){return Object(vn.a)(Object(vn.a)({},t),{},{customer:Object(vn.a)(Object(vn.a)({},t.customer),{},{idnum:e})})}))},c.changeGender=function(e){c.setState((function(t){return Object(vn.a)(Object(vn.a)({},t),{},{customer:Object(vn.a)(Object(vn.a)({},t.customer),{},{gender:e})})}))},c.changeBirthday=function(e){c.setState((function(t){return Object(vn.a)(Object(vn.a)({},t),{},{customer:Object(vn.a)(Object(vn.a)({},t.customer),{},{birthday:e})})}))},c.handleCancel=function(){c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{modalConfirm:Object(vn.a)(Object(vn.a)({},e.modalConfirm),{},{message:"Ch\u1eafc ch\u1eafn hu\u1ef7 ?",modalCancelDisplay:!0})})}))},c.doCancel=function(e){e?c.setState(Ac):c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{modalConfirm:Object(vn.a)(Object(vn.a)({},e.modalConfirm),{},{message:"",modalCancelDisplay:!1})})}))},c.handleSave=function(){c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{modalConfirm:Object(vn.a)(Object(vn.a)({},e.modalConfirm),{},{message:"Ch\u1eafc ch\u1eafn l\u01b0u ?",modalSaveDisplay:!0})})}))},c.doAddOrModifyCustomer=function(){var e=Object(j.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.state.search_customer.id.id,!t){e.next=23;break}if(e.prev=2,n){e.next=8;break}return e.next=6,Bc.addCm(c.state.customer);case 6:return e.next=8,Bc.addCmContact(c.state.customer_contact);case 8:if(!n){e.next=13;break}return e.next=11,Bc.modifyCm(n,c.state.customer);case 11:return e.next=13,Bc.modifyCmContact(n,c.state.customer_contact);case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(2),e.t0;case 18:return e.prev=18,c.setState(Ac),e.finish(18);case 21:e.next=24;break;case 23:c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{modalConfirm:Object(vn.a)(Object(vn.a)({},e.modalConfirm),{},{message:"",modalSaveDisplay:!1})})}));case 24:case"end":return e.stop()}}),e,null,[[2,15,18,21]])})));return function(t){return e.apply(this,arguments)}}(),c.showOrHideHistory=function(){c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{showHistory:!e.showHistory})}))},c.handleMatchHistory=function(){c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{modalConfirm:{message:"Ch\u1eafc ch\u1eafn l\u1ea5y d\u1eef li\u1ec7u v\xe0o b\u1ea3ng ?",modalMatchDataDisplay:!0,modalCancelDisplay:!1,modalSaveDisplay:!1}})}))},c.matchHistory=function(e){if(e){var t=c.state.search_customer,n=t.full_name,a=t.idnum,s=t.birthday,r=t.gender;c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{customer:{full_name:n,idnum:a,birthday:s,gender:r},customer_contact:{full_name:c.state.search_contact.full_name,phone_number:c.state.search_contact.phone_number,address:c.state.search_contact.address,email:c.state.search_contact.email,relation:c.state.search_contact.relation},modalConfirm:Object(vn.a)(Object(vn.a)({},e.modalConfirn),{},{modalMatchDataDisplay:!1})})}))}else c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{modalConfirm:Object(vn.a)(Object(vn.a)({},e.modalConfirn),{},{modalMatchDataDisplay:!1})})}))},c.changeContactName=function(e){c.setState((function(t){return Object(vn.a)(Object(vn.a)({},t),{},{customer_contact:Object(vn.a)(Object(vn.a)({},t.customer_contact),{},{full_name:e})})}))},c.changeContactPhone=function(e){c.setState((function(t){return Object(vn.a)(Object(vn.a)({},t),{},{customer_contact:Object(vn.a)(Object(vn.a)({},t.customer_contact),{},{phone_number:e})})}))},c.changeContactAddress=function(e){c.setState((function(t){return Object(vn.a)(Object(vn.a)({},t),{},{customer_contact:Object(vn.a)(Object(vn.a)({},t.customer_contact),{},{address:e})})}))},c.changeContactEmail=function(e){c.setState((function(t){return Object(vn.a)(Object(vn.a)({},t),{},{customer_contact:Object(vn.a)(Object(vn.a)({},t.customer_contact),{},{email:e})})}))},c.changeContactRelation=function(e){c.setState((function(t){return Object(vn.a)(Object(vn.a)({},t),{},{customer_contact:Object(vn.a)(Object(vn.a)({},t.customer_contact),{},{relation:e})})}))},c.match_search_customer=function(e){if(null!==e){var t=e.full_name,n=e.gender,a=e.birthday,s=e.idnum,r=e.id;c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{search_customer:{full_name:t,gender:n,birthday:a,idnum:s,id:r}})}))}},c.match_search_contact=function(e){if(null!==e){var t=e.full_name,n=e.phone_number,a=e.address,s=e.email,r=e.relation;c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{search_contact:{full_name:t,phone_number:n,address:a,email:s,relation:r}})}))}},c.match_search_history=function(e){if(null!==e){var t=e.time;c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{search_history:{time:new Date(t).toLocaleDateString("en-CA")}})}))}},c.matchResponseToSearch=function(e){c.match_search_customer(e[0]),c.match_search_contact(e[1]),c.match_search_history(e[2])},c.handleSearchPhone=function(){var e=Object(j.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Bc.getCmByPhone(t);case 3:(n=e.sent)?(c.matchResponseToSearch(n),c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{old_customer:!0})}))):c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{old_customer:!1})})),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),c.state=Ac,c.doAddOrModifyCustomer=c.doAddOrModifyCustomer.bind(Object(x.a)(c)),c}return Object(b.a)(n,[{key:"render",value:function(){var e=this.state,t=e.customer,n=e.search_customer,a=e.customer_contact,s=e.search_contact,r=e.search_history,i=e.old_customer,o=e.showHistory,l=this.state.modalConfirm,d=l.message,u=l.modalMatchDataDisplay,h=l.modalCancelDisplay,j=l.modalSaveDisplay;return Object(et.jsxs)(c.Fragment,{children:[Object(et.jsxs)("div",{className:"customer",children:[Object(et.jsx)("h2",{children:"Th\xf4ng tin b\u1ec7nh nh\xe2n"}),Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xl:"6",lg:"6",md:"6",sm:"12",xs:"12",children:Object(et.jsx)(Cc,{search_customer:n,customer:t,onChangeName:this.changeName,onChangeGender:this.changeGender,onChangeBirthday:this.changeBirthday,onChangeIdent:this.changeIdent})}),Object(et.jsx)(rn.a,{xl:"6",lg:"6",md:"6",sm:"12",xs:"12",children:Object(et.jsx)(Tc,{customer_contact:a,search_contact:s,onChangeName:this.changeContactName,onChangePhone:this.changeContactPhone,onChangeAddress:this.changeContactAddress,onChangeEmail:this.changeContactEmail,onChangeRelation:this.changeContactRelation,onSearchPhone:this.handleSearchPhone})})]}),Object(et.jsx)(sn.a,{className:"row",children:Object(et.jsxs)(rn.a,{className:"customer-button-area",children:[Object(et.jsx)(Ze.a,{className:"cancel-btn",outline:!0,color:"primary",title:"cancel",onClick:this.handleCancel,children:"Hu\u1ef7"}),Object(et.jsx)(Ze.a,{onClick:this.handleSave,outline:!0,color:"primary",title:"save",children:"L\u01b0u"})]})}),i?Object(et.jsx)(kc,{onHistory:this.showOrHideHistory,showHistory:o,search_customer:n,search_history:r,onMatchHistory:this.handleMatchHistory}):Object(et.jsx)("span",{})]}),u?Object(et.jsx)(tt,{message:d,answer:this.matchHistory}):Object(et.jsx)("span",{}),h?Object(et.jsx)(tt,{message:d,answer:this.doCancel}):Object(et.jsx)("span",{}),j?Object(et.jsx)(tt,{message:d,answer:this.doAddOrModifyCustomer}):Object(et.jsx)("span",{})]})}}]),n}(c.Component),Uc=Fc,Hc=n(250),Kc=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onDelete=function(t){e.props.onDelete(t)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.list_location,c=t.index;return Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{children:c+1}),Object(et.jsx)("td",{children:n.location_type_name}),Object(et.jsx)("td",{children:n.code}),Object(et.jsx)("td",{children:n.name}),Object(et.jsx)("td",{children:Object(et.jsxs)("div",{className:"btnControl",children:[Object(et.jsx)(s.b,{to:"./location/".concat(n.id),className:"btn btn-primary btn-sm",children:"S\u1eeda"})," ",Object(et.jsx)(Ze.a,{className:"btnDanger btn-sm",color:"danger",onClick:function(){return e.onDelete(n.id)},children:"X\xf3a"})]})})]},c)}}]),n}(c.Component),Gc=Kc,Jc="/location/list",Xc="/location/create",Vc="/location/update",qc="/location/get?id=",zc="/location/delete",Wc="/location/type/list",Yc="/location/type/create",Qc="/location/type/update",$c="/location/type/get?id=",Zc="/location/type/delete",ea=function(){function e(){if(Object(l.a)(this,e),e._instance)return e._instance;e._instance=this}return Object(b.a)(e,[{key:"listLocation",value:function(){return Ee.get(Jc)}},{key:"deleteLocation",value:function(e){return Ee.post(zc,e)}},{key:"createLocation",value:function(e){return Ee.post(Xc,e)}},{key:"updateLocation",value:function(e){return Ee.post(Vc,e)}},{key:"getUpdateLocation",value:function(e){return Ee.get(qc+e)}},{key:"listTypeLocation",value:function(){return Ee.get(Wc)}},{key:"deleteLocationType",value:function(e){return Ee.post(Zc,e)}},{key:"createLocationType",value:function(e){return Ee.post(Yc,e)}},{key:"updateLocationType",value:function(e){return Ee.post(Qc,e)}},{key:"getUpdateLocationType",value:function(e){return Ee.get($c+e)}}]),e}(),ta=new ea,na=ta,ca=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).onDelete=function(e){c.setState({notiConfirm:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a !!",id:e})},c.answer=function(e){if(e){var t={id:c.state.id};na.deleteLocation(t).then((function(){c.setState({notiConfirm:""}),c.getData(),window.location.href="./location"})).catch((function(e){c.setState({notiMessage:"L\u1ed7i vui l\xf2ng b\u1ea1n th\u1eed l\u1ea1i sau !!"}),console.log(e)}))}else c.setState({notiConfirm:""})},c.state={id:"",list_location:[],notiConfirm:"",list_type_location:[]},c}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this,t=[];t.push(na.listLocation()),t.push(na.listTypeLocation()),Promise.all(t).then((function(t){var n=Object(wn.a)(t,2),c=n[0],a=n[1],s=c.data,r=a.data;s.map((function(e){var t=r.find((function(t){return e.type===t.code}));return e.location_type_name=t?t.name:"NA",e})),e.setState({list_location:s,list_type_location:r})})).catch((function(t){e.setState({notiMessage:"L\u1ed7i vui l\xf2ng b\u1ea1n th\u1eed l\u1ea1i sau !!"}),console.log(t)}))}},{key:"render",value:function(){var e=this,t=this.state.list_location;this.state.list_location.sort((function(e,t){return e.code.localeCompare(t.code)}));var n=t.map((function(t,n){return Object(et.jsx)(Gc,{index:n,list_location:t,onDelete:e.onDelete},n)}));return Object(et.jsxs)(Hc.a,{className:"customCard mr-top-20",children:[Object(et.jsx)("div",{className:"titleLocation",children:Object(et.jsx)("h4",{className:"title-card-lg",children:"Qu\u1ea3n L\xfd Ph\xf2ng Ban"})}),Object(et.jsx)("div",{className:"addLocation",children:Object(et.jsx)(s.b,{to:"/app/location/create",children:Object(et.jsx)(Ze.a,{color:"primary",outline:!0,children:Object(et.jsx)("span",{className:"titleAddNew",children:"Th\xeam M\u1edbi"})})})}),Object(et.jsx)("div",{className:"tableManager",children:Object(et.jsxs)(qn.a,{className:"locationTable text-center",striped:!0,bordered:!0,children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"STT"}),Object(et.jsx)("th",{children:"Lo\u1ea1i Ph\xf2ng"}),Object(et.jsx)("th",{children:"M\xe3 Ph\xf2ng"}),Object(et.jsx)("th",{children:"T\xean Ph\xf2ng"}),Object(et.jsx)("th",{children:"Thao T\xe1c"})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:n})]})}),Object(et.jsx)(tt,{message:this.state.notiConfirm,answer:this.answer})]})}}]),n}(c.Component),aa=ca,sa=n(251),ra=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).onBack=function(){window.history.back()},c.onchange=function(e){c.setState(Object(f.a)({},e.target.name,e.target.value))},c.onSubmit=function(){var e=c.state,t=e.id,n=e.nameRoom,a=e.typeRoom,s=e.code;if(t){var r={id:t,name:n,location_type:a,code:s};na.updateLocation(r).then((function(e){200===e.status&&c.setState({notiMessage:"C\u1eadp nh\u1eadt th\xe0nh c\xf4ng"})})).catch((function(e){c.setState({notiMessage:"L\u1ed7i vui l\xf2ng b\u1ea1n th\u1eed l\u1ea1i sau !!"}),console.log(e)}))}else{var i={name:n,location_type:a,code:s};na.createLocation(i).then((function(){c.setState({notiMessage:"Th\xeam m\u1edbi th\xe0nh c\xf4ng"})})).catch((function(e){c.setState({notiMessage:"L\u1ed7i vui l\xf2ng b\u1ea1n th\u1eed l\u1ea1i sau !!"}),console.log(e)}))}},c.doneAlert=function(){c.state.notiMessage?window.history.back():c.setState({notiMessage:""})},c.state={id:"",code:"",nameRoom:"",typeRoom:"",notiMessage:"",dataType:[]},c}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;na.listTypeLocation().then((function(t){e.setState({dataType:t.data})})).catch((function(e){console.log(e)}));var t=this.props.match.params.id;t&&na.getUpdateLocation(t).then((function(t){var n=t.data;e.setState({id:n.id,nameRoom:n.name,typeRoom:n.location_type})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state,t=e.id,n=e.nameRoom,c=e.typeRoom,a=e.dataType,s=e.code,r=a.map((function(e,t){return Object(et.jsx)("option",{value:e.id,children:e.name},t)}));return Object(et.jsxs)("section",{className:"location",children:[Object(et.jsx)(Hc.a,{children:Object(et.jsx)(sn.a,{children:Object(et.jsxs)(rn.a,{xs:{size:8,offset:2},children:[Object(et.jsx)("div",{className:"titleNameRoom title-card-lg",children:Object(et.jsx)("h4",{children:""===t?"Th\xeam m\u1edbi ph\xf2ng ban":"C\u1eadp nh\u1eadt ph\xf2ng ban"})}),Object(et.jsxs)(sa.a,{className:"location_form",id:"location_form",children:[Object(et.jsxs)(Xn.a,{children:[Object(et.jsx)(Vn.a,{for:"code",children:"M\xe3 ph\xf2ng"}),Object(et.jsx)(Nn.a,{type:"text",name:"code",value:s,placeholder:"Nh\u1eadp m\xe3 ph\xf2ng",onChange:this.onchange})]}),Object(et.jsxs)(Xn.a,{children:[Object(et.jsx)(Vn.a,{for:"nameRoom",children:"T\xean ph\xf2ng"}),Object(et.jsx)(Nn.a,{type:"text",name:"nameRoom",value:n,placeholder:"Nh\u1eadp t\xean ph\xf2ng",onChange:this.onchange})]}),Object(et.jsxs)(Xn.a,{children:[Object(et.jsx)(Vn.a,{for:"type",children:"Ch\u1ecdn lo\u1ea1i ph\xf2ng"}),Object(et.jsxs)(Nn.a,{type:"select",name:"typeRoom",value:c,onChange:this.onchange,children:[Object(et.jsx)("option",{disable:"true",children:"Ch\u1ecdn Lo\u1ea1i Ph\xf2ng"}),r]})]}),Object(et.jsxs)("div",{className:"editLocation",children:[Object(et.jsx)(Ze.a,{color:"danger btnDanger",onClick:this.onBack,children:"H\u1ee7y B\u1ecf"}),"\xa0\xa0",Object(et.jsx)(Ze.a,{outline:!0,color:"primary",onClick:this.onSubmit,children:""===t?"Th\xeam m\u1edbi":"C\u1eadp nh\u1eadt"})]})]})]})})}),Object(et.jsx)(at,{message:this.state.notiMessage,done:this.doneAlert})]})}}]),n}(c.Component),ia=ra,oa=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).onBack=function(){window.history.back()},c.onchange=function(e){c.setState(Object(f.a)({},e.target.name,e.target.value))},c.onSubmit=function(){var e=c.state,t=e.id,n=e.code,a=e.nameRoom;if(t){var s={id:t,code:n,name:a};na.updateLocationType(s).then((function(){c.setState({notiMessage:"C\u1eadp nh\u1eadt th\xe0nh c\xf4ng"})})).catch((function(e){c.setState({notiMessage:"L\u1ed7i vui l\xf2ng th\u1eed l\u1ea1i sau !!"}),console.log(e)}))}else{var r={code:n,name:a};na.createLocationType(r).then((function(){c.setState({notiMessage:"Th\xeam m\u1edbi th\xe0nh c\xf4ng"})})).catch((function(e){c.setState({notiMessage:"L\u1ed7i vui l\xf2ng th\u1eed l\u1ea1i sau !!"}),console.log(e)}))}},c.doneAlert=function(){c.state.notiMessage?window.history.back():c.setState({notiMessage:""})},c.state={id:"",code:"",nameRoom:"",typeRoom:"",notiMessage:"",dataType:[]},c}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;t&&na.getUpdateLocationType(t).then((function(t){var n=t.data;e.setState({id:n.id,nameRoom:n.name,code:n.code})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state,t=e.id,n=e.code,c=e.nameRoom;return Object(et.jsxs)("section",{className:"location",children:[Object(et.jsx)(Hc.a,{children:Object(et.jsx)(sn.a,{children:Object(et.jsxs)(rn.a,{xs:{size:8,offset:2},children:[Object(et.jsx)("div",{className:"titleNameRoom",children:Object(et.jsx)("h2",{children:""===t?"Th\xeam m\u1edbi lo\u1ea1i ph\xf2ng ban":"C\u1eadp nh\u1eadt lo\u1ea1i ph\xf2ng ban"})}),Object(et.jsxs)(sa.a,{className:"location_form",id:"location_form",children:[Object(et.jsxs)(Xn.a,{children:[Object(et.jsx)(Vn.a,{for:"code",children:"M\xe3 lo\u1ea1i ph\xf2ng"}),Object(et.jsx)(Nn.a,{id:"code",type:"text",name:"code",value:n,placeholder:"Nh\u1eadp m\xe3 lo\u1ea1i ph\xf2ng",onChange:this.onchange})]}),Object(et.jsxs)(Xn.a,{children:[Object(et.jsx)(Vn.a,{for:"nameRoom",children:"T\xean lo\u1ea1i ph\xf2ng"}),Object(et.jsx)(Nn.a,{type:"text",name:"nameRoom",value:c,placeholder:"Nh\u1eadp t\xean lo\u1ea1i ph\xf2ng",onChange:this.onchange})]}),Object(et.jsx)(Ze.a,{color:"danger btnDanger",onClick:this.onBack,children:"H\u1ee7y B\u1ecf"}),Object(et.jsx)(Ze.a,{color:"success",onClick:this.onSubmit,children:""===t?"Th\xeam m\u1edbi":"C\u1eadp nh\u1eadt"})]})]})})}),Object(et.jsx)(at,{message:this.state.notiMessage,done:this.doneAlert})]})}}]),n}(c.Component),la=oa,da=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onDelete=function(t){e.props.onDelete(t)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.typeList,c=t.index;return Object(et.jsx)("tbody",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{scope:"row",children:c+1}),Object(et.jsx)("td",{children:n.code}),Object(et.jsx)("td",{children:n.name}),Object(et.jsx)("td",{children:Object(et.jsxs)("div",{className:"btnControl",children:[Object(et.jsx)(s.b,{to:"./type/".concat(n.id),className:"btn btn-primary btnPrimary",children:"S\u1eeda"}),Object(et.jsx)(Ze.a,{color:"danger",onClick:function(){return e.onDelete(n.id)},children:"X\xf3a"})]})})]})},c)}}]),n}(c.Component),ua=da,ha=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).onDelete=function(e){c.setState({notiConfirm:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a !!",id:e})},c.answer=function(e){if(e){var t={id:c.state.id};na.deleteLocationType(t).then((function(){c.setState({notiConfirm:""}),c.getData(),window.location.href="./type"})).catch((function(e){c.setState({notiMessage:"L\u1ed7i vui l\xf2ng b\u1ea1n th\u1eed l\u1ea1i sau !!"}),console.log(e)}))}else c.setState({notiConfirm:""})},c.state={id:"",typeList:[],notiConfirm:""},c}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;na.listTypeLocation().then((function(t){e.setState({typeList:t.data})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.typeList.map((function(t,n){return Object(et.jsx)(ua,{index:n,typeList:t,onDelete:e.onDelete},n)}));return Object(et.jsxs)(Hc.a,{children:[Object(et.jsx)("div",{className:"titleLocation",children:Object(et.jsx)("h1",{children:"Qu\u1ea3n L\xfd Lo\u1ea1i Ph\xf2ng Ban"})}),Object(et.jsx)("div",{className:"addLocation",children:Object(et.jsx)(s.b,{to:"/app/location/type/create",children:Object(et.jsx)(Ze.a,{color:"success",children:Object(et.jsx)("span",{className:"titleAddNew",children:"Th\xeam M\u1edbi"})})})}),Object(et.jsx)("div",{className:"tableManager",children:Object(et.jsxs)(qn.a,{hover:!0,bordered:!0,children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{width:"5%",children:"#"}),Object(et.jsx)("th",{width:"15%",children:"Lo\u1ea1i Ph\xf2ng"}),Object(et.jsx)("th",{width:"50%",children:"T\xean Ph\xf2ng"}),Object(et.jsx)("th",{width:"15%",children:"Thao T\xe1c"})]})}),t]})}),Object(et.jsx)(tt,{message:this.state.notiConfirm,answer:this.answer})]})}}]),n}(c.Component),ja=ha,ba=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.match.path;return Object(et.jsx)("div",{className:"Location",children:Object(et.jsxs)(r.d,{children:[Object(et.jsx)(r.b,{path:"".concat(e,"/type/create"),exact:!0,component:la}),Object(et.jsx)(r.b,{path:"".concat(e,"/type/:id"),exact:!0,component:la}),Object(et.jsx)(r.b,{path:"".concat(e,"/type"),exact:!0,component:ja}),Object(et.jsx)(r.b,{path:"".concat(e,"/create"),exact:!0,component:ia}),Object(et.jsx)(r.b,{path:"".concat(e,"/:id"),exact:!0,component:ia}),Object(et.jsx)(r.b,{path:"".concat(e),exact:!0,component:aa})]})})}}]),n}(c.Component),ma=ba,xa=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){return Object(et.jsx)("div",{className:"notAuthContainer",children:Object(et.jsx)("h4",{children:"B\u1ea1n kh\xf4ng c\xf3 quy\u1ec1n truy c\u1eadp t\xednh n\u0103ng n\xe0y"})})}}]),n}(c.Component),Oa=xa,pa=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.match.path;return Object(et.jsx)("div",{className:"org",children:Object(et.jsx)(r.d,{children:Object(et.jsx)(r.b,{exact:!0,path:"".concat(e,"/notauthorized"),component:Oa})})})}}]),n}(c.Component),fa=pa,va=n(26),ga="/service/service",ya="/location/list",Na="/location/service/location?id=",Sa="/service/step/create",Ca="/service/step/delete",_a="/location/service/add",Ta="/location/service/remove",wa="/service/step/update",ka="/service/service/update",Da="/service/service/discount",Ia=function(){function e(){if(Object(l.a)(this,e),e._instance)return e._instance;e._instance=this}return Object(b.a)(e,[{key:"postService",value:function(e){return Ee.post("".concat(ga,"/create"),e)}},{key:"getServiceList",value:function(){return Ee.get("".concat(ga,"/list"))}},{key:"getServiceById",value:function(e){return Ee.get("".concat(ga,"/get"),{id:e})}},{key:"delService",value:function(e){return Ee.post("".concat(ga,"/delete"),{id:e})}},{key:"editService",value:function(e){return Ee.post("".concat(ga,"/update"),e)}},{key:"getListLocation",value:function(){return Ee.get(ya)}},{key:"getLocationService",value:function(e){return Ee.get(Na+e)}},{key:"addStepService",value:function(e){return Ee.post(Sa,e)}},{key:"deleteStepService",value:function(e){return Ee.post(Ca,e)}},{key:"addLocationService",value:function(e){return Ee.post(_a,e)}},{key:"updateStepService",value:function(e){return Ee.post(wa,e)}},{key:"removeLocationService",value:function(e){return Ee.post(Ta,e)}},{key:"updatePriceDiscount",value:function(e){return Ee.post(Da,e)}},{key:"updatePriceService",value:function(e){return Ee.post(ka,e)}}]),e}(),La=new Ia,Ea=La,Pa="option",Ra=function(e){var t=e.serviceList,n=e.handleDelService,c=e.handleSelectService,a=e.handleSelectDiscount,r=e.handleConfirmPrice,i=e.handleCheckBox,o=e.serviceType;e.serviceChoice;return Object(et.jsxs)("div",{className:"customCard mt-3",children:[Object(et.jsxs)(Xn.a,{row:!0,children:[Object(et.jsxs)(rn.a,{sm:6,children:[Object(et.jsx)("h4",{className:"title-card-lg",children:"Qu\u1ea3n l\xfd d\u1ecbch v\u1ee5"}),Object(et.jsx)(s.b,{to:"/app/service/0",children:Object(et.jsx)(Ze.a,{color:"primary",outline:!0,className:"mb-3",children:"Th\xeam m\u1edbi d\u1ecbch v\u1ee5"})})]}),Object(et.jsxs)(rn.a,{sm:6,children:[Object(et.jsx)(Xn.a,{row:!0,className:"justify-content-md-end",children:Object(et.jsx)(rn.a,{sm:6,children:Object(et.jsx)("h4",{className:"title-card-lg ",children:"Chi\u1ebft kh\u1ea5u d\u1ecbch v\u1ee5"})})}),Object(et.jsx)(Xn.a,{row:!0,className:"justify-content-md-end",children:Object(et.jsx)(rn.a,{sm:6,children:Object(et.jsxs)(Nn.a,{type:"select",name:"type",id:"type",onChange:function(e){c(e)},children:[Object(et.jsx)("option",{value:"",children:"Ch\u1ecdn lo\u1ea1i d\u1ecbch v\u1ee5"}),Object(et.jsx)("option",{value:M,children:"X\xe9t nghi\u1ec7m"}),Object(et.jsx)("option",{value:R,children:"Kh\xe1m b\u1ec7nh"}),Object(et.jsx)("option",{value:F,children:"N\u1ed9i soi"}),Object(et.jsx)("option",{value:B,children:"Si\xeau \xe2m"}),Object(et.jsx)("option",{value:A,children:"X-Quang"}),Object(et.jsx)("option",{value:U,children:"C\u1ea5p c\u1ee9u"}),Object(et.jsx)("option",{value:Pa,children:"T\xf9y ch\u1ecdn DV"})]})})}),Object(et.jsx)(Xn.a,{row:!0,className:"justify-content-md-end",children:Object(et.jsx)(rn.a,{sm:6,children:Object(et.jsxs)(Nn.a,{type:"select",name:"type",id:"type",onChange:function(e){a(e)},children:[Object(et.jsx)("option",{value:"",children:"Ch\u1ecdn m\u1ee9c chi\u1ebft kh\u1ea5u"}),Object(et.jsx)("option",{value:"0",children:" Gi\xe1 g\u1ed1c"}),Object(et.jsx)("option",{value:"10",children:" 10%"}),Object(et.jsx)("option",{value:"20",children:" 20%"}),Object(et.jsx)("option",{value:"30",children:" 30%"}),Object(et.jsx)("option",{value:"40",children:" 40%"}),Object(et.jsx)("option",{value:"50",children:" 50%"}),Object(et.jsx)("option",{value:"60",children:" 60%"}),Object(et.jsx)("option",{value:"70",children:" 70%"}),Object(et.jsx)("option",{value:"80",children:" 80%"}),Object(et.jsx)("option",{value:"90",children:" 90%"}),Object(et.jsx)("option",{value:"100",children:" 100%"})]})})}),Object(et.jsx)(Xn.a,{row:!0,className:"justify-content-md-end",children:Object(et.jsx)(rn.a,{sm:2,children:Object(et.jsx)(Ze.a,{color:"primary",outline:!0,className:"m-2 ",onClick:function(){r()},children:"L\u01b0u"})})})]})]}),Object(et.jsxs)(qn.a,{className:"serviceListTable",hover:!0,bordered:!0,striped:!0,children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"STT"}),Object(et.jsx)("th",{children:"M\xe3 d\u1ecbch v\u1ee5"}),Object(et.jsx)("th",{children:"T\xean d\u1ecbch v\u1ee5"}),Object(et.jsx)("th",{children:"Lo\u1ea1i d\u1ecbch v\u1ee5"}),Object(et.jsx)("th",{className:"price",children:"Gi\xe1 khuy\u1ebfn m\u1ea1i"}),Object(et.jsx)("th",{className:"price",children:"Gi\xe1 g\u1ed1c"}),Object(et.jsx)("th",{children:"Thao t\xe1c"})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:t.map((function(e,t){return e.price==e.origin_price?Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{scope:"row",children:t+1}),Object(et.jsx)("td",{children:e.code}),o==Pa?Object(et.jsxs)("td",{children:[Object(et.jsx)(Nn.a,{className:"mr-10 p-2",type:"checkbox",value:e.id,onClick:function(e){i(e)}}),e.name]}):Object(et.jsx)("td",{children:e.name}),Object(et.jsxs)("td",{children:[e.type===M&&"X\xe9t nghi\u1ec7m",e.type===R&&"Kh\xe1m b\u1ec7nh",e.type===B&&"Si\xeau \xe2m",e.type===F&&"N\u1ed9i soi",e.type===A&&"Ch\u1ee5p X-Quang",e.type===U&&"C\u1ea5p c\u1ee9u"]}),Object(et.jsx)("td",{className:"price",children:e.price}),Object(et.jsx)("td",{className:"price",children:e.origin_price}),Object(et.jsxs)("td",{children:[Object(et.jsxs)(s.b,{to:"/app/service/".concat(e.id),children:[Object(et.jsx)(Ze.a,{color:"primary",className:"btn-sm",children:"S\u1eeda"})," "," "]}),Object(et.jsx)(Ze.a,{color:"danger",className:" btn-sm",onClick:function(){n(e)},children:"X\xf3a"})]})]},e.id):Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{scope:"row",children:t+1}),Object(et.jsx)("td",{children:e.code}),o==Pa?Object(et.jsxs)("td",{children:[Object(et.jsx)(Nn.a,{className:"mr-10 p-2",type:"checkbox",value:e.id,defaultChecked:!0,onClick:function(e){i(e)}}),e.name]}):Object(et.jsx)("td",{children:e.name}),Object(et.jsxs)("td",{children:[e.type===M&&"X\xe9t nghi\u1ec7m",e.type===R&&"Kh\xe1m b\u1ec7nh",e.type===B&&"Si\xeau \xe2m",e.type===F&&"N\u1ed9i soi",e.type===A&&"Ch\u1ee5p X-Quang",e.type===U&&"C\u1ea5p c\u1ee9u"]}),Object(et.jsxs)("td",{className:"price",children:[e.price," *"]}),Object(et.jsx)("td",{className:"price",style:{fontWeight:"bold"},children:e.origin_price}),Object(et.jsxs)("td",{children:[Object(et.jsxs)(s.b,{to:"/app/service/".concat(e.id),children:[Object(et.jsx)(Ze.a,{color:"primary",className:"btn-sm",children:"S\u1eeda"})," "," "]}),Object(et.jsx)(Ze.a,{color:"danger",className:" btn-sm",onClick:function(){n(e)},children:"X\xf3a"})]})]},e.id)}))})]})]})},Ma=function(e){var t=Object(c.useState)([]),n=Object(wn.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(null),i=Object(wn.a)(r,2),o=i[0],l=i[1],d=Object(c.useState)(""),u=Object(wn.a)(d,2),h=u[0],j=u[1],b=Object(c.useState)(""),m=Object(wn.a)(b,2),x=m[0],O=m[1],p=Object(c.useState)(""),f=Object(wn.a)(p,2),v=f[0],g=f[1],y=Object(c.useState)(""),N=Object(wn.a)(y,2),S=N[0],C=N[1],_=Object(c.useState)([]),T=Object(wn.a)(_,2),w=T[0],k=T[1],D=Object(c.useState)(!1),I=Object(wn.a)(D,2),L=I[0],E=I[1];Object(c.useEffect)((function(){Ea.getServiceList().then((function(e){s(e.data)})).catch((function(e){O("C\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i!")}))}),[L]);return Object(et.jsx)(c.Fragment,{children:Object(et.jsxs)("div",{className:"container",children:[Object(et.jsx)(tt,{message:h,answer:function(e){e?Ea.delService(o).then((function(){l(null),j(""),O("B\u1ea1n \u0111\xe3 c\u1eadp nh\u1eadt th\xe0nh c\xf4ng!"),E(!L)})).catch((function(e){O("C\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i!"),console.log(e)})):j("")}}),Object(et.jsx)(at,{message:x,done:function(){O("")}}),Object(et.jsx)(Ra,{serviceList:a,handleDelService:function(e){l(e.id),j("B\u1ea1n c\xf3 mu\u1ed1n x\xf3a d\u1ecbch v\u1ee5 ".concat(e.name,"?"))},handleConfirmPrice:function(){if(v===Pa){var e=[];w.forEach((function(t){a.forEach((function(n){if(t==n.id){var c={id:n.id,price:1e3*Math.ceil(n.origin_price*(1-.01*S)*.001)};e.push(c)}}))}));var t=e.map((function(e){return Ea.updatePriceService(e)}));Promise.all(t).then((function(){O("B\u1ea1n \u0111\xe3 c\u1eadp nh\u1eadt th\xe0nh c\xf4ng!"),E(!L)})).catch((function(e){console.log(e),O("C\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i!")}))}else{var n={type:v,discount:parseInt(S)};Ea.updatePriceDiscount(n).then((function(){O("B\u1ea1n \u0111\xe3 c\u1eadp nh\u1eadt th\xe0nh c\xf4ng!"),E(!L)})).catch((function(e){O("C\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i!")}))}},handleCheckBox:function(e){if(1==e.target.checked)k((function(t){return[].concat(Object(va.a)(t),[e.target.value])}));else{var t=Object(va.a)(w);t.splice(w.indexOf(e.target.value),1),k(t)}},handleSelectService:function(e){g(e.target.value)},handleSelectDiscount:function(e){C(e.target.value)},serviceType:v,serviceChoice:w,children:" "})]})})},Ba=function(e){var t=Object(r.g)().id,n=Object(c.useState)([]),a=Object(wn.a)(n,2),s=a[0],i=a[1];Object(c.useEffect)((function(){Ea.getServiceList().then((function(e){i(e.data)})).catch((function(e){k("C\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i!")}))}),[]);var o=Object(c.useState)({code:"",name:"",origin_price:0,type:"",steps:[]}),l=Object(wn.a)(o,2),d=l[0],u=l[1],b=Object(c.useState)({service_id:t,unit:"",name:"",value:"",device:""}),m=Object(wn.a)(b,2),x=(m[0],m[1]),O=Object(c.useState)(""),p=Object(wn.a)(O,2),v=p[0],g=p[1],y=Object(c.useState)([]),N=Object(wn.a)(y,2),S=N[0],C=N[1],_=Object(c.useState)(""),T=Object(wn.a)(_,2),w=T[0],k=T[1],D=Object(c.useState)([]),I=Object(wn.a)(D,2),L=I[0],E=I[1],P=Object(c.useState)([]),H=Object(wn.a)(P,2),K=H[0],G=H[1],J=Object(c.useState)(-1),X=Object(wn.a)(J,2),V=X[0],q=X[1],z=function(e){e.sort((function(e,t){return e.code.localeCompare(t.code)}));var t=e.map((function(e){return e.code})),n=t[t.length-1].substr(0,2),c=t[t.length-1].substr(2);return n+je(parseInt(c)+1,"service")},W=function(e){var t=e.target,n=t.name,c=t.value;if("origin_price"==n&&(d.origin_price=e.target.value),e.target.value===R){var a=s.filter((function(e){return e.type===R}));d.code=z(a),d.type=R}else if(e.target.value===M){var r=s.filter((function(e){return e.type===M}));d.code=z(r),d.type=M}else if(e.target.value===F){var i=s.filter((function(e){return e.type===F}));d.code=z(i),d.type=F}else if(e.target.value===A){var o=s.filter((function(e){return e.type===A}));d.code=z(o),d.type=A}else if(e.target.value===B){var l=s.filter((function(e){return e.type===B}));d.code=z(l),d.type=B}else if(e.target.value===U){var h=s.filter((function(e){return e.type===U}));d.code=z(h),d.type=U}d.origin_price&&(d.origin_price=parseInt(d.origin_price),d.price=d.origin_price),console.log(d),u((function(e){return Object(vn.a)(Object(vn.a)({},e),{},Object(f.a)({},n,c))}))};Object(c.useEffect)((function(){"0"!==t&&(Y(),Q()),$()}),[]);var Y=function(){var e=Object(j.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ea.getServiceById(t);case 2:n=e.sent,u(n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){Ea.getLocationService(t).then((function(e){e.data.forEach((function(e){e.type="old",L.push(e.id),E(Object(va.a)(L))}))})).catch((function(e){return console.log(e)}))},$=function(){Ea.getListLocation().then((function(e){G(e.data)})).catch((function(e){return console.log(e)}))};return Object(et.jsx)(c.Fragment,{children:Object(et.jsxs)("div",{className:"container",children:[Object(et.jsx)(tt,{message:v,answer:function(e){e?Ea.deleteStepService({id:S[1]}).then((function(e){d.steps.splice(S[0],1),u(Object(vn.a)({},d)),S.splice(0,2),C(S),g(""),k("X\xf3a th\xe0nh c\xf4ng!")})).catch((function(e){console.log(e),k("X\xf3a th\u1ea5t b\u1ea1i!")})):(g(""),S.splice(0,2),C(S))}}),Object(et.jsx)(at,{message:w,done:function(){k(""),0===V&&(u({code:"",name:"",origin_price:0,type:"",steps:[]}),x({service_id:t,unit:"",name:"",value:"",device:""}),E([])),1===V&&window.history.back()}}),Object(et.jsx)("h4",{className:"title-card-lg",children:"0"!==t?"Ch\u1ec9nh s\u1eeda d\u1ecbch v\u1ee5":"Th\xeam m\u1edbi d\u1ecbch v\u1ee5"}),Object(et.jsxs)(sa.a,{children:[Object(et.jsxs)(Xn.a,{row:!0,children:[Object(et.jsx)(Vn.a,{for:"name",sm:2,children:"T\xean d\u1ecbch v\u1ee5"}),Object(et.jsx)(rn.a,{sm:10,children:Object(et.jsx)(Nn.a,{type:"email",name:"name",id:"name",placeholder:"Nh\u1eadp t\xean d\u1ecbch v\u1ee5",value:d.name,onChange:function(e){return W(e)}})})]}),Object(et.jsxs)(Xn.a,{row:!0,children:[Object(et.jsx)(Vn.a,{for:"price",sm:2,children:"Gi\xe1 g\u1ed1c"}),Object(et.jsx)(rn.a,{sm:10,children:Object(et.jsx)(Nn.a,{type:"text",name:"origin_price",id:"origin_price",placeholder:"Nh\u1eadp gi\xe1 d\u1ecbch v\u1ee5",value:d.origin_price,onChange:function(e){return W(e)}})})]}),Object(et.jsxs)(Xn.a,{row:!0,children:[Object(et.jsx)(Vn.a,{for:"type",sm:2,children:"Lo\u1ea1i d\u1ecbch v\u1ee5"}),Object(et.jsx)(rn.a,{sm:10,children:Object(et.jsxs)(Nn.a,{type:"select",name:"type",id:"type",value:d.type,onChange:function(e){return W(e)},children:[Object(et.jsx)("option",{disabled:!0,value:"",children:"Ch\u1ecdn lo\u1ea1i d\u1ecbch v\u1ee5"}),Object(et.jsx)("option",{value:M,children:"X\xe9t nghi\u1ec7m"}),Object(et.jsx)("option",{value:R,children:"Kh\xe1m b\u1ec7nh"}),Object(et.jsx)("option",{value:F,children:"N\u1ed9i soi"}),Object(et.jsx)("option",{value:B,children:"Si\xeau \xe2m"}),Object(et.jsx)("option",{value:A,children:"X-Quang"}),Object(et.jsx)("option",{value:U,children:"C\u1ea5p c\u1ee9u"})]})})]}),Object(et.jsxs)(Xn.a,{row:!0,children:[Object(et.jsx)(Vn.a,{sm:2,children:"Ch\u1ecdn ph\xf2ng"}),Object(et.jsx)(rn.a,{sm:10,className:"checkbox-location",children:K.map((function(e){return Object(et.jsx)(Ze.a,{onClick:function(){return function(e){var n=L.indexOf(e);n<0?(L.push(e),"0"!==t&&Ea.addLocationService({service_id:t,location_id:e})):(L.splice(n,1),"0"!==t&&Ea.removeLocationService({service_id:t,location_id:e})),E(Object(va.a)(L))}(e.id)},active:L.includes(e.id),children:e.name})}))})]}),Object(et.jsxs)("div",{className:"addControl pb-50",children:[" ",Object(et.jsx)(Ze.a,{color:"primary",outline:!0,onClick:function(){"0"===t?Ea.postService(d).then((function(e){var t={service_id:e.data.id,steps:d.steps},n=[];d.type===M&&n.push(Ea.addStepService(t)),L.forEach((function(t){var c={location_id:t,service_id:e.data.id};n.push(Ea.addLocationService(c))})),Promise.all(n).then((function(e){k("Th\xeam m\u1edbi d\u1ecbch v\u1ee5 th\xe0nh c\xf4ng!"),q(0)})).catch((function(e){console.log(e),k("C\xf3 l\u1ed7i khi th\xeam tr\u01b0\u1eddng d\u1eef li\u1ec7u!")}))})).catch((function(e){console.log(e),k("C\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i!")})):Ea.editService(d).then((function(e){var n=[],c=[];d.steps.forEach((function(e){if("new"===e.type)delete e.type,n.push(e);else if("update"===e.type){delete e.type;var a={id:e.id,service_id:t,name:e.name,unit:e.unit,device:e.device,value:e.value};c.push(Ea.updateStepService(a))}}));var a={service_id:t,steps:n};c.push(Ea.addStepService(a)),Promise.all(c).then((function(e){k("C\u1eadp nh\u1eadt d\u1ecbch v\u1ee5 th\xe0nh c\xf4ng!"),q(1)})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))},children:"0"!==t?"C\u1eadp nh\u1eadt":"Th\xeam m\u1edbi"})]})]})]})})},Aa="/service/policy",Fa=function(){function e(){if(Object(l.a)(this,e),e._instance)return e._instance;e._instance=this}return Object(b.a)(e,[{key:"postPricePolicy",value:function(e){return Ee.post("".concat(Aa,"/create"),e)}},{key:"getPricePolicyList",value:function(){return Ee.get("".concat(Aa,"/list"))}},{key:"getPricePolicyById",value:function(e){return Ee.get("".concat(Aa,"/get"),{id:e})}},{key:"delPricePolicy",value:function(e){return Ee.post("".concat(Aa,"/delete"),{id:e})}},{key:"editPricePolicy",value:function(e){return Ee.post("".concat(Aa,"/update"),e)}}]),e}(),Ua=new Fa,Ha=Ua,Ka=function(e){var t=e.policyPriceList,n=e.handleDelPolicyPrice;return Object(et.jsxs)(qn.a,{hover:!0,bordered:!0,children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"STT"}),Object(et.jsx)("th",{children:"M\xe3 ch\xednh s\xe1ch"}),Object(et.jsx)("th",{children:"T\xean ch\xednh s\xe1ch"}),Object(et.jsx)("th",{children:"Gi\u1ea3m gi\xe1"}),Object(et.jsx)("th",{children:"Thao t\xe1c"})]})}),Object(et.jsx)("tbody",{children:t.map((function(e,t){return Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{scope:"row",children:t+1}),Object(et.jsx)("td",{children:e.code}),Object(et.jsx)("td",{children:e.name}),Object(et.jsxs)("td",{children:[100*e.discount," %"]}),Object(et.jsxs)("td",{children:[Object(et.jsx)(s.b,{to:"/app/service/price-policy/".concat(e.id),children:Object(et.jsx)(Ze.a,{color:"primary",className:"mr-2",children:"S\u1eeda"})}),Object(et.jsx)(Ze.a,{color:"danger",onClick:function(){n(e.id)},children:"X\xf3a"})]})]},e.id)}))})]})},Ga=function(e){var t=Object(c.useState)([]),n=Object(wn.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)(null),o=Object(wn.a)(i,2),l=o[0],d=o[1],u=Object(c.useState)(""),b=Object(wn.a)(u,2),m=b[0],x=b[1],O=Object(c.useState)(""),p=Object(wn.a)(O,2),f=p[0],v=p[1];Object(c.useEffect)((function(){g()}),[]);var g=function(){var e=Object(j.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ha.getPricePolicyList();case 2:t=e.sent,r(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(et.jsx)(c.Fragment,{children:Object(et.jsxs)("div",{className:"container",children:[Object(et.jsx)(tt,{message:m,answer:function(e){var t;e?(t=l,Ha.delPricePolicy(t)).then((function(){d(null),x(""),v("B\u1ea1n \u0111\xe3 c\u1eadp nh\u1eadt th\xe0nh c\xf4ng!");var e=Object(va.a)(a),t=e.findIndex((function(e){return e.id==l}));e.splice(t,1),r(e)})).catch((function(e){v("C\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i!"),console.log(e)})):x("")}}),Object(et.jsx)(at,{message:f,done:function(){v("")}}),Object(et.jsx)("h2",{className:"py-3",children:"Qu\u1ea3n l\xfd ch\xednh s\xe1ch gi\xe1"}),Object(et.jsx)(s.b,{to:"/app/service/price-policy/0",children:Object(et.jsx)(Ze.a,{color:"success",className:"mb-3",children:"Th\xeam m\u1edbi ch\xednh s\xe1ch gi\xe1"})}),Object(et.jsx)(Ka,{policyPriceList:a,handleDelPolicyPrice:function(e){d(e),x("B\u1ea1n c\xf3 mu\u1ed1n x\xf3a d\u1ecbch v\u1ee5 n\xe0y?")}})]})})},Ja=function(e){var t=Object(r.g)().id,n=Object(c.useState)({code:"",name:"",discount:"",type:"xn"}),a=Object(wn.a)(n,2),i=a[0],o=a[1],l=Object(c.useState)(""),d=Object(wn.a)(l,2),u=d[0],b=d[1],m=Object(c.useState)(""),x=Object(wn.a)(m,2),O=x[0],p=x[1],v=function(e){var t=e.target,n=t.name,c=t.value;o((function(e){return Object(vn.a)(Object(vn.a)({},e),{},Object(f.a)({},n,c))}))};Object(c.useEffect)((function(){"0"!==t&&g()}),[]);var g=function(){var e=Object(j.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ha.getPricePolicyById(t);case 2:n=e.sent,o(n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){"0"===t?function(){var e=Object(vn.a)(Object(vn.a)({},i),{},{discount:i.discount/100});return Ha.postPricePolicy(e)}().then((function(){p("Th\xeam m\u1edbi ch\xednh s\xe1ch gi\xe1 th\xe0nh c\xf4ng!")})).catch((function(e){console.log(e),p("C\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i!")})):b("B\u1ea1n \u0111\u1ed3ng \xfd c\u1eadp nh\u1eadt l\u1ea1i ch\xednh s\xe1ch gi\xe1 ?")};return Object(et.jsx)(c.Fragment,{children:Object(et.jsxs)("div",{className:"container",children:[Object(et.jsx)(tt,{message:u,answer:function(e){e?function(){var e=Object(vn.a)(Object(vn.a)({},i),{},{discount:i.discount/100});return Ha.editPricePolicy(e)}().then((function(){b(""),p("B\u1ea1n \u0111\xe3 c\u1eadp nh\u1eadt th\xe0nh c\xf4ng!")})).catch((function(e){p("C\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i!")})):b("")}}),Object(et.jsx)(at,{message:O,done:function(){p("")}}),Object(et.jsx)("h2",{className:"py-3",children:"0"!==t?"Ch\u1ec9nh s\u1eeda ch\xednh s\xe1ch gi\xe1":"Th\xeam m\u1edbi ch\xednh s\xe1ch gi\xe1"}),Object(et.jsxs)(sa.a,{children:[Object(et.jsxs)(Xn.a,{row:!0,children:[Object(et.jsx)(Vn.a,{for:"name",sm:2,children:"T\xean ch\xednh s\xe1ch"}),Object(et.jsx)(rn.a,{sm:10,children:Object(et.jsx)(Nn.a,{type:"email",name:"name",id:"name",placeholder:"Nh\u1eadp t\xean ch\xednh s\xe1ch",value:i.name,onChange:function(e){return v(e)}})})]}),Object(et.jsxs)(Xn.a,{row:!0,children:[Object(et.jsx)(Vn.a,{for:"code",sm:2,children:"M\xe3 ch\xednh s\xe1ch"}),Object(et.jsx)(rn.a,{sm:10,children:Object(et.jsx)(Nn.a,{type:"text",name:"code",id:"code",placeholder:"Nh\u1eadp m\xe3 ch\xednh s\xe1ch",value:i.code,onChange:function(e){return v(e)}})})]}),Object(et.jsxs)(Xn.a,{row:!0,children:[Object(et.jsx)(Vn.a,{for:"discount",sm:2,children:"Ph\u1ea7n tr\u0103m gi\u1ea3m gi\xe1"}),Object(et.jsx)(rn.a,{sm:10,children:Object(et.jsx)(Nn.a,{type:"number",name:"discount",id:"discount",placeholder:"Nh\u1eadp % gi\u1ea3m gi\xe1",value:i.discount,onChange:function(e){return v(e)}})})]}),Object(et.jsx)(sn.a,{children:Object(et.jsxs)(rn.a,{sm:{size:10,offset:2},children:[Object(et.jsx)(s.b,{to:"/app/service/price-policy",children:Object(et.jsx)(Ze.a,{className:"mr-2",children:"Quay l\u1ea1i"})}),Object(et.jsx)(Ze.a,{color:"success",onClick:function(){return y()},children:"0"!==t?"C\u1eadp nh\u1eadt":"Th\xeam m\u1edbi"})]})})]})]})})},Xa=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.match.path;return Object(et.jsx)("div",{className:"Service",children:Object(et.jsxs)(r.d,{children:[Object(et.jsx)(r.b,{path:"".concat(e,"/price-policy/:id"),component:Ja}),Object(et.jsx)(r.b,{path:"".concat(e,"/price-policy"),component:Ga}),Object(et.jsx)(r.b,{path:"".concat(e,"/:id"),component:Ba}),Object(et.jsx)(r.b,{path:"".concat(e),component:Ma})]})})}}]),n}(c.Component),Va=Xa,qa="/org/user/list",za="/org/user/create",Wa="/org/user/update?id=",Ya="/org/user/get?id=",Qa="/org/user/delete?id=",$a="/auth/user/set_password",Za="/org/org/list",es=function(){function e(){if(Object(l.a)(this,e),e._instance)return e._instance;e._instance=this}return Object(b.a)(e,[{key:"getListUser",value:function(){return Ee.get(qa)}},{key:"getDeleteUser",value:function(e){return Ee.post(Qa+e)}},{key:"postCreateUser",value:function(e){return Ee.post(za,e)}},{key:"postEditUser",value:function(e,t){return Ee.post(Wa+e,t)}},{key:"getEditUser",value:function(e){return Ee.get(Ya+e)}},{key:"getListOrg",value:function(){return Ee.get(Za)}},{key:"postUpdatePassword",value:function(e){return Ee.post($a,e)}}]),e}(),ts=new es,ns=ts,cs=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).onHandleChange=function(e){var t=e.target.name,n=e.target.value;c.setState(Object(f.a)({},t,n))},c.onHandleCheckBox=function(e){1==e.target.checked?c.state.setRole.push(e.target.value):c.state.setRole.splice(c.state.setRole.indexOf(e.target.value),1)},c.onSubmit=function(){"create"!==c.props.match.params.id?c.setState({confirmMessage:"B\u1ea1n mu\u1ed1n c\u1eadp nh\u1eadp th\xf4ng tin n\xe0y kh\xf4ng ?"}):c.setState({confirmMessage:"B\u1ea1n mu\u1ed1n th\xeam m\u1edbi th\xe0nh vi\xean n\xe0y kh\xf4ng ?"})},c.onSelectGender=function(e){var t=e.target.value;c.setState({gender:t})},c.answer=function(e){console.log(c.state.gender,"92");var t=c.props.match.params.id,n=c.state,a=n.full_name,s=n.username,r=n.phone,i=n.org_id,o=n.birthday,l=n.gender,d=n.roles,u=n.setRole,h={};if(h=me(u.sort(),d.sort())?{full_name:a,username:s,phone:r,org_id:i,birthday:o,gender:l}:{full_name:a,username:s,phone:r,org_id:i,birthday:o,gender:l,roles:u},e){var j="create"!==t?ns.postEditUser(t,h):ns.postCreateUser(h),b="create"!==t?"C\u1eadp nh\xe2t th\xe0nh c\xf4ng":"T\u1ea1o m\u1edbi th\xe0nh c\xf4ng";j.then((function(e){200===e.status&&c.setState({notiMessage:b})}))}else c.setState({confirmMessage:""})},c.doneAlret=function(){c.state.notiMessage?window.location.replace("/app/user"):c.setState({notiMessage:""})},c.onCancel=function(){window.location.assign("/app/user")},c.state={username:"",org_id:"",full_name:"",roles:[],phone:"",birthday:"",gender:"",listOrg:[],listRole:[],setRole:[],confirmMessage:""},c}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;"create"!==t&&ns.getEditUser(t).then((function(t){var n,c=t.data,a=c.full_name,s=c.username,r=c.org_id,i=c.phone,o=c.birthday,l=c.roles,d=c.gender,u=l.map((function(e){return e}));e.setState((n={full_name:a,username:s,org_id:r,phone:i,roles:l,birthday:o,gender:d},Object(f.a)(n,"roles",l),Object(f.a)(n,"setRole",u),n))})).catch((function(e){console.log(e)})),ns.getListOrg().then((function(t){e.setState({listOrg:t.data,org_id:t.data[0].id})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.full_name,c=t.username,a=t.roles,r=t.phone,i=(t.org_id,t.birthday),o=(t.listOrg,t.gender,this.props.match.params.id);return Object(et.jsxs)("div",{className:"addUpdate ",children:[Object(et.jsx)("h4",{className:"text-center title-card-lg",children:"create"!==o?"C\u1eadp nh\u1eadp th\xf4ng tin th\xe0nh vi\xean":"T\u1ea1o m\u1edbi nh\xe2n vi\xean"}),Object(et.jsxs)(sa.a,{style:{width:"700px",margin:"40px auto"},onSubmit:this.onHandleSubmit,children:[Object(et.jsx)(sn.a,{form:!0,children:Object(et.jsx)(rn.a,{children:Object(et.jsxs)(Xn.a,{sm:6,children:[Object(et.jsx)(Vn.a,{for:"first_name",children:"H\u1ecd T\xean"}),Object(et.jsx)(Nn.a,{type:"text",className:"full_name",name:"full_name",value:n,onChange:function(t){return e.onHandleChange(t)}})]})})}),Object(et.jsxs)(Xn.a,{children:[Object(et.jsx)(Vn.a,{for:"username",children:"T\xean t\xe0i kho\u1ea3n"}),Object(et.jsx)(Nn.a,{readOnly:"create"!==o,type:"text",className:"username",name:"username",value:c,onChange:function(t){return e.onHandleChange(t)}})]}),Object(et.jsxs)(Xn.a,{children:[Object(et.jsx)(Vn.a,{for:"phone",children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),Object(et.jsx)(Nn.a,{type:"text",className:"phone",name:"phone",value:r,onChange:function(t){return e.onHandleChange(t)}})]}),Object(et.jsxs)(Xn.a,{children:[Object(et.jsx)(Vn.a,{for:"birthday",children:"Ng\xe0y sinh"}),Object(et.jsx)("input",{type:"date",className:"birthday form-control",name:"birthday",min:"01-04-1890",max:"01-04-2050",value:i,onChange:function(t){return e.onHandleChange(t)},required:"required"})]}),Object(et.jsxs)(Xn.a,{children:[Object(et.jsx)(Vn.a,{for:"birthday",children:"Gi\u1edbi t\xednh"}),Object(et.jsxs)(Nn.a,{type:"select",name:"gender",id:"gender",onChange:function(t){return e.onSelectGender(t)},children:[Object(et.jsx)("option",{value:"",children:"Ch\u1ecdn gi\u1edbi t\xednh"}),Object(et.jsx)("option",{value:"male",children:"Nam"}),Object(et.jsx)("option",{value:"female",children:"N\u1eef"})]})]}),!1===this.state.roles.includes(g.ADMIN.value)?Object(et.jsxs)(Xn.a,{children:[Object(et.jsx)(Vn.a,{for:"position",children:"Vai tr\xf2"}),Object(et.jsx)(sn.a,{sm:4,children:Object.values(g).map((function(t,n){if(t.value!==g.ADMIN.value)return Object(et.jsx)("div",{children:Object(et.jsxs)(rn.a,{sm:12,children:[Object(et.jsx)(Vn.a,{sm:9,className:"mt-1",for:"position",children:t.name}),Object(et.jsx)(Nn.a,{sm:3,className:"mt-3",type:"checkbox",value:t.value,defaultChecked:a.find((function(e){return e==t.value})),onClick:function(t){return e.onHandleCheckBox(t)}},n)]})})}))})]}):null,Object(et.jsxs)("div",{className:"addControl",children:[Object(et.jsx)(Ze.a,{outline:!0,color:"primary",onClick:this.onSubmit,children:"create"!==o?"C\u1eadp nh\u1eadp":"Th\xeam m\u1edbi"})," ",Object(et.jsx)(s.a,{to:"../user/",children:Object(et.jsx)(Ze.a,{color:"danger",onClick:this.onCancel,children:"H\u1ee7y"})})]})]}),Object(et.jsx)(tt,{message:this.state.confirmMessage,answer:this.answer}),Object(et.jsx)(at,{message:this.state.notiMessage,done:this.doneAlret})]})}}]),n}(c.Component),as=(n(212),function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onDelete=function(t){t=e.props.user.id,e.props.onDelete(t)},e.edit=function(e){var t="/app/user/"+e;window.location.assign(t)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props.user,n=this.props.user,a=n.id,s=n.full_name,r=n.username,i=n.roles,o=n.phone,l=n.birthday,d=new Date(t.ctime).toLocaleDateString("en-gb",{day:"2-digit",month:"2-digit",year:"numeric"}).split("/"),u=Object.values(g).map((function(e){return e})),h=i.map((function(e){return u.find((function(t){if(t.value==e)return t.name}))}));return Object(et.jsx)(c.Fragment,{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{className:"dw-5",scope:"row",children:this.props.index+1}),Object(et.jsx)("td",{width:"10%",children:r}),Object(et.jsx)("td",{children:s}),Object(et.jsxs)("td",{children:[null===h||void 0===h?void 0:h.map((function(e){return e===h[(null===h||void 0===h?void 0:h.length)-1]?null===e||void 0===e?void 0:e.name:(null===e||void 0===e?void 0:e.name)+" - "}))," "]}),Object(et.jsx)("td",{children:"".concat(d[0],"-").concat(d[1],"-").concat(d[2])}),Object(et.jsx)("td",{children:o}),Object(et.jsx)("td",{children:be(l,"DDMMYYYY")}),Object(et.jsxs)("td",{width:"15%",children:[Object(et.jsx)(Ze.a,{outline:!0,color:"primary",className:"btn-sm",onClick:function(){return e.edit(t.id)},children:Object(et.jsx)("span",{children:"S\u1eeda"})})," ",Object(et.jsx)(Ze.a,{color:"danger",className:"btn-sm",onClick:this.onDelete,children:"X\xf3a"})," ",Me.isRole(g.ADMIN.value)?Object(et.jsx)(Ze.a,{outline:!0,color:"primary",className:"btn-sm",onClick:function(){return window.location.assign("/app/user/setpassword/".concat(a))},children:"\u0110\u1ed5i m\u1eadt kh\u1ea9u"}):null]})]})})}}]),n}(c.Component)),ss=as,rs=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).state={id:"",confirmMessage:"",notiMessage:""},c}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props.userList.map((function(t,n){return Object(et.jsx)(ss,{user:t,index:n,onDelete:e.props.onDelete},t.id)}));return Object(et.jsx)("div",{className:"table-responsive min-h-100 df-h-75",children:Object(et.jsxs)("table",{className:"table table-head-fixed table-bordered",children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{className:"dw-5",children:"STT"}),Object(et.jsx)("th",{children:"T\xean \u0110\u0103ng Nh\u1eadp"}),Object(et.jsx)("th",{children:"T\xean Ng\u01b0\u1eddi d\xf9ng"}),Object(et.jsx)("th",{children:"Vai tr\xf2"}),Object(et.jsx)("th",{children:"Ng\xe0y B\u1eaft \u0110\u1ea7u"}),Object(et.jsx)("th",{children:"S\u1ed1 \u0110i\u1ec7n Tho\u1ea1i"}),Object(et.jsx)("th",{children:"Ng\xe0y sinh"}),Object(et.jsx)("th",{children:"T\xf9y Ch\u1ec9nh"})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:t})]})})}}]),n}(c.Component),is=rs,os=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).componentDidMount=function(){c.getUserList()},c.getUserList=function(){ns.getListUser().then((function(e){c.setState({userList:e.data})})).catch((function(e){console.log(e)}))},c.onDelete=function(e){c.setState({id:e,confirmMessage:"B\u1ea1n mu\u1ed1n x\xf3a th\xf4ng tin ng\u01b0\u1eddi d\xf9ng n\xe0y kh\xf4ng"})},c.answer=function(e){if(e){var t=c.state.id;ns.getDeleteUser(t).then((function(e){200===e.status&&c.setState({notiMessage:"B\u1ea1n x\xf3a th\xe0nh c\xf4ng"})})),c.getUserList()}c.props.history.push("/app/user"),c.setState({confirmMessage:""})},c.doneAlret=function(){c.state.notiMessage&&(window.history.back(),c.getUserList()),c.setState({notiMessage:""})},c.onChangeSearch=function(e){c.setState({textFilter:e.target.value})},c.createUser=function(){c.props.history.push("/app/user/create")},c.state={userList:[],id:"",confirmMessage:"",notiMessage:"",textFilter:""},c}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.textFilter,c=t.userList;return n&&(c=c.filter((function(e){return-1!==e.username.toLowerCase().indexOf(n)}))),Object(et.jsxs)(rn.a,{xs:{size:"10",offset:"1"},className:"Main customCard mr-top-20",children:[Object(et.jsx)("h4",{className:"title-card-lg",children:"Qu\u1ea3n l\xfd nh\xe2n vi\xean"}),Object(et.jsxs)(sn.a,{className:"search-user",children:[Object(et.jsx)(Ze.a,{onClick:function(){return e.createUser()},children:Object(et.jsx)("span",{children:"Th\xeam m\u1edbi"})}),Object(et.jsx)("div",{className:"search",children:Object(et.jsx)(Nn.a,{type:"text",placeholder:"T\xecm ki\u1ebfm t\xe0i kho\u1ea3n",value:this.state.value,onChange:this.onChangeSearch})})]}),Object(et.jsx)(is,{userList:c,onDelete:this.onDelete}),Object(et.jsx)(tt,{message:this.state.confirmMessage,answer:this.answer}),Object(et.jsx)(at,{message:this.state.notiMessage,done:this.doneAlret})]})}}]),n}(c.Component),ls=os,ds=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).onChangeNewPw=function(e){var t=e.target.value;t.length<6?c.setState({err:ie+" 5",newPassword:t}):c.setState({newPassword:t,err:""})},c.onChangeCfPw=function(e){c.setState({confirmPassword:e.target.value})},c.onSubmit=function(){var e=c.state,t=e.newPassword,n=e.confirmPassword;""===e.err&&(t!==n?c.setState({err:ue}):c.setState({confirmMessage:"B\u1ea1n mu\u1ed1n c\u1eadp nh\u1eadp l\u1ea1i m\u1eadt kh\u1ea9u?"}))},c.answer=function(e){var t=c.props.match.params.id;if(e){var n={id:t,password:c.state.newPassword};ns.postUpdatePassword(n).then((function(e){c.setState({notiMessage:"C\u1eadp nh\u1eadt th\xe0nh c\xf4ng!"})})).catch((function(e){c.setState({notiMessage:"C\u1eadp nh\u1eadt m\u1eadt kh\u1ea9u th\u1ea5t b\u1ea1i!"}),console.log(e)}))}else c.setState({confirmMessage:""})},c.doneAlert=function(){c.state.notiMessage?window.history.back():c.setState({notiMessage:""})},c.onCancel=function(){window.history.back()},c.state={username:"",full_name:" ",confirmPassword:"",newPassword:"",confirmMessage:"",err:""},c}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;t&&ns.getEditUser(t).then((function(t){var n=t.data;e.setState({full_name:n.full_name,username:n.username})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state,t=e.full_name,n=e.username,c=e.confirmPassword,a=e.newPassword,s=e.err;return Object(et.jsxs)("div",{className:"addUpdate ",children:[Object(et.jsx)("h4",{className:"text-center title-card-lg",children:"C\u1eadp nh\u1eadp m\u1eadt kh\u1ea9u"}),Object(et.jsxs)(sa.a,{style:{width:"500px",margin:"40px auto"},children:[Object(et.jsx)(sn.a,{form:!0,children:Object(et.jsx)(rn.a,{children:Object(et.jsxs)(Xn.a,{sm:6,children:[Object(et.jsx)(Vn.a,{for:"full_name",children:"H\u1ecd T\xean"}),Object(et.jsx)(Nn.a,{readOnly:!0,type:"text",className:"full_name",name:"full_name",value:t})]})})}),Object(et.jsxs)(Xn.a,{children:[Object(et.jsx)(Vn.a,{for:"username",children:"T\xean t\xe0i kho\u1ea3n"}),Object(et.jsx)(Nn.a,{readOnly:!0,type:"text",className:"username",name:"username",value:n})]}),Object(et.jsxs)(Xn.a,{children:[Object(et.jsx)(Vn.a,{for:"newPassword",children:"M\u1eadt kh\u1ea9u m\u1edbi"}),Object(et.jsx)(Nn.a,{type:"password",className:"newPassword",name:"newPassword",value:a,onChange:this.onChangeNewPw}),""!==s?Object(et.jsx)("span",{style:{color:"red"},children:s}):null]}),Object(et.jsxs)(Xn.a,{children:[Object(et.jsx)(Vn.a,{for:"confirmPassword",children:"X\xe1c nh\u1eadn l\u1ea1i  m\u1eadt kh\u1ea9u m\u1edbi"}),Object(et.jsx)(Nn.a,{type:"password",className:"confirmPassword",name:"confirmPassword",value:c,onChange:this.onChangeCfPw})]}),Object(et.jsxs)("div",{className:"addControl",children:[Object(et.jsx)(Ze.a,{outline:!0,color:"primary",onClick:this.onSubmit,children:"C\u1eadp nh\u1eadp"})," ",Object(et.jsx)(Ze.a,{color:"danger",onClick:this.onCancel,children:"H\u1ee7y"})]})]}),Object(et.jsx)(tt,{message:this.state.confirmMessage,answer:this.answer}),Object(et.jsx)(at,{message:this.state.notiMessage,done:this.doneAlert})]})}}]),n}(c.Component),us=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.match.path;return Object(et.jsx)("div",{className:"User",children:Object(et.jsxs)(r.d,{children:[Object(et.jsx)(r.b,{path:"".concat(e,"/setpassword/:id"),component:ds}),Object(et.jsx)(r.b,{path:"".concat(e,"/:id"),component:cs}),Object(et.jsx)(r.b,{path:"".concat(e,"/"),component:ls})]})})}}]),n}(c.Component),hs=us,js={LISTPRODUCT:"/product/list",DELETEPRODUCT:"/product/delete",CREATEPRODUCT:"/product/create",UPDATEPRODUCT:"/product/update",GETPRODUCT:"/product/get?id=",CREATEPRODUCER:"/product/producer/create",LISTPRODUCER:"/product/producer/list",LISTPART:"/product/part/list",CREATE_PART:"/product/part/create",GET_PART:"/product/part/get?id=",DELETE_PART:"/product/part/delete",UPDATE_PART:"/product/part/update"},bs=function(){function e(){if(Object(l.a)(this,e),e._instance)return e._instance;e._instance=this}return Object(b.a)(e,[{key:"listProduct",value:function(){return Ee.get(js.LISTPRODUCT)}},{key:"listProducer",value:function(){return Ee.get(js.LISTPRODUCER)}},{key:"listPart",value:function(){return Ee.get(js.LISTPART)}},{key:"createPart",value:function(e){return Ee.post(js.CREATE_PART,e)}},{key:"deletePart",value:function(e){return Ee.post(js.DELETE_PART,e)}},{key:"getPart",value:function(e){return Ee.get(js.GET_PART+e)}},{key:"updatePart",value:function(e){return Ee.post(js.UPDATE_PART,e)}},{key:"deleteProduct",value:function(e){return Ee.post(js.DELETEPRODUCT,e)}},{key:"createProduct",value:function(e){return Ee.post(js.CREATEPRODUCT,e)}},{key:"updateProduct",value:function(e){return Ee.post(js.UPDATEPRODUCT,e)}},{key:"getProduct",value:function(e){return Ee.get(js.GETPRODUCT+e)}},{key:"getproducerById",value:function(e){return Ee.get("".concat(js.BASE,"/producer/get"),{id:e})}},{key:"getProducerList",value:function(){return Ee.get("".concat(js.BASE,"/producer/list"))}},{key:"postProducer",value:function(e){return Ee.post("".concat(js.CREATEPRODUCER),e)}},{key:"editProducer",value:function(e){return Ee.get("".concat(js.BASE,"/producer/update"),e)}}]),e}(),ms=new bs,xs=ms,Os=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onDelete=function(t){e.props.onDelete(t)},e}return Object(b.a)(n,[{key:"render",value:function(){var e,t=this,n=this.props,c=n.listProduct,a=n.index,r=this.props.listProduct.partName.map((function(e,t){return Object(et.jsxs)("span",{href:"/warehouse/"+e,index:t,children:[" ",e," "]},t)}));return Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{scope:"row",children:a+1}),Object(et.jsx)("td",{children:c.name}),Object(et.jsx)("td",{className:"price",children:c.price}),Object(et.jsx)("td",{className:"unit",children:ve.map((function(e){if(e.code===(null===c||void 0===c?void 0:c.unit))return Object(et.jsx)("span",{children:e.label})}))}),Object(et.jsx)("td",{className:"route",children:ge.map((function(e){var t;if((null===c||void 0===c||null===(t=c.attrs)||void 0===t?void 0:t.route)===e.value)return Object(et.jsx)("span",{children:e.name})}))}),Object(et.jsx)("td",{className:"producer",children:c.producerName}),Object(et.jsx)("td",{children:r}),Object(et.jsx)("td",{children:null===(e=c.attrs)||void 0===e?void 0:e.description}),Object(et.jsx)("td",{children:Object(et.jsxs)("div",{className:"btnControl",children:[Object(et.jsx)(s.b,{to:"./product/".concat(c.id),className:"btn btn-secondary btn-sm",children:"S\u1eeda"}),Me.isRole(g.ADMIN.value)||Me.isRole(g.INVENTORY.value)?Object(et.jsx)(Ze.a,{className:"btn-sm ml-5",color:"danger",onClick:function(){return t.onDelete(c.id)},children:"X\xf3a"}):null]})})]})}}]),n}(c.Component),ps=Os,fs=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).onDelete=function(e){c.setState({notiConfirm:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a !!",id:e})},c.answer=function(e){if(e){var t={id:c.state.id};xs.deleteProduct(t).then((function(){c.setState({notiConfirm:""}),c.getData(),window.location.href="./product"})).catch((function(e){c.setState({notiMessage:"L\u1ed7i vui l\xf2ng b\u1ea1n th\u1eed l\u1ea1i sau !!"}),console.log(e)}))}else c.setState({notiConfirm:""})},c.toggle=function(e){c.setState({activeTab:e})},c.state={id:"",listProduct:[],notiConfirm:"",activeTab:"1",textSearch:""},c}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this,t=[];t.push(xs.listProduct()),t.push(xs.listProducer()),t.push(xs.listPart()),Promise.all(t).then((function(t){var n=Object(wn.a)(t,3),c=n[0],a=n[1],s=n[2],r=c.data,i=a.data,o=s.data;r.partName=[],r.map((function(e){var t=i.find((function(t){return e.producer_id===t.id}));e.producerName=t?t.name:"NA";var n=[];return e.parts.map((function(e){var t=o.find((function(t){return e.id==t.id})),c=t?t.name:"NA";n.push(c)})),e.partName=n,e})),e.setState({listProduct:r})})).catch((function(t){e.setState({notiMessage:"L\u1ed7i vui l\xf2ng b\u1ea1n th\u1eed l\u1ea1i sau !!"}),console.log(t)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.listProduct,c=t.activeTab,a=t.textSearch,r=n.filter((function(e){var t,n;return null===(t=e.name)||void 0===t||null===(n=t.toUpperCase())||void 0===n?void 0:n.includes("".concat(a.toUpperCase()))})).map((function(t,n){return Object(et.jsx)(ps,{listProduct:t,index:n,onDelete:e.onDelete,onUpdate:e.onUpdate},n)}));return Object(et.jsxs)(rn.a,{xs:{size:"10",offset:"1"},className:"customCard mt-3 ",children:[Object(et.jsx)($t.a,{tabs:!0,children:Object(et.jsx)(Zt.a,{children:Object(et.jsx)(en.a,{className:"pointer "+Dn()({active:"1"===c}),onClick:function(){e.toggle("1")},children:Object(et.jsx)("h1",{className:"title-card-lg",children:"Danh s\xe1ch thu\u1ed1c"})})})}),Object(et.jsxs)(sn.a,{className:"pt-10",children:[Object(et.jsx)(Vn.a,{xs:1,children:"T\xecm ki\u1ebfm"}),Object(et.jsx)(rn.a,{xs:2,children:Object(et.jsx)(Nn.a,{placeholder:"Nh\u1eadp t\xean thu\u1ed1c",type:"search",onChange:function(t){return e.setState({textSearch:t.target.value})}})}),Object(et.jsx)(rn.a,{xs:{size:"2",offset:"7"},className:"end",children:Object(et.jsx)(s.b,{to:"/app/product/0",children:Object(et.jsx)(Ze.a,{children:Object(et.jsx)("span",{children:"Th\xeam M\u1edbi"})})})})]}),Object(et.jsxs)(gn.a,{activeTab:c,children:[Object(et.jsx)(yn.a,{tabId:"1",children:Object(et.jsx)(sn.a,{children:Object(et.jsxs)(qn.a,{hover:!0,bordered:!0,striped:!0,children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{className:"thead",children:[Object(et.jsx)("th",{children:"STT"}),Object(et.jsx)("th",{children:"T\xean thu\u1ed1c"}),Object(et.jsx)("th",{className:"price",children:"Gi\xe1 B\xe1n"}),Object(et.jsx)("th",{className:"unit",children:"\u0110\u01a1n v\u1ecb"}),Object(et.jsx)("th",{className:"route",children:"\u0110\u01b0\u1eddng d\xf9ng"}),Object(et.jsx)("th",{className:"producer",children:"Nh\xe0 s\u1ea3n xu\u1ea5t"}),Object(et.jsx)("th",{children:"Th\xe0nh ph\u1ea7n d\u01b0\u1ee3c li\u1ec7u"}),Object(et.jsx)("th",{children:"Ghi ch\xfa"}),Object(et.jsx)("th",{children:"T\xf9y ch\u1ec9nh"})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:r})]})})}),Object(et.jsx)(yn.a,{tabId:"2",children:Object(et.jsx)(sn.a,{children:Object(et.jsxs)(qn.a,{hover:!0,bordered:!0,striped:!0,children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{className:"thead",children:[Object(et.jsx)("th",{children:"STT"}),Object(et.jsx)("th",{children:"T\xean v\u1eadt t\u01b0"}),Object(et.jsx)("th",{className:"price",children:"Gi\xe1 nh\u1eadp"}),Object(et.jsx)("th",{className:"producer",children:"Nh\xe0 s\u1ea3n xu\u1ea5t"}),Object(et.jsx)("th",{children:"Ghi ch\xfa"}),Object(et.jsx)("th",{children:"T\xf9y ch\u1ec9nh"})]})}),Object(et.jsx)("tbody",{className:"bodyTable"})]})})})]}),Object(et.jsx)(tt,{message:this.state.notiConfirm,answer:this.answer})]})}}]),n}(c.Component),vs=fs,gs=n(124),ys=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).onSelectPart=function(e,t){var n=c.state.parts,a={};a.id=t.id,a.name=t.name,n.push(a),c.setState({parts:n})},c.onRemovePart=function(e,t){var n=c.state.parts,a=n.findIndex((function(e){return e.id==t.id}));n.splice(a,1),c.setState({parts:n})},c.onBack=function(){window.history.back()},c.onChange=function(e){console.log(e.target.value,e.target.name),c.setState(Object(f.a)({},e.target.name,e.target.value))},c.onChangePQty=function(e,t){var n=c.state.parts;n[t].quantity=e.target.value,c.setState({parts:n})},c.onChangePUnit=function(e,t){var n=c.state.parts;n[t].unit=e.target.value,c.setState({parts:n})},c.onSubmit=function(){var e=c.state,t=e.id,n=e.name,a=e.producer_id,s=e.parts,r=e.price,i=e.form,o=e.origin_price,l=e.unitProduct;if(console.log("ppro",a),"Ch\u1ecdn nh\xe0 s\u1ea3n xu\u1ea5t"!==a&&a)if("Ch\u1ecdn nh\xe0 s\u1ea3n xu\u1ea5t"!==l&&l){var d={strength:i.strength.value,unit:i.unit.value,package_size:i.package_size.value,default_quantity:i.default_quantity.value,default_daily_usage:i.default_daily_usage.value,route:i.route.value,max_dose_per_kg:i.max_dose_per_kg.value,description:i.description.value};if(0==t){var u={name:n,producer_id:a,attrs:d,parts:s,unit:l,price:Number(r),origin_price:Number(o)};xs.createProduct(u).then((function(){c.setState({notiMessage:"Th\xeam m\u1edbi th\xe0nh c\xf4ng"})})).catch((function(e){c.setState({notiMessage:"L\u1ed7i vui l\xf2ng b\u1ea1n th\u1eed l\u1ea1i sau !!"}),console.log(e)}))}else{var h={id:t,name:n,producer_id:a,attrs:d,parts:s,unit:l,price:Number(r),origin_price:Number(o)};xs.updateProduct(h).then((function(){c.setState({notiMessage:"C\u1eadp nh\u1eadt th\xe0nh c\xf4ng"})})).catch((function(e){c.setState({notiMessage:"L\u1ed7i vui l\xf2ng b\u1ea1n th\u1eed l\u1ea1i sau !!"}),console.log(e)}))}}else c.setState({isBack:!1,notiMessage:"B\u1ea1n ch\u01b0a ch\u1ecdn \u0111\u01a1n v\u1ecb"});else c.setState({isBack:!1,notiMessage:"B\u1ea1n ch\u01b0a ch\u1ecdn nh\xe0 s\u1ea3n xu\u1ea5t"})},c.doneAlert=function(){c.state.notiMessage&&c.state.isBack?window.history.back():c.setState({notiMessage:"",isBack:!0})},c.state={name:"",producer_id:"",form:c._getInitFormData({unit:"",strength:0,package_size:0,default_quantity:0,default_daily_usage:0,max_dose_per_kg:0,route:"",description:""}),unitProduct:"",origin_price:1,price:1,parts:[],arrSelected:[],listPart:[],listProducer:[],isBack:!0},c}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;if(this.setState({id:t}),xs.listProducer().then((function(t){e.setState({listProducer:t.data})})).catch((function(e){console.log(e)})),0==t)xs.listPart().then((function(t){e.setState({listPart:t.data})})).catch((function(e){return console.log(e)}));else{var n=[];n.push(xs.getProduct(t)),n.push(xs.listPart()),Promise.all(n).then((function(t){var n=Object(wn.a)(t,2),c=n[0],a=n[1],s=c.data,r=a.data;console.log("data",s);var i=s.parts,o=[];i.forEach((function(e){var t=r.find((function(t){return e.id==t.id}));o.push(t||""),e.name=t?t.name:"N/A"})),s.attrs.default_daily_usage||(s.attrs.default_daily_usage=0),s.attrs.max_dose_per_kg||(s.attrs.max_dose_per_kg=0),s.attrs.description||(s.attrs.description=0),e._fillForm(s.attrs),e.setState({listPart:r,parts:i,name:s.name,unitProduct:s.unit,price:s.price,origin_price:s.origin_price,producer_id:s.producer_id,arrSelected:o}),console.log(e.state.unitProduct)}))}}},{key:"render",value:function(){var e=this,t=this.state,n=t.listProducer,c=t.confirmMessage,a=t.answer,s=t.parts,r=t.id,i=t.name,o=t.producer_id,l=t.listPart,d=t.arrSelected,u=t.price,h=t.origin_price,j=t.unitProduct,b=this.state.form,m=b.strength,x=(b.instruction,b.unit),O=b.package_size,p=(b.default_day_supply,b.default_quantity),f=(b.max_dose,b.route),v=b.default_daily_usage,y=b.max_dose_per_kg,N=b.description,S=n.map((function(e,t){return Object(et.jsx)("option",{value:e.id,children:e.name},t)})),C=s.map((function(t,n){return Object(et.jsxs)(sn.a,{className:"itemPart",children:[Object(et.jsx)(rn.a,{xs:{size:"3",offset:"4"},children:Object(et.jsx)(Nn.a,{index:n,type:"text",readOnly:!0,name:"part_name",value:t.name},n)}),Object(et.jsx)(rn.a,{children:Object(et.jsx)(Nn.a,{index:n,type:"text",id:"part_unit",name:"part_unit",placeholder:"Nh\u1eadp s\u1ed1 l\u01b0\u1ee3ng",value:t.quantity,onChange:function(t){return e.onChangePQty(t,n)}},n)})]},n)}));return Object(et.jsx)("div",{className:"MedicineForm",children:Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:1,className:"left"}),Object(et.jsxs)(rn.a,{xs:10,className:"content",children:[Object(et.jsx)(tt,{message:c,answer:a}),Object(et.jsx)(at,{message:this.state.notiMessage,done:this.doneAlert}),Object(et.jsx)("h1",{className:"title-card-lg",children:0==r?"Th\xeam m\u1edbi thu\u1ed1c":"Ch\u1ec9nh s\u1eeda thu\u1ed1c"}),Object(et.jsxs)(Xn.a,{name:"form_medecine",children:[Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"4",children:Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"4",children:Object(et.jsx)(Vn.a,{children:"T\xean thu\u1ed1c"})}),Object(et.jsx)(rn.a,{xs:"8",children:Object(et.jsx)(Nn.a,{type:"name",name:"name",id:"name",placeholder:"Nh\u1eadp thu\u1ed1c",value:i,onChange:this.onChange})})]})}),Object(et.jsx)(rn.a,{xs:"4",children:Object(et.jsxs)(sn.a,{children:[Object(et.jsxs)(rn.a,{xs:"4",children:[" ",Object(et.jsx)(Vn.a,{children:"Nh\xe0 s\u1ea3n xu\u1ea5t"})]}),Object(et.jsx)(rn.a,{xs:"8",children:Object(et.jsxs)(Nn.a,{type:"select",name:"producer_id",id:"producer_id",value:o,onChange:this.onChange,required:!0,children:[Object(et.jsx)("option",{children:"Ch\u1ecdn nh\xe0 s\u1ea3n xu\u1ea5t"}),S]})})]})}),Object(et.jsx)(rn.a,{xs:"4",children:Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"4",children:"\u0110\u01a1n v\u1ecb thu\u1ed1c"}),Object(et.jsx)(rn.a,{xs:"8",className:"warehouse_parts",children:Object(et.jsxs)(Nn.a,{type:"select",name:"unitProduct",id:"unitProduct",onChange:function(t){return e.setState({unitProduct:t.target.value})},value:j,children:[Object(et.jsx)("option",{children:"Ch\u1ecdn \u0111\u01a1n v\u1ecb"}),ve.map((function(e){return Object(et.jsx)("option",{value:e.code,children:e.label})}))]})})]})}),Object(et.jsx)(rn.a,{xs:"4",children:Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"4",children:"\u0110\u01a1n v\u1ecb t\xednh (li\u1ec1u  d\xf9ng)"}),Object(et.jsx)(rn.a,{xs:"8",children:Object(et.jsxs)(Nn.a,{type:"select",name:"unit",id:"unit",onChange:function(t){return e._setValue(t,"unit")},value:x.value,children:[Object(et.jsx)("option",{children:"Ch\u1ecdn \u0111\u01a1n v\u1ecb"}),Object(et.jsx)("option",{value:Oe.code,children:Oe.label}),Object(et.jsx)("option",{value:pe.code,children:pe.label}),Object(et.jsx)("option",{value:fe.code,children:fe.label})]})})]})}),Object(et.jsx)(rn.a,{xs:"4",children:Object(et.jsxs)(sn.a,{children:[Object(et.jsxs)(rn.a,{xs:"4",children:[" ",Object(et.jsx)(Vn.a,{children:"\u0110\u1ecbnh l\u01b0\u1ee3ng 1 \u0111\u01a1n v\u1ecb"})]}),Object(et.jsx)(rn.a,{xs:"8",children:Object(et.jsx)(Nn.a,{type:"text",name:"strength",id:"strength",onChange:function(t){return e._setValue(t,"strength")},value:m.value})})]})}),Object(et.jsx)(rn.a,{xs:"4",children:Object(et.jsxs)(sn.a,{children:[Object(et.jsxs)(rn.a,{xs:"4",children:[" ",Object(et.jsx)(Vn.a,{children:"Li\u1ec1u d\xf9ng m\u1eb7c \u0111\u1ecbnh"})]}),Object(et.jsx)(rn.a,{xs:"8",children:Object(et.jsx)(Nn.a,{type:"text",name:"default_quantity",id:"default_quantity",onChange:function(t){return e._setValue(t,"default_quantity")},value:p.value})})]})}),Object(et.jsx)(rn.a,{xs:"4",children:Object(et.jsxs)(sn.a,{children:[Object(et.jsxs)(rn.a,{xs:"4",children:[" ",Object(et.jsx)(Vn.a,{children:"Li\u1ec1u l\u01b0\u1ee3ng/c\xe2n n\u1eb7ng (\u0111\u01a1n v\u1ecb)/(kg)"})]}),Object(et.jsx)(rn.a,{xs:"8",children:Object(et.jsx)(Nn.a,{type:"text",name:"max_dose_per_kg",id:"max_dose_per_kg",onChange:function(t){return e._setValue(t,"max_dose_per_kg")},value:y.value})})]})}),Object(et.jsx)(rn.a,{xs:"4",children:Object(et.jsxs)(sn.a,{children:[Object(et.jsxs)(rn.a,{xs:"4",children:[" ",Object(et.jsx)(Vn.a,{children:"L\u1ea7n d\xf9ng trong ng\xe0y"})]}),Object(et.jsx)(rn.a,{xs:"8",children:Object(et.jsx)(Nn.a,{type:"text",name:"default_daily_usage",id:"default_daily_usage",onChange:function(t){return e._setValue(t,"default_daily_usage")},value:v.value})})]})}),Object(et.jsx)(rn.a,{xs:"4",children:Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"4",children:"S\u1ed1 \u0111\u1ee3n v\u1ecb/ 1 bao b\xec"}),Object(et.jsx)(rn.a,{xs:"8",children:Object(et.jsx)(Nn.a,{name:"package_size",id:"package_size",onChange:function(t){return e._setValue(t,"package_size")},value:O.value})})]})}),Me.isRole(g.ADMIN.value)||Me.isRole(g.INVENTORY.value)?Object(et.jsxs)(rn.a,{xs:"4",children:[Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"4",children:"Ghi ch\xfa"}),Object(et.jsx)(rn.a,{xs:"8",className:"warehouse_parts",children:Object(et.jsx)(Nn.a,{name:"description",id:"description",onChange:function(t){return e._setValue(t,"description")},value:N.value})})]}),Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"4",children:"Gi\xe1 nh\u1eadp v\xe0o "}),Object(et.jsx)(rn.a,{xs:"8",children:Object(et.jsx)(Nn.a,{type:"text",name:"origin_price",id:"origin_price",onChange:this.onChange,value:h})})]}),Object(et.jsxs)(sn.a,{children:[Object(et.jsxs)(rn.a,{xs:"4",children:[" ",Object(et.jsx)(Vn.a,{children:"Gi\xe1 b\xe1n ra"})]}),Object(et.jsx)(rn.a,{xs:"8",children:Object(et.jsx)(Nn.a,{type:"text",name:"price",id:"price",onChange:this.onChange,value:u})})]})]}):Object(et.jsx)(rn.a,{xs:"4",children:Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"4",children:"Ghi ch\xfa"}),Object(et.jsx)(rn.a,{xs:"8",className:"warehouse_parts",children:Object(et.jsx)(Nn.a,{name:"description",id:"description",onChange:function(t){return e._setValue(t,"description")},value:N.value})})]})}),Object(et.jsxs)(rn.a,{xs:"8",children:[Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"2",children:"\u0110\u01b0\u1eddng d\xf9ng thu\u1ed1c"}),Object(et.jsx)(rn.a,{xs:"10",className:"warehouse_parts",children:Object(et.jsxs)(Nn.a,{type:"select",name:"route",id:"route",value:f?f.value:"",onChange:function(t){return e._setValue(t,"route")},children:[Object(et.jsx)("option",{children:"Ch\u1ecdn \u0111\u01b0\u1eddng d\xf9ng"}),ge.map((function(e){return Object(et.jsx)("option",{value:e.value,children:e.name})}))]})})]}),Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"2",children:"Th\xe0nh Ph\u1ea7n Thu\u1ed1c"}),Object(et.jsxs)(rn.a,{xs:"10",className:"warehouse_parts",children:[" ",Object(et.jsx)(gs.Multiselect,{options:l,selectedValues:d,value:l,displayValue:"name",onSelect:function(t,n){return e.onSelectPart(t,n)},onRemove:function(t,n){return e.onRemovePart(t,n)},showCheckbox:!0,name:"part",id:"part",placeholder:"Ch\u1ecdn th\xe0nh ph\u1ea7n thu\u1ed1c",closeIcon:"close"})]})]})]})]}),s.length>0?Object(et.jsxs)(sn.a,{className:"title-card",children:[Object(et.jsx)(rn.a,{xs:{size:"3",offset:"4"},children:"Th\xe0nh ph\u1ea7n thu\u1ed1c"}),Object(et.jsx)(rn.a,{children:"M\xf4 t\u1ea3"})]}):"",C]}),Object(et.jsx)(sn.a,{children:Object(et.jsx)(rn.a,{xs:{size:6,offset:6},children:Object(et.jsx)("div",{className:"btnControl",children:Object(et.jsxs)(rn.a,{children:[Object(et.jsx)(Ze.a,{className:"controlRemove",onClick:this.onBack,children:"H\u1ee7y B\u1ecf"}),Object(et.jsx)(Ze.a,{outline:!0,color:"primary",onClick:this.onSubmit,children:0==r?"Th\xeam m\u1edbi":"C\u1eadp nh\u1eadt"})]})})})})]}),Object(et.jsx)(rn.a,{xs:2,className:"right"})]})})}}]),n}(ze),Ns=ys,Ss=function(){var e=Object(c.useState)({name:"",description:""}),t=Object(wn.a)(e,2),n=t[0],a=t[1],s=function(e){var t=e.target,n=t.name,c=t.value;a((function(e){return Object(vn.a)(Object(vn.a)({},e),{},Object(f.a)({},n,c))}))};return Object(et.jsx)(c.Fragment,{children:Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:2}),Object(et.jsxs)(rn.a,{xs:8,children:[Object(et.jsxs)(Xn.a,{name:"producer",children:[Object(et.jsx)("h1",{className:"p-t-50",children:"Nh\u1eadp th\xf4ng tin nh\xe0 s\u1ea3n xu\u1ea5t"}),Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"4",children:"T\xean nh\xe0 s\u1ea3n xu\u1ea5t"}),Object(et.jsxs)(rn.a,{xs:"8",children:[" ",Object(et.jsx)(Nn.a,{type:"input",name:"name",id:"name",placeholder:"nh\u1eadp t\xean nh\xe0 sx",onChange:function(e){return s(e)}})]})]}),Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"4",children:"Th\xf4ng tin nh\xe0 s\u1ea3n xu\u1ea5t"}),Object(et.jsxs)(rn.a,{xs:"8",children:[" ",Object(et.jsx)(Nn.a,{type:"input",name:"description",id:"description",placeholder:"Nh\u1eadp th\xf4ng tin nh\xe0 s\u1ea3n xu\u1ea5t",onChange:function(e){return s(e)}})]})]})]}),Object(et.jsx)(sn.a,{children:Object(et.jsx)(Ze.a,{color:"success",className:"btn_1",onClick:function(){return function(){var e=n;return xs.postProducer(e)}()},children:"Th\xeam nh\xe0 s\u1ea3n xu\u1ea5t "})})]}),Object(et.jsx)(rn.a,{xs:2})]})})},Cs=function(){var e=Object(c.useState)({name:"",description:""}),t=Object(wn.a)(e,2),n=t[0],a=t[1],s=window.location.pathname.slice("/app/product/part/".length);Object(c.useEffect)((function(){0!=s&&xs.getPart(s).then((function(e){var t,c,s;n.id=null===(t=e.data)||void 0===t?void 0:t.id,n.name=null===(c=e.data)||void 0===c?void 0:c.name,n.description=null===(s=e.data)||void 0===s?void 0:s.description,a(Object(vn.a)({},n))}))}),[s]);var r=function(e){var t=e.target,n=t.name,c=t.value;a((function(e){return Object(vn.a)(Object(vn.a)({},e),{},Object(f.a)({},n,c))}))};return Object(et.jsx)(c.Fragment,{children:Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:2}),Object(et.jsxs)(rn.a,{xs:8,children:[Object(et.jsxs)(Xn.a,{name:"producer",children:[Object(et.jsx)("h1",{className:"p-t-50",children:"Nh\u1eadp th\xf4ng tin th\xe0nh ph\u1ea7n"}),Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"4",children:"T\xean th\xe0nh ph\u1ea7n"}),Object(et.jsxs)(rn.a,{xs:"8",children:[" ",Object(et.jsx)(Nn.a,{type:"input",name:"name",id:"name",value:n.name,placeholder:"nh\u1eadp t\xean th\xe0nh ph\u1ea7n",onChange:function(e){return r(e)}})]})]}),Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"4",children:"Th\xf4ng tin m\xf4 t\u1ea3"}),Object(et.jsxs)(rn.a,{xs:"8",children:[" ",Object(et.jsx)(Nn.a,{type:"input",name:"description",id:"description",value:n.description,placeholder:"Nh\u1eadp th\xf4ng tin m\xf4 t\u1ea3",onChange:function(e){return r(e)}})]})]})]}),Object(et.jsx)(sn.a,{children:Object(et.jsx)(Ze.a,{color:"success",className:"btn_1",onClick:function(){0==s?xs.createPart(n).then((function(e){window.location.assign("/app/product/part")})):xs.updatePart(n).then((function(e){window.location.assign("/app/product/part")}))},children:"Th\xeam th\xe0nh ph\u1ea7n"})})]}),Object(et.jsx)(rn.a,{xs:2})]})})},_s=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).onDelete=function(e){c.setState({notiConfirm:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a !!",id:e})},c.answer=function(e){if(e){var t={id:c.state.id};xs.deletePart(t).then((function(){c.setState({notiConfirm:""}),c.getData(),window.location.href="./part"})).catch((function(e){c.setState({notiMessage:"L\u1ed7i vui l\xf2ng b\u1ea1n th\u1eed l\u1ea1i sau !!"}),console.log(e)}))}else c.setState({notiConfirm:""})},c.toggle=function(e){c.setState({activeTab:e})},c.state={id:"",listPart:[],notiConfirm:"",activeTab:"1",textSearch:""},c}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;xs.listPart().then((function(t){e.setState({listPart:t.data})})).catch((function(t){e.setState({notiMessage:"L\u1ed7i vui l\xf2ng b\u1ea1n th\u1eed l\u1ea1i sau !!"}),console.log(t)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.listPart,c=t.activeTab,a=t.textSearch,r=n.filter((function(e){var t,n;return null===(t=e.name)||void 0===t||null===(n=t.toUpperCase())||void 0===n?void 0:n.includes("".concat(a.toUpperCase()))})).map((function(e,t){return Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{children:t+1}),Object(et.jsx)("td",{children:e.name}),Object(et.jsx)("td",{children:e.descriptions}),Object(et.jsx)("td",{children:Object(et.jsx)("div",{className:"btnControl middle",children:Object(et.jsx)(s.b,{to:"./part/".concat(e.id),className:"btn btn-secondary btn-sm",children:"S\u1eeda"})})})]})}));return Object(et.jsxs)("div",{className:"container customCard mt-3 ",children:[Object(et.jsx)($t.a,{tabs:!0,children:Object(et.jsx)(Zt.a,{children:Object(et.jsx)(en.a,{className:"pointer "+Dn()({active:"1"===c}),onClick:function(){e.toggle("1")},children:Object(et.jsx)("h1",{className:"title-card-lg",children:"Danh s\xe1ch th\xe0nh ph\u1ea7n"})})})}),Object(et.jsxs)(sn.a,{className:"pt-10",children:[Object(et.jsx)(Vn.a,{xs:1,children:"T\xecm ki\u1ebfm"}),Object(et.jsx)(rn.a,{xs:3,children:Object(et.jsx)(Nn.a,{placeholder:"Nh\u1eadp t\xean th\xe0nh ph\u1ea7n",type:"search",onChange:function(t){return e.setState({textSearch:t.target.value})}})}),Object(et.jsx)(rn.a,{xs:{size:"2",offset:"6"},className:"end",children:Object(et.jsx)(s.b,{to:"/app/product/part/0",children:Object(et.jsx)(Ze.a,{className:"mb-3 mt-3",children:Object(et.jsx)("span",{children:"Th\xeam M\u1edbi"})})})})]}),Object(et.jsx)(gn.a,{activeTab:c,children:Object(et.jsx)(yn.a,{tabId:"1",children:Object(et.jsx)(sn.a,{children:Object(et.jsxs)(qn.a,{hover:!0,bordered:!0,striped:!0,children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{className:"thead",children:[Object(et.jsx)("th",{children:"STT"}),Object(et.jsx)("th",{children:"T\xean th\xe0nh ph\u1ea7n"}),Object(et.jsx)("th",{className:"",children:"M\xf4 t\u1ea3"}),Object(et.jsx)("th",{children:"T\xf9y ch\u1ec9nh"})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:r})]})})})}),Object(et.jsx)(tt,{message:this.state.notiConfirm,answer:this.answer})]})}}]),n}(c.Component),Ts=_s,ws=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.match.path;return Object(et.jsx)("div",{className:"Product",children:Object(et.jsxs)(r.d,{children:[Object(et.jsx)(r.b,{path:"".concat(e,"/part/:id"),exact:!0,component:Cs}),Object(et.jsx)(r.b,{path:"".concat(e,"/part"),exact:!0,component:Ts}),Object(et.jsx)(r.b,{path:"".concat(e,"/producer/:id"),exact:!0,component:Ss}),Object(et.jsx)(r.b,{path:"".concat(e,"/:id"),exact:!0,component:Ns}),Object(et.jsx)(r.b,{path:"".concat(e),exact:!0,component:vs})]})})}}]),n}(c.Component),ks=ws,Ds=n(252),Is=n(257),Ls=n(253),Es=n(24),Ps=function(e){var t=e.items;return Object(c.useEffect)((function(){}),[t]),Object(et.jsxs)(qn.a,{hover:!0,bordered:!0,children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"STT"}),Object(et.jsx)("th",{children:"T\xean d\u1ecbch v\u1ee5"}),Object(et.jsx)("th",{children:"\u0110\u01a1n gi\xe1"}),Object(et.jsx)("th",{children:"S\u1ed1 l\u01b0\u1ee3ng"})]})}),Object(et.jsx)("tbody",{children:null===t||void 0===t?void 0:t.map((function(e,t){return Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{scope:"row",children:t+1}),Object(et.jsx)("td",{children:e.ref_value.name}),Object(et.jsx)("td",{children:Object(et.jsx)(Es.a,{thousandSeparator:!0,suffix:" VND",displayType:"text",value:Math.ceil(e.price)})}),Object(et.jsx)("td",{children:e.quantity})]},e.id)}))})]})},Rs=(n.p,function(e){var t,n,a,s,i,o,l=Object(c.useState)({}),d=Object(wn.a)(l,2),u=d[0],h=d[1],j=Object(c.useState)({}),b=Object(wn.a)(j,2),m=b[0],x=b[1],O=Object(c.useState)([]),p=Object(wn.a)(O,2),f=p[0],v=p[1],g=Object(c.useState)([]),y=Object(wn.a)(g,2),N=(y[0],y[1],Object(c.useState)(0)),S=Object(wn.a)(N,2),C=S[0],_=S[1],T=Object(c.useState)(),w=Object(wn.a)(T,2),k=w[0],D=w[1],I=m.ref_value||{},L=I.code,E=(null===(t=m.steps)||void 0===t||t[0].location.name,null===(n=m.steps)||void 0===n?void 0:n[0].order.total),P=1e3*Math.round(E/1e3),R=null===(a=m.steps)||void 0===a?void 0:a[0].code,M=new Date(null===(s=m.steps)||void 0===s?void 0:s[0].ctime),B=JSON.parse(window.sessionStorage.getItem("user")),A=Object(r.g)().id;return Object(c.useEffect)((function(){var e=Date.now(),t=new Date(I.birthday).getTime(),n=Math.floor((e-t)/31536e6);n>1?D(n+" tu\u1ed5i"):0==n&&D(Math.floor((e-t)/6048e5)+" tu\u1ea7n")}),[I]),Object(c.useEffect)((function(){ac.getJobById(A).then((function(e){var t=e.data;x(t);var n=0;e.data.steps[0].order.items.forEach((function(e){n+=e.ref_value.origin_price})),_(n),ac.getCmbyCode(t.ref_value.code).then((function(e){var t=e.data,n={};t.contacts.length&&(n=t.contacts[0]),h(n);var c="".concat(n.address.street," - ").concat(xe(n.address.ward)," - ").concat(xe(n.address.district)," - ").concat(xe(n.address.province));n.address.province.length>0&&v(c)})).catch((function(e){console.log(e)}))}))}),[A]),Object(c.useEffect)((function(){R&&(qe.createEtccode(R,"receipId"),qe.createEtccode(R,"receipIdSub")),L&&(qe.createEtccode(L.toString(),"customerCode"),qe.createEtccode(L.toString(),"customerCodeSub"))}),[R,L]),Object(et.jsxs)(c.Fragment,{children:[Object(et.jsx)("div",{className:"d-flex justify-content-center mt-3",children:Object(et.jsx)("div",{className:"p-2 border border-secondary examReceiptContainer",children:Object(et.jsxs)("div",{className:"position-relative",id:"receiptPrint",children:[Object(et.jsxs)("div",{className:"receiptFromPrint",children:[Object(et.jsx)("div",{className:"absolute",children:Object(et.jsx)("div",{className:"text-right",children:Object(et.jsx)("canvas",{id:"receipId",style:{height:"13mm"}})})}),Object(et.jsx)(tc,{}),Object(et.jsxs)("div",{className:"text-left-print",children:[Object(et.jsx)("div",{style:{display:"flex",justifyContent:"center",minWidth:"300px",fontWeight:"700"},children:"BI\xcaN LAI THU TI\u1ec0N"}),"Li\xean 1 : L\u01b0u t\u1ea1i qu\u1ea7y",Object(et.jsxs)("i",{children:["Ng\xe0y ",M.getDate()," Th\xe1ng ",M.getMonth()+1," N\u0103m ",M.getFullYear()," ",M.getHours()," gi\u1edd ",M.getMinutes()," ph\xfat "]}),Object(et.jsx)("canvas",{id:"customerCode",style:{height:"13mm",width:"5cm",position:"relative",bottom:"2cm",right:"240px"}})]}),Object(et.jsxs)("div",{style:{display:"flex"},children:[Object(et.jsxs)(rn.a,{sm:5,children:["T\xean: ",Object(et.jsx)("b",{children:Object(et.jsx)("span",{className:"text-uppercase font-weight-bold",children:I.full_name})}),Object(et.jsx)("br",{})]}),Object(et.jsx)(rn.a,{sm:3,children:Object(et.jsxs)("span",{children:["NS: ",Zn(I.birthday)," (",k,")"]})}),Object(et.jsx)(rn.a,{sm:2,style:{paddingLeft:"3px"},children:Object(et.jsxs)("span",{children:["GT: ","male"===I.gender?"Nam":"N\u1eef"," "]})}),Object(et.jsxs)(rn.a,{sm:2,children:["DT:  ",u.phone]})]}),Object(et.jsx)("div",{style:{display:"flex"},children:Object(et.jsxs)(rn.a,{sm:12,children:["\u0110C: ",f]})}),Object(et.jsxs)("div",{children:["D\u1ecbch v\u1ee5 kh\xe1m :",null===(i=m.steps)||void 0===i?void 0:i[0].order.items.map((function(e){return e.ref_value.name+", "})),Object(et.jsx)("br",{}),"Gi\xe1 g\u1ed1c: ",Object(et.jsx)("b",{children:Object(et.jsxs)("span",{className:"font-weight-bold",children:[Yn(C||0)," \u0111\u1ed3ng"]})})," ",Object(et.jsx)("br",{}),"S\u1ed1 ti\u1ec1n \u0111\u01b0\u1ee3c khuy\u1ebfn m\xe3i ",Object(et.jsx)("span",{className:"font-weight-bold",children:Object(et.jsx)("b",{children:Yn(C-P||0)})}),Object(et.jsx)("br",{}),"T\u1ed5ng s\u1ed1 ti\u1ec1n thanh to\xe1n : ",Object(et.jsx)("b",{children:Object(et.jsxs)("span",{className:"font-weight-bold",children:[Yn(P||0)," \u0111\u1ed3ng"]})})," ",Object(et.jsx)("br",{}),"Vi\u1ebft b\u1eb1ng ch\u1eef: ",Object(et.jsx)("span",{className:"font-weight-bold",children:Object(et.jsx)("b",{children:Wn(P||0)})})]}),Object(et.jsxs)("div",{className:"d-flex justify-content-between px-4 ",children:[Object(et.jsxs)("div",{className:"text-center mr-auto ml-5 nt",children:[Object(et.jsx)("b",{children:"Ng\u01b0\u1eddi n\u1ed9p ti\u1ec1n"}),Object(et.jsx)("br",{}),Object(et.jsx)("i",{children:"(k\xfd, h\u1ecd t\xean)"})]}),Object(et.jsxs)("div",{className:"text-center mr-5 tt",children:[Object(et.jsx)("strong",{children:"Ng\u01b0\u1eddi thu ti\u1ec1n"}),Object(et.jsx)("br",{}),Object(et.jsx)("i",{className:"mb-2",children:"(k\xfd, ghi r\xf5 h\u1ecd t\xean)"})," ",Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("b",{className:"mt-5",children:B.full_name})]})]})]}),Object(et.jsxs)("div",{className:"receiptFromPrint",children:[Object(et.jsx)("div",{className:"absolute",children:Object(et.jsx)("div",{className:"text-right",children:Object(et.jsx)("canvas",{id:"receipIdSub",style:{height:"13mm"}})})}),Object(et.jsx)(tc,{}),Object(et.jsxs)("div",{className:"text-left-print",children:[Object(et.jsx)("div",{style:{display:"flex",justifyContent:"center",minWidth:"300px",fontWeight:"700"},children:"BI\xcaN LAI THU TI\u1ec0N"}),"Li\xean 2 : Giao cho b\u1ec7nh nh\xe2n",Object(et.jsxs)("i",{children:["Ng\xe0y ",M.getDate()," Th\xe1ng ",M.getMonth()+1," N\u0103m ",M.getFullYear()," ",M.getHours()," gi\u1edd ",M.getMinutes()," ph\xfat "]}),Object(et.jsx)("canvas",{id:"customerCodeSub",style:{height:"13mm",width:"5cm",position:"relative",bottom:"2cm",right:"240px"}})]}),Object(et.jsxs)("div",{style:{display:"flex"},children:[Object(et.jsxs)(rn.a,{sm:5,children:["T\xean: ",Object(et.jsx)("b",{children:Object(et.jsx)("span",{className:"text-uppercase font-weight-bold",children:I.full_name})}),Object(et.jsx)("br",{})]}),Object(et.jsx)(rn.a,{sm:3,children:Object(et.jsxs)("span",{children:["NS: ",Zn(I.birthday)," (",k,")"]})}),Object(et.jsx)(rn.a,{sm:2,style:{paddingLeft:"3px"},children:Object(et.jsxs)("span",{children:["GT: ","male"===I.gender?"Nam":"N\u1eef"," "]})}),Object(et.jsxs)(rn.a,{sm:2,children:["DT:  ",u.phone]})]}),Object(et.jsx)("div",{style:{display:"flex"},children:Object(et.jsxs)(rn.a,{sm:12,children:["\u0110C: ",f]})}),Object(et.jsxs)("div",{children:["D\u1ecbch v\u1ee5 kh\xe1m :",null===(o=m.steps)||void 0===o?void 0:o[0].order.items.map((function(e){return e.ref_value.name+", "})),Object(et.jsx)("br",{}),"Gi\xe1 g\u1ed1c: ",Object(et.jsx)("b",{children:Object(et.jsxs)("span",{className:"font-weight-bold",children:[Yn(C||0)," \u0111\u1ed3ng"]})})," ",Object(et.jsx)("br",{}),"S\u1ed1 ti\u1ec1n \u0111\u01b0\u1ee3c khuy\u1ebfn m\xe3i ",Object(et.jsx)("span",{className:"font-weight-bold",children:Object(et.jsxs)("b",{children:[Yn(C-P||0)," \u0111\u1ed3ng"]})}),Object(et.jsx)("br",{}),"T\u1ed5ng s\u1ed1 ti\u1ec1n thanh to\xe1n : ",Object(et.jsx)("b",{children:Object(et.jsxs)("span",{className:"font-weight-bold",children:[Yn(P||0)," \u0111\u1ed3ng"]})})," ",Object(et.jsx)("br",{}),"Vi\u1ebft b\u1eb1ng ch\u1eef: ",Object(et.jsx)("span",{className:"font-weight-bold",children:Object(et.jsx)("b",{children:Wn(P||0)})})]}),Object(et.jsxs)("div",{className:"d-flex justify-content-between px-4 ",children:[Object(et.jsxs)("div",{className:"text-center mr-auto ml-5 nt",children:[Object(et.jsx)("b",{children:"Ng\u01b0\u1eddi n\u1ed9p ti\u1ec1n"}),Object(et.jsx)("br",{}),Object(et.jsx)("i",{children:"(k\xfd, h\u1ecd t\xean)"})]}),Object(et.jsxs)("div",{className:"text-center mr-5 tt",children:[Object(et.jsx)("strong",{children:"Ng\u01b0\u1eddi thu ti\u1ec1n"}),Object(et.jsx)("br",{}),Object(et.jsx)("i",{className:"mb-2",children:"(k\xfd, ghi r\xf5 h\u1ecd t\xean)"})," ",Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("b",{className:"mt-5",children:B.full_name})]})]})]})]})})}),Object(et.jsx)("div",{className:"d-flex justify-content-center ",children:Object(et.jsx)("div",{className:"sizeDiv d-flex justify-content-end mt-3 tt",children:Object(et.jsx)(Ze.a,{className:"make-bill",color:"primary",onClick:function(){Ue()({printable:"receiptPrint",type:"html",targetStyles:["*"],style:"@page {\n                                size: Letter landscape;\n                              }",header:null,footer:null}),window.history.back()},children:"T\u1ea1o phi\u1ebfu in"})})})]})}),Ms=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).setBookList=function(e){c.setState({bookList:e.filter((function(e){return"active"===e.status}))}),c.setState({bookId:e[0].id})},c.setPaymentList=function(e){c.setState({paymentList:e})},c.getAllBookList=function(){ac.getBookList("active").then((function(e){c.setBookList(e.data)}))},c.setIsOrderFound=function(e){c.setState({isOrderFound:e})},c.setIsPayment=function(e){c.setState({isPayment:e})},c.setNotiMessage=function(e){c.setState({notiMessage:e})},c.toggleUser=function(){c.setState({dropdownBook:!c.state.dropdownBook})},c.resetForm=function(){c._fillForm({sumOriginPrice:"",customerCode:"",orderCode:"",customerName:"",customerBirthday:"",totalPrice:"",nameService:"",priceService:"",customerGender:"",cTime:"",orderStatus:"",bookId:""}),c.setIsOrderFound(!1)},c.findOrderByCode=function(e){return ac.getOrder(e)},c.handleSearch=function(e){c.props.retail?ac.getRetailOrder(e).then((function(e){var t=e.data;c._fillForm({totalPrice:t.total,orderId:t.id,cTime:new Date(t.ctime).toLocaleString(),orderStatus:t.status,customerCode:0,orderCode:c.props.billID,customerName:"",customerBirthday:"",customerGender:""}),c.setState({items:t.items})})).catch((function(e){return console.log(e)})):c.findOrderByCode(e).then((function(e){var t=e.data,n=0;e.data.view_order.items.map((function(e){return n+=e.ref_value.origin_price})),c.setState({sumOriginPrice:n});var a=t.view_order.customer.contacts[0].address,s=a.street?"".concat(a.street):"",r=a.ward?"  -".concat(a.ward):"",i=a.district?"-".concat(a.district):"",o=a.province?"-".concat(a.province):"",l="".concat(s).concat(r).concat(i).concat(o);a.province.length>0&&c.setState({customerAddress:l}),t.view_order.items.length,c._fillForm({customerCode:t.view_order.customer.code,orderCode:t.view_order.code,customerName:t.view_order.customer.full_name,customerBirthday:t.view_order.customer.birthday,totalPrice:t.view_order.total,orderId:t.view_order.id,customerGender:t.view_order.customer.gender,nameService:t.view_order.items[0].ref_value.name,priceService:t.view_order.items[0].ref_value.price,cTime:new Date(t.view_order.ctime).toLocaleString("en-GB"),orderStatus:t.view_order.status}),c.setState({items:t.view_order.items}),c.setIsOrderFound(!0)})).catch((function(e){console.log(e),c.setNotiMessage("Kh\xf4ng t\xecm th\u1ea5y h\xf3a \u0111\u01a1n!")}))},c.handleChangeNote=function(e){c.setState({note:e.target.value})},c.handleChange=function(e){var t=c.state.bookList.filter((function(t){return t.id==e.target.value}));0!=t.length&&c.setState({currentBook:t[0]})},c.handleChangePaymentMethods=function(e){var t=parseInt(e.target.value);c.setState({currentPaymentMethods:c.state.paymentList[t].method})},c.handleSubmit=function(){if(c.props.retail){var e=c.state.form,t=e.orderId,n=e.totalPrice,a=c.state,s=a.bookId,r=a.currentPaymentMethods,i=a.note,o={ref:"retail",ref_id:t.value,book_id:s,type:r,note:i,amount:n.value};ac.postTransaction(o).then((function(e){c.setNotiMessage("Thanh to\xe1n th\xe0nh c\xf4ng!"),"pharmacy"===c.props.mode&&c.props.affterPayment(),c.resetForm()})).catch((function(e){console.log(e)}))}else{if(!c.state.isOrderFound)return void c.setNotiMessage("B\u1ea1n ch\u01b0a ch\u1ecdn h\xf3a \u0111\u01a1n \u0111\u1ec3 thanh to\xe1n!");var l=c.state.form,d=l.orderId,u=l.totalPrice,h=c.state,j=h.bookId,b=h.currentPaymentMethods,m=h.note,x={ref:"order",ref_id:d.value,book_id:j,amount:u.value,type:b,note:m};c.state.form.isPayment&&c.setNotiMessage(""),ac.postTransaction(x).then((function(e){c.setNotiMessage("Thanh to\xe1n th\xe0nh c\xf4ng!"),"pharmacy"===c.props.mode&&c.props.affterPayment(),c.resetForm()})).catch((function(e){console.log(e)}))}},c.doneAlert=function(){c.setNotiMessage(""),"pharmacy"===c.props.mode&&c.props.handleClose()},c.state={bookList:[],paymentList:[{name:"Ti\u1ec1n m\u1eb7t",method:"cash"},{name:"Th\u1ebb ATM",method:"other"}],currentPaymentMethods:"cash",note:"  ",isPayment:!0,notiMessage:"",form:c._getInitFormData({sumOriginPrice:"",customerCode:"",orderCode:"",customerName:"",customerBirthday:"",totalPrice:"",nameService:"",priceService:"",customerGender:"",cTime:"",orderStatus:"",bookId:""}),isOrderFound:!1},c}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.getAllBookList(),this.handleSearch(this.props.billID)}},{key:"render",value:function(){var e=this,t=this.state.form,n=t.orderCode,c=t.customerName,a=t.customerCode,s=t.customerBirthday,r=t.totalPrice,i=t.customerGender,o=t.cTime,l=t.orderStatus,d=t.note,u=this.state,h=u.notiMessage,j=u.customerAddress,b=u.sumOriginPrice,m=this.props,x=m.billID,O=m.mode,p=(m.comboName,m.retail);return Object(et.jsxs)(rn.a,{xs:{size:10,offset:1},children:[Object(et.jsx)(at,{message:h,done:this.doneAlert}),"reception"===O&&Object(et.jsxs)(rn.a,{sx:12,children:[Object(et.jsxs)(sn.a,{className:"customCard mt-3 pb-0 naV",children:[Object(et.jsxs)(rn.a,{sm:6,className:"row pl-0",children:[Object(et.jsxs)(Vn.a,{sm:2,className:"title-card p-0",href:"/",children:[Object(et.jsx)("span",{className:"material-icons",children:"library_books"})," S\u1ed5 thu "]}),Object(et.jsx)(rn.a,{sm:5,children:Object(et.jsx)(Nn.a,{type:"select",name:"select",onChange:this.handleChange,children:this.state.bookList.map((function(e){return Object(et.jsx)("option",{value:e.id,children:e.name},e.id)}))})})]}),Object(et.jsxs)(rn.a,{sm:6,className:"row",children:[Object(et.jsxs)(Vn.a,{sm:2,className:"title-card order-code",children:[Object(et.jsx)("span",{className:"material-icons",children:"playlist_add_check"}),"M\xe3 h\xf3a \u0111\u01a1n"]}),Object(et.jsx)(rn.a,{sm:5,children:Object(et.jsxs)(Ds.a,{children:[Object(et.jsx)(Nn.a,{autoFocus:!0,onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"14",name:"orderCode",className:"inputAcc",value:x,onChange:function(t){e._setValue(t,"orderCode")},type:"text",id:"orderCode",placeholder:"Nh\u1eadp m\xe3 h\xf3a \u0111\u01a1n",required:!0}),Object(et.jsx)(Is.a,{addonType:"append",children:Object(et.jsx)(Ze.a,{color:"primary",onClick:function(){e.handleSearch(n.value)},children:Object(et.jsx)("span",{className:"material-icons",children:"search"})})})]})})]})]}),Object(et.jsxs)(sa.a,{className:"accounting-form",children:[Object(et.jsx)(Xn.a,{className:"customCard min-h-40 customer-form",children:Object(et.jsx)("div",{className:"background",children:Object(et.jsx)(uc,{data:{code:a.value,full_name:c.value,birthday:s.value,gender:i.value,address:j}})})}),Object(et.jsxs)(Xn.a,{className:"customCard info-form",children:[Object(et.jsxs)("p",{className:"title-card",children:[Object(et.jsx)("span",{className:"material-icons",children:"description"})," Th\xf4ng tin \u0111\u01a1n h\xe0ng"]}),Object(et.jsx)(Xn.a,{row:!0,children:Object(et.jsx)(rn.a,{sm:12,children:Object(et.jsx)(Ps,{items:this.state.items})})}),Object(et.jsxs)(Xn.a,{row:!0,children:[Object(et.jsx)(Vn.a,{for:"totalPrice",sm:4,children:"T\u1ed5ng s\u1ed1 ti\u1ec1n gi\xe1 g\u1ed1c(b\u1eb1ng s\u1ed1)"}),Object(et.jsx)(rn.a,{sm:6,children:Object(et.jsx)(Es.a,Object(f.a)({className:"inputAc",value:b,name:"totalPrice",thousandSeparator:!0,suffix:" VND",displayType:"text"},"value",Math.ceil(b)))})]}),Object(et.jsxs)(Xn.a,{row:!0,children:[Object(et.jsx)(Vn.a,{for:"totalPrice",sm:4,children:"T\u1ed5ng s\u1ed1 ti\u1ec1n khuy\u1ebfn m\xe3i(b\u1eb1ng s\u1ed1)"}),Object(et.jsx)(rn.a,{sm:6,children:Object(et.jsx)(Es.a,Object(f.a)({className:"inputAc",value:r.value,onChange:function(t){e._setValue(t,"totalPrice")},name:"totalPrice",thousandSeparator:!0,suffix:" VND",displayType:"text"},"value",Math.ceil(r.value)))})]}),Object(et.jsxs)(Xn.a,{row:!0,children:[Object(et.jsx)(Vn.a,{for:"wordPrice",sm:4,children:"T\u1ed5ng s\u1ed1 ti\u1ec1n(b\u1eb1ng ch\u1eef)"}),Object(et.jsx)(rn.a,{sm:6,children:Object(et.jsx)(Nn.a,{className:"inputAcc",readOnly:!0,type:"text",name:"wordPrice",id:"wordPrice",value:(r.value?Wn(r.value):"").toUpperCase()})})]}),Object(et.jsxs)(Xn.a,{row:!0,children:[Object(et.jsx)(Vn.a,{for:"getTime",sm:4,children:"Th\u1eddi gian t\u1ea1o \u0111\u01a1n"}),Object(et.jsx)(rn.a,{sm:6,children:Object(et.jsx)(Nn.a,{type:"text",name:"totalPrice",className:"inputAcc",value:o.value,onChange:function(t){e._setValue(t,"getTime")}})})]}),Object(et.jsxs)(Xn.a,{row:!0,children:[Object(et.jsx)(Vn.a,{for:"getStatus",sm:4,children:"Tr\u1ea1ng th\xe1i thanh to\xe1n"}),Object(et.jsx)(rn.a,{sm:6,children:Object(et.jsx)(Nn.a,{type:"text",name:"status",className:"inputAcc",value:l.value?"paid"===l.value?"\u0111\xe3 thanh to\xe1n":"ch\u01b0a thanh to\xe1n":"",onChange:function(t){e._setValue(t,"status")}})})]})]}),Object(et.jsxs)(Xn.a,{row:!0,className:"customCard money-form",children:[Object(et.jsxs)(Vn.a,{sm:3,className:"title-card",children:[Object(et.jsx)("span",{className:"material-icons",children:"monetization_on"})," Thanh to\xe1n h\xf3a \u0111\u01a1n"]}),Object(et.jsx)(rn.a,{sm:2,children:Object(et.jsx)(Nn.a,{onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"15",type:"select",name:"select",onChange:this.handleChangePaymentMethods,children:this.state.paymentList.map((function(e,t){return Object(et.jsx)("option",{value:t,children:e.name},e.method)}))})}),Object(et.jsx)(rn.a,{sm:5,children:Object(et.jsx)(Nn.a,{value:d,onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"16",onChange:this.handleChangeNote,type:"text",placeholder:"\u0111i\u1ec1n th\xf4ng tin giao d\u1ecbch"})}),Object(et.jsxs)(rn.a,{sm:2,className:"end pl-0",children:[Object(et.jsxs)(Ze.a,{onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"17",onClick:function(){e.handleSubmit(),e.props.submitForm(),e.props.handleClose()},disabled:l.value==I,children:[Object(et.jsx)(Ls.a,{color:"primary",className:this.state.submitLoading?"d-inline-block":"d-none"}),"Thanh To\xe1n"]})," "]})]})]})]}),"pharmacy"===O&&Object(et.jsxs)(rn.a,{sx:12,children:[Object(et.jsxs)(sn.a,{className:"customCard mt-3 pb-0",children:[Object(et.jsxs)(rn.a,{sm:"6",className:"row pl-0",children:[Object(et.jsxs)(Vn.a,{sm:"2",className:"title-card p-0",href:"/",children:[Object(et.jsx)("span",{className:"material-icons",children:"library_books"})," S\u1ed5 thu "]}),Object(et.jsx)(rn.a,{sm:"8",children:Object(et.jsx)(Nn.a,{type:"select",name:"select",onChange:this.handleChange,children:this.state.bookList.map((function(e){return Object(et.jsx)("option",{value:e.id,children:e.name},e.id)}))})})]}),Object(et.jsxs)(rn.a,{sm:"6",className:"row",children:[Object(et.jsxs)(Vn.a,{sm:4,className:"title-card",children:[Object(et.jsx)("span",{className:"material-icons",children:"playlist_add_check"}),"M\xe3 h\xf3a \u0111\u01a1n"]}),Object(et.jsx)(rn.a,{sm:8,children:Object(et.jsxs)(Ds.a,{children:[Object(et.jsx)(Nn.a,{autoFocus:!0,onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"14",name:"orderCode",className:"inputAcc",value:x,onChange:function(t){e._setValue(t,"orderCode")},type:"text",id:"orderCode",placeholder:"Nh\u1eadp m\xe3 h\xf3a \u0111\u01a1n",required:!0}),Object(et.jsx)(Is.a,{addonType:"append",children:Object(et.jsx)(Ze.a,{color:"primary",onClick:function(){e.handleSearch(n.value)},children:Object(et.jsx)("span",{className:"material-icons",children:"search"})})})]})})]})]}),Object(et.jsxs)(sa.a,{children:[Object(et.jsx)(Xn.a,{className:"customCard min-h-32",children:Object(et.jsx)("div",{className:"background",children:Object(et.jsx)(uc,{data:{code:a.value,full_name:p?this.props.retailCustomerName:c.value,birthday:s.value,gender:i.value,address:j}})})}),Object(et.jsxs)(Xn.a,{className:"customCard",children:[Object(et.jsxs)("p",{className:"title-card",children:[Object(et.jsx)("span",{className:"material-icons",children:"description"})," Th\xf4ng tin \u0111\u01a1n h\xe0ng"]}),Object(et.jsx)(Xn.a,{row:!0,children:Object(et.jsx)(rn.a,{sm:12,children:Object(et.jsx)(Ps,{items:this.state.items})})}),Object(et.jsxs)(Xn.a,{row:!0,children:[Object(et.jsx)(Vn.a,{for:"totalPrice",sm:4,children:"T\u1ed5ng s\u1ed1 ti\u1ec1n(b\u1eb1ng s\u1ed1)"}),Object(et.jsx)(rn.a,{sm:6,children:Object(et.jsx)(Es.a,Object(f.a)({className:"inputAc",value:r.value,onChange:function(t){e._setValue(t,"totalPrice")},name:"totalPrice",thousandSeparator:!0,suffix:" VND",displayType:"text"},"value",Math.ceil(r.value)))})]}),Object(et.jsxs)(Xn.a,{row:!0,children:[Object(et.jsx)(Vn.a,{for:"wordPrice",sm:4,children:"T\u1ed5ng s\u1ed1 ti\u1ec1n(b\u1eb1ng ch\u1eef)"}),Object(et.jsx)(rn.a,{sm:6,children:Object(et.jsx)(Nn.a,{className:"inputAcc",readOnly:!0,type:"text",name:"wordPrice",id:"wordPrice",value:(r.value?Wn(r.value):"").toUpperCase()})})]}),Object(et.jsxs)(Xn.a,{row:!0,children:[Object(et.jsx)(Vn.a,{for:"getTime",sm:4,children:"Th\u1eddi gian t\u1ea1o \u0111\u01a1n"}),Object(et.jsx)(rn.a,{sm:6,children:Object(et.jsx)(Nn.a,{type:"text",name:"totalPrice",className:"inputAcc",value:o.value,onChange:function(t){e._setValue(t,"getTime")}})})]}),Object(et.jsxs)(Xn.a,{row:!0,children:[Object(et.jsx)(Vn.a,{for:"getStatus",sm:4,children:"Tr\u1ea1ng th\xe1i thanh to\xe1n"}),Object(et.jsx)(rn.a,{sm:6,children:Object(et.jsx)(Nn.a,{type:"text",name:"status",className:"inputAcc",value:l.value?"paid"===l.value?"\u0111\xe3 thanh to\xe1n":"ch\u01b0a thanh to\xe1n":"",onChange:function(t){e._setValue(t,"status")}})})]})]}),Object(et.jsxs)(Xn.a,{row:!0,className:"customCard",children:[Object(et.jsxs)(Vn.a,{sm:3,className:"title-card",children:[Object(et.jsx)("span",{className:"material-icons",children:"monetization_on"})," Thanh to\xe1n h\xf3a \u0111\u01a1n"]}),Object(et.jsx)(rn.a,{sm:2,children:Object(et.jsx)(Nn.a,{onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"15",type:"select",name:"select",onChange:this.handleChangePaymentMethods,children:this.state.paymentList.map((function(e,t){return Object(et.jsx)("option",{value:t,children:e.name},e.method)}))})}),Object(et.jsx)(rn.a,{sm:5,children:Object(et.jsx)(Nn.a,{value:d,onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"16",onChange:this.handleChangeNote,type:"text",placeholder:"\u0111i\u1ec1n th\xf4ng tin giao d\u1ecbch"})}),Object(et.jsxs)(rn.a,{sm:2,className:"end pl-0",children:[Object(et.jsxs)(Ze.a,{onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"17",onClick:function(){e.handleSubmit()},disabled:l.value==I,children:[Object(et.jsx)(Ls.a,{color:"primary",className:this.state.submitLoading?"d-inline-block":"d-none"}),"Thanh To\xe1n"]})," "]})]})]})]})]})}}]),n}(ze),Bs=Ms,As=n(28),Fs=n(49),Us=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).getCityList=function(){var e=ac.getLocationAllCity("province","VN");return e.then((function(e){c.setCityList(e.data)})),e},c.getDistricts=function(){var e=Object(j.a)(h.a.mark((function e(t,n){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ac.getLocationAllDistrict(t,n),e.next=3,a.then((function(e){c.setDistrictList(e.data)}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),c.getWards=function(){var e=Object(j.a)(h.a.mark((function e(t,n){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ac.getLocationAllWard(t,n),e.next=3,a.then((function(e){c.setWardList(e.data)}));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),c.setWardList=function(e){c.setState({wardList:e}),c.setState({parent_id:e[0].id})},c.setCityList=function(e){c.setState({cityList:e}),c.setState({parent_id:e[0].id})},c.setDistrictList=function(e){c.setState({districtList:e}),c.setState({parent_id:e[0].id})},c.state={cityList:[],wardList:[],districtList:[],currentCity:"",currentDistrict:"",currentWard:""},c.handleChangeCity=c.handleChangeCity.bind(Object(x.a)(c)),c.handleChangeDistrict=c.handleChangeDistrict.bind(Object(x.a)(c)),c.handleChangeWard=c.handleChangeWard.bind(Object(x.a)(c)),c}return Object(b.a)(n,[{key:"handleChangeCity",value:function(e){var t=this.state.cityList.filter((function(t){return t.name==e}));0!=t.length&&(this.setState({currentCity:t[0]}),this.getDistricts("district",t[0].id))}},{key:"handleChangeDistrict",value:function(e){var t=this.state.districtList.filter((function(t){return t.name==e}));0!=t.length&&(this.setState({currentDistrict:t[0]}),this.getWards("ward",t[0].id))}},{key:"handleChangeWard",value:function(e){var t=this.state.wardList.filter((function(t){return t.name==e}));0!=t.length&&this.setState({currentWard:t[0]})}},{key:"componentDidMount",value:function(){document.getElementById("province").setAttribute("data-index","7"),document.getElementById("district").setAttribute("data-index","8"),document.getElementById("ward").setAttribute("data-index","9"),this.getCityList()}},{key:"componentDidUpdate",value:function(e){var t=this;if(this.props.fillAddress!==e.fillAddress){var n=this.state.cityList.filter((function(e){return e.name==t.props.form.contact_city.value}));if(0==n.length)return;this.setState({currentCity:n[0]}),ac.getLocationAllDistrict("district",n[0].id).then((function(e){t.setDistrictList(e.data);var n=t.state.districtList.filter((function(e){return e.name==t.props.form.contact_district.value}));0!=n.length&&(t.setState({currentDistrict:n[0]}),ac.getLocationAllWard("ward",n[0].id).then((function(e){t.setWardList(e.data)})))}))}}},{key:"render",value:function(){var e=this,t=this.props.form,n=t.contact_full_name,c=(t.health_insuranced,t.health_insurance,t.contact_address),a=t.dirty,s=(t.contact_email,t.contact_city),r=t.contact_district,i=t.contact_ward,o=this.props,l=o._setValue,d=o.officialsExam,u=this.state,h=u.cityList,j=u.districtList,b=u.wardList,m=h.map((function(e){return{value:e.name,label:e.name}}))||[],x=j.map((function(e){return{value:e.name,label:e.name}}))||[],O=b.map((function(e){return{value:e.name,label:e.name}}))||[],p={ignoreCase:!0,ignoreAccents:!0,trim:!0,matchFrom:"any",stringify:function(e){return"".concat(e.label," ").concat(function(e){for(var t="\xe0\xe1\xe3\u1ea3\u1ea1\u0103\u1eb1\u1eaf\u1eb3\u1eb5\u1eb7\xe2\u1ea7\u1ea5\u1ea9\u1eab\u1ead\xe8\xe9\u1ebb\u1ebd\u1eb9\xea\u1ec1\u1ebf\u1ec3\u1ec5\u1ec7\u0111\xf9\xfa\u1ee7\u0169\u1ee5\u01b0\u1eeb\u1ee9\u1eed\u1eef\u1ef1\xf2\xf3\u1ecf\xf5\u1ecd\xf4\u1ed3\u1ed1\u1ed5\u1ed7\u1ed9\u01a1\u1edd\u1edb\u1edf\u1ee1\u1ee3\xec\xed\u1ec9\u0129\u1ecb\xe4\xeb\xef\xee\xf6\xfc\xfb\xf1\xe7\xfd\u1ef3\u1ef9\u1ef5\u1ef7",n=0,c=t.length;n<c;n++)e=e.replace(RegExp(t[n],"gi"),"aaaaaaaaaaaaaaaaaeeeeeeeeeeeduuuuuuuuuuuoooooooooooooooooiiiiiaeiiouuncyyyyy"[n]);return e.toLowerCase().trim().replace(/[^a-z0-9\-]/g,"-").replace(/-+/g,"-")}(e.label).match(/\b\w/g).join(""))}};return Object(et.jsxs)(et.Fragment,{children:[Object(et.jsxs)("p",{className:"title-card",children:[Object(et.jsx)("span",{className:"material-icons",children:"assignment"})," Th\xf4ng tin li\xean l\u1ea1c"]}),Object(et.jsxs)(Xn.a,{row:!0,className:"address-form",children:[Object(et.jsxs)(Vn.a,{for:"contact_address",sm:4,children:["\u0110\u1ecba ch\u1ec9 ",Object(et.jsx)(oc,{})]}),Object(et.jsx)(rn.a,{sm:8,children:Object(et.jsx)(Nn.a,{onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"6",type:"text",name:"contact_address",id:"contact_address",value:c.value,onChange:function(e){return l(e,"contact_address")},required:!0})}),Object(et.jsxs)(sn.a,{className:"mb-0",children:[Object(et.jsx)(rn.a,{className:"cities",children:Object(et.jsx)(As.a,{inputId:"province",onKeyDown:function(e){return ct.onKeyDown(e)},value:m.find((function(e){return e.value===s.value}))||null,onChange:function(t){e.handleChangeCity(t.value),l({persist:function(){return null},target:{value:t.value,validity:{valid:!!t.value}}},"contact_city")},options:m,placeholder:" T\u1ec9nh",menuPlacement:"top",openMenuOnFocus:!0,filterOption:Object(Fs.b)(p),required:!0})}),Object(et.jsx)(rn.a,{className:"districts",children:Object(et.jsx)(As.a,{inputId:"district",onKeyDown:function(e){return ct.onKeyDown(e)},value:x.find((function(e){return e.value===r.value}))||null,onChange:function(t){e.handleChangeDistrict(t.value),l({persist:function(){return null},target:{value:t.value,validity:{valid:!!t.value}}},"contact_district")},options:x,placeholder:" Huy\u1ec7n",menuPlacement:"top",openMenuOnFocus:!0,filterOption:Object(Fs.b)(p)})}),Object(et.jsx)(rn.a,{className:"wards",children:Object(et.jsx)(As.a,{inputId:"ward",onKeyDown:function(e){return ct.onKeyDown(e)},value:O.find((function(e){return e.value===i.value}))||null,onChange:function(t){e.handleChangeWard(t.value),l({persist:function(){return null},target:{value:t.value,validity:{valid:!!t.value}}},"contact_ward")},options:O,placeholder:"Ph\u01b0\u1eddng/x\xe3",menuPlacement:"top",openMenuOnFocus:!0,filterOption:Object(Fs.b)(p)})})]})]}),Object(et.jsxs)(Xn.a,{row:!0,children:[Object(et.jsx)(Vn.a,{for:"dealth_insurance",sm:4,children:"M\xe3 b\u1ea3o hi\u1ec3m"}),Object(et.jsx)(rn.a,{sm:8,children:Object(et.jsx)(Nn.a,{onKeyDown:function(e){return ct.onKeyDown(e)},name:"health_insurance",disabled:d})})]}),Object(et.jsxs)(Xn.a,{row:!0,children:[Object(et.jsx)(Vn.a,{for:"dealth_insurance",sm:4,children:"N\u01a1i \u0111\u0103ng k\xed"}),Object(et.jsx)(rn.a,{sm:8,children:Object(et.jsx)(Nn.a,{onKeyDown:function(e){return ct.onKeyDown(e)},name:"health_insurance",disabled:d})})]}),Object(et.jsxs)(Xn.a,{row:!0,children:[Object(et.jsx)(Vn.a,{for:"contact_full_name",sm:4,children:"T\xean ng\u01b0\u1eddi li\xean h\u1ec7"}),Object(et.jsxs)(rn.a,{sm:8,children:[Object(et.jsx)(Nn.a,{onKeyDown:function(e){return ct.onKeyDown(e)},disabled:d,type:"text",name:"contact_full_name",value:n.value,id:"contact_full_name",onChange:function(e){return l(e,"contact_full_name")},className:"text-uppercase"}),a&&Object(et.jsx)("span",{className:"text-danger",children:n.err})]})]})]})}}]),n}(a.a.Component),Hs=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).setShowSearch=function(e){c.setState({showSearch:e})},c.setCustomerCode=function(e){c.setState({customerCode:e})},c.setCustomerMatch=function(e){c.setState({customerMatch:e})},c.handleSearch=function(){var e=Object(j.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.setShowSearch(!0),c.setCustomerCode(t),!(t.length>=3)){e.next=7;break}return e.next=5,ac.searchCustomer(t);case 5:n=e.sent,c.setCustomerMatch(n.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.onChooseCustomer=function(e){c.props.handleReExam(e.code),c.setShowSearch(!1)},c.state={customerCode:"",customerMatch:[],showSearch:!1},c}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.customerCode,c=t.customerMatch,a=t.showSearch;return Object(et.jsx)(et.Fragment,{children:Object(et.jsx)("div",{className:"position-relative search-1",children:Object(et.jsxs)(sn.a,{children:[Object(et.jsxs)("p",{className:"title-card title-search col-form-label",children:[Object(et.jsx)("span",{className:"material-icons",children:"search"})," T\xecm ki\u1ebfm"]}),Object(et.jsxs)(rn.a,{className:"px-0 ml-3",children:[Object(et.jsx)(Nn.a,{type:"search",value:n,onChange:function(t){e.handleSearch(t.target.value)},onFocus:function(){return e.setShowSearch(!0)},onBlur:function(){return setTimeout((function(){return e.setShowSearch(!1)}),200)},placeholder:"Nh\u1eadp m\xe3 b\u1ec7nh nh\xe2n, s\u1ed1 \u0111i\u1ec7n tho\u1ea1i..."}),n&&a&&Object(et.jsx)("div",{className:"position-absolute",children:Object(et.jsxs)("div",{children:[n&&!c.length&&"Kh\xf4ng t\xecm th\u1ea5y b\u1ec7nh nh\xe2n!",!!c.length&&Object(et.jsxs)(qn.a,{hover:!0,size:"sm",children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"M\xe3"}),Object(et.jsx)("th",{children:"T\xean"}),Object(et.jsx)("th",{children:"\u0110i\u1ec7n tho\u1ea1i"}),Object(et.jsx)("th",{children:"Ng\xe0y sinh"})]})}),Object(et.jsx)("tbody",{children:c.map((function(t){var n,c;return Object(et.jsxs)("tr",{onClick:function(){return e.onChooseCustomer(t)},children:[Object(et.jsx)("td",{children:t.code}),Object(et.jsx)("td",{children:t.full_name}),Object(et.jsx)("td",{children:null===(n=t.contacts)||void 0===n||null===(c=n[0])||void 0===c?void 0:c.phone}),Object(et.jsx)("td",{children:Zn(t.birthday)})]},t.id)}))})]})]})})]})]})})})}}]),n}(a.a.Component),Ks=function(e){var t,n,a=Object(c.useState)(!1),s=Object(wn.a)(a,2),r=s[0],i=s[1],o=Object(c.useState)([]),l=Object(wn.a)(o,2),d=l[0],u=l[1],b=function(){return i(!r)},m=e.cm_code,x=e.handleReExam,O=e.cm_full_name,p=e.cm_birthday;Object(c.useEffect)((function(){p.value&&O.value&&!p.err||m.value&&!m.err&&f(m.value)}),[m.value]);var f=function(){var e=Object(j.a)(h.a.mark((function e(t){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ac.getCmbyCode(t);case 2:n=e.sent,c=n.data,u(c),c.id&&i(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(et.jsxs)(We.a,{isOpen:r,toggle:b,children:[Object(et.jsxs)(Ye.a,{toggle:b,children:["B\u1ec7nh nh\xe2n c\xf3 m\xe3 ",m.value]}),Object(et.jsx)(Qe.a,{children:Object(et.jsxs)(qn.a,{hover:!0,size:"sm",children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"M\xe3"}),Object(et.jsx)("th",{children:"T\xean"}),Object(et.jsx)("th",{children:"Ng\xe0y sinh"}),Object(et.jsx)("th",{children:"\u0110i\u1ec7n tho\u1ea1i"}),Object(et.jsx)("th",{children:"Gi\u1edbi t\xednh"})]})}),Object(et.jsx)("tbody",{children:Object(et.jsxs)("tr",{onClick:function(){return function(e){x(e.code),b()}(d)},children:[Object(et.jsx)("td",{children:d.code}),Object(et.jsx)("td",{children:d.full_name}),Object(et.jsx)("td",{children:Zn(d.birthday)}),Object(et.jsx)("td",{children:null===(t=d.contacts)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.phone}),Object(et.jsx)("td",{children:"male"===d.gender?"Nam":"N\u1eef"})]},d.id)})]})}),Object(et.jsx)($e.a,{children:Object(et.jsx)(Ze.a,{color:"secondary",onClick:b,children:"Tho\xe1t"})})]})},Gs=function(e){var t=Object(c.useState)(!1),n=Object(wn.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)([]),i=Object(wn.a)(r,2),o=i[0],l=i[1],d=function(){return s(!a)},u=(e.cm_code,e.cm_full_name),b=e.cm_birthday,m=e.handleReExam,x=(e.cm_phoneNumber,e.contact_address);Object(c.useEffect)((function(){x.value||b.value&&u.value&&!b.err&&O(u.value.toUpperCase(),$n(b.value))}),[b.value,u.value.toUpperCase()]);var O=function(){var e=Object(j.a)(h.a.mark((function e(t,n){var c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ac.getCmList({full_name:t,birthday:n});case 2:c=e.sent,l(c.data),c.data.length&&s(!0);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(et.jsx)("div",{children:Object(et.jsxs)(We.a,{isOpen:a,toggle:d,children:[Object(et.jsxs)(Ye.a,{toggle:d,children:["B\u1ec7nh nh\xe2n c\xf3 t\xean ",u.value,", ng\xe0y sinh ",Zn(b.value)]}),Object(et.jsx)(Qe.a,{children:Object(et.jsxs)(qn.a,{hover:!0,size:"sm",children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"M\xe3"}),Object(et.jsx)("th",{children:"T\xean"}),Object(et.jsx)("th",{children:"Ng\xe0y sinh"}),Object(et.jsx)("th",{children:"\u0110i\u1ec7n tho\u1ea1i"}),Object(et.jsx)("th",{children:"Gi\u1edbi t\xednh"})]})}),Object(et.jsx)("tbody",{children:o.map((function(e){var t,n;return Object(et.jsxs)("tr",{onClick:function(){return function(e){m(e.code),d()}(e)},children:[Object(et.jsx)("td",{children:e.code}),Object(et.jsx)("td",{children:e.full_name}),Object(et.jsx)("td",{children:Zn(e.birthday)}),Object(et.jsx)("td",{children:null===(t=e.contacts)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.phone}),Object(et.jsx)("td",{children:"male"===e.gender?"Nam":"N\u1eef"})]},e.id)}))})]})}),Object(et.jsx)($e.a,{children:Object(et.jsx)(Ze.a,{color:"secondary",onClick:d,children:"Tho\xe1t"})})]})})},Js=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).state={},c}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.assignedServices,n=e.titleService,c=e.locPrint,a=0,s=new Date,r=t.map((function(e,t){return a+=e.price,Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{children:t+1}),Object(et.jsx)("td",{children:e.name}),Object(et.jsx)("td",{children:e.code}),Object(et.jsx)("td",{children:c})]},e.id)}));return Object(et.jsx)("div",{className:"border border-secondary receiptContainer m-3 ",style:{display:"none"},children:Object(et.jsxs)("div",{className:"position-relative printDiag",id:"servicePrint",children:[Object(et.jsx)("div",{className:"absolute header-from",children:Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{sm:"9",children:Object(et.jsxs)(sn.a,{className:"text-left",children:[Object(et.jsx)(rn.a,{sm:"3",children:Object(et.jsx)(sn.a,{children:Object(et.jsx)("img",{className:"image",src:Qt})})}),Object(et.jsxs)(rn.a,{children:[Object(et.jsx)(sn.a,{children:"Ph\xf2ng Kh\xe1m \u0110a Khoa Vi\u1ec7t \u0110o\xe0n"}),Object(et.jsx)(sn.a,{children:"B\xe1ch M\xf4n, Vi\u1ec7t \u0110o\xe0n, Ti\xean Du, B\u1eafc Ninh"}),Object(et.jsx)(sn.a,{children:"hotline: 0869.968.688"})]})]})}),Object(et.jsx)(rn.a,{className:"end",children:Object(et.jsx)("canvas",{id:"canvasIdEtc",style:{height:"13mm"}})})]})}),Object(et.jsx)("h5",{className:"text-center font-weight-bold",children:Object(et.jsx)("b",{children:n})}),Object(et.jsx)("div",{className:"text-center",children:Object(et.jsxs)("i",{children:["Ng\xe0y ",s.getDate()," Th\xe1ng ",s.getMonth()+1," N\u0103m ",s.getFullYear()]})}),Object(et.jsx)("br",{}),Object(et.jsx)("canvas",{id:"cusBarCode",style:{height:"13mm"}}),Object(et.jsx)("div",{className:"justify-content-between",children:Object(et.jsxs)(qn.a,{bordered:!0,className:"tableService",children:[Object(et.jsx)("thead",{className:"title-table",children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"#"}),Object(et.jsx)("th",{children:"T\xean x\xe9t nghi\u1ec7m"}),Object(et.jsx)("th",{children:"Lo\u1ea1i x\xe9t nghi\u1ec7m"}),Object(et.jsx)("th",{children:"Ph\xf2ng x\xe9t nghi\u1ec7m"})]})}),Object(et.jsx)("tbody",{children:r})]})}),Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{sm:"6"}),Object(et.jsxs)(rn.a,{sm:"6",children:["T\u1ed5ng ti\u1ec1n:",Object(et.jsxs)("b",{children:[new Intl.NumberFormat("de-DE").format(a),"VN\u0110"]})]})]}),Object(et.jsx)("br",{}),Object(et.jsxs)("div",{className:"d-flex justify-content-between px-4",children:[Object(et.jsxs)("div",{className:"text-center mr-auto ml-5",children:[Object(et.jsx)("strong",{children:"B\xc1C S\u0128 \u0110I\u1ec0U TR\u1eca"}),Object(et.jsx)("br",{}),Object(et.jsx)("i",{children:"(k\xfd, h\u1ecd t\xean)"})]}),Object(et.jsxs)("div",{className:"text-center mr-5",children:["....Gi\u1edd ....Ng\xe0y ....Th\xe1ng ....N\u0103m",Object(et.jsx)("br",{}),Object(et.jsx)("strong",{children:"KHOA X\xc9T NGHI\u1ec6M"}),Object(et.jsx)("br",{})]})]}),Object(et.jsx)(sn.a,{children:Object(et.jsx)(rn.a,{})})]})})}}]),n}(ze),Xs=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).setComboName=function(e){c.setState({comboName:e})},c.setSelectedXRayService=function(e){c.setState({selectedXRayService:e})},c.setSelectedEntService=function(e){c.setState({selectedEntService:e})},c.setSelectedOtherService=function(e){c.setState({selectedOtherService:e})},c.setSelectedUltrasoundService=function(e){c.setState({selectedUltrasoundService:e})},c.setSelectedTestService=function(e){c.setState({selectedTestService:e})},c.setShowServiceTest=function(e){c.setState({showServiceTest:e})},c.setShowServiceTest=function(e){c.setState({showServiceOther:e})},c.setShowServiceUltrasound=function(e){c.setState({showServiceUltrasound:e})},c.setShowServiceEnt=function(e){c.setState({showServiceEnt:e})},c.setServices=function(e){c.setState({services:e})},c.setServiceOther=function(e){c.setState({serviceOther:e})},c.setNotiMessage=function(e){c.setState({notiMessage:e})},c.setServiceTest=function(e){c.setState({serviceTest:e})},c.setServiceExam=function(e){c.setState({serviceExam:e})},c.getLocationByServiceId=function(e){return ac.getLocationByService(e)},c.handleChangeSelectService=function(e,t){c.setState({selectedService:e}),t&&("XNDV"==={selectedService:e}.selectedService.value?c.setState({showServiceTest:!0}):"XRAY"==={selectedService:e}.selectedService.value?c.setState({showServiceXRay:!0}):"CC"==={selectedService:e}.selectedService.value?c.setState({showServiceOther:!0}):"NSDV"==={selectedService:e}.selectedService.value?c.setState({showServiceEnt:!0}):"SADV"==={selectedService:e}.selectedService.value&&c.setState({showServiceUltrasound:!0}));var n=c.state.serviceXray.find((function(t){return t.id==e.value})),a=c.props.selectedXRayService;n&&a.indexOf(n)<0&&a.push(n);var s=0;c.props.selectedXRayService&&(c.props.selectedXRayService.map((function(e){s+=e.price})),c.setState({priceXray:s})),c.setSelectedXRayService(a);var r=c.state.serviceEnt.find((function(t){return t.id==e.value})),i=c.props.selectedEntService;r&&i.indexOf(r)<0&&i.push(r);var o=0;c.props.selectedEntService&&(c.props.selectedEntService.map((function(e){o+=e.price})),c.setState({priceEnt:o})),c.setSelectedEntService(i);var l=c.state.serviceUltrasound.find((function(t){return t.id==e.value})),d=c.props.selectedUltrasoundService;l&&d.indexOf(l)<0&&d.push(l);var u=0;c.props.selectedUltrasoundService&&(c.props.selectedUltrasoundService.map((function(e){u+=e.price})),c.setState({priceSADV:u})),c.setSelectedUltrasoundService(d);var h=c.state.serviceOther.find((function(t){return t.id==e.value})),j=c.props.selectedOtherService;h&&j.indexOf(h)<0&&j.push(h);var b=0;c.props.selectedOtherService&&(c.props.selectedOtherService.map((function(e){b+=e.price})),c.setState({priceOther:b})),c.setSelectedOtherService(j);var m=c.state.serviceTest.find((function(t){return t.id==e.value})),x=c.props.selectedTestService;m&&x.indexOf(m)<0&&x.push(m),c.setSelectedTestService(x);var O=0;if(c.props.selectedTestService){for(var p=0;p<c.props.selectedTestService.length;p++)O+=c.props.selectedTestService[p].price;c.setState({price:O})}c.setState({showTable:!0}),c.onServiceChange(e)},c.getListCustomerByLocationId=function(e,t,n){return ac.getJobStepList(e,t,n)},c.getServicePrice=function(){var e=c.state.policyPriceList.find((function(e){return e.id===c.props.form.policy_id.value})),t=c.state.serviceExam.find((function(e){return e.id===c.props.form.service_id.value}));if(e)return{discountPrice:Math.round((t?t.price:0)*(1-e.discount)),basicPrice:t?t.origin_price:0,PriceUpdate:t?t.price:0}},c.onServiceChange=function(){var e=Object(j.a)(h.a.mark((function e(t){var n,a,s,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}c.setNotiMessage("C\xf3 l\u1ed7i! Xin vui l\xf2ng ch\u1ecdn d\u1ecbch v\u1ee5 "),e.next=20;break;case 4:return n=t.value,c.props.setValueForm(t),e.next=8,c.props.isExamWithin3D(c.props.medicalHistory,n);case 8:if(!e.sent){e.next=12;break}c.props.setPolicyId(null===(a=c.state.policyPriceList.find((function(e){return e.code===y})))||void 0===a?void 0:a.id),e.next=19;break;case 12:return e.next=14,c.props.officialsExam;case 14:if(!e.sent){e.next=18;break}c.props.setPolicyId(null===(s=c.state.policyPriceList.find((function(e){return e.code===N})))||void 0===s?void 0:s.id),e.next=19;break;case 18:c.props.setPolicyId(null===(r=c.state.policyPriceList.find((function(e){return e.code===S})))||void 0===r?void 0:r.id);case 19:c.getLocationByServiceId(n).then((function(e){var t=c.props.form,n=e.data;c.setState({locationList:n}),1===n.length?c.props.setLocationId(c.state.locationList[0].id):c.setState({form:Object(vn.a)(Object(vn.a)({},t),{},{location_id:{value:"",err:"*"}})});var a=[],s=(new Date).getTime();n.forEach(function(){var e=Object(j.a)(h.a.mark((function e(t){var n,r,i,o,l,d,u,j;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.type==z?(n="".concat(_,",").concat(w,",").concat(T),r=R,c.getListCustomerByLocationId(t.id,n,r).then((function(e){var n=e.data.filter((function(e){return s-e.ctime<he})).length;a.push({name:t.name,customerWait:n,id:t.id}),a.sort((function(e,t){return e.customerWait-t.customerWait})),c.setState({clinic:a})}))):t.type==$?(i=T,o=M,c.getListCustomerByLocationId(t.id,i,o).then((function(e){var n=e.data.length;a.push({name:t.name,customerWait:n,id:t.id}),c.setState({clinic:a})}))):t.type==Q?("",""!=D&&""!=I&&(l=A,c.getListCustomerByLocationId(t.id,l).then((function(e){var n=e.data.length;a.push({name:t.name,customerWait:n,id:t.id}),c.setState({clinic:a})})))):t.type==Z?("",""!=D&&""!=I&&(d=B,c.getListCustomerByLocationId(t.id,d).then((function(e){var n=e.data.length;a.push({name:t.name,customerWait:n,id:t.id}),c.setState({clinic:a})})))):t.type==W?("",""!=D&&""!=I&&(u=U,c.getListCustomerByLocationId(t.id,u).then((function(e){var n=e.data.length;a.push({name:t.name,customerWait:n,id:t.id}),c.setState({clinic:a})})))):t.type==ee&&("",""!=D&&""!=I&&(j=F,c.getListCustomerByLocationId(t.id,j).then((function(e){var n=e.data.length;a.push({name:t.name,customerWait:n,id:t.id}),c.setState({clinic:a})}))));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})).catch((function(e){console.log(e)}));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.onClearForm=function(){var e=c.state.selectedTestService;c.state.price;e.splice(0,e.length),c.setState({selectedTestService:e}),c.setState({price:0})},c.onClearFormXRay=function(){var e=c.state.selectedXRayService;e.splice(0,e.length),c.setState({selectedXRayService:e}),c.setState({showServiceXRay:!1})},c.onClearFormOther=function(){var e=c.state.selectedOtherService;e.splice(0,e.length),c.setState({selectedOtherService:e}),c.setState({showServiceOther:!1})},c.onClearFormUltrasound=function(){var e=c.state.selectedUltrasoundService;c.state.price;e.splice(0,e.length),c.setState({selectedUltrasoundService:e}),c.setState({price:0})},c.onClearFormEnt=function(){var e=c.state.selectedEntService;c.state.price;e.splice(0,e.length),c.setState({selectedEntService:e}),c.setState({price:0})},c.onCloseForm=function(){var e=c.state.serviceExam;c.props.form;e.unshift({code:"comboXN",id:"comboXN",name:c.state.comboName,type:"test",price:c.state.price,value:c.state.selectedTestService}),c.setState({serviceExam:e}),c.setState({selectedService:{value:e[0].id,label:e[0].name}}),c.props.setValueForm({err:"",value:"comboXN"}),c.props.setComboNameForm({err:"",value:c.state.comboName}),c.setState({showServiceTest:!1})},c.onCloseFormXray=function(){c.setState({showServiceXRay:!1})},c.onCloseFormOther=function(){c.setState({showServiceOther:!1})},c.onCloseFormUltrasound=function(){c.setState({showServiceUltrasound:!1})},c.onCloseFormEnt=function(){c.setState({showServiceEnt:!1})},c.onCloseFormXray=function(){c.setState({showServiceXRay:!1})},c.onCloseFormEnt=function(){c.setState({showServiceEnt:!1})},c.updatePrice=function(e){var t=0;console.log(e);var n,c=Object(fn.a)(e);try{for(c.s();!(n=c.n()).done;){var a=n.value;try{t+=a.price}catch(s){console.log("updatePrice",s)}}}catch(r){c.e(r)}finally{c.f()}return t},c.deleteRow=function(e,t){switch(t){case"selectedTestService":var n=c.state.selectedTestService;n.splice(e,1),c.setState({selectedTestService:n,price:c.updatePrice(n)});break;case"selectedXRayService":var a=c.state.selectedXRayService;a.splice(e,1),c.setState({selectedXRayService:a,priceXray:c.updatePrice(a)});break;case"selectedUltrasoundService":var s=c.state.selectedUltrasoundService;s.splice(e,1),c.setState({selectedUltrasoundService:s,priceSADV:c.updatePrice(s)});break;case"selectedOtherService":var r=c.state.selectedOtherService;r.splice(e,1),c.setState({selectedOtherService:r,priceSADV:c.updatePrice(r)});break;case"selectedEntService":var i=c.state.selectedEntService;i.splice(e,1),c.setState({selectedEntService:i,priceEnt:c.updatePrice(i)})}},c.printService=function(){var e=Object(j.a)(h.a.mark((function e(t,n,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.setState({titlePrint:n,arrayServicePrint:t,locationPrint:a});case 2:return e.next=4,qe.print("servicePrint");case 4:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),c.state={comboName:"",selectedService:null,selectedPolicy:null,services:[],serviceOther:[],serviceTest:[],serviceXray:[],serviceEnt:[],serviceUltrasound:[],serviceExam:[],serviceList:[],policyPriceList:[],locationList:[],clinic:[],showServiceTest:!1,showServiceXRay:!1,showServiceEnt:!1,showServiceUltrasound:!1,showTable:!1,arrayServicePrint:[],titlePrint:"",titleExam:"PHI\u1ebeU Y\xcaU C\u1ea6U X\xc9T NGHI\u1ec6M",titleEnt:"PHI\u1ebeU Y\xcaU C\u1ea6U N\u1ed8I SOI",titleUltra:"PHI\u1ebeU Y\xcaU C\u1ea6U SI\xcaU \xc2M",titleXray:"PHI\u1ebeU Y\xcaU C\u1ea6U XQUANG",titleOther:"PHI\u1ebeU Y\xcaU C\u1ea6U C\u1ea5p C\u1ee9u",locationPrint:"",locExam:"PH\xd2NG X\xc9T NGHI\u1ec6M",locOther:"Ph\xf2ng C\u1ea5p C\u1ee9u",locENT:"PH\xd2NG N\u1ed8I SOI",locUtral:"PH\xd2NG SI\xcaU \xc2M",locXray:"PH\xd2NG XQUANG"},c}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;document.getElementById("selectService").setAttribute("data-index","10"),Ea.getServiceList().then((function(t){e.setState({serviceList:t.data});var n=e.state.serviceList.filter((function(e){return"x-ray"==e.type}));e.setState({serviceXray:n});var c=e.state.serviceList.filter((function(e){return"ent"==e.type}));e.setState({serviceEnt:c});var a=e.state.serviceList.filter((function(e){return"other"==e.type}));e.setState({serviceOther:a});var s=e.state.serviceList.filter((function(e){return"ultrasound"==e.type}));e.setState({serviceUltrasound:s});var r=e.state.serviceList.filter((function(e){return"test"==e.type}));e.setState({serviceTest:r});var i=e.state.serviceList.filter((function(e){return"exam"==e.type}));i.push({code:"XNDV",id:"XNDV",name:"X\xe9t Nghi\u1ec7m D\u1ecbch V\u1ee5",type:"exam",price:0,value:r}),i.push({code:"XRAY",id:"XRAY",name:"Ch\u1ee5p X-Quang",type:"x-ray",price:0,value:n}),i.push({code:"SADV",id:"SADV",name:"Si\xeau \xc2m D\u1ecbch V\u1ee5",type:"ultrasound",price:0,value:s}),i.push({code:"NSDV",id:"NSDV",name:"N\u1ed9i Soi D\u1ecbch V\u1ee5",type:"ent",price:0,value:c}),i.push({code:"CC",id:"CC",name:"C\u1ea5p c\u1ee9u",type:"other",price:0,value:a}),e.setState({serviceExam:i});var o=i.concat(r).concat(c).concat(s);e.setState({services:o})})).catch((function(e){})),Ha.getPricePolicyList().then((function(t){var n=t.data.reverse();e.setState({policyPriceList:n})})).catch((function(e){}))}},{key:"render",value:function(){var e=this,t=this.state,n=(t.services,t.basicPrice,t.discountPrice,t.PriceUpdate,t.serviceList,t.policyPriceList),c=(t.locationList,t.selectedService),a=t.clinic,s=t.selectedTestService,r=t.selectedOtherService,i=t.selectedXRayService,o=(t.policy,t.selectedUltrasoundService),l=t.selectedEntService,d=this.state,u=d.price,h=d.priceSADV,j=d.priceEnt,b=d.priceXray,m=d.priceOther,x=this.state,O=x.serviceExam,p=x.serviceTest,f=x.serviceXray,v=x.serviceUltrasound,g=x.serviceEnt,S=x.serviceOther,C=this.state,_=C.showTable,T=C.showServiceTest,w=C.showServiceXRay,k=C.showServiceUltrasound,D=C.showServiceEnt,I=C.showServiceOther,L=this.props.form,E=L.service_id,P=L.location_id,R=L.policy_id,M=L.dirty,B=this.props._setValue,A=O.map((function(e){return{value:e.id,label:e.name}}))||[],F=p.map((function(e){return{value:e.id,label:e.name}}))||[],U=f.map((function(e){return{value:e.id,label:e.name}}))||[],H=S.map((function(e){return{value:e.id,label:e.name}}))||[],K=v.map((function(e){return{value:e.id,label:e.name}}))||[],G=g.map((function(e){return{value:e.id,label:e.name}}))||[];return Object(et.jsxs)("div",{className:"serviceForm-container",children:[Object(et.jsxs)("h5",{className:"title-card title-service",children:[Object(et.jsx)("span",{className:"material-icons",children:"local_hospital"})," Ch\u1ecdn d\u1ecbch v\u1ee5"]}),Object(et.jsxs)(sn.a,{className:"mb-0 services-form",children:[Object(et.jsx)(rn.a,{sm:4,children:Object(et.jsxs)(Xn.a,{children:[Object(et.jsxs)(Vn.a,{for:"service_id",className:"title-selectService",children:["Ch\u1ecdn d\u1ecbch v\u1ee5 ",Object(et.jsx)(oc,{})]}),Object(et.jsx)(As.a,{onKeyDown:function(e){return ct.onKeyDown(e)},inputId:"selectService",type:"select",id:"service_id",value:c,onChange:function(t){return e.handleChangeSelectService(t,"service_id")},required:!0,placeholder:"Ch\u1ecdn d\u1ecbch v\u1ee5",options:A}),M&&Object(et.jsx)("span",{className:"text-danger",children:E.err}),Object(et.jsxs)(We.a,{isOpen:T,children:[Object(et.jsxs)(Ye.a,{children:[Object(et.jsx)("h3",{children:" \u0110\u1eb7t t\xean cho combo x\xe9t Nghi\u1ec7m"}),Object(et.jsx)(Nn.a,{type:"text",placeholder:"Nh\u1eadp t\xean combo x\xe9t nghi\u1ec7m",autoFocus:!0,onChange:function(t){return e.setComboName(t.target.value)}}),Object(et.jsx)("h3",{children:" Ch\u1ecdn  d\u1ecbch v\u1ee5 x\xe9t nghi\u1ec7m"})]}),Object(et.jsxs)(Qe.a,{children:[Object(et.jsx)(As.a,{inputId:"selectService",type:"select",id:"service_id",value:c,onChange:function(t){return e.handleChangeSelectService(t,"service_id")},required:!0,placeholder:"Ch\u1ecdn d\u1ecbch v\u1ee5",options:F}),c&&Object(et.jsxs)(qn.a,{isOpen:_,children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"STT"}),Object(et.jsx)("th",{children:"T\xean d\u1ecbch v\u1ee5"}),Object(et.jsx)("th",{children:"Gi\xe1 d\u1ecbch v\u1ee5"}),Object(et.jsx)("th",{children:"X\xf3a d\u1ecbch v\u1ee5"})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:s.map((function(t,n){return Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{scope:"row",children:n+1}),Object(et.jsx)("td",{children:t.name}),Object(et.jsx)("td",{children:Object(et.jsx)(Es.a,{thousandSeparator:!0,readOnly:!0,suffix:" VND",value:t.price})}),Object(et.jsx)("td",{children:Object(et.jsx)(Ze.a,{className:"btn-del",onClick:function(){return e.deleteRow(n,"selectedTestService")},children:"X"})})]},t.id)}))})]})]}),Object(et.jsxs)($e.a,{children:[Object(et.jsxs)("p",{className:"totalAll",children:["T\u1ed5ng s\u1ed1 ti\u1ec1n: ",Object(et.jsx)(Es.a,{thousandSeparator:!0,readOnly:!0,suffix:" VND",value:u})]}),Object(et.jsx)(Ze.a,{onClick:function(){return e.onCloseForm()},children:"Ho\xe0n th\xe0nh"}),Object(et.jsx)(Ze.a,{className:"btn-del",onClick:function(){e.onClearForm()},children:"X\xf3a"}),Object(et.jsx)(Ze.a,{onClick:function(){return e.printService(s,e.state.titleExam,e.state.locExam)},children:"In phi\u1ebfu"})]})]}),Object(et.jsxs)(We.a,{isOpen:I,children:[Object(et.jsx)(Ye.a,{children:Object(et.jsx)("h3",{children:" Ch\u1ecdn  d\u1ecbch v\u1ee5 C\u1ea5p c\u1ee9u"})}),Object(et.jsxs)(Qe.a,{children:[Object(et.jsx)(As.a,{inputId:"selectService",type:"select",id:"service_id",value:c,onChange:function(t){return e.handleChangeSelectService(t,"service_id")},required:!0,placeholder:"Ch\u1ecdn d\u1ecbch v\u1ee5",options:H}),c&&Object(et.jsxs)(qn.a,{isOpen:_,children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"STT"}),Object(et.jsx)("th",{children:"T\xean d\u1ecbch v\u1ee5"}),Object(et.jsx)("th",{children:"Gi\xe1 d\u1ecbch v\u1ee5"}),Object(et.jsx)("th",{children:"X\xf3a d\u1ecbch v\u1ee5"})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:r.map((function(t,n){return Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{scope:"row",children:n+1}),Object(et.jsx)("td",{children:t.name}),Object(et.jsx)("td",{children:Object(et.jsx)(Es.a,{thousandSeparator:!0,readOnly:!0,suffix:" VND",value:t.price})}),Object(et.jsx)("td",{children:Object(et.jsx)(Ze.a,{className:"btn-del",onClick:function(){return e.deleteRow(n,"selectedOtherService")},children:"X"})})]},t.id)}))})]})]}),Object(et.jsxs)($e.a,{children:[Object(et.jsxs)("p",{className:"totalAll",children:["T\u1ed5ng s\u1ed1 ti\u1ec1n: ",Object(et.jsx)(Es.a,{thousandSeparator:!0,readOnly:!0,suffix:" VND",value:m})]}),Object(et.jsx)(Ze.a,{onClick:function(){return e.onCloseFormOther()},children:"Ho\xe0n th\xe0nh"}),Object(et.jsx)(Ze.a,{className:"btn-del",onClick:function(){e.onClearFormOther()},children:"X\xf3a"}),Object(et.jsx)(Ze.a,{onClick:function(){return e.printService(r,e.state.titleOther,e.state.locOther)},children:"In phi\u1ebfu"})]})]}),Object(et.jsxs)(We.a,{isOpen:w,children:[Object(et.jsx)(Ye.a,{children:Object(et.jsx)("h3",{children:" Ch\u1ecdn  d\u1ecbch v\u1ee5 x-quang"})}),Object(et.jsxs)(Qe.a,{children:[Object(et.jsx)(As.a,{inputId:"selectService",type:"select",id:"service_id",value:c,onChange:function(t){return e.handleChangeSelectService(t,"service_id")},required:!0,placeholder:"Ch\u1ecdn d\u1ecbch v\u1ee5",options:U}),c&&Object(et.jsxs)(qn.a,{isOpen:_,children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"STT"}),Object(et.jsx)("th",{children:"T\xean d\u1ecbch v\u1ee5"}),Object(et.jsx)("th",{children:"Gi\xe1 d\u1ecbch v\u1ee5"}),Object(et.jsx)("th",{children:"X\xf3a d\u1ecbch v\u1ee5"})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:i.map((function(t,n){return Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{scope:"row",children:n+1}),Object(et.jsx)("td",{children:t.name}),Object(et.jsx)("td",{children:Object(et.jsx)(Es.a,{thousandSeparator:!0,readOnly:!0,suffix:" VND",value:t.price})}),Object(et.jsx)("td",{children:Object(et.jsx)(Ze.a,{className:"btn-del",onClick:function(){return e.deleteRow(n,"selectedXRayService")},children:"X"})})]},t.id)}))})]})]}),Object(et.jsxs)($e.a,{children:[Object(et.jsxs)("p",{className:"totalAll",children:["T\u1ed5ng s\u1ed1 ti\u1ec1n: ",Object(et.jsx)(Es.a,{thousandSeparator:!0,readOnly:!0,suffix:" VND",value:b})]}),Object(et.jsx)(Ze.a,{onClick:function(){return e.onCloseFormXray()},children:"Ho\xe0n th\xe0nh"}),Object(et.jsx)(Ze.a,{className:"btn-del",onClick:function(){e.onClearFormXRay()},children:"X\xf3a"}),Object(et.jsx)(Ze.a,{onClick:function(){return e.printService(i,e.state.titleXray,e.state.locXray)},children:"In phi\u1ebfu"})]})]}),Object(et.jsxs)(We.a,{isOpen:k,children:[Object(et.jsx)(Ye.a,{children:Object(et.jsx)("h3",{children:" Ch\u1ecdn d\u1ecbch v\u1ee5 si\xeau \xe2m"})}),Object(et.jsxs)(Qe.a,{children:[Object(et.jsx)(As.a,{inputId:"selectService",type:"select",id:"service_id",value:c,onChange:function(t){return e.handleChangeSelectService(t,"service_id")},required:!0,placeholder:"Ch\u1ecdn d\u1ecbch v\u1ee5",options:K}),c&&Object(et.jsxs)(qn.a,{isOpen:_,children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"STT"}),Object(et.jsx)("th",{children:"T\xean d\u1ecbch v\u1ee5"}),Object(et.jsx)("th",{children:"Gi\xe1 d\u1ecbch v\u1ee5"}),Object(et.jsx)("th",{children:"X\xf3a d\u1ecbch v\u1ee5"})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:o.map((function(t,n){return Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{scope:"row",children:n+1}),Object(et.jsx)("td",{children:t.name}),Object(et.jsx)("td",{children:Object(et.jsx)(Es.a,{thousandSeparator:!0,readOnly:!0,suffix:" VND",value:t.price})}),Object(et.jsx)("td",{children:Object(et.jsx)(Ze.a,{className:"btn-del",onClick:function(){return e.deleteRow(n,"selectedUltrasoundService")},children:"X"})})]},t.id)}))})]})]}),Object(et.jsxs)($e.a,{children:[Object(et.jsxs)("p",{className:"totalAll",children:["T\u1ed5ng s\u1ed1 ti\u1ec1n: ",Object(et.jsx)(Es.a,{thousandSeparator:!0,readOnly:!0,suffix:" VND",value:h})]}),Object(et.jsx)(Ze.a,{onClick:function(){return e.onCloseFormUltrasound()},children:"Ho\xe0n th\xe0nh"}),Object(et.jsx)(Ze.a,{className:"btn-del",onClick:function(){e.onClearFormUltrasound()},children:"X\xf3a"}),Object(et.jsx)(Ze.a,{onClick:function(){return e.printService(o,e.state.titleUltra,e.state.locUtral)},children:"In phi\u1ebfu"})]})]}),Object(et.jsxs)(We.a,{isOpen:D,children:[Object(et.jsx)(Ye.a,{children:Object(et.jsx)("h3",{children:" Ch\u1ecdn  d\u1ecbch v\u1ee5 N\u1ed9i soi "})}),Object(et.jsxs)(Qe.a,{children:[Object(et.jsx)(As.a,{inputId:"selectService",type:"select",id:"service_id",value:c,onChange:function(t){return e.handleChangeSelectService(t,"service_id")},required:!0,placeholder:"Ch\u1ecdn d\u1ecbch v\u1ee5",options:G}),c&&Object(et.jsxs)(qn.a,{isOpen:_,children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"STT"}),Object(et.jsx)("th",{children:"T\xean d\u1ecbch v\u1ee5"}),Object(et.jsx)("th",{children:"Gi\xe1 d\u1ecbch v\u1ee5"}),Object(et.jsx)("th",{children:"X\xf3a d\u1ecbch v\u1ee5"})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:l&&l.map((function(t,n){return Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{scope:"row",children:n+1}),Object(et.jsx)("td",{children:t.name}),Object(et.jsx)("td",{children:Object(et.jsx)(Es.a,{thousandSeparator:!0,readOnly:!0,suffix:" VND",value:t.price})}),Object(et.jsx)("td",{children:Object(et.jsx)(Ze.a,{className:"btn-del",onClick:function(){return e.deleteRow(n,"selectedEntService")},children:"X"})})]},t.id)}))})]})]}),Object(et.jsxs)($e.a,{children:[Object(et.jsxs)("p",{className:"totalAll",children:["T\u1ed5ng s\u1ed1 ti\u1ec1n: ",Object(et.jsx)(Es.a,{thousandSeparator:!0,readOnly:!0,suffix:" VND",value:j})]}),Object(et.jsx)(Ze.a,{onClick:function(){return e.onCloseFormEnt()},children:"Ho\xe0n th\xe0nh"}),Object(et.jsx)(Ze.a,{className:"btn-del",onClick:function(){e.onClearFormEnt()},children:"X\xf3a"}),Object(et.jsx)(Ze.a,{onClick:function(){return e.printService(l,e.state.titleEnt,e.state.locENT)},children:"In phi\u1ebfu"})]})]}),Object(et.jsx)(Js,{assignedServices:this.state.arrayServicePrint,titleService:this.state.titlePrint,locPrint:this.state.locationPrint})]})}),Object(et.jsx)(rn.a,{sm:4,children:Object(et.jsxs)(Xn.a,{children:[Object(et.jsxs)(Vn.a,{for:"policy_id",className:"title-selectService",children:["\u0110\u1ed1i t\u01b0\u1ee3ng d\u1ecbch v\u1ee5 ",Object(et.jsx)(oc,{})]}),Object(et.jsx)(Nn.a,{className:"input-serivce",onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"11",type:"select",id:"policy_id",value:R.value,onChange:function(e){return B(e,"policy_id")},required:!0,children:n.map((function(e){return Object(et.jsx)("option",{value:e.id,hidden:e.code==y||e.code==N,children:e.name},e.id)}))}),M&&Object(et.jsx)("span",{className:"text-danger",children:R.err})]})}),Object(et.jsx)(rn.a,{sm:4,children:Object(et.jsxs)(Xn.a,{children:[Object(et.jsxs)(Vn.a,{for:"location_id",className:"title-selectService",children:["Ph\xf2ng kh\xe1m ",Object(et.jsx)(oc,{})]}),Object(et.jsxs)(Nn.a,{className:"input-serivce",onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"12",type:"select",id:"location_id",value:P.value,onChange:function(e){return B(e,"location_id")},required:!0,children:[Object(et.jsx)("option",{value:"",children:"Ch\u1ecdn ph\xf2ng kh\xe1m"}),a.map((function(e){return Object(et.jsx)("option",{value:e.id,children:"".concat(e.name," - S\u1ed1 ng\u01b0\u1eddi \u0111ang ch\u1edd: ").concat(e.customerWait)},e.id)}))]}),M&&Object(et.jsx)("span",{className:"text-danger",children:P.err})]})})]}),E.value&&R.value?Object(et.jsxs)("div",{children:[Object(et.jsxs)("span",{className:"mr-3",children:["Gi\xe1 g\u1ed1c:",Yn(this.getServicePrice().basicPrice)," VN\u0110"]}),Object(et.jsx)("br",{}),Object(et.jsxs)("span",{className:"mr-3",children:["Gi\xe1 khuy\u1ebfn m\xe3i ph\xf2ng kh\xe1m:",Yn(this.getServicePrice().PriceUpdate)," VN\u0110",Object(et.jsx)("br",{})]}),Object(et.jsxs)("span",{className:"mr-3",children:["Gi\xe1 khuy\u1ebfn m\xe3i ch\xednh s\xe1ch d\u1ecbch v\u1ee5: ",Yn(this.getServicePrice().discountPrice)," VN\u0110"]})]}):Object(et.jsx)("div",{})]})}}]),n}(a.a.Component),Vs=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).setShowHistory=function(e){c.setState({showHistory:e})},c.setShow=function(e){c.setState({show:e})},c.setLocationId=function(e){var t=c.state.form;t.location_id.value=e,t.location_id.err="",c.setState({form:t})},c.setPolicyId=function(e){var t=c.state.form;t.policy_id.value=e,t.policy_id.err="",c.setState({form:t})},c.setCustomerCode=function(e){var t=c.state.form;t.cm_code.value=e,t.cm_code.err="",c.setState({form:t})},c.setNotiMessage=function(e){c.setState({notiMessage:e})},c.setFindLoading=function(e){c.setState({findLoading:e})},c.setSubmitLoading=function(e){c.setState({submitLoading:e})},c.setOfficialsExam=function(e){c.setState({officialsExam:e})},c.setCustomerId=function(e){c.setState({customerId:e})},c.setContactId=function(e){c.setState({contactId:e})},c.setMedicalHistory=function(e){c.setState({medicalHistory:e})},c.setJobHistory=function(e){c.setState({jobHistory:e})},c.setComboNameForm=function(e){var t=c.state.form;t.comboName.value=e.value,t.comboName.err="",c.setState(t)},c.setValueForm=function(e){var t=c.state.form;t.service_id.value=e.value,t.service_id.err="",c.setState(t)},c.handleResetForm=function(){c._fillForm({location_id:"",service_id:"",policy_id:"",cm_full_name:"",cm_gender:"male",cm_birthday:"",cm_code:be("now"),contact_full_name:"",contact_phone_number:"",contact_address:"",contact_email:"",contact_city:"",contact_district:"",contact_ward:"",orderStatus:"",comboName:""}),c.setCustomerId(""),c.setContactId(""),c.setReExamination(!1),c.setOfficialsExam(!1),c.setSubmitLoading(!1)},c.submitContact=function(e){var t=c.state.form,n=t.contact_full_name,a=t.contact_phone_number,s=t.contact_address,r=t.contact_email,i=t.contact_city,o=t.contact_district,l=t.contact_ward,d={full_name:n.value.toUpperCase(),phone:a.value,address:{province:i.value,district:o.value,ward:l.value,street:s.value},email:r.value,customer_id:e};return c.state.reExamination&&c.state.contactId?(d.id=c.state.contactId,d.customer_id=c.state.customerId,Bc.modifyCmContact(d)):Bc.addCmContact(d)},c.submitCustomer=function(){var e=c.state.form,t=e.cm_code,n=e.cm_full_name,a=e.cm_gender,s=e.cm_birthday,r={full_name:n.value.toUpperCase(),code:t.value,gender:a.value,birthday:$n(s.value)};return c.state.reExamination?(r.id=c.state.customerId,Bc.modifyCm(r)):Bc.addCm(r)},c.updateInforCus=function(){c._validateForm(),c._isFormValid()?(c.submitCustomer(),c.submitContact(),c.setNotiMessage("C\u1eadp nh\u1eadp th\xf4ng tin b\u1ec7nh nh\xe2n th\xe0nh c\xf4ng")):c.setNotiMessage("Vui l\xf2ng nh\u1eadp \u0111\u1ea7y \u0111\u1ee7 th\xf4ng tin, \u0111\u1ec3 c\u1eadp nh\u1eadp!")},c.onShowHistory=function(){c.state.customerId?c.handleShowHistory():c.setNotiMessage("B\u1ec7nh nh\xe2n kh\xf4ng c\xf3 l\u1ecbch s\u1eed \u0111\u1ec3 hi\u1ec3n th\u1ecb!")},c.onPrintShortKeyCode=function(){c.setState({onPrintShortKey:!0})},c.findOrderByCode=function(e){return ac.getOrder(e)},c.printJob=function(){c.props.history.push("/app/reception/print/".concat(c.state.jobId))},c.submitJobTest=function(e){var t=c.state.form,n=t.location_id,a=t.policy_id,s=c.state.selectedTestService.map((function(e){return{id:e.id}})),r={location_id:n.value,services:s,service_policy_id:a.value,customer_id:e};return ac.postJobTest(r)},c.submitJobXray=function(e){var t=c.state.form,n=t.location_id,a=t.policy_id;console.log(c.state.selectedXRayService,"333");var s=c.state.selectedXRayService.map((function(e){return{id:e.id}}));console.log(s,"5555");var r={location_id:n.value,services:s,service_policy_id:a.value,customer_id:e};return ac.postJobTest(r)},c.submitJobUltrasound=function(e){var t=c.state.form,n=t.location_id,a=t.policy_id,s=c.state.selectedUltrasoundService.map((function(e){return{id:e.id}})),r={location_id:n.value,services:s,service_policy_id:a.value,customer_id:e};return ac.postJobTest(r)},c.submitJobOther=function(e){var t=c.state.form,n=t.location_id,a=t.policy_id,s=c.state.selectedOtherService.map((function(e){return{id:e.id}})),r={location_id:n.value,services:s,service_policy_id:a.value,customer_id:e};return ac.postJobTest(r)},c.submitJobEnt=function(e){var t=c.state.form,n=t.location_id,a=t.policy_id,s=c.state.selectedEntService.map((function(e){return{id:e.id}})),r={location_id:n.value,services:s,service_policy_id:a.value,customer_id:e};return ac.postJobTest(r)},c.submitJob=function(e){var t=c.state.form,n=t.location_id,a=t.service_id,s=t.policy_id,r={location_id:n.value,service_id:a.value,service_policy_id:s.value,customer_id:e};return ac.postJob(r)},c.handlePayment=function(){var e=c.state.form,t=e.service_id,n=e.policy_id,a=e.location_id;c._validateForm(),c._isFormValid()&&t.value&&n.value&&a.value?c.submitCustomer().then((function(e){var t=e.id;c.state.reExamination&&(t=c.state.customerId),c.submitContact(t).then((function(e){})).catch((function(e){console.log(e)})),c.state.selectedTestService.length>0?c.submitJobTest(t).then((function(e){ac.getJobById(e.data.id).then((function(e){var t,n=e.data;c.setState({billID:null===(t=n.steps)||void 0===t?void 0:t[0].code}),c.setState({jobId:n.id}),c.setState({show:!0})}))})).catch((function(e){console.log(e),c.setNotiMessage("C\xf3 l\u1ed7i x\u1ea3y ra3!")})):c.state.selectedUltrasoundService.length>0?c.submitJobUltrasound(t).then((function(e){ac.getJobById(e.data.id).then((function(e){var t,n=e.data;c.setState({billID:null===(t=n.steps)||void 0===t?void 0:t[0].code}),c.setState({jobId:n.id}),c.setState({show:!0})}))})).catch((function(e){console.log(e),c.setNotiMessage("C\xf3 l\u1ed7i x\u1ea3y ra3!")})):c.state.selectedOtherService.length>0?c.submitJobOther(t).then((function(e){ac.getJobById(e.data.id).then((function(e){var t,n=e.data;c.setState({billID:null===(t=n.steps)||void 0===t?void 0:t[0].code}),c.setState({jobId:n.id}),c.setState({show:!0})}))})).catch((function(e){console.log(e),c.setNotiMessage("C\xf3 l\u1ed7i x\u1ea3y ra3!")})):c.state.selectedEntService.length>0?c.submitJobEnt(t).then((function(e){ac.getJobById(e.data.id).then((function(e){var t,n=e.data;c.setState({billID:null===(t=n.steps)||void 0===t?void 0:t[0].code}),c.setState({jobId:n.id}),c.setState({show:!0})}))})).catch((function(e){console.log(e),c.setNotiMessage("C\xf3 l\u1ed7i x\u1ea3y ra3!")})):c.state.selectedXRayService.length>0?c.submitJobXray(t).then((function(e){ac.getJobById(e.data.id).then((function(e){var t,n=e.data;c.setState({billID:null===(t=n.steps)||void 0===t?void 0:t[0].code}),c.setState({jobId:n.id}),c.setState({show:!0})}))})).catch((function(e){console.log(e),c.setNotiMessage("C\xf3 l\u1ed7i x\u1ea3y ra3!")})):c.submitJob(t).then((function(e){ac.getJobById(e.data.id).then((function(e){var t,n=e.data;c.setState({billID:null===(t=n.steps)||void 0===t?void 0:t[0].code}),c.setState({jobId:n.id}),c.setState({show:!0})}))})).catch((function(e){console.log(e),c.setNotiMessage("C\xf3 l\u1ed7i x\u1ea3y ra3!")}))})).catch((function(e){console.log(e),c.setNotiMessage("C\xf3 l\u1ed7i x\u1ea3y ra4!")})):c.setNotiMessage("D\u1eef li\u1ec7u nh\u1eadp sai ho\u1eb7c kh\xf4ng \u0111\u1ea7y \u0111\u1ee7, vui l\xf2ng ki\u1ec3m tra l\u1ea1i!")},c.submitForm=function(){var e=c.state.form,t=e.service_id,n=e.policy_id,a=e.location_id;c._validateForm(),c._isFormValid()&&t.value&&n.value&&a.value?(c.setSubmitLoading(!0),c.printJob(c.state.jobId)):c.setNotiMessage("D\u1eef li\u1ec7u nh\u1eadp sai ho\u1eb7c kh\xf4ng \u0111\u1ea7y \u0111\u1ee7, vui l\xf2ng ki\u1ec3m tra l\u1ea1i!")},c.findCustomerByCode=function(e){return ac.getCmbyCode(e)},c.isExamWithin3D=function(){var e=Object(j.a)(h.a.mark((function e(t,n){var c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.filter((function(e){var t=(new Date).getTime()-e.ctime;if(t<2592e5&&e.steps[0].order.items[0].ref_value.id==n)return t<2592e5&&e.steps[0].order.items[0].ref_value.id==n&&e.steps[0].order.items[0].ref_value.type==R})),e.abrupt("return",c.length>0);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),c.handleShowHistory=function(){c.setShowHistory(!0)},c.handleCloseShowHistory=function(){c.setShowHistory(!1)},c.handleShow=function(){c.setShow(!0)},c.handleClose=function(){c.setShow(!1)},c.handleShowHistoryExam=function(e){c.findCustomerByCode(e).then(function(){var e=Object(j.a)(h.a.mark((function e(t){var n,a,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,e.next=3,ac.getExamHistory(n.id);case 3:return a=e.sent.data,c.setMedicalHistory(a),e.next=7,ac.getJobByCustomerId(n.id);case 7:s=e.sent.data,c.setState({items:s.reverse()}),c.setCustomerId(n.id),c.setShowHistory(!0);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),c.setNotiMessage("B\u1ec7nh nh\xe2n ch\u01b0a t\u1eebng \u0111\u1ebfn kh\xe1m"),c.setFindLoading(!1)}))},c.handleReExam=function(e){c.setFindLoading(!0),c.findCustomerByCode(e).then(function(){var e=Object(j.a)(h.a.mark((function e(t){var n,a,s,r,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,a={},n.contacts.length&&(a=n.contacts[0]),e.next=5,ac.getExamHistory(n.id);case 5:return s=e.sent.data,c.setMedicalHistory(s),e.next=9,ac.getJobByCustomerId(n.id);case 9:r=e.sent.data,c.setState({items:r.slice(-10).reverse()}),"",i=a.address,0==n.code.startsWith("CB")?(c._fillForm({location_id:"",service_id:"",policy_id:"",policy_code:"",cm_full_name:n.full_name,cm_gender:n.gender,cm_birthday:Zn(n.birthday),cm_code:n.code,contact_full_name:a.full_name,contact_phone_number:a.phone,contact_address:i.street,contact_email:a.email,contact_city:i.province,contact_district:i.district,contact_ward:i.ward,comboName:""}),c.setState({fillAddress:!0}),c.setReExamination(!0),c.setOfficialsExam(!1),c.setCustomerId(n.id),c.setContactId(a.id),c.setFindLoading(!1)):1==n.code.startsWith("CB")&&(c._fillForm({location_id:"",service_id:"",policy_id:"",policy_code:"",cm_full_name:n.full_name,cm_gender:n.gender,cm_birthday:Zn(n.birthday),cm_code:n.code,contact_full_name:a.full_name,contact_phone_number:a.phone,contact_address:i.street,contact_email:a.email,contact_city:i.province,contact_district:i.district,contact_ward:i.ward,comboName:""}),c.setState({fillAddress:!0}),c.setReExamination(!0),c.setOfficialsExam(!0),c.setCustomerId(n.id),c.setContactId(a.id),c.setFindLoading(!1));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),c.setNotiMessage("M\xe3 b\u1ec7nh nh\xe2n \u0111\xe3 t\u1ed3n t\u1ea1i!"),c.setFindLoading(!1)}))},c.staShortKey=function(){c.setState({onPrintShortKey:!1})},c.shortKey=function(e){if(e.ctrlKey)switch(e.preventDefault(),e.key){case"d":c.handleResetForm();break;case"s":c.handlePayment();break;case"u":c.updateInforCus();break;case"h":c.onShowHistory()}},c.state={selectedTestService:[],selectedOtherService:[],selectedXRayService:[],selectedUltrasoundService:[],selectedEntService:[],policy:{},billID:"",jobId:"",policyPriceList:[],serviceList:[],notiMessage:"",form:c._getInitFormData({location_id:"",service_id:"",policy_id:"",cm_full_name:"",cm_gender:"male",cm_birthday:"",cm_code:be("now"),contact_full_name:"",contact_phone_number:"",contact_address:"",contact_email:"",contact_city:"",contact_district:"",contact_ward:"",orderStatus:"",comboName:""}),customerCode:"",customerId:"",contactId:"",jobHistory:[],medicalHistory:[],reExamination:!1,officialsExam:!1,submitLoading:!1,findLoading:!1,show:!1,showHistory:!1,fillAddress:!1,onPrintShortKey:!1},c}return Object(b.a)(n,[{key:"setReExamination",value:function(e){this.setState({reExamination:e})}},{key:"componentDidMount",value:function(){var e=this;Ha.getPricePolicyList().then((function(t){e.setState({policyPriceList:t.data})})).catch((function(e){})),Ea.getServiceList().then((function(t){e.setState({serviceList:t.data})}))}},{key:"goTo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=window.location.origin+"/"+e,window.location.replace(e)}},{key:"render",value:function(){var e=this,t=this.state,n=t.reExamination,c=t.notiMessage,a=t.findLoading,s=t.officialsExam,r=this.state.form,i=r.cm_full_name,o=r.cm_birthday,l=r.cm_code,d=r.cm_phone_number,u=r.contact_address,h=this.state,j=h.show,b=h.showHistory;h.customerId;return Object(et.jsxs)("div",{sm:12,className:"receptionFromContainer",onKeyDown:function(t){return e.shortKey(t)},tabIndex:"0",children:[Object(et.jsx)(at,{message:c,done:function(){return e.setNotiMessage("")}}),Object(et.jsx)(Ks,{cm_code:l,cm_full_name:i,cm_birthday:o,handleReExam:this.handleReExam}),Object(et.jsx)(Gs,{contact_address:u,cm_phoneNumber:d,cm_code:l,cm_full_name:i,cm_birthday:o,handleReExam:this.handleReExam}),Object(et.jsx)("div",{className:"customCard mb-4 mt-4 search-form",children:Object(et.jsx)(Hs,{handleReExam:this.handleReExam})}),Object(et.jsxs)(sa.a,{children:[Object(et.jsxs)(sn.a,{className:"info-Form",children:[Object(et.jsx)(rn.a,{sm:5,className:"customerForm customCard",children:Object(et.jsx)(uc,{data:this.state.form,officialsExam:s,reExamination:n,_setValue:this._setValue,findLoading:a,printShortKey:this.state.onPrintShortKey,staShortKey:this.staShortKey,mode:"input"})}),Object(et.jsx)(rn.a,{sm:5,className:"contactForm customCard",children:Object(et.jsx)(Us,{officialsExam:s,fillAddress:this.state.fillAddress,form:this.state.form,_setValue:this._setValue})})]}),Object(et.jsx)("div",{className:"customCard pb-0 mt-4 form-service",children:Object(et.jsx)(Xs,{officialsExam:this.state.officialsExam,setComboNameForm:this.setComboNameForm,setValueForm:this.setValueForm,setPolicyCode:this.setPolicyCode,setLocationId:this.setLocationId,setPolicyId:this.setPolicyId,isExamWithin3D:this.isExamWithin3D,medicalHistory:this.state.medicalHistory,selectedTestService:this.state.selectedTestService,selectedOtherService:this.state.selectedOtherService,selectedXRayService:this.state.selectedXRayService,selectedUltrasoundService:this.state.selectedUltrasoundService,selectedEntService:this.state.selectedEntService,form:this.state.form,_setValue:this._setValue})}),Object(et.jsxs)("div",{className:"  mb-5 mt-4",children:[Object(et.jsxs)(rn.a,{className:"medicalHistoryForm justify-content-end",children:[Object(et.jsx)(Ze.a,{className:"ml-5",hidden:!this.state.customerId,onClick:this.onShowHistory,children:"L\u1ecbch s\u1eed Kh\xe1m"}),Object(et.jsx)(Ze.a,{className:"ml-5",hidden:!this.state.customerId,onClick:function(){return e.updateInforCus()},children:"C\u1eadp nh\u1eadt"}),Object(et.jsx)(Ze.a,{className:"ml-5 btn-del",onClick:function(){return e.handleResetForm()},children:"X\xf3a"}),Object(et.jsx)(Ze.a,{className:"ml-5","data-index":"13",onClick:this.handlePayment,children:"L\u01b0u"})]}),Object(et.jsxs)(We.a,{isOpen:j,children:[Object(et.jsx)(Ye.a,{children:"Thu Ng\xe2n"}),Object(et.jsx)(Qe.a,{children:Object(et.jsx)(Bs,{submitForm:this.submitForm,handleClose:this.handleClose,billID:this.state.billID,comboName:this.state.form.comboName,mode:"reception"})}),Object(et.jsx)($e.a,{children:Object(et.jsx)(Ze.a,{onClick:this.handleClose,children:"Close"})})]}),Object(et.jsxs)(We.a,{isOpen:b,children:[Object(et.jsx)(Ye.a,{children:"L\u1ecbch s\u1eed Kh\xe1m"}),Object(et.jsx)(Qe.a,{children:Object(et.jsx)(rc,{items:this.state.items})}),Object(et.jsx)($e.a,{children:Object(et.jsx)(Ze.a,{color:"danger",onClick:this.handleCloseShowHistory,children:"Close"})})]})]})]})]})}}]),n}(ze),qs=Object(r.h)(Vs),zs=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).setIsOrderFound=function(e){c.setState({isOrderFound:e})},c.setNotiMessage=function(e){c.setState({notiMessage:e})},c.resetForm=function(){c._fillForm({customerName:"",nameService:"",customerGender:"",time:"",service:[{name:"Kh\xe1m b\u1ec7nh",method:"exam"},{name:"X\xe9t nghi\u1ec7m",method:"test"}]}),c.setIsCustomerFound(!1)},c.findMedicalHistory=function(e,t){return ac.getExamHistory(e,t)},c.handleChangeSelectType=function(e){c.setState({selectedType:e})},c.handleSearch=function(e){c.findMedicalHistory(e).then((function(e){var t=e.data;c.setState({items:t.reverse()}),c.setIsOrderFound(!0)})).catch((function(e){console.log(e),c.setNotiMessage("Kh\xf4ng t\xecm th\u1ea5y h\xf3a \u0111\u01a1n!")}))},c.state={selectedType:null,isPayment:!0,notiMessage:"",form:c._getInitFormData({customerName:"",nameService:"",customerGender:"",time:"",service:[{name:"Kh\xe1m b\u1ec7nh",method:"exam"},{name:"X\xe9t nghi\u1ec7m",method:"test"}]}),isCustomerFound:!1},c}return Object(b.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,n=t.notiMessage,c=t.selectedType,a=this.props.customerId;return this.props.customerId&&""==a.value&&this.handleSearch(this.props.customerId),Object(et.jsxs)("div",{className:"container",children:[Object(et.jsx)(at,{message:n,done:function(){return e.setNotiMessage("")}}),Object(et.jsx)(rn.a,{sm:12,children:Object(et.jsxs)(sa.a,{children:[Object(et.jsxs)(Xn.a,{row:!0,children:[Object(et.jsx)(Vn.a,{sm:2,children:"M\xe3 b\u1ec7nh nh\xe2n"}),Object(et.jsx)(rn.a,{sm:6,children:Object(et.jsxs)(Ds.a,{children:[Object(et.jsx)(Nn.a,{name:"customerId",className:"inputcmId",value:a,onChange:function(t){e._setValue(t,"customerId")},type:"text",id:"customerId",placeholder:"Nh\u1eadp m\xe3 b\u1ec7nh nh\xe2n",required:!0}),Object(et.jsx)(Is.a,{addonType:"append",children:Object(et.jsx)(Ze.a,{color:"primary",onClick:function(){e.handleSearch()},children:"T\xecm"})})]})}),Object(et.jsxs)(Xn.a,{row:!0,children:[Object(et.jsx)(rn.a,{sm:2,children:Object(et.jsx)(Vn.a,{children:"L\u1ecdc theo :"})}),Object(et.jsx)(rn.a,{sm:4,children:Object(et.jsx)(As.a,{value:c,options:[{value:"exam",label:"Kh\xe1m b\u1ec7nh"},{value:"test",label:"X\xe9t nghi\u1ec7m"}],placeholder:"ch\u1ecdn d\u1ecbch v\u1ee5",onChange:this.handleChangeSelectType})})]})]}),Object(et.jsx)(rn.a,{sm:11,children:Object(et.jsx)(rc,{items:this.state.items})})]})})]})}}]),n}(ze),Ws=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.match.path;return Object(et.jsx)("div",{children:Object(et.jsxs)(r.d,{children:[Object(et.jsx)(r.b,{exact:!0,path:"".concat(e,"/history"),component:zs}),Object(et.jsx)(r.b,{exact:!0,path:"".concat(e),component:qs}),Object(et.jsx)(r.b,{exact:!0,path:"".concat(e,"/print/:id"),component:Rs})]})})}}]),n}(c.Component),Ys=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).componentDidUpdate=function(){var e=c.props.cusData;e.code&&qe.createOtccode(e.code,"cusBarCodeExam")},c.state={cusCode:""},c}return Object(b.a)(n,[{key:"render",value:function(){var e=JSON.parse(window.sessionStorage.getItem("user")),t=this.props,n=t.assignedServices,c=(t.totalOrigin,this.props.diagnosis?this.props.diagnosis:this.props.textDiagnosis),a=this.props.cusData,s=new Date,r=(a&&a.full_name,a?a.birthday:""),i=new Date(r),o=a&&a.contacts?a.contacts[0].phone:"",l=a&&a.contacts?a.contacts[0].address:{},d=l.street?"".concat(l.street):"",u=l.ward?"  -".concat(l.ward):"",h=l.district?"-".concat(l.district):"",j=l.province?"-".concat(l.province):"",b=0,m=n.map((function(e,t){return b+=e.price,Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{className:"p-1",children:t+1}),Object(et.jsx)("td",{className:"p-1",children:e.label}),Object(et.jsx)("td",{className:"p-1",children:e.location.name}),Object(et.jsx)("td",{className:"p-1",children:e.price})]},e.id)}));return Object(et.jsx)("div",{className:"border border-secondary font-print PrintDiagnostic receiptContainer",children:Object(et.jsx)("div",{className:"p-3 position-relative print-diag",id:"print-diag",children:Object(et.jsxs)("div",{className:"examRow",children:[Object(et.jsx)("div",{className:"absolute header-from",children:Object(et.jsxs)(sn.a,{className:"mb-0",children:[Object(et.jsx)(sn.a,{className:"text-left",children:Object(et.jsx)(tc,{})}),Object(et.jsx)("div",{className:"absolute end",children:Object(et.jsx)("canvas",{id:"cusBarCodeExam",style:{height:"13mm"}})})]})}),Object(et.jsx)("div",{className:" text-center",children:Object(et.jsx)("b",{children:"PHI\u1ebeU Y\xcaU C\u1ea6U X\xc9T NGHI\u1ec6M"})}),Object(et.jsx)("div",{className:"text-center",children:Object(et.jsxs)("i",{children:[s.getHours()," gi\u1edd ",s.getMinutes()," ph\xfat,Ng\xe0y ",s.getDate()," Th\xe1ng ",s.getMonth()+1," N\u0103m ",s.getFullYear()]})}),Object(et.jsxs)("div",{className:"infoCus",children:["H\u1ecd t\xean: ",Object(et.jsx)("b",{children:Object(et.jsx)("span",{className:"text-uppercase font-weight-bold",children:a.full_name})}),Object(et.jsxs)("span",{className:"ml-25",children:["NS:",i.toLocaleString("en-GB").slice(0,10)," ","(".concat(Qn(i.toLocaleString("en-GB").slice(0,10)),")")," "]}),Object(et.jsxs)("span",{className:"ml-25 ",children:["GT: ","male"===a.gender?" Nam":" N\u1eef"," "]}),Object(et.jsxs)("span",{className:"ml-25",children:["S\u0110T:  ",o]}),Object(et.jsx)("br",{}),Object(et.jsxs)("span",{children:["\u0110\u1ecba ch\u1ec9: ","".concat(d).concat(u).concat(h).concat(j)]}),Object(et.jsx)("br",{}),Object(et.jsxs)("span",{className:"d-block",children:[" Ch\u1ea9n \u0110o\xe1n : ",Object(et.jsx)("b",{children:c})]})]}),Object(et.jsx)("span",{children:Object(et.jsx)("b",{children:"Danh s\xe1ch x\xe9t nghi\u1ec7m"})}),Object(et.jsxs)(qn.a,{bordered:!0,className:"tableService",children:[Object(et.jsx)("thead",{className:"title-table headExam",children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{className:"indexExam",children:"STT"}),Object(et.jsx)("th",{className:"examName",children:"T\xean x\xe9t nghi\u1ec7m"}),Object(et.jsx)("th",{className:"examRoom",children:"Ph\xf2ng"}),Object(et.jsx)("th",{className:"examTotal",children:"Th\xe0nh ti\u1ec1n"})]})}),Object(et.jsxs)("tbody",{children:[m,Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{colSpan:"3",className:"end p-1",children:"T\u1ed5ng ti\u1ec1n"}),Object(et.jsx)("td",{className:"p-1",children:Object(et.jsxs)("b",{children:[new Intl.NumberFormat("de-DE").format(b),"VN\u0110"]})})]})]})]}),Object(et.jsx)(sn.a,{className:"mb-1",children:Object(et.jsxs)(rn.a,{children:["T\u1ed5ng ti\u1ec1n thu b\u1eb1ng ch\u1eef: ",Object(et.jsx)("span",{className:"font-weight-bold",children:Object(et.jsx)("b",{children:Wn(b||0)})})]})}),Object(et.jsx)(sn.a,{className:"mb-1",children:Object(et.jsx)(rn.a,{children:"Ghi ch\xfa : .................................."})}),Object(et.jsxs)("div",{className:"d-flex justify-content-between footer-print px-4",children:[Object(et.jsxs)("div",{className:"text-center left-footer mr-auto ml-5 ",children:[Object(et.jsx)("strong",{children:"B\xe1c s\u0129 \u0111i\u1ec1u tr\u1ecb"}),Object(et.jsx)("br",{}),Object(et.jsx)("i",{children:"(k\xfd, ghi r\xf5 h\u1ecd t\xean)"})," ",Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("b",{className:"mt-5",children:e.full_name})]}),Object(et.jsxs)("div",{className:"text-center right-footer",children:[Object(et.jsxs)("div",{children:["B\u1eafc Ninh, Ng\xe0y ",s.getDate(),", Th\xe1ng ",s.getMonth()+1,", N\u0103m ",s.getFullYear()]}),Object(et.jsx)("strong",{children:"PH\xd2NG X\xc9T NGHI\u1ec6M"})]})]})]})})})}}]),n}(ze),Qs="/job",$s="/location/list",Zs="/step/list",er="/location/service/list",tr="/service/service/get",nr="/step/finish",cr="/step/update",ar="/org/user?id=",sr="/data/photo/upload",rr="/data/photo/download/",ir=new(function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).userList=[],e.selectedUser=-1,e.getUserById=function(e){return Ee.post(ar+e)},e.takeSample=function(){var e=Object(j.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(Qs).concat(cr),e.next=3,Ee.post(n,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n._instance?Object(m.a)(e,n._instance):(n._instance=Object(x.a)(e),e)}return Object(b.a)(n,[{key:"location",get:function(){return JSON.parse(sessionStorage.getItem(P)||"{}")},set:function(e){sessionStorage.setItem(P,JSON.stringify(e))}},{key:"getCustomerByLocationAndStatus",value:function(){var e=Object(j.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(Qs).concat(Zs),e.next=3,Ee.get(n,t);case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUltraByLocation",value:function(){var e=Object(j.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(er),e.next=3,Ee.get(n,t);case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUltraIndexListByServiceID",value:function(){var e=Object(j.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(tr),e.next=3,Ee.get(n,t);case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getListLocation",value:function(){var e=Object(j.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.get("".concat($s));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"finishUtralResult",value:function(e){return Ee.post("".concat(Qs).concat(nr),e)}},{key:"uploadPhoto",value:function(){var e=Object(j.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(sr),e.next=3,Ee.post(n,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"downloadPhoto",value:function(){var e=Object(j.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(rr),e.next=3,Ee.get(n+t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(d)),or=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).componentDidMount=function(){if(2==c.props.tab){var e=[];c.props.upload.map((function(t){e.push(ir.downloadPhoto(t.name))})),Promise.all(e).then((function(e){c.setState({photos:e.map((function(e){return e.config.url}))})}))}},c.componentDidUpdate=function(e){var t=c.props.selectedJobStepRunning||{},n=t&&t.order?t.order.customer:{};c.props.style!==e.style&&c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{resultStyle:Object(vn.a)(Object(vn.a)({},e.resultStyle),{},{display:c.props.style})})})),n.code&&qe.createEtccode(n.code,"barcode")},c.state={display:c.props.style,photos:[]},c}return Object(b.a)(n,[{key:"render",value:function(){var e=JSON.parse(window.sessionStorage.getItem("user")),t=((this.props.selectedJobStepRunning||{}).order||{}).customer||{},n=new Date,c=new Date(t.birthday),a=t.contacts?t.contacts[0].address:{},s=a.street?"".concat(a.street):"",r=a.ward?"  -".concat(a.ward):"",i=a.district?"-".concat(a.district):"",o=a.province?"-".concat(a.province):"",l=t.contacts?t.contacts[0].phone:"",d=this.props.ultraResult&&this.props.ultraResult.results?this.props.ultraResult.results[0]:{},u=d?d.conclusion:"",h=d?d.description:"",j=this.props.urlFileImg||{},b=this.props.tab;return Object(et.jsx)("div",{className:"border border-secondary font-print",style:{display:this.state.display},children:Object(et.jsxs)("div",{className:"printUltraResult position-relative mt-3",id:"printUltra",children:[Object(et.jsx)("div",{className:"absolute",children:Object(et.jsxs)(sn.a,{className:"pt-3",children:[Object(et.jsx)(rn.a,{sm:"8",children:Object(et.jsx)(sn.a,{className:"text-left m-0",children:Object(et.jsx)(tc,{})})}),Object(et.jsx)(rn.a,{className:"end",children:Object(et.jsx)("canvas",{id:"barcode",style:{height:"13mm"}})})]})}),Object(et.jsx)("h5",{className:"text-center m-0 title-card-lg",children:Object(et.jsx)("b",{children:"K\u1ebeT QU\u1ea2 SI\xcaU \xc2M"})}),Object(et.jsx)("div",{className:"text-center",children:Object(et.jsxs)("i",{children:[n.getHours()," gi\u1edd ",n.getMinutes()," ph\xfat,Ng\xe0y ",n.getDate()," Th\xe1ng ",n.getMonth()+1," N\u0103m ",n.getFullYear()]})}),Object(et.jsxs)("div",{className:"infoCus",children:["H\u1ecd t\xean: ",Object(et.jsx)("b",{children:Object(et.jsx)("span",{className:"text-uppercase font-weight-bold",children:t.full_name})}),Object(et.jsxs)("span",{className:"ml-25",children:["NS: ",c.toLocaleString("en-GB").slice(0,10)," ","(".concat(Qn(c.toLocaleString("en-GB").slice(0,10)),")")]}),Object(et.jsxs)("span",{className:"ml-25 ",children:["GT: ","male"===t.gender?" Nam":" N\u1eef"," "]}),Object(et.jsxs)("span",{className:"ml-25",children:["S\u0110T:  ",l]}),Object(et.jsx)("br",{}),Object(et.jsxs)("span",{children:["\u0110\u1ecba ch\u1ec9: ","".concat(s).concat(r).concat(i).concat(o)]}),Object(et.jsx)("br",{}),Object(et.jsxs)("span",{className:"d-block",children:[" Ch\u1ea9n \u0110o\xe1n : ",Object(et.jsx)("b",{children:this.props.diagnosis})]})]}),Object(et.jsx)("div",{className:"text-center",children:Object(et.jsx)("h5",{children:Object(et.jsx)("b",{children:"M\xd4 T\u1ea2 CHI TI\u1ebeT SI\xcaU \xc2M"})})}),Object(et.jsxs)("div",{className:"conclusion",style:{whiteSpace:"pre-line"},children:[h," ",Object(et.jsx)("br",{})]}),Object(et.jsx)("h5",{className:"m-2",children:Object(et.jsxs)("b",{align:"left",children:["K\u1ebeT LU\u1eacN:",u]})}),Object(et.jsxs)("div",{className:"d-flex justify-content-between px-4 mt-1",children:[Object(et.jsx)("div",{className:"text-center resultFile mr-auto ml-5",children:2==b?this.state.photos.map((function(e){return Object(et.jsx)("div",{children:Object(et.jsx)("img",{className:"resultFile",src:e})})})):Object(et.jsx)("div",{className:"d-flex justify-content-between m-0",children:Object(et.jsx)("div",{children:Object(et.jsx)("img",{className:"resultFile",src:j.fileImg})})})}),Object(et.jsxs)("div",{className:"text-center mr-5",children:["B\u1eafc Ninh, Ng\xe0y ",n.getDate()," Th\xe1ng ",n.getMonth()+1," N\u0103m ",n.getFullYear(),Object(et.jsx)("br",{}),Object(et.jsx)("strong",{children:"B\xc1C S\u0128"}),Object(et.jsx)("br",{}),Object(et.jsx)("i",{children:"(k\xfd, ghi r\xf5 h\u1ecd t\xean)"})," ",Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("b",{className:"mt-5",children:e.full_name})]})]})]})})}}]),n}(c.Component),lr=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).componentDidUpdate=function(e){var t=c.props.selectedJobStepRunning||{},n=t&&t.order?t.order.customer:{};c.props.style!==e.style&&c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{resultStyle:Object(vn.a)(Object(vn.a)({},e.resultStyle),{},{display:c.props.style})})})),n.code&&qe.createEtccode(n.code,"barcode")},c.state={display:c.props.style},c}return Object(b.a)(n,[{key:"render",value:function(){var e=((this.props.selectedJobStepRunning||{}).order||{}).customer||{},t=new Date,n=new Date(e.birthday),c=e.contacts?e.contacts[0].address:{},a=c.street?"".concat(c.street):"",s=c.ward?"  -".concat(c.ward):"",r=c.district?"-".concat(c.district):"",i=c.province?"-".concat(c.province):"",o=e.contacts?e.contacts[0].phone:"",l=this.props.xrayResult&&this.props.xrayResult.results?this.props.xrayResult.results[0]:{},d=l?l.conclusion:"",u=l?l.description:"",h=JSON.parse(window.sessionStorage.getItem("user"));return Object(et.jsx)("div",{className:"border border-secondary font-print ",style:{display:this.state.display},children:Object(et.jsxs)("div",{className:"printXrayResult position-relative mt-3",id:"printXray",children:[Object(et.jsx)("div",{className:"absolute",children:Object(et.jsxs)(sn.a,{className:"pt-3",children:[Object(et.jsx)(rn.a,{sm:"8",children:Object(et.jsx)(sn.a,{className:"text-left m-0",children:Object(et.jsx)(tc,{})})}),Object(et.jsx)(rn.a,{className:"end",children:Object(et.jsx)("canvas",{id:"barcode",style:{height:"13mm"}})})]})}),Object(et.jsx)("h5",{className:"text-center m-0 title-card-lg",children:Object(et.jsx)("b",{children:"K\u1ebeT QU\u1ea2 X-QUANG"})}),Object(et.jsx)("div",{className:"text-center",children:Object(et.jsxs)("i",{children:[t.getHours()," gi\u1edd ",t.getMinutes()," ph\xfat,Ng\xe0y ",t.getDate()," Th\xe1ng ",t.getMonth()+1," N\u0103m ",t.getFullYear()]})}),Object(et.jsxs)("div",{className:"infoCus",children:["H\u1ecd t\xean: ",Object(et.jsx)("b",{children:Object(et.jsx)("span",{className:"text-uppercase font-weight-bold",children:e.full_name})}),Object(et.jsxs)("span",{className:"ml-25",children:["NS: ",n.toLocaleString("en-GB").slice(0,10)," ","(".concat(Qn(n.toLocaleString("en-GB").slice(0,10)),")")]}),Object(et.jsxs)("span",{className:"ml-25 ",children:["GT: ","male"===e.gender?" Nam":" N\u1eef"," "]}),Object(et.jsxs)("span",{className:"ml-25",children:["S\u0110T:  ",o]}),Object(et.jsx)("br",{}),Object(et.jsxs)("span",{children:["\u0110\u1ecba ch\u1ec9: ","".concat(a).concat(s).concat(r).concat(i)]}),Object(et.jsx)("br",{}),Object(et.jsxs)("span",{className:"d-block",children:[" Ch\u1ea9n \u0110o\xe1n : ",Object(et.jsx)("b",{children:this.props.diagnosis})]})]}),Object(et.jsx)("h5",{align:"center",className:"mb-3",children:Object(et.jsx)("b",{children:"M\xd4 T\u1ea2 CHI TI\u1ebeT CH\u1ee4P X-QUANG"})}),Object(et.jsxs)("div",{className:"description",style:{whiteSpace:"pre-line"},children:[u," ",Object(et.jsx)("br",{})]}),Object(et.jsx)("h5",{className:"m-2",children:Object(et.jsxs)("b",{align:"left",children:["K\u1ebeT LU\u1eacN :",d]})}),Object(et.jsxs)("div",{className:"d-flex justify-content-between px-4 mt-1",children:[Object(et.jsx)("div",{className:"text-center mr-auto ml-5"}),Object(et.jsxs)("div",{className:"text-center mr-5",children:["B\u1eafc Ninh ,Ng\xe0y ",t.getDate()," Th\xe1ng ",t.getMonth()+1," N\u0103m ",t.getFullYear(),Object(et.jsx)("br",{}),Object(et.jsx)("strong",{children:"B\xc1C S\u0128"}),Object(et.jsx)("br",{}),Object(et.jsx)("i",{children:"(k\xfd, ghi r\xf5 h\u1ecd t\xean)"})," ",Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("b",{className:"mt-5",children:h.full_name})]})]})]})})}}]),n}(c.Component),dr="/job",ur="/location/list",hr="/step/list",jr="/location/service/list",br="/service/service/get",mr="/step/finish",xr="/step/update",Or="/data/photo/upload",pr="/data/photo/download/",fr=new(function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).userList=[],e.selectedUser=-1,e.takeSample=function(){var e=Object(j.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(dr).concat(xr),e.next=3,Ee.post(n,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n._instance?Object(m.a)(e,n._instance):(n._instance=Object(x.a)(e),e)}return Object(b.a)(n,[{key:"location",get:function(){return JSON.parse(sessionStorage.getItem(P)||"{}")},set:function(e){sessionStorage.setItem(P,JSON.stringify(e))}},{key:"getCustomerByLocationAndStatus",value:function(){var e=Object(j.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(dr).concat(hr),e.next=3,Ee.get(n,t);case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEntByLocation",value:function(){var e=Object(j.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(jr),e.next=3,Ee.get(n,t);case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEntIndexListByServiceID",value:function(){var e=Object(j.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(br),e.next=3,Ee.get(n,t);case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getListLocation",value:function(){var e=Object(j.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.get("".concat(ur));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"uploadPhoto",value:function(){var e=Object(j.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(Or),e.next=3,Ee.post(n,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"downloadPhoto",value:function(){var e=Object(j.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(pr),e.next=3,Ee.get(n+t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"finishEntResult",value:function(e){return Ee.post("".concat(dr).concat(mr),e)}}]),n}(d)),vr=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).componentDidMount=function(){c.props.tab;var e=[];c.props.upload.map((function(t){e.push(fr.downloadPhoto(t.name))})),Promise.all(e).then((function(e){c.setState({photos:e.map((function(e){return e.config.url}))})}))},c.componentDidUpdate=function(e){var t=c.props.selectedJobStepRunning||{},n=t&&t.order?t.order.customer:{};c.props.style!==e.style&&c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{resultStyle:Object(vn.a)(Object(vn.a)({},e.resultStyle),{},{display:c.props.style})})})),n.code&&qe.createEtccode(n.code,"barcode")},c.state={display:c.props.style,photos:[]},c}return Object(b.a)(n,[{key:"render",value:function(){var e=JSON.parse(window.sessionStorage.getItem("user")),t=((this.props.selectedJobStepRunning||{}).order||{}).customer||{},n=new Date,c=new Date(t.birthday),a=t.contacts?t.contacts[0].address:{},s=a.street?"".concat(a.street):"",r=a.ward?"  -".concat(a.ward):"",i=a.district?"-".concat(a.district):"",o=a.province?"-".concat(a.province):"",l=t.contacts?t.contacts[0].phone:"",d=this.props.entResult&&this.props.entResult.results?this.props.entResult.results[0]:{},u=d?d.conclusion:"",h=d?d.description:"",j=this.props.urlFileImg||{},b=this.props.tab;return Object(et.jsx)("div",{className:"border border-secondary font-print ",style:{display:this.state.display},children:Object(et.jsxs)("div",{className:"printEntResult position-relative mt-3",id:"printEnt",children:[Object(et.jsx)("div",{className:"absolute",children:Object(et.jsxs)(sn.a,{className:"pt-3",children:[Object(et.jsx)(rn.a,{sm:"8",children:Object(et.jsx)(sn.a,{className:"text-left m-0",children:Object(et.jsx)(tc,{})})}),Object(et.jsx)(rn.a,{className:"end",children:Object(et.jsx)("canvas",{id:"barcode",style:{height:"13mm"}})})]})}),Object(et.jsx)("h5",{className:"text-center m-0 title-card-lg",children:Object(et.jsx)("b",{children:"K\u1ebeT QU\u1ea2 N\u1ed8I SOI"})}),Object(et.jsx)("div",{className:"text-center",children:Object(et.jsxs)("i",{children:[n.getHours()," gi\u1edd ",n.getMinutes()," ph\xfat,Ng\xe0y ",n.getDate()," Th\xe1ng ",n.getMonth()+1," N\u0103m ",n.getFullYear()]})}),Object(et.jsxs)("div",{className:"infoCus",children:["H\u1ecd t\xean: ",Object(et.jsx)("b",{children:Object(et.jsx)("span",{className:"text-uppercase font-weight-bold",children:t.full_name})}),Object(et.jsxs)("span",{className:"ml-25",children:["NS: ",c.toLocaleString("en-GB").slice(0,10)," ","(".concat(Qn(c.toLocaleString("en-GB").slice(0,10)),")")]}),Object(et.jsxs)("span",{className:"ml-25 ",children:["GT: ","male"===t.gender?" Nam":" N\u1eef"," "]}),Object(et.jsxs)("span",{className:"ml-25",children:["S\u0110T:  ",l]}),Object(et.jsx)("br",{}),Object(et.jsxs)("span",{children:["\u0110\u1ecba ch\u1ec9: ","".concat(s).concat(r).concat(i).concat(o)]}),Object(et.jsx)("br",{}),Object(et.jsxs)("span",{className:"d-block",children:[" Ch\u1ea9n \u0110o\xe1n : ",Object(et.jsx)("b",{children:this.props.diagnosis})]})]}),Object(et.jsxs)("h5",{align:"center",className:"mb-1",children:[" ",Object(et.jsx)("b",{children:"M\xd4 T\u1ea2 CHI TI\u1ebeT N\u1ed8I SOI"})]}),Object(et.jsxs)("div",{className:"conclusion",style:{whiteSpace:"pre-line"},children:[h," ",Object(et.jsx)("br",{})]}),Object(et.jsx)(sn.a,{children:Object(et.jsx)("div",{className:"d-flex justify-content-between m-0",children:2==b?this.state.photos.map((function(e){return Object(et.jsx)("div",{children:Object(et.jsx)("img",{className:"resultFile",src:e})})})):Object(et.jsxs)("div",{className:"d-flex justify-content-between m-0",children:[Object(et.jsx)("div",{children:Object(et.jsx)("img",{className:"resultFile",src:j.rightearImg})}),Object(et.jsx)("div",{children:Object(et.jsx)("img",{className:"resultFile",src:j.leftearImg})}),Object(et.jsx)("div",{children:Object(et.jsx)("img",{className:"resultFile",src:j.noseImg})}),Object(et.jsx)("div",{children:Object(et.jsx)("img",{className:"resultFile",src:j.throatImg})})]})})}),Object(et.jsx)("h5",{className:"m-2",children:Object(et.jsxs)("b",{align:"left",children:["K\u1ebeT LU\u1eacN :",u]})}),Object(et.jsxs)("div",{className:"d-flex justify-content-between px-4 mt-1",children:[Object(et.jsx)("div",{className:"text-center mr-auto ml-5"}),Object(et.jsxs)("div",{className:"text-center mr-5",children:["B\u1eafc Ninh, Ng\xe0y ",n.getDate()," Th\xe1ng ",n.getMonth()+1," N\u0103m ",n.getFullYear(),Object(et.jsx)("br",{}),Object(et.jsx)("strong",{children:"B\xc1C S\u0128"}),Object(et.jsx)("br",{}),Object(et.jsx)("i",{children:"(k\xfd, ghi r\xf5 h\u1ecd t\xean)"})," ",Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("b",{className:"mt-5",children:e.full_name})]})]})]})})}}]),n}(c.Component),gr=function(e){var t=e.result;return Object(c.useEffect)((function(){}),[t]),Object(et.jsx)("div",{className:"patientResult customCard ",children:Object(et.jsx)("div",{className:"table-responsive min-h-80 df-h-58",children:Object(et.jsx)("div",{className:"text-left",children:Object(et.jsxs)("table",{className:"table table-head-fixed table-bordered",children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{className:"dw-3",children:" STT "}),Object(et.jsx)("th",{className:"dw-30",children:" T\xean X\xe9t Nghi\u1ec7m "}),Object(et.jsx)("th",{className:"dw-14",children:" K\u1ebft qu\u1ea3 "}),Object(et.jsx)("th",{className:"dw-24",children:"Ch\u1ec9 s\u1ed1 b\xecnh th\u01b0\u1eddng"}),Object(et.jsx)("th",{className:"dw-16",children:" \u0110\u01a1n v\u1ecb "})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:Object.entries(t).filter((function(e){return"name"!==e[0]&&"sample_id"!==e[0]&&"device"!==e[0]&&"ctime"!==e[0]})).map((function(e,t){return Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{children:t+1}),Object(et.jsx)("td",{children:e[0]}),Object(et.jsx)("td",{className:e[1].value>e[1].range[1]?"colorResultValueRed":e[1].value<e[1].range[0]?"colorResultValueBlue":"Negative"!==e[1].value?"colorResultValueRed":"",children:e[1].value}),Object(et.jsx)("td",{children:e[1].range.map((function(e){return e})).join("-")}),Object(et.jsx)("td",{children:e[1].unit})]})}))})]})})})})},yr=function(e){var t=e.result;if(Object(c.useEffect)((function(){}),[t]),Object.entries(t).length>0)return Object(et.jsx)("div",{className:"patientResult customCard ",children:Object(et.jsx)("div",{className:"table-responsive min-h-80 df-h-58",children:Object(et.jsx)("div",{className:"text-left",children:Object(et.jsxs)("table",{className:"table table-head-fixed table-bordered",children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{className:"dw-3",children:" STT "}),Object(et.jsx)("th",{className:"dw-30",children:" T\xean X\xe9t Nghi\u1ec7m "}),Object(et.jsx)("th",{className:"dw-14",children:" K\u1ebft qu\u1ea3 "}),Object(et.jsx)("th",{className:"dw-24",children:"Ch\u1ec9 s\u1ed1 b\xecnh th\u01b0\u1eddng"}),Object(et.jsx)("th",{className:"dw-16",children:" \u0110\u01a1n v\u1ecb "})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:Object.entries(t).filter((function(e){return"name"!==e[0]&&"device"!==e[0]&&"sample_id"!==e[0]&&"ctime"!==e[0]})).map((function(e,t){return Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{children:t+1}),Object(et.jsx)("td",{children:e[0]}),Object(et.jsx)("td",{className:e[1].value>e[1].range[1]?"colorResultValueRed":e[1].value<e[1].range[0]?"colorResultValueBlue":"",children:e[1].value}),Object(et.jsx)("td",{children:e[1].range.map((function(e){return e})).join("-")}),Object(et.jsx)("td",{children:e[1].unit})]})}))})]})})})})},Nr=function(e){var t=e.result;return Object(c.useEffect)((function(){}),[t]),Object(et.jsx)("div",{className:"patientResult customCard ",children:Object(et.jsx)("div",{className:"table-responsive min-h-80 df-h-58",children:Object(et.jsx)("div",{className:"text-left",children:Object(et.jsxs)("table",{className:"table table-head-fixed table-bordered",children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{className:"dw-3",children:" STT "}),Object(et.jsx)("th",{className:"dw-30",children:" T\xean X\xe9t Nghi\u1ec7m "}),Object(et.jsx)("th",{className:"dw-14",children:" K\u1ebft qu\u1ea3 "}),Object(et.jsx)("th",{className:"dw-24",children:"Ch\u1ec9 s\u1ed1 b\xecnh th\u01b0\u1eddng"}),Object(et.jsx)("th",{className:"dw-16",children:" \u0110\u01a1n v\u1ecb "})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:Object.entries(t).filter((function(e){return"name"!==e[0]&&"device"!==e[0]&&"sample_id"!==e[0]&&"ctime"!==e[0]})).map((function(e,t){return console.log(e[1].range),Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{children:t+1}),Object(et.jsx)("td",{children:e[0]}),Object(et.jsx)("td",{className:e[1].value>e[1].range[1]?"colorResultValueRed":e[1].value<e[1].range[0]?"colorResultValueBlue":"",children:e[1].value}),Object(et.jsx)("td",{children:e[1].range.map((function(e){return e})).join("-")}),Object(et.jsx)("td",{children:e[1].unit})]})}))})]})})})})},Sr=function(e){var t=e.result;if(Object(c.useEffect)((function(){}),[t]),Object.entries(t).length>0)return Object(et.jsx)("div",{className:"patientResult customCard ",children:Object(et.jsx)("div",{className:"table-responsive min-h-80 df-h-58",children:Object(et.jsx)("div",{className:"text-left",children:Object(et.jsxs)("table",{className:"table table-head-fixed table-bordered",children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{className:"dw-3",children:" STT "}),Object(et.jsx)("th",{className:"dw-30",children:" T\xean X\xe9t Nghi\u1ec7m "}),Object(et.jsx)("th",{className:"dw-14",children:" K\u1ebft qu\u1ea3 "})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:Object.entries(t).filter((function(e){return"name"!==e[0]&&"device"!==e[0]&&"sample_id"!==e[0]&&"ctime"!==e[0]})).map((function(e,t){return Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{children:t+1}),Object(et.jsx)("td",{children:e[0]}),Object(et.jsx)("td",{children:e[1].value})]})}))})]})})})})},Cr=function(e){var t=e.result;return Object(c.useEffect)((function(){}),[t]),Object(et.jsx)("div",{children:Object(et.jsx)("div",{className:"patientResult customCard Other",children:Object(et.jsx)("div",{className:"table-responsive min-h-80 df-h-58",children:Object(et.jsx)("div",{className:"text-left",children:Object.entries(t).filter((function(e){return"name"!==e[0]&&"device"!==e[0]&&"sample_id"!==e[0]&&"ctime"!==e[0]})).map((function(e){return null!=e[1]?Object(et.jsxs)("table",{className:"table table-head-fixed table-bordered",children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{className:"dw-14",children:e[0]}),Object(et.jsx)("th",{children:"K\u1ebft qu\u1ea3"})]})}),Object(et.jsx)("tbody",{children:Object.entries(e[1]).map((function(e,t){return"object"===typeof e[1]?Object(et.jsx)(et.Fragment,{children:Object.entries(e[1]).map((function(e){return Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{children:e[0]}),Object(et.jsx)("td",{children:e[1]})]})}))}):Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{children:e[0]}),Object(et.jsx)("td",{children:e[1]})]})}))})]}):null}))})})})})},_r=function(e){var t=e.result;return Object(c.useEffect)((function(){}),[t]),Object.entries(t).length>0?Object(et.jsx)("div",{className:"patientResult customCard ",children:Object(et.jsx)("div",{className:"table-responsive min-h-80 df-h-58 ",children:Object(et.jsxs)("div",{className:"text-left",children:[Object(et.jsxs)("table",{className:"table table-head-fixed table-bordered",children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{className:"dw-3",children:" STT "}),Object(et.jsx)("th",{className:"dw-30",children:" T\xean X\xe9t Nghi\u1ec7m "}),Object(et.jsx)("th",{className:"dw-14",children:" K\u1ebft qu\u1ea3 "}),Object(et.jsx)("th",{className:"dw-24",children:"Ch\u1ec9 s\u1ed1 b\xecnh th\u01b0\u1eddng"})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:Object.entries(t).filter((function(e){return"name"!==e[0]&&"device"!==e[0]&&"sample_id"!==e[0]&&"ctime"!==e[0]})).map((function(e,t){return Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{children:t+1}),Object(et.jsx)("td",{children:e[0]}),Object(et.jsx)("td",{className:e[1].value>e[1].range[1]?"colorResultValueRed":e[1].value<e[1].range[0]?"colorResultValueBlue":"",children:e[1].value}),Object(et.jsx)("td",{children:e[1].range.map((function(e){return e})).join("-")})]})}))})]}),Object(et.jsx)("div",{})]})})}):Object(et.jsx)(et.Fragment,{})},Tr=function(e){var t=e.resultsExam,n=Object(c.useState)(0),a=Object(wn.a)(n,2),s=a[0],r=a[1];return Object(et.jsxs)("div",{children:[Object(et.jsx)($t.a,{tabs:!0,className:"selectTabs",children:t.map((function(e,t){return Object(et.jsx)(Zt.a,{className:"titleTabs",children:Object(et.jsx)(en.a,{className:Dn()({active:s===t}),onClick:function(){!function(e){r(e)}(t)},children:Object(et.jsx)("b",{className:"title-card",children:e.device})})})}))}),Object(et.jsx)(gn.a,{activeTab:s,children:t.map((function(e,t){return Object(et.jsx)(yn.a,{tabId:t,className:"customCard",children:Object(et.jsxs)("div",{className:"ResultExam",children:[e.device==_e&&Object(et.jsx)(gr,{result:e}),e.device==Ce&&Object(et.jsx)(yr,{result:e}),e.device==ye&&Object(et.jsx)(Sr,{result:e}),e.device==Se&&Object(et.jsx)(Nr,{result:e}),e.device==Ne&&Object(et.jsx)(Cr,{result:e}),e.device==Te&&Object(et.jsx)(_r,{result:e})]})})}))})]})},wr=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).resetFrom=function(){c.setState({emergencyList:[],examServiceList:[],entServiceList:[],xrayServiceList:[],ultraSoundServiceList:[]})},c.componentDidUpdate=function(e){if(e.job.id!==c.props.job.id&&c.props.job&&c.props.job.steps&&c.props.job.steps.length){for(var t=c.props.job.state.textDiagnosis,n=c.props.job.steps.filter((function(e){return e.type===K&&e.status!==J})).filter((function(e){return e.order.items.length>0})),a=0;a<n.length;a++){0==n[a].order.items.filter((function(e){return 0!=e.quantity})).length&&(n.splice(a,1),a--)}c.setState({testResultList:n,textDiagnosis:t,assignedServices:[]}),n.map((function(e){c.props.resultList.forEach((function(t){e.type===K&&e.status===D&&t.orderId===e.order_id&&(e.seen=t.seen)}))})),c.resetFrom()}},c.onChangeSearch=function(e){c.setState({txtSearch:e.target.value})},c.filter=function(e,t,n){return e.filter((function(e){return Object.keys(e).some((function(n){return e[n]===t}))}))},c.onDelete=function(e){var t=c.state.assignedServices;t.splice(t.findIndex((function(t){return t.value===e.value})),1),c.setState({assignedServices:t,totalPrice:t.reduce((function(e,t){return e-t.price}),0),totalOrigin:t.reduce((function(e,t){return e-t.price_origin}),0)})},c.onSubmitDiagnostic=function(){var e=c.state,t=e.assignedServices,n=e.examServiceList,a=e.entServiceList,s=e.xrayServiceList,r=e.emergencyList,i=e.ultraSoundServiceList;mc.updateJobStep({id:c.props.stepId,status:w}).then((function(e){c.props.onRefresh()})).catch((function(e){return console.log(e)})),t.map((function(e){e.location.type===W&&(r.push(e),c.setState({emergencyList:r})),e.location.type===$&&(n.push(e),c.setState({examServiceList:n})),e.location.type===Q&&(s.push(e),c.setState({xrayServiceList:s})),e.location.type===ee&&(a.push(e),c.setState({entServiceList:a})),e.location.type===Z&&(i.push(e),c.setState({ultraSoundServiceList:i}))}));var o=r.length>0?r[0].location_id:" ",l=n.length>0?n[0].location_id:" ",d=a.length>0?a[0].location_id:" ",u=s.length>0?s[0].location_id:" ",h=i.length>0?i[0].location_id:" ",j=mc.addJobStep({job_id:c.props.job.id,location_id:o,type:K,items:r.map((function(e){return{ref:"service",ref_id:e.value,quantity:"1"}}))}),b=mc.addJobStep({job_id:c.props.job.id,location_id:l,type:K,items:n.map((function(e){return{ref:"service",ref_id:e.value,quantity:"1"}}))}),m=mc.addJobStep({job_id:c.props.job.id,location_id:d,type:K,items:a.map((function(e){return{ref:"service",ref_id:e.value,quantity:"1"}}))}),x=mc.addJobStep({job_id:c.props.job.id,location_id:u,type:K,items:s.map((function(e){return{ref:"service",ref_id:e.value,quantity:"1"}}))}),O=mc.addJobStep({job_id:c.props.job.id,location_id:h,type:K,items:i.map((function(e){return{ref:"service",ref_id:e.value,quantity:"1"}}))}),p=[],f=[];n.length>0&&(p.push(b),f.push({name:"jobStepExam"})),r.length>0&&(p.push(j),f.push({name:"jobStepEmer"})),a.length>0&&(p.push(m),f.push({name:"jobStepEnt"})),s.length>0&&(p.push(x),f.push({name:"jobStepXray"})),i.length>0&&(p.push(O),f.push({name:"jobStepUtralsound"})),Promise.all(p).then((function(e){c.resetFrom(),c.setState({show:!0,promisesResult:f,message:"Y\xeau c\u1ea7u \u0111\xe3 \u0111\u01b0\u1ee3c g\u1eedi \u0111i th\xe0nh c\xf4ng"})})).catch((function(e){console.log(e),c.setState({message:"C\xf3 l\u1ed7i x\u1ea3y ra, xin vui l\xf2ng th\u1eed l\u1ea1i!"})}))},c.closeNotice=function(){c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{message:""})}))},c.onSelectSevice=function(e){var t=c.state,n=t.assignedServices,a=t.servicesList,s=t.selectedService;mc.getLocationsByService(e.value).then((function(t){if(n.map((function(t){e.value===t.value&&(c.setState({message:"\u0110\xe3 c\xf3 d\u1ecbch v\u1ee5"}),n.splice(n.findIndex((function(t){return t.value===e.value})),1),c.setState({assignedServices:n}))})),1==t.data.length){c.setState({locsByService:t.data[0]});var r=e;r.location_id=c.state.locsByService.id,r.location=c.state.locsByService,n.push(r),a.splice(c.state.selectedService,1),c.setState({servicesList:a,assignedServices:n,selectedService:s,totalPrice:n.reduce((function(e,t){return e+t.price}),0),totalOrigin:n.reduce((function(e,t){return e+t.price_origin}),0)})}else c.setState({locsByService:t.data})})).catch((function(e){console.log(e),c.setState((function(e){return{message:"C\xf3 l\u1ed7i, xin vui l\xf2ng th\u1eed l\u1ea1i sau"}}))}))},c.onSelectLocService=function(e){var t=c.state,n=t.selectedService,a=t.assignedServices,s=t.locsByService,r=c.props.servicesList,i=r[n];i.location_id=e,i.location=s.find((function(t){return t.id==e})),a.push(i),r.splice(n,1),c.setState({servicesList:r,assignedServices:a,selectedService:-1,locsByService:[],totalPrice:a.reduce((function(e,t){return e+t.price}),0),style:"block"})},c.onExamResultReiview=function(e,t){var n=c.state.testResultList;c.props.resultList.map((function(t){t.orderId===e.order_id&&(t.seen=!0)})),n[t].seen=!0;var a=[];e.results.map((function(e){Object.keys(e).length>1&&a.push(e)}));var s=null,r="",i=1;e.location&&(e.location.type===$&&(i=1,s=Object(et.jsx)(Tr,{resultsExam:a})),e.location.type===ee&&(i=2,s=Object(et.jsx)(vr,{upload:e.upload,selectedJobStepRunning:e,entResult:e,diagnosis:c.state.textDiagnosis,tab:"2"}),r="printEnt"),e.location.type===Q&&(i=2,s=Object(et.jsx)(lr,{selectedJobStepRunning:e,xrayResult:e,diagnosis:c.state.textDiagnosis}),r="printXray"),e.location.type===Z&&(i=2,s=Object(et.jsx)(or,{tab:"2",upload:e.upload,selectedJobStepRunning:e,ultraResult:e,diagnosis:c.state.textDiagnosis}),r="printUltra")),c.setState({selectedTestResult:e,showResult:s,idPrint:r,testResultList:n,resultsExam:a,tabPrint:i})},c.Print=function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.print(t);case 2:return e.next=4,c.setState({show:!1,promisesResult:[],xrayServiceList:[],examServiceList:[],entServiceList:[],ultraSoundServiceList:[],selectedTestResult:{}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.showFromPrint=function(){c.state.assignedServices.length>0?c.setState({showPrint:!0}):c.setState({message:"Ch\u01b0a c\xf3 d\u1ecbch v\u1ee5."})},c.closeFromPrint=function(){c.setState({showPrint:!1,showComfirm:!1})},c.submitPrint=function(){c.onSubmitDiagnostic(),c.Print("print-diag"),c.setState({showPrint:!1})},c.state={txtSearch:"",results:{},locsByService:[],listSelectedService:[],servicesList:[],selectedService:-1,assignedServices:[],examServiceList:[],emergencyList:[],entServiceList:[],xrayServiceList:[],ultraSoundServiceList:[],totalPrice:0,totalOrigin:0,testResultList:[],selectedTestResult:{},orderCode:[],message:"",show:!1,stt:"1",textDiagnosis:"",showPrint:!1,showComfirm:!1},c}return Object(b.a)(n,[{key:"render",value:function(){var e,t=this,n=this.props,c=n.servicesList,a=n.job,s=this.state,r=s.txtSearch,i=s.showPrint,o=(s.showComfirm,s.showResult),l=s.idPrint,d=s.totalOrigin,u=s.selectedService,h=s.locsByService,j=(s.promisesResult,s.assignedServices),b=s.totalPrice,m=s.testResultList,x=s.selectedTestResult;s.stt,s.show,s.examServiceList,s.entServiceList,s.xrayServiceList,s.ultraSoundServiceList;r&&(c=c.filter((function(e){return-1!==e.name.toLowerCase().indexOf(r)})));var O=c.map((function(e,t){return{value:e.id,label:e.name,code:e.code,price:e.price,price_origin:e.origin_price}}));return Object(et.jsxs)("div",{className:"customCard Diagnostic",id:"Diagnostic",children:[Object(et.jsx)(rn.a,{className:"choice-diag",children:Object(et.jsxs)("p",{className:"title-card mb-0",children:[Object(et.jsx)(Yt,{xmlns:"http://www.w3.org/2000/svg",className:"flaticon-icons",fill:"#28b76b"})," Lo\u1ea1i x\xe9t nghi\u1ec7m"]})}),Object(et.jsx)(rn.a,{className:"choice-diag mb-2",children:Object(et.jsx)(As.a,{placeholder:"Ch\u1ecdn d\u1ecbch v\u1ee5 x\xe9t nghi\u1ec7m",options:O,onChange:function(e){return t.onSelectSevice(e)},id:"service_id",required:!0})}),Object(et.jsxs)(rn.a,{md:12,className:"table-responsive min-h-62 list-diag",children:[Object(et.jsxs)("p",{className:"title-card",children:[Object(et.jsx)("span",{className:"material-icons",children:"playlist_add"})," Y\xeau c\u1ea7u x\xe9t nghi\u1ec7m"]}),Object(et.jsxs)(qn.a,{size:"sm",className:"table table-head-fixed table-bordered",children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{className:"list-diag-index",children:"#"}),Object(et.jsx)("th",{className:"list-diag-name",children:"T\xean"}),Object(et.jsx)("th",{className:"list-diag-room",children:"Ph\xf2ng"}),Object(et.jsx)("th",{className:"list-diag-quantity",children:"S\u1ed1 l\u01b0\u1ee3ng"}),Object(et.jsx)("th",{className:"list-diag-price",children:"Gi\xe1 ti\u1ec1n"}),Object(et.jsx)("th",{className:"list-diag-delete",children:"T\xf9y ch\u1ecdn"})]})}),m.length?m.map((function(e,n){return Object(et.jsx)("tbody",{className:"body-half-screen",children:Object(et.jsxs)("tr",{onClick:function(){return t.onExamResultReiview(e,n)},className:"pointer ".concat(!1===e.seen?"notiResult":null),children:[Object(et.jsx)("td",{className:"list-diag-index",children:n+1}),Object(et.jsx)("td",{className:"list-diag-name",children:e.order.items.filter((function(e){return e.quantity>0})).map((function(e){return e.ref_value.name})).splice(0,3).join(",")}),Object(et.jsx)("td",{className:"list-diag-room",children:e.location.name}),Object(et.jsx)("td",{className:"list-diag-quantiy",children:"1"}),Object(et.jsx)("td",{className:"list-diag-price",children:ct.formatPrice(e.order.total)}),Object(et.jsx)("td",{className:"list-diag-delete"})]},e.id)})})):null,j?j.map((function(e,n){return Object(et.jsx)("tbody",{className:"body-half-screen",children:Object(et.jsxs)("tr",{className:"pointer",children:[Object(et.jsx)("td",{className:"list-diag-index",children:m.length+n+1}),Object(et.jsx)("td",{className:"list-diag-name",children:e.label}),Object(et.jsx)("td",{className:"list-diag-room",children:e.location.name}),Object(et.jsx)("td",{className:"list-diag-quantiy",children:"1"}),Object(et.jsx)("td",{className:"list-diag-price",children:ct.formatPrice(e.price)}),Object(et.jsx)("td",{onClick:function(){return t.onDelete(e)},className:"list-diag-delete",children:"X\xf3a"})]},e.id)})})):Object(et.jsx)("tbody",{className:"body-half-screen",children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{className:"list-diag-index",children:"---"}),Object(et.jsx)("td",{className:"list-diag-id",children:"---"}),Object(et.jsx)("td",{className:"list-diag-name",children:"---"}),Object(et.jsx)("td",{className:"list-diag-room",children:"---"}),Object(et.jsx)("td",{className:"list-diag-quantiy"}),Object(et.jsx)("td",{className:"list-diag-delete",children:"---"})]})})]})]}),Object(et.jsxs)(sn.a,{className:"pr-15 pl-15",children:[Object(et.jsxs)(rn.a,{sm:8,children:[Object(et.jsxs)("p",{className:"title-card",children:[Object(et.jsx)("span",{className:"material-icons md-18",children:"monetization_on"}),"T\u1ed5ng ti\u1ec1n: ",new Intl.NumberFormat("de-DE").format(b),"\u0111"]}),Object(et.jsxs)("p",{className:"title-card",children:[Object(et.jsx)("span",{className:"material-icons md-18",children:"monetization_on"}),"Gi\xe1 g\u1ed1c: ",new Intl.NumberFormat("de-DE").format(d),"\u0111"]})]}),Object(et.jsx)(rn.a,{sm:4,className:"btn-count-print end",children:Object(et.jsx)(Ze.a,{hidden:!a||!a.id,onClick:function(){return t.showFromPrint()},children:"In"})})]}),Object(et.jsxs)(We.a,{isOpen:u>=0,children:[Object(et.jsx)(Ye.a,{children:"Th\xf4ng tin lo\u1ea1i x\xe9t nghi\u1ec7m"}),Object(et.jsx)(Qe.a,{children:Object(et.jsxs)("div",{className:"info-diagnostic",children:[Object(et.jsxs)("div",{children:[" T\xean lo\u1ea1i x\xe9t nghi\u1ec7m: ",null===(e=c[u])||void 0===e?void 0:e.name]}),Object(et.jsx)(sn.a,{className:"selectRoom",children:h.length?h.map((function(e){return Object(et.jsx)(rn.a,{className:"item",sm:6,children:Object(et.jsx)(Ze.a,{onClick:function(){return t.onSelectLocService(e.id)},children:e.name})},e.id)})):null})]})}),Object(et.jsx)($e.a,{children:Object(et.jsx)(Ze.a,{onClick:function(){return t.setState({selectedService:-1})},children:"H\u1ee7y"})})]}),Object(et.jsxs)(We.a,{isOpen:x&&x.id,children:[Object(et.jsx)(Ye.a,{children:"K\u1ebft qu\u1ea3 x\xe9t nghi\u1ec7m"}),Object(et.jsx)(Qe.a,{children:Object(et.jsx)(sn.a,{children:Object(et.jsx)(rn.a,{children:o})})}),Object(et.jsxs)($e.a,{children:[Object(et.jsx)(Ze.a,{hidden:1==this.state.tabPrint,onClick:function(){return t.Print(l)},children:"In k\u1ebft qu\u1ea3"}),Object(et.jsx)(Ze.a,{color:"danger",onClick:function(){return t.setState({selectedTestResult:{}})},children:"\u0110\xf3ng"})]})]}),Object(et.jsxs)(We.a,{isOpen:i,children:[Object(et.jsx)(Qe.a,{children:Object(et.jsx)(Ys,{totalOrigin:d,assignedServices:j,textDiagnosis:this.state.textDiagnosis,diagnosis:this.props.textDiagnosis,cusData:this.props.cusData})}),Object(et.jsxs)($e.a,{children:[Object(et.jsx)(Ze.a,{color:"danger",onClick:function(){return t.closeFromPrint()},children:"H\u1ee7y"})," ",Object(et.jsx)(Ze.a,{onClick:function(){return t.submitPrint()},children:"L\u01b0u"})]})]}),Object(et.jsx)(at,{message:this.state.message,done:function(){return t.closeNotice()}})]})}}]),n}(ze),kr=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).componentDidUpdate=function(e){if(e.job.id!==c.props.job.id){var t=c.props.job.state.subclinical.blood||"",n=c.props.job.state.subclinical.height||"",a=c.props.job.state.subclinical.temp||"",s=c.props.job.state.subclinical.weight||"";c.setState({blood:t,height:n,temp:a,weight:s});var r=c.props.job.ref_id;mc.getOneCustomer(r).then((function(e){var t=e.data.allergy||"";c.setState({allergy:t})}))}},c.onHandelChange=function(e){c.setState(Object(f.a)({},e.target.name,e.target.value))},c.onBlurDiagnosis=function(){var e=c.props.job,t=c.props.job.ref_id,n={blood:c.state.blood,temp:c.state.temp,weight:c.state.weight,height:c.state.height};mc.postSubclinical({id:e.id,state:{subclinical:n}}).then((function(t){e.state=e.state||{},e.state.subclinical=n,console.log("Th\xe0nh C\xf4ng",t)}));var a=c.state.allergy;mc.postAllergyToCus(t,{allergy:a}).then((function(e){console.log("Th\xe0nh C\xf4ng",e)}))},c.state={blood:"",height:"",temp:"",weight:"",allergy:""},c}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.temp,c=t.height,a=t.weight,s=t.blood,r=t.allergy;return Object(et.jsx)("div",{className:"PreExamination ",children:Object(et.jsxs)(sn.a,{children:[Object(et.jsxs)("p",{className:"title-card",children:[Object(et.jsx)("span",{className:"material-icons",children:"create"})," D\u1ea5u hi\u1ec7u s\u1ed1ng"]}),Object(et.jsxs)(rn.a,{sm:"7",children:[Object(et.jsxs)(sn.a,{className:"info",children:[Object(et.jsx)(rn.a,{sm:6,children:Object(et.jsxs)(sn.a,{className:"mb-0",children:[Object(et.jsx)(rn.a,{sm:4,children:Object(et.jsx)("span",{children:"Nhi\u1ec7t \u0111\u1ed9:"})}),Object(et.jsxs)(rn.a,{className:"m-0 p-0",children:[Object(et.jsx)(Nn.a,{onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"1",name:"temp",value:n,onChange:function(t){return e.onHandelChange(t)},onBlur:function(){e.onBlurDiagnosis()},disabled:!this.props.job.id}),Object(et.jsx)("p",{className:"m-1",children:" \xb0C"})]})]})}),Object(et.jsx)(rn.a,{sm:6,children:Object(et.jsxs)(sn.a,{className:"mb-0",children:[Object(et.jsx)(rn.a,{sm:4,children:Object(et.jsx)("span",{children:"Huy\u1ebft \xe1p:"})}),Object(et.jsxs)(rn.a,{className:"m-0 p-0",children:[Object(et.jsx)(Nn.a,{onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"2",name:"blood",value:s,onChange:function(t){return e.onHandelChange(t)},onBlur:function(){e.onBlurDiagnosis()},disabled:!this.props.job.id}),Object(et.jsx)("p",{className:"m-1",children:"mmHg"})]})]})})]}),Object(et.jsxs)(sn.a,{className:"info",children:[Object(et.jsx)(rn.a,{sm:6,children:Object(et.jsxs)(sn.a,{className:"mb-0",children:[Object(et.jsx)(rn.a,{sm:4,children:Object(et.jsx)("span",{children:"C\xe2n n\u1eb7ng:"})}),Object(et.jsxs)(rn.a,{className:"m-0 p-0",children:[Object(et.jsx)(Nn.a,{name:"weight",onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"3",value:a,onChange:function(t){return e.onHandelChange(t)},onBlur:function(){e.onBlurDiagnosis()},disabled:!this.props.job.id}),Object(et.jsx)("p",{className:"m-1",children:"KG"})]})]})}),Object(et.jsx)(rn.a,{sm:6,children:Object(et.jsxs)(sn.a,{className:"mb-0",children:[Object(et.jsx)(rn.a,{sm:4,children:Object(et.jsx)("span",{children:"Chi\u1ec1u cao:"})}),Object(et.jsxs)(rn.a,{className:"m-0 p-0",children:[Object(et.jsx)(Nn.a,{name:"height",onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"4",value:c,onChange:function(t){return e.onHandelChange(t)},onBlur:function(){e.onBlurDiagnosis()},disabled:!this.props.job.id}),Object(et.jsx)("p",{className:"m-1",children:"CM"})]})]})})]})]}),Object(et.jsx)(rn.a,{sm:"5",className:"",children:Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{sm:"2",children:Object(et.jsx)("p",{className:"text-danger",children:Object(et.jsx)("b",{children:"D\u1ecb \u1ee9ng:"})})}),Object(et.jsx)(rn.a,{sm:"10",children:Object(et.jsx)("textarea",{className:"form-control allergy",name:"allergy",value:r,onChange:function(t){return e.onHandelChange(t)},onBlur:this.onBlurDiagnosis,disabled:!this.props.job.id})})]})})]})})}}]),n}(ze),Dr=function(e){var t,n,a=e.CusArr?e.CusArr:{},s=e.reExamDate,r=e.job,i=JSON.parse(window.sessionStorage.getItem("user")),o=(null===(t=r.state)||void 0===t||t.textSymptom,null===(n=r.state)||void 0===n?void 0:n.textDiagnosis),l=r.steps?r.steps[0].order.customer:{},d=new Date,u=l.contacts?l.contacts[0].phone:"",h=l.contacts?l.contacts[0].address:{},j=h.street?"".concat(h.street):"",b=h.ward?"  -".concat(h.ward):"",m=h.district?"-".concat(h.district):"",x=h.province?"-".concat(h.province):"",O=new Date(l.birthday),p=Math.floor((Date.now()-O.getTime())/31536e6)||0,f=e.etcArr,v=e.otcArr,g=e.otcCode,y=e.etcCode,N=f.filter((function(e){return!e.old})).map((function(e,t){var n,c,a;return e.total,Object(et.jsxs)(sn.a,{children:[Object(et.jsxs)(rn.a,{xs:{size:"7",offset:"1"},children:[Object(et.jsxs)("div",{className:"pb-5",children:[Object(et.jsx)("b",{children:t+1}),"/ ",e.name," ",Object(et.jsxs)("b",{children:["(",null===(n=e.parts[0])||void 0===n?void 0:n.name," ",null===(c=e.parts[0])||void 0===c?void 0:c.quantity,")"]})]}),Object(et.jsx)("div",{className:"pb-5",children:Object(et.jsx)("i",{children:null===(a=e.attrs)||void 0===a?void 0:a.instruction})})]}),Object(et.jsx)(rn.a,{xs:"1",children:e.quantity}),Object(et.jsx)(rn.a,{xs:{size:"1",offset:"1"},children:ve.map((function(t){if(t.code===(null===e||void 0===e?void 0:e.unit))return Object(et.jsx)("span",{children:t.label})}))})]})})),S=v.filter((function(e){return!e.old})).map((function(e,t){var n,c;return e.total,Object(et.jsxs)(sn.a,{children:[Object(et.jsxs)(rn.a,{xs:{size:"7",offset:"1"},children:[Object(et.jsxs)("div",{className:"pb-5",children:[Object(et.jsx)("b",{children:t+1}),"/ ",e.name," ",Object(et.jsxs)("b",{children:["(",null===(n=e.parts[0])||void 0===n?void 0:n.name," ",null===(c=e.parts[0])||void 0===c?void 0:c.quantity,")"]})]}),Object(et.jsx)("div",{className:"pb-5",children:Object(et.jsx)("i",{children:e.attrs.instruction})})]}),Object(et.jsx)(rn.a,{xs:"1",children:e.quantity}),Object(et.jsx)(rn.a,{xs:{size:"1",offset:"1"},children:ve.map((function(t){if(t.code===(null===e||void 0===e?void 0:e.unit))return Object(et.jsx)("span",{children:t.label})}))})]})}));return Object(c.useEffect)((function(){y&&qe.createEtccode(y,"canvasIdEtc"),g&&v.length>0&&qe.createEtccode(g,"canvasIdOtc"),l.code&&qe.createEtccode(l.code.toString(),"canvasCusCode"),l.code&&v.length>0&&qe.createEtccode(l.code.toString(),"canvasCusCodeOtc")}),[y,g,l.code,a.code]),Object(et.jsx)("div",{className:"border border-secondary font-print printPrescription",children:Object(et.jsxs)("div",{className:"medPrintId position-relative",id:"medPrintId",children:[Object(et.jsx)("br",{}),Object(et.jsxs)("div",{className:"PrintEtc",id:"PrintEtc",children:[Object(et.jsx)("div",{className:"absolute",children:Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{sm:"7",children:Object(et.jsx)(sn.a,{className:"text-left",children:Object(et.jsx)(tc,{})})}),Object(et.jsx)(rn.a,{xs:"5",children:Object(et.jsx)("canvas",{id:"canvasIdEtc",style:{width:"220px",height:"15mm",marginRight:"20px"}})})]})}),Object(et.jsx)("h5",{className:"text-center font-weight-bold",children:Object(et.jsx)("b",{children:"\u0110\u01a0N THU\u1ed0C"})}),Object(et.jsx)("div",{className:"text-center",children:Object(et.jsxs)("i",{children:["Ng\xe0y ",d.getDate()," Th\xe1ng ",d.getMonth()+1," N\u0103m ",d.getFullYear()]})}),Object(et.jsx)("br",{}),Object(et.jsxs)("div",{className:"info-Cus",children:[Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{sm:"6",children:Object(et.jsx)("div",{className:"text-left",children:Object(et.jsx)("canvas",{id:"canvasCusCode",style:{height:"14mm"}})})}),Object(et.jsx)(rn.a,{sm:"1"}),Object(et.jsxs)(rn.a,{sm:"5",children:["M\xe3 phi\u1ebfu thu: ",y]})]}),Object(et.jsxs)(sn.a,{className:"pt-10",children:[Object(et.jsxs)(rn.a,{sm:"4",children:["H\u1ecd t\xean: ",Object(et.jsx)("b",{children:l.full_name})]}),Object(et.jsxs)(rn.a,{sm:"3",children:["Ng\xe0y Sinh: ",O.toLocaleString("en-GB").slice(0,10)]}),Object(et.jsxs)(rn.a,{sm:"2",children:["Tu\u1ed5i: ",p]}),Object(et.jsxs)(rn.a,{sm:"3",children:["Gi\u1edbi t\xednh: ","male"===l.gender?"Nam":" N\u1eef"]})]}),Object(et.jsxs)(sn.a,{className:"pt-10",children:[Object(et.jsxs)(rn.a,{sm:"9",children:["\u0110\u1ecba ch\u1ec9: ","".concat(j).concat(b).concat(m).concat(x)]}),Object(et.jsxs)(rn.a,{sm:"3",children:["S\u0110T: ",u]})]}),Object(et.jsx)(sn.a,{className:"pt-10  pb-10",children:Object(et.jsxs)("div",{children:["Ch\u1ea9n \u0111o\xe1n: ",Object(et.jsx)("b",{children:o})]})})]}),Object(et.jsxs)("div",{className:"order-product",children:[Object(et.jsxs)(sn.a,{className:"pt-5",children:[Object(et.jsx)(rn.a,{className:"pl-20",xs:{size:"6",offset:"2"},children:Object(et.jsx)("u",{children:"Thu\u1ed1c \u0111i\u1ec1u tr\u1ecb"})}),Object(et.jsx)(rn.a,{xs:"2",children:Object(et.jsx)("u",{children:"S\u1ed1 l\u01b0\u1ee3ng"})}),Object(et.jsx)(rn.a,{xs:2,children:Object(et.jsx)("u",{children:"\u0110\u01a1n v\u1ecb"})})]}),N]}),Object(et.jsxs)("div",{className:"d-flex justify-content-between px-4",children:[Object(et.jsxs)("div",{children:[Object(et.jsx)("div",{className:"pb-5 pt-30",children:Object(et.jsx)("b",{children:"N\u1ebfu b\u1ea5t th\u01b0\u1eddng \u0111\u1ebfn c\u01a1 s\u1edf y t\u1ebf g\u1ea7n nh\u1ea5t."})}),Object(et.jsx)("div",{className:"pb-5",children:Object(et.jsxs)("b",{children:["Kh\xe1m l\u1ea1i sau : ",s||"....."," Ng\xe0y!"]})}),Object(et.jsx)("div",{children:Object(et.jsx)("b",{children:"Kh\xe1m l\u1ea1i mang theo \u0111\u01a1n n\xe0y."})})]}),Object(et.jsx)("div",{className:"text-center mr-10",children:Object(et.jsxs)("div",{className:"text-center mr-auto ml-5 ",children:[Object(et.jsx)("strong",{children:"B\xe1c s\u0129 \u0111i\u1ec1u tr\u1ecb"}),Object(et.jsx)("br",{}),Object(et.jsx)("i",{children:"(k\xfd, ghi r\xf5 h\u1ecd t\xean)"})," ",Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("b",{className:"mt-5",children:i.full_name})]})})]})]}),v.length>0?Object(et.jsx)("div",{className:v.length>0?"show":"unShow",children:Object(et.jsxs)("div",{className:"PrintOtc",id:"PrintOtc",children:[Object(et.jsx)("div",{className:"absolute",children:Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{sm:"7",children:Object(et.jsx)(sn.a,{className:"text-left",children:Object(et.jsx)(tc,{})})}),Object(et.jsx)(rn.a,{children:Object(et.jsx)("canvas",{id:"canvasIdOtc",style:{width:"240px",height:"16mm",paddingRight:"20px"}})})]})}),Object(et.jsx)("h5",{className:"text-center font-weight-bold",children:Object(et.jsx)("b",{children:"\u0110\u01a0N THU\u1ed0C B\u1ed4 SUNG"})}),Object(et.jsx)("div",{className:"info-customer text-center"}),Object(et.jsx)("div",{className:"text-center",children:Object(et.jsxs)("i",{children:["Ng\xe0y ",d.getDate()," Th\xe1ng ",d.getMonth()+1," N\u0103m ",d.getFullYear()]})}),Object(et.jsx)("br",{}),Object(et.jsxs)("div",{className:"info-Cus",children:[Object(et.jsx)("div",{className:"text-left",children:Object(et.jsx)("canvas",{id:"canvasCusCodeOtc",style:{height:"13mm"}})}),Object(et.jsxs)(sn.a,{children:[Object(et.jsxs)(rn.a,{sm:"6",children:["H\u1ecd v\xe0 t\xean: ",Object(et.jsx)("b",{children:l.full_name})]}),Object(et.jsx)(rn.a,{sm:"1"}),Object(et.jsxs)(rn.a,{sm:"5",children:["M\xe3 phi\u1ebfu thu: ",y]})]}),Object(et.jsxs)(sn.a,{children:[Object(et.jsxs)(rn.a,{sm:"6",children:["Ng\xe0y Sinh: ",O.toLocaleString("en-GB").slice(0,10)]}),Object(et.jsx)(rn.a,{sm:"1"}),Object(et.jsxs)(rn.a,{sm:"5",children:["Gi\u1edbi t\xednh:","male"===l.gender?"Nam":"N\u1eef"]})]}),Object(et.jsxs)(sn.a,{children:[Object(et.jsxs)(rn.a,{sm:"6",children:["\u0110\u1ecba ch\u1ec9 : ","".concat(j).concat(b).concat(m).concat(x)]}),Object(et.jsx)(rn.a,{sm:"1"}),Object(et.jsxs)(rn.a,{sm:"5",children:["S\u1ed1 \u0111i\u1ec7n tho\u1ea1i : ",u]})]})]}),Object(et.jsxs)("div",{className:"order-product",children:[Object(et.jsxs)(sn.a,{className:"pt-5",children:[Object(et.jsx)(rn.a,{xs:{size:"7",offset:"1"},children:Object(et.jsx)("u",{children:"Thu\u1ed1c \u0111i\u1ec1u tr\u1ecb"})}),Object(et.jsx)(rn.a,{xs:"4",children:Object(et.jsx)("u",{children:"S\u1ed1 l\u01b0\u1ee3ng"})})]}),S]}),Object(et.jsxs)("div",{className:"d-flex justify-content-between px-4 ",children:[Object(et.jsxs)("div",{children:[Object(et.jsx)("div",{className:"pb-5 pt-30",children:Object(et.jsx)("b",{children:"N\u1ebfu b\u1ea5t th\u01b0\u1eddng \u0111\u1ebfn c\u01a1 s\u1edf y t\u1ebf g\u1ea7n nh\u1ea5t."})}),Object(et.jsx)("div",{className:"pb-5",children:Object(et.jsxs)("b",{children:["Kh\xe1m l\u1ea1i sau : ",s||"....."," Ng\xe0y!"]})}),Object(et.jsx)("div",{children:Object(et.jsx)("b",{children:"Kh\xe1m l\u1ea1i mang theo \u0111\u01a1n n\xe0y."})})]}),Object(et.jsxs)("div",{className:"text-center mr-10",children:[Object(et.jsx)("strong",{children:"B\xe1c s\u0129 \u0111i\u1ec1u tr\u1ecb"}),Object(et.jsx)("br",{}),Object(et.jsx)("i",{children:"(k\xfd, ghi r\xf5 h\u1ecd t\xean)"})," ",Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("b",{className:"mt-5",children:i.full_name})]})]})]})}):null]})})},Ir=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).state={doctorInfo:null},c}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=JSON.parse(window.sessionStorage.getItem("user"));this.setState({doctorInfo:e})}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.etcArr,c=t.cusData,a=t.otcArr,s=t.etcCode,r=t.otcCode,i=a.filter((function(e){return!e.old}));n.length>0&&(qe.createEtccode(c.code.toString(),"canvasCusEtc"),e.etcCode!==s&&qe.createEtccode(s,"canvasOrderEtc")),i.length>0&&(e.otcCode!==r&&qe.createEtccode(r,"canvasOrderOtc"),qe.createEtccode(c.code.toString(),"canvasCusOtc"))}},{key:"render",value:function(){var e,t,n,c,a,s,r,i,o,l=this.props,d=l.etcArr,u=l.etcCode,h=l.cusData,j=l.otcCode,b=l.otcArr,m=l.job,x=l.reExamDate,O=(h&&h.code,new Date),p=h&&h.contacts?h.contacts[0].phone:null,f=h&&h.contacts?h.contacts[0].address:{},v=new Date(h?h.birthday:null),g=Math.floor((Date.now()-v.getTime())/31536e6)||0,y=(null===(e=m.state)||void 0===e||null===(t=e.subclinical)||void 0===t?void 0:t.weight)||"",N=null===(n=m.state)||void 0===n?void 0:n.textDiagnosis,S=d?d.filter((function(e){return!e.old})).map((function(e,t){var n,c,a;return Object(et.jsxs)(sn.a,{className:"item-product",children:[Object(et.jsxs)(rn.a,{xs:{size:"7"},children:[Object(et.jsxs)("div",{className:"title-product",children:[Object(et.jsx)("b",{children:t+1}),"/ ",e.name," ",Object(et.jsxs)("b",{children:["(",null===(n=e.parts[0])||void 0===n?void 0:n.name," ",null===(c=e.parts[0])||void 0===c?void 0:c.quantity,")"]})]}),Object(et.jsx)("div",{children:Object(et.jsx)("i",{children:null===(a=e.attrs)||void 0===a?void 0:a.instruction})})]}),Object(et.jsx)(rn.a,{className:"pl-20",xs:"1",children:e.quantity}),Object(et.jsx)(rn.a,{className:"pl-20",xs:{size:"1",offset:"1"},children:ve.map((function(t){if(t.code===(null===e||void 0===e?void 0:e.unit))return Object(et.jsx)("span",{children:t.label})}))})]})})):null,C=b?b.filter((function(e){return!e.old})).map((function(e,t){var n,c,a;return Object(et.jsxs)(sn.a,{className:"item-product",children:[Object(et.jsxs)(rn.a,{xs:{size:"7"},children:[Object(et.jsxs)("div",{className:"title-product",children:[Object(et.jsx)("b",{children:t+1}),"/ ",null===e||void 0===e?void 0:e.name," ",Object(et.jsxs)("b",{children:["(",null===(n=e.parts[0])||void 0===n?void 0:n.name," ",null===(c=e.parts[0])||void 0===c?void 0:c.quantity,")"]})]}),Object(et.jsx)("div",{children:Object(et.jsx)("i",{children:null===(a=e.attrs)||void 0===a?void 0:a.instruction})})]}),Object(et.jsx)(rn.a,{className:"pl-20",xs:"1",children:e.quantity}),Object(et.jsx)(rn.a,{className:"pl-20",xs:{size:"1",offset:"1"},children:ve.map((function(t){if(t.code===(null===e||void 0===e?void 0:e.unit))return Object(et.jsx)("span",{children:t.label})}))})]})})):null;return Object(et.jsx)("div",{className:"PrintPre receiptContainer",children:Object(et.jsxs)("div",{className:"print-pharmacy medPrintId position-relative",id:"medPrintId",children:[Object(et.jsxs)("div",{className:"pl-30 pr-15 pb-20 PrintEtc",id:"PrintEtc",children:[Object(et.jsxs)(sn.a,{className:"pt-20 header-print",children:[Object(et.jsx)("div",{className:"print-w-60 absolute",children:Object(et.jsx)(tc,{})}),Object(et.jsx)("div",{className:"print-w-40",children:Object(et.jsx)("canvas",{id:"canvasOrderEtc",style:{height:"13mm",marginRight:"20px"}})})]}),Object(et.jsx)("div",{className:"text-center print-title",children:"\u0110\u01a0N THU\u1ed0C"}),Object(et.jsx)("div",{className:"text-center",children:Object(et.jsxs)("i",{children:[" ",O.getHours()," Gi\u1edd ",O.getMinutes()," Ph\xfat, Ng\xe0y ",O.getDate()," Th\xe1ng ",O.getMonth()+1," N\u0103m ",O.getFullYear()]})}),Object(et.jsxs)("div",{className:"info-cus",children:[Object(et.jsx)("div",{className:"text-left  print-w-50",children:Object(et.jsx)("canvas",{id:"canvasCusEtc",style:{height:"13mm"}})}),Object(et.jsxs)("div",{className:"print-w-50 text-center",children:["M\xe3 phi\u1ebfu thu: ",u]})]}),Object(et.jsxs)("div",{className:"info-cus",children:[Object(et.jsxs)("div",{className:"print-mw-30 name-print",children:["H\u1ecd t\xean: ",Object(et.jsx)("b",{children:h.full_name})]}),Object(et.jsxs)("div",{className:"pl-10 birthday-print",children:["Ng\xe0y Sinh: ",v.toLocaleString("en-GB").slice(0,10)," ","  "," (",g," tu\u1ed5i)"]}),h&&h.gender?Object(et.jsxs)("div",{className:"pl-10 gender-print",children:["Gi\u1edbi: ","male"===h.gender?"Nam":"female"===h.gender?"N\u1eef":""]}):Object(et.jsx)("div",{className:"gender-print"}),Object(et.jsxs)("div",{className:"weight-print",children:["N\u1eb7ng: ",y,"kg"]})]}),Object(et.jsxs)("div",{className:"info-cus pb-5",children:[Object(et.jsxs)("div",{className:"address-print",children:["\u0110\u1ecba ch\u1ec9 : ",null===f||void 0===f?void 0:f.street,"-",null===f||void 0===f?void 0:f.ward,"-",null===f||void 0===f?void 0:f.district,"-",(null===f||void 0===f||null===(c=f.province)||void 0===c?void 0:c.indexOf("Th\xe0nh ph\u1ed1"))>-1?null===f||void 0===f||null===(a=f.province)||void 0===a?void 0:a.replace("Th\xe0nh ph\u1ed1 ",""):null===f||void 0===f||null===(s=f.province)||void 0===s?void 0:s.replace("T\u1ec9nh ","")]}),Object(et.jsxs)("div",{className:"phone-print",children:["\u0110T : ",p]})]}),Object(et.jsxs)("div",{children:["Ch\u1ea9n \u0111o\xe1n: ",Object(et.jsx)("b",{children:N})]}),Object(et.jsxs)("div",{className:"order-product",children:[Object(et.jsxs)(sn.a,{className:"pt-5 title-order",children:[Object(et.jsx)(rn.a,{xs:{size:"6",offset:"1"},children:Object(et.jsx)("u",{children:"Thu\u1ed1c \u0111i\u1ec1u tr\u1ecb"})}),Object(et.jsx)(rn.a,{xs:"2",children:Object(et.jsx)("u",{children:"S\u1ed1 l\u01b0\u1ee3ng"})}),Object(et.jsx)(rn.a,{xs:2,children:Object(et.jsx)("u",{children:"\u0110\u01a1n v\u1ecb"})})]}),S]}),Object(et.jsxs)("div",{className:"d-flex justify-content-between px-4",children:[Object(et.jsxs)("div",{children:[Object(et.jsx)("div",{className:"pb-5 pt-30",children:Object(et.jsx)("b",{children:"N\u1ebfu b\u1ea5t th\u01b0\u1eddng \u0111\u1ebfn c\u01a1 s\u1edf y t\u1ebf g\u1ea7n nh\u1ea5t."})}),Object(et.jsx)("div",{className:"pb-5",children:Object(et.jsxs)("b",{children:["Kh\xe1m l\u1ea1i sau : ",x||"....."," Ng\xe0y!"]})}),Object(et.jsx)("div",{children:Object(et.jsx)("b",{children:"Kh\xe1m l\u1ea1i mang theo \u0111\u01a1n n\xe0y."})})]}),Object(et.jsx)("div",{className:"text-center mr-10",children:Object(et.jsxs)("div",{className:"text-center mr-auto ml-5 ",children:[Object(et.jsx)("strong",{children:"B\xe1c s\u0129 \u0111i\u1ec1u tr\u1ecb"}),Object(et.jsx)("br",{}),Object(et.jsx)("i",{children:"(k\xfd, ghi r\xf5 h\u1ecd t\xean)"})," ",Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("b",{className:"mt-5",children:null===(r=this.state.doctorInfo)||void 0===r?void 0:r.full_name})]})})]})]}),C.length>0&&Object(et.jsxs)("div",{className:"pl-30 pr-15 PrintEtc",id:"PrintOtc",children:[Object(et.jsxs)(sn.a,{className:"header-print",children:[Object(et.jsx)("div",{className:"print-w-60 absolute",children:Object(et.jsx)(tc,{})}),Object(et.jsx)("div",{className:"print-w-40",children:Object(et.jsx)("canvas",{id:"canvasOrderOtc",style:{height:"13mm",marginRight:"20px"}})})]}),Object(et.jsx)("div",{className:"text-center print-title",children:"\u0110\u01a0N THU\u1ed0C"}),Object(et.jsx)("div",{className:"text-center",children:Object(et.jsxs)("i",{children:[" ",O.getHours()," Gi\u1edd ",O.getMinutes()," Ph\xfat, Ng\xe0y ",O.getDate()," Th\xe1ng ",O.getMonth()+1," N\u0103m ",O.getFullYear()]})}),Object(et.jsxs)("div",{className:"info-cus",children:[Object(et.jsx)("div",{className:"text-left  print-w-50",children:Object(et.jsx)("canvas",{id:"canvasCusOtc",style:{height:"13mm"}})}),Object(et.jsxs)("div",{className:"print-w-50 text-center",children:["M\xe3 phi\u1ebfu thu: ",j]})]}),Object(et.jsxs)("div",{className:"info-cus",children:[Object(et.jsxs)("div",{className:"print-mw-30 name-print",children:["H\u1ecd t\xean: ",Object(et.jsx)("b",{children:h.full_name})]}),Object(et.jsxs)("div",{className:"pl-10 birthday-print",children:["Ng\xe0y Sinh: ",v.toLocaleString("en-GB").slice(0,10)," ","  "," (",g," tu\u1ed5i)"]}),h&&h.gender?Object(et.jsxs)("div",{className:"pl-10 gender-print",children:["Gi\u1edbi: ","male"===h.gender?"Nam":"female"===h.gender?"N\u1eef":""]}):Object(et.jsx)("div",{className:"gender-print"}),Object(et.jsxs)("div",{className:"weight-print",children:["N\u1eb7ng: ",y,"kg"]})]}),Object(et.jsxs)("div",{className:"info-cus pb-5",children:[Object(et.jsxs)("div",{className:"address-print",children:["\u0110\u1ecba ch\u1ec9 : ",null===f||void 0===f?void 0:f.street,"-",null===f||void 0===f?void 0:f.ward,"-",null===f||void 0===f?void 0:f.district,"-",(null===f||void 0===f||null===(i=f.province)||void 0===i?void 0:i.indexOf("Th\xe0nh ph\u1ed1"))>-1?f.province.replace("Th\xe0nh ph\u1ed1 ",""):f.province.replace("T\u1ec9nh ","")]}),Object(et.jsxs)("div",{className:"phone-print",children:["\u0110T : ",p]})]}),Object(et.jsxs)("div",{children:["Ch\u1ea9n \u0111o\xe1n: ",Object(et.jsx)("b",{children:N})]}),Object(et.jsxs)("div",{className:"order-product",children:[Object(et.jsxs)(sn.a,{className:"pt-5 title-order",children:[Object(et.jsx)(rn.a,{xs:{size:"6",offset:"1"},children:Object(et.jsx)("u",{children:"Thu\u1ed1c \u0111i\u1ec1u tr\u1ecb"})}),Object(et.jsx)(rn.a,{xs:"2",children:Object(et.jsx)("u",{children:"S\u1ed1 l\u01b0\u1ee3ng"})}),Object(et.jsx)(rn.a,{xs:2,children:Object(et.jsx)("u",{children:"\u0110\u01a1n v\u1ecb"})})]}),C]}),Object(et.jsxs)("div",{className:"d-flex justify-content-between px-4",children:[Object(et.jsxs)("div",{children:[Object(et.jsx)("div",{className:"pb-5 pt-30",children:Object(et.jsx)("b",{children:"N\u1ebfu b\u1ea5t th\u01b0\u1eddng \u0111\u1ebfn c\u01a1 s\u1edf y t\u1ebf g\u1ea7n nh\u1ea5t."})}),Object(et.jsx)("div",{className:"pb-5",children:Object(et.jsxs)("b",{children:["Kh\xe1m l\u1ea1i sau : ",x||"....."," Ng\xe0y!"]})}),Object(et.jsx)("div",{children:Object(et.jsx)("b",{children:"Kh\xe1m l\u1ea1i mang theo \u0111\u01a1n n\xe0y."})})]}),Object(et.jsx)("div",{className:"text-center mr-10",children:Object(et.jsxs)("div",{className:"text-center mr-auto ml-5 ",children:[Object(et.jsx)("strong",{children:"B\xe1c s\u0129 \u0111i\u1ec1u tr\u1ecb"}),Object(et.jsx)("br",{}),Object(et.jsx)("i",{children:"(k\xfd, ghi r\xf5 h\u1ecd t\xean)"})," ",Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("b",{className:"mt-5",children:null===(o=this.state.doctorInfo)||void 0===o?void 0:o.full_name})]})})]})]})]})})}}]),n}(a.a.Component),Lr="/order/order/get?code=",Er="/customer/customer/get?code=",Pr="/job/job/list?type=buy&&customer_id=",Rr="/job/job/list?customer_id=",Mr="/inventory/lot/list",Br="/inventory/transaction/for_order",Ar="/inventory/transaction/for_retail",Fr="/accounting/transaction/create",Ur="/inventory/search?by=product&&text=",Hr="/job/step/finish",Kr="/job/step/add",Gr="/retail/create",Jr="/order/item/update",Xr=new(function(){function e(){if(Object(l.a)(this,e),e._instance)return e._instance;e._instance=this}return Object(b.a)(e,[{key:"getOrder",value:function(e){return Ee.get(Lr+e)}},{key:"getOrderByCustomer",value:function(e){return Ee.get(Pr+e)}},{key:"getCustomer",value:function(e){return Ee.get(Er+e)}},{key:"getJob",value:function(e){return Ee.get(Rr+e)}},{key:"listLot",value:function(){return Ee.get(Mr)}},{key:"createTransaction",value:function(e){return Ee.post(Br,e)}},{key:"createTransactionRetail",value:function(e){return Ee.post(Ar,e)}},{key:"createAccountingTransaction",value:function(e){return Ee.post(Fr,e)}},{key:"searchProduct",value:function(e){return Ee.get(Ur+e)}},{key:"finishOrder",value:function(e){return Ee.post(Hr,e)}},{key:"createOrder",value:function(e){return Ee.post(Kr,e)}},{key:"createRetailOrder",value:function(e){return Ee.post(Gr,e)}},{key:"updateQuantity",value:function(e){return Ee.post(Jr,e)}}]),e}()),Vr=function(e){var t=Object(c.useState)([]),n=Object(wn.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(""),i=Object(wn.a)(r,2),o=i[0],l=i[1],d=Object(c.useState)(""),u=Object(wn.a)(d,2),h=u[0],j=u[1],b=Object(c.useState)(!1),m=Object(wn.a)(b,2),x=m[0],O=m[1],p=function(e){var t=Date.now(),n=(new Date(e).getTime()-t)/he;return Math.ceil(n)},f=a.map((function(t,n){return Object(et.jsxs)("tr",{className:"pointer",onClick:function(n){var c;(c=t.item).oldestLot?(l(""),O(!1),e.onSelect(c)):j("S\u1ea3n ph\u1ea9m n\xe0y hi\u1ec7n \u0111ang kh\xf4ng b\xe1n!")},children:[Object(et.jsxs)("td",{children:[" ",t.item.name," "]}),Object(et.jsx)("td",{children:t.item.parts.map((function(e,t){return Object(et.jsxs)("span",{children:[e.name,", "]},t)}))}),Object(et.jsxs)("td",{children:[" ",new Intl.NumberFormat("de-DE").format(t.item.price),"\u0111 "]}),Object(et.jsxs)("td",{children:[" ",Object(et.jsx)("span",{style:{color:t.item.oldestLot.color},children:t.item.oldestLot?t.item.oldestLot.code:"Null"})," "]}),Object(et.jsxs)("td",{children:[" ",t.item.oldestLot?t.item.oldestLot.remain:"Null"," "]}),Object(et.jsxs)("td",{children:[" ",Object(et.jsx)("span",{style:{color:t.item.color},children:t.item.totalRemain})," "]})]},n)}));return Object(et.jsxs)("div",{className:"filter",children:[Object(et.jsx)("div",{children:Object(et.jsx)(Nn.a,{onChange:function(e){return function(e){l(e.target.value),o.length>0&&(O(!0),Xr.searchProduct(o).then((function(e){var t=e.data.filter((function(e){if(e.item.oldestLot){var t=p(e.item.oldestLot.exp_date);return e.item.oldestLot.color=t<31?"#e09491":t<91?"#80d1a6":"black",e.item.color=e.item.totalRemain<100?"#d26d69":e.item.totalRemain<300?"#28b76b":"black",e}}));s(t)})).catch((function(e){console.log(e)})))}(e)},className:"pattern-product",placeholder:"Nh\u1eadp t\xean thu\u1ed1c",value:o,disabled:""!==e.order_id,onFocus:function(){O(!0)},onBlur:function(){0===o.length&&O(!1)},onKeyDown:function(t){13===t.keyCode&&a.length>0&&o&&(l(""),O(!1),e.onSelect(a[0].item))}})}),""!==o?Object(et.jsx)("div",{children:Object(et.jsxs)(qn.a,{size:"sm",hover:!0,striped:!0,bordered:!0,className:"list-prescription",children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"T\xean"}),Object(et.jsx)("th",{children:"Th\xe0nh ph\u1ea7n"}),Object(et.jsx)("th",{children:"Gi\xe1"}),Object(et.jsx)("th",{children:"L\xf4 c\u0169 nh\u1ea5t"}),Object(et.jsx)("th",{children:"T\u1ed3n kho"}),Object(et.jsx)("th",{children:"T\u1ed5ng t\u1ed3n kho"})]})}),Object(et.jsx)("tbody",{children:f})]})}):null,x?Object(et.jsx)("div",{className:"pharmacy-opacity pharmacy-opacity-top"}):null,Object(et.jsx)(at,{message:h,done:function(){j("")}})]})},qr=n(125),zr=n.n(qr),Wr=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).onChangeQuantity=function(e,t){var n,a=1==c.state.tab?"etcArr":"otcArr",s=1==c.state.tab?"tPriceETC":"tPriceOTC",r=c.state[a];r[t].quantity=e.target.value,r[t].total=+e.target.value*+r[t].price;var i=c.calTPrice(r);c.setState((n={},Object(f.a)(n,a,r),Object(f.a)(n,s,i),n))},c.onChangeInstruction=function(e,t){var n=1==c.state.tab?"etcArr":"otcArr",a=c.state[n];a[t].attrs.instruction=e.target.value,c.setState(Object(f.a)({},n,a))},c.addMed=function(e){var t,n=(null===(t=c.state.job)||void 0===t?void 0:t.state)||"",a=n.textSymptom,s=n.textDiagnosis;if(a&&s){var r,i=c.state,o=i.tab,l=i.etcArr,d=i.tPriceETC,u=i.otcArr,h=i.tPriceOTC,j=null===(r=i.job.state)||void 0===r?void 0:r.subclinical;if(e.note="",e.quantity=1,e.total=e.price,e.attrs.instruction=j&&j.weight&&j.weight<30?"Ng\xe0y u\u1ed1ng: ".concat(e.attrs.default_daily_usage," l\u1ea7n x ").concat("tablet"===e.attrs.unit?e.attrs.max_dose_per_kg*j.weight/e.attrs.strength+"vi\xean":e.attrs.max_dose_per_kg*j.weight+e.attrs.unit):"Ng\xe0y u\u1ed1ng: ".concat(e.attrs.default_daily_usage," l\u1ea7n x ").concat("tablet"===e.attrs.unit?e.attrs.default_quantity/e.attrs.strength+" vi\xean":e.attrs.default_quantity+e.attrs.unit),1==o){var b=0;l.forEach((function(t){t.id===e.id&&b++})),b>0?c.setState({message:"\u0110\xe3 c\xf3 thu\u1ed1c n\xe0y trong \u0111\u01a1n!"}):(l.push(e),d=c.calTPrice(l))}else{var m=0;u.forEach((function(t){t.id===e.id&&m++})),m>0?c.setState({message:"\u0110\xe3 c\xf3 thu\u1ed1c n\xe0y trong \u0111\u01a1n!"}):(u.push(e),h=c.calTPrice(u))}console.log(l),c.setState({etcArr:l,tPriceETC:d,otcArr:u,tPriceOTC:h})}else c.setState({message:"Tri\u1ec7u ch\u1ee9ng v\xe0 ch\u1ea9n \u0111o\xe1n kh\xf4ng \u0111\u01b0\u1ee3c b\u1ecf tr\u1ed1ng"})},c.addProdOther=function(){var e=c.state,t=e.prodOther,n=e.etcArr,a=e.otcArr,s={name:t,attrs:{instruction:"C\xf3 th\u1ec3 thay th\u1ebf b\u1eb1ng lo\u1ea1i thu\u1ed1c t\u01b0\u01a1ng t\u1ef1."},dontHave:!0,parts:[]};1==e.tab?(n.push(s),c.setState({etcArr:n,prodOther:""})):(a.push(s),c.setState({otcArr:a,prodOther:""})),console.log(a)},c.onRemoveMed=function(e){var t,n=1==c.state.tab?"etcArr":"otcArr",a=c.state[n],s=1==c.state.tab?"tPriceETC":"tPriceOTC";a.splice(e,1),c.setState((t={},Object(f.a)(t,n,a),Object(f.a)(t,s,c.calTPrice(a)),t))},c.submitListProduct=function(){var e=c.state.job.state,t=e.textSymptom,n=e.textDiagnosis;if(t&&n){var a=[];[{key:"etcArr",order_type:V.code},{key:"otcArr",order_type:X.code}].forEach((function(e){var t=c.state[e.key].filter((function(e){return!e.old&&!e.dontHave}));t.length&&a.push(mc.addJobStep({job_id:c.props.job.id,type:G,order_type:e.order_type,items:t.map((function(e){return{ref:"product",ref_id:e.id,quantity:e.quantity,attrs:{instruction:e.attrs.instruction}}}))}))})),Promise.all(a).then((function(e){var t=[],n=c.state.orderCode;e.forEach((function(e){n.push(e.data),t.push(e.data)})),c.setState({orderCode:n,message:"Y\xeau c\u1ea7u thu\u1ed1c th\xe0nh c\xf4ng!"}),2==t.length?c.setState({etcCode:t[0].code,otcCode:t[1].code}):1==t.length&&c.setState({etcCode:t[0].code,otcCode:t[0].code})})).catch((function(e){c.setState({message:"C\xf3 l\u1ed7i x\u1ea3y ra, xin vui l\xf2ng th\u1eed l\u1ea1i"}),console.log(e)}))}else c.setState({message:"Tri\u1ec7u ch\u1ee9ng v\xe0 ch\u1ea9n \u0111o\xe1n kh\xf4ng \u0111\u01b0\u1ee3c b\u1ecf tr\u1ed1ng"})},c.handleClose=function(){c.setState({show:!1})},c.onSetDone=function(){c.setState({show:!0})},c.onDone=function(){var e=c.props.stepId,t=D;mc.finishDiagnosis({id:e,results:[t]}).then((function(e){c.props.onRefresh(),c.setState({message:"\u0110\xe3 ho\xe0n th\xe0nh",show:!1}),window.location.reload()})).catch((function(e){return console.log(e)}))},c.closeNotice=function(){c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{message:""})}))},c.print=Object(j.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.print("medPrintId");case 2:case"end":return e.stop()}}),e)}))),c.reExamination=function(e){c.setState({reExamDate:e.target.value})},c.renderMed=function(e,t){var n;c.state.job;return Object(et.jsxs)("tr",{className:"pointer".concat(e.old?" old":""),children:[Object(et.jsx)("td",{className:"product-index dh-3 middle ",children:t+1}),Object(et.jsx)("td",{className:"product-name dh-3",children:e.name}),Object(et.jsx)("td",{className:"product-part dh-3",children:null===(n=e.parts)||void 0===n?void 0:n.map((function(e){return e.name})).join(", ")}),Object(et.jsx)("td",{className:"product-unit dh-3 middle",children:ve.map((function(t){if(t.code===(null===e||void 0===e?void 0:e.unit))return Object(et.jsx)("span",{children:t.label})}))}),Object(et.jsx)("td",{className:"product-route dh-3 middle",children:ge.map((function(t){if(e.attrs.route===t.value)return t.name}))}),Object(et.jsx)("td",{className:"product-item-instruction no-padding dh-3",children:Object(et.jsx)(Nn.a,{type:"textarea",value:e.attrs.instruction,disabled:e.old,onChange:function(e){return c.onChangeInstruction(e,t)}})}),Object(et.jsx)("td",{className:"product-quantity product-item-quantity dh-3 middle",children:Object(et.jsx)(Nn.a,{type:"number",value:e.quantity,disabled:e.old,onChange:function(e){return c.onChangeQuantity(e,t)}})}),Object(et.jsx)("td",{className:"product-price dh-3 middle",children:e.price?new Intl.NumberFormat("de-DE").format(e.price)+"\u0111":null}),Object(et.jsx)("td",{className:"product-total dh-3 middle",children:e.price?new Intl.NumberFormat("de-DE").format(e.total)+"\u0111":null}),e.old?Object(et.jsx)("td",{className:"product-options dh-3 middle"}):Object(et.jsx)("td",{className:"dh-3 choice-prescription-delete",onClick:function(){return c.onRemoveMed(t)},children:"X\xf3a"})]},t)},c.state={prodOther:"",job:e.job,tab:1,messaget:"",renderOTCArr:[],renderETCArr:[],etcArr:[],tPriceETC:0,otcArr:[],tPriceOTC:0,orderCode:[],newOrderCode:[],etcCode:"",otcCode:"",show:!1,cusSubInfo:{},SubMedArr:[],subCode:"",reExamDate:""},c}return Object(b.a)(n,[{key:"componentDidUpdate",value:function(e){if(e.job!==this.props.job){var t,n,c=this.props.job,a=(t=[]).concat.apply(t,Object(va.a)(c.steps.filter((function(e){return e.type===G&&e.order.type===V.code})).map((function(e){return e.order.items})))).map((function(e){var t,n=e.ref_value;return n.quantity=e.quantity,n.total=+e.quantity*+n.price,n.old=!0,n.attrs.instruction=null===(t=e.attrs)||void 0===t?void 0:t.instruction,n})),s=(n=[]).concat.apply(n,Object(va.a)(c.steps.filter((function(e){return e.type===G&&e.order.type===X.code})).map((function(e){return e.order.items})))).map((function(e){var t,n=e.ref_value;return n.quantity=e.quantity,n.total=+e.quantity*+n.price,n.old=!0,n.attrs.instruction=null===(t=e.attrs)||void 0===t?void 0:t.instruction,n}));this.setState({job:this.props.job,tab:1,etcArr:a,tPriceETC:this.calTPrice(a),otcArr:s,tPriceOTC:this.calTPrice(s)})}}},{key:"calTPrice",value:function(e){return e.reduce((function(e,t){return+e+ +t.total}),0)}},{key:"render",value:function(){var e,t,n=this,c=this.state,a=c.job,s=c.etcArr,r=c.tPriceETC,i=c.otcArr,o=c.tPriceOTC,l=c.tab,d=s.map((function(e,t){return n.renderMed(e,t)})),u=i.map((function(e,t){return n.renderMed(e,t)}));return Object(et.jsxs)("div",{className:"Prescriptions",children:[Object(et.jsxs)(sn.a,{className:"panel-heading mt-0  ",children:[Object(et.jsxs)(rn.a,{sm:"4",className:"title-card",children:[Object(et.jsx)("span",{onClick:function(){return n.setState({tab:1})},className:1==l?"active_tab":"",children:"\u0110\u01a1n ch\u1ec9 \u0111\u1ecbnh"}),"  ",Object(et.jsx)("span",{onClick:function(){return n.setState({tab:2})},className:2==l?"active_tab":"",children:"\u0110\u01a1n b\u1ed5 sung"})]}),Object(et.jsx)(rn.a,{sm:"3",children:Object(et.jsx)(Nn.a,{placeholder:"Nh\u1eadp thu\u1ed1c kh\xf4ng c\xf3 t\u1ea1i qu\u1ea7y",value:this.state.prodOther,onChange:function(e){return n.setState({prodOther:e.target.value})}})}),Object(et.jsx)(rn.a,{sm:"1",children:Object(et.jsx)(Ze.a,{onClick:this.addProdOther,children:"Th\xeam"})}),Object(et.jsx)(rn.a,{sm:{size:"2",offset:"2"},children:Object(et.jsx)(Nn.a,{placeholder:"nh\u1eadp s\u1ed1 ng\xe0y kh\xe1m l\u1ea1i",value:this.state.reExamDate,onChange:function(e){return n.reExamination(e)}})})]}),Object(et.jsx)("div",{className:"panel-body",children:Object(et.jsxs)("div",{className:"list-choice-prescription",children:[Object(et.jsx)("div",{className:"product-table table-responsive min-h-50 df-h-25",children:Object(et.jsxs)("table",{className:"table table-head-fixed table-bordered",children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{className:"product-index dh-3",children:"#"}),Object(et.jsx)("th",{className:"product-name dh-3",children:"T\xean D\u01b0\u1ee3c"}),Object(et.jsx)("th",{className:"product-part dh-3",children:"Ho\u1ea1t ch\u1ea5t"}),Object(et.jsx)("th",{className:"product-unit dh-3",children:"\u0110\u01a1n v\u1ecb"}),Object(et.jsx)("th",{className:"product-route dh-3",children:"\u0110\u01b0\u1eddng d\xf9ng"}),Object(et.jsx)("th",{className:"product-instruction dh-3",children:"C\xe1ch d\xf9ng"}),Object(et.jsx)("th",{className:"product-quantity dh-3",children:"S\u1ed1 l\u01b0\u1ee3ng"}),Object(et.jsx)("th",{className:"product-price dh-3",children:"\u0110\u01a1n gi\xe1"}),Object(et.jsx)("th",{className:"product-total dh-3",children:"T\u1ed5ng"}),Object(et.jsx)("th",{className:"product-options dh-3"})]})}),Object(et.jsxs)("tbody",{className:"body-half-screen",children:[1==l?d:u,Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{className:"",children:"#"}),Object(et.jsx)("th",{className:"search-product",children:Object(et.jsx)(Vr,{order_id:"",onSelect:this.addMed})}),Object(et.jsx)("th",{className:""}),Object(et.jsx)("th",{className:""}),Object(et.jsx)("th",{className:""}),Object(et.jsx)("th",{className:""}),Object(et.jsx)("th",{className:""}),Object(et.jsx)("th",{className:""}),Object(et.jsx)("th",{className:""}),Object(et.jsx)("th",{className:""})]})]})]})}),Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{sm:3,className:"pl-0",children:Object(et.jsxs)("p",{className:"title-card",children:[Object(et.jsx)("span",{className:"material-icons",children:"monetization_on"})," T\u1ed5ng ti\u1ec1n: ",Object(et.jsxs)("span",{children:[1==l?new Intl.NumberFormat("de-DE").format(r):new Intl.NumberFormat("de-DE").format(o),"\u0111"]})]})}),Object(et.jsxs)(rn.a,{className:"btn-count-print end pr-0",children:[Object(et.jsx)(Ze.a,{color:"primary",hidden:!a||!a.id,onClick:this.submitListProduct,children:"Y\xeau c\u1ea7u thu\u1ed1c"})," ",Object(et.jsx)(zr.a,{trigger:function(){return Object(et.jsx)(Ze.a,{hidden:!a||!a.id,color:"primary",children:"In \u0111\u01a1n thu\u1ed1c"})},content:function(){return n.componentRef}})," ",Object(et.jsx)(Ze.a,{color:"primary",hidden:!a||!a.id,onClick:function(){return n.onSetDone()},children:"Ho\xe0n th\xe0nh"})]})]})]})}),Object(et.jsxs)(We.a,{isOpen:this.state.show,children:[Object(et.jsx)(Ye.a,{children:"X\xe1c nh\u1eadn ho\xe0n th\xe0nh b\u1ec7nh nh\xe2n"}),Object(et.jsx)(Qe.a,{className:"text-center",children:"B\u1ea1n h\xe3y x\xe1c nh\u1eadn ho\xe0n th\xe0nh b\u1ec7nh nh\xe2n"}),Object(et.jsx)($e.a,{children:Object(et.jsx)(sn.a,{children:Object(et.jsxs)(rn.a,{sm:"12",className:"end",children:[Object(et.jsx)(Ze.a,{onClick:this.onDone,children:"X\xe1c nh\u1eadn"})," ",Object(et.jsx)(Ze.a,{color:"danger",onClick:this.handleClose,children:"H\u1ee7y"})]})})})]}),Object(et.jsx)("div",{hidden:!0,children:Object(et.jsx)(Ir,{ref:function(e){return n.componentRef=e},etcArr:s,reExamDate:this.state.reExamDate,otcCode:this.state.otcCode,tab:this.state.tab,cusData:a&&a.steps?null===(e=a.steps[0])||void 0===e||null===(t=e.order)||void 0===t?void 0:t.customer:{},job:a,etcCode:this.state.etcCode,otcArr:i})}),Object(et.jsx)(at,{message:this.state.message,done:function(){return n.setState({message:""})}})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.job.id!==t.job.id?{job:e.job}:null}}]),n}(ze),Yr=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).componentDidUpdate=function(e){if(e.job.id!==c.props.job.id&&c.setState({textDiagnosis:c.props.job.state.textDiagnosis,textSymptom:c.props.job.state.textSymptom}),e.job.id!==c.props.job.id&&c.props.job&&c.props.job.steps&&c.props.job.steps.length){var t=c.props.job.steps.filter((function(e){return e.type===K}));c.setState({testResultList:t})}},c.onBlurDiagnosis=function(){var e=c.props.job;""!==c.state.textDiagnosis&&(mc.postSubclinical({id:e.id,state:{textSymptom:c.state.textSymptom,textDiagnosis:c.state.textDiagnosis}}).then((function(t){e.state=e.state||{},e.state.textDiagnosis=c.state.textDiagnosis,e.state.textSymptom=c.state.textSymptom,console.log("th\xe0nh c\xf4ng",t)})),c.props.onChangetextDiagnosis(c.state.textDiagnosis))},c.onChange=function(e){c.setState(Object(f.a)({},e.target.name,e.target.value))},c.state={textDiagnosis:"",textSymptom:"",message:"",testResultList:[]},c}return Object(b.a)(n,[{key:"render",value:function(){var e=this;return Object(et.jsxs)("div",{className:"Diagnosis",children:[Object(et.jsxs)(sn.a,{children:[Object(et.jsxs)("p",{className:"title-card",children:[Object(et.jsx)("span",{className:"material-icons",children:"playlist_add_check"}),"Tri\u1ec7u ch\u1ee9ng"]}),Object(et.jsx)("textarea",{className:"form-control symptom",value:this.state.textSymptom,name:"textSymptom",onChange:this.onChange,onBlur:function(){e.onBlurDiagnosis()},disabled:!this.props.job.id})]}),Object(et.jsxs)(sn.a,{children:[Object(et.jsxs)("p",{className:"title-card",children:[Object(et.jsx)("span",{className:"material-icons",children:"playlist_add_check"})," Ch\u1ea9n \u0111o\xe1n"]}),Object(et.jsx)("textarea",{className:"form-control diag",value:this.state.textDiagnosis,onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"6",name:"textDiagnosis",onChange:this.onChange,onBlur:function(){e.onBlurDiagnosis()},disabled:!this.props.job.id})]})]})}}]),n}(ze),Qr=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).onSelectJobStep=function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:mc.getJobById({id:t.job_id}).then((function(e){e.state=e.state||{},e.state.subclinical=e.state.subclinical||{},e.state.textDiagnosis=e.state.textDiagnosis||"",c.setState({selectedJobStep:t,selectedJob:e})})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.selectTypeCustomer=function(e){c.state.activeTab!==e&&c.setState({activeTab:e})},c.handleReviewExamResult=function(e){},c.jobListAction={refresh:null},c.setNotiQuantity=function(e){c.setState({notiQuantity:e})},c.shortKeyShowListPeople=function(e){e.ctrlKey&&"l"===e.key&&(e.preventDefault(),c.setState({navActiveListPeople:!0}))},c.myRef=a.a.createRef(),c.handleClickOutside=function(e){c.myRef.current.contains(e.target)||c.setState({navActiveListPeople:!1})},c.hiddenPatientList=function(){c.setState({navActiveListPeople:!1})},c.onChangetextDiagnosis=function(e){c.setState({textDiagnosis:e})},c.state={servicesList:[],ProductList:[],patientList:[],selectedJobStep:{},selectedJob:{},textDiagnosis:"",activeTab:"1",titleWaitForExam:"Danh S\xe1ch B\u1ec7nh Nh\xe2n Ch\u1edd",navActiveListPeople:!1,navActiveExam:!1,notiQuantity:0,resultList:[]},c}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=[mc.getListServices(),mc.getListProduct()];Promise.all(t).then((function(t){var n=Object(wn.a)(t,2),c=n[0],a=n[1],s=c.data.filter((function(e){return e.type===M||e.type===F||e.type===B||e.type===A||e.type===U}));e.setState({servicesList:s,ProductList:a.data})})).catch((function(e){console.log(e)})),document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"render",value:function(){var e,t=this,n=mc.location.type,c=this.state,a=c.notiQuantity,s=c.servicesList,r=c.ProductList,i=c.selectedJobStep,o=c.selectedJob,l=c.activeTab,d=i.order?i.order.customer:{};i.location&&i.location.id;return Object(et.jsxs)("div",{className:"JobDoctor",onKeyDown:function(e){return t.shortKeyShowListPeople(e)},tabIndex:"0",children:[Object(et.jsxs)(sn.a,{className:"title-card",children:[Object(et.jsx)(rn.a,{children:Object(et.jsx)("span",{children:null===(e=mc.location)||void 0===e?void 0:e.name})}),Object(et.jsx)(rn.a,{className:"end",children:Object(et.jsx)("span",{className:"select-office text-right",onClick:function(){mc.location={},window.location.replace("/app/doctor")},children:Object(et.jsx)("b",{children:"Chuy\u1ec3n ph\xf2ng"})})})]}),Object(et.jsx)("hr",{className:"mb-0 mt-0"}),Object(et.jsx)(sn.a,{className:"content",children:Object(et.jsxs)(rn.a,{children:[Object(et.jsxs)(sn.a,{className:"mt-1 mb-15",children:[Object(et.jsx)(rn.a,{sm:"7",children:Object(et.jsxs)("div",{className:"customCard p-15 mr-15 content-left",children:[Object(et.jsx)(uc,{data:d,mode:"compact"}),Object(et.jsx)(kr,{job:o}),Object(et.jsx)(Yr,{job:o,onChangetextDiagnosis:this.onChangetextDiagnosis})]})}),Object(et.jsx)(rn.a,{sm:"5",children:Object(et.jsx)(wr,{textDiagnosis:this.state.textDiagnosis,resultList:this.state.resultList,servicesList:s,cusData:d,stepId:i.id,job:o,onRefresh:this.jobListAction.refresh})})]}),Object(et.jsx)(sn.a,{className:"customCard p-15",children:Object(et.jsx)(Wr,{ProductList:r,cusData:d,job:o,stepId:i.id,onRefresh:this.jobListAction.refresh})})]})}),Object(et.jsxs)("div",{className:this.state.navActiveListPeople||this.state.navActiveExam?"nav-active":"nav-disable",children:[Object(et.jsx)("div",{className:"group-btn",children:Object(et.jsxs)("p",{className:"btn-circle btn-people mb-2 pointer",onClick:function(){return t.setState({navActiveListPeople:!0})},children:[Object(et.jsx)("span",{className:"material-icons",children:"people"}),Object(et.jsx)("sup",{children:a>0?Object(et.jsx)("div",{children:a}):null})]})}),Object(et.jsx)("div",{className:"content",children:Object(et.jsxs)("div",{className:this.state.navActiveListPeople?"display":"none-display",children:[Object(et.jsx)("div",{ref:this.myRef,children:n===W?Object(et.jsxs)("div",{children:[Object(et.jsxs)($t.a,{tabs:!0,className:"selectTabs",children:[Object(et.jsx)(Zt.a,{className:"titleTabs",children:Object(et.jsx)(en.a,{className:Dn()({active:"1"===l}),onClick:function(){t.selectTypeCustomer("1")},children:Object(et.jsx)("b",{className:"title-card",children:"B\u1ec7nh nh\xe2n ch\u1edd kh\xe1m c\u1ea5p c\u1ee9u"})})}),Object(et.jsx)(Zt.a,{className:"titleTabs",children:Object(et.jsx)(en.a,{className:Dn()({active:"2"===l}),onClick:function(){t.selectTypeCustomer("2")},children:Object(et.jsx)("b",{className:"title-card",children:"B\u1ec7nh nh\xe2n ch\u1edd c\u1ea5p c\u1ee9u"})})}),Object(et.jsx)(Zt.a,{className:"titleTabs",children:Object(et.jsx)(en.a,{className:Dn()({active:"3"===l}),onClick:function(){t.selectTypeCustomer("3")},children:Object(et.jsx)("b",{className:"title-card",children:"B\u1ec7nh nh\xe2n \u0111\xe3 ho\xe0n th\xe0nh"})})})]}),Object(et.jsxs)(gn.a,{activeTab:l,children:[Object(et.jsx)(yn.a,{tabId:"1",className:"customCard",children:Object(et.jsx)(Tn,{hiddenPatientList:this.hiddenPatientList,titleOfList:this.state.titleWaitForExam,action:this.jobListAction,onSelectJobStep:function(e){return t.onSelectJobStep(e)},location_id:mc.location.id,status:[T,w],type:R,setNotiQuantity:this.setNotiQuantity,resultList:this.state.resultList,hasNoti:!0,mode:"doctor"})}),Object(et.jsx)(yn.a,{tabId:"2",className:"customCard",children:Object(et.jsx)(Tn,{hiddenPatientList:this.hiddenPatientList,titleOfList:this.state.titleWaitForExam,action:this.jobListAction,onSelectJobStep:function(e){return t.onSelectJobStep(e)},location_id:mc.location.id,status:[T,w],type:M,mode:"doctor"})}),Object(et.jsx)(yn.a,{tabId:"3",className:"customCard",children:Object(et.jsx)(Tn,{hiddenPatientList:this.hiddenPatientList,titleOfList:this.state.titleWaitForExam,action:this.jobListAction,onSelectJobStep:function(e){return t.onSelectJobStep(e)},location_id:mc.location.id,status:[D],type:M,mode:"doctor"})})]})]}):Object(et.jsxs)("div",{children:[Object(et.jsxs)($t.a,{tabs:!0,className:"selectTabs",children:[Object(et.jsx)(Zt.a,{className:"titleTabs",children:Object(et.jsx)(en.a,{className:Dn()({active:"1"===l}),onClick:function(){t.selectTypeCustomer("1")},children:Object(et.jsx)("b",{className:"title-card",children:"B\u1ec7nh nh\xe2n ch\u1edd kh\xe1m"})})}),Object(et.jsx)(Zt.a,{className:"titleTabs",children:Object(et.jsx)(en.a,{className:Dn()({active:"2"===l}),onClick:function(){t.selectTypeCustomer("2")},children:Object(et.jsx)("b",{className:"title-card",children:"B\u1ec7nh nh\xe2n \u0111\xe3 ho\xe0n th\xe0nh"})})})]}),Object(et.jsxs)(gn.a,{activeTab:l,children:[Object(et.jsx)(yn.a,{tabId:"1",className:"customCard",children:Object(et.jsx)(Tn,{hiddenPatientList:this.hiddenPatientList,titleOfList:this.state.titleWaitForExam,action:this.jobListAction,onSelectJobStep:function(e){return t.onSelectJobStep(e)},location_id:mc.location.id,status:[T,w],type:R,setNotiQuantity:this.setNotiQuantity,resultList:this.state.resultList,hasNoti:!0,mode:"doctor"})}),Object(et.jsx)(yn.a,{tabId:"2",className:"customCard",children:Object(et.jsx)(Tn,{hiddenPatientList:this.hiddenPatientList,titleOfList:this.state.titleWaitForExam,action:this.jobListAction,onSelectJobStep:function(e){return t.onSelectJobStep(e)},location_id:mc.location.id,status:[D],type:R,mode:"doctor"})})]})]})}),Object(et.jsx)("div",{className:"doctor-opacity"})]})})]})]})}}]),n}(ze),$r=Object(r.h)(Qr),Zr=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).onLoadLocation=function(e){e&&c.props.history.push("doctor/room/"+e)},c.onSelect=function(e,t){c.props.history.push("doctor/room/"+e)},c.state={locationList:[]},c}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;mc.getListLocation().then((function(t){var n=t.data.filter((function(e){return e.type===z||e.type===W}));e.setState({locationList:n})}));var t=localStorage.getItem("location_id");this.onLoadLocation(t)}},{key:"render",value:function(){return Object(et.jsx)("div",{style:{padding:"20px"},children:Object(et.jsx)(fc,{list:this.state.locationList,onSelect:this.onSelect})})}}]),n}(ze),ei=Object(r.h)(Zr),ti=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.match.path;return Object(et.jsx)("div",{className:"Doctor",children:Object(et.jsxs)(r.d,{children:[Object(et.jsx)(r.b,{exact:!0,path:"".concat(e,"/"),render:function(){return mc.location.id&&!mc.location.type===z?Object(et.jsx)(r.a,{to:"".concat(e,"/room/").concat(mc.location.id)}):Object(et.jsx)(ei,{})}}),Object(et.jsx)(r.b,{exact:!0,path:"".concat(e,"/room/:id"),component:$r}),Object(et.jsx)(r.b,{exact:!0,path:"".concat(e,"/printDiag"),component:Ys}),Object(et.jsx)(r.b,{exact:!0,path:"".concat(e,"/PrintPre"),component:Dr})]})})}}]),n}(c.Component),ni=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onDelete=function(t){e.props.onDelete(t)},e}return Object(b.a)(n,[{key:"getDate",value:function(e){return new Date(e)}},{key:"render",value:function(){var e=this.props,t=e.listLot,n=e.index,a=new Date(t.mtime);return Object(et.jsx)(c.Fragment,{children:"NA"!==t.product_name?Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{scope:"row",children:n+1}),Object(et.jsx)("td",{children:t.code}),Object(et.jsx)("td",{children:t.product_name}),Object(et.jsx)("td",{children:t.warehouse_name}),Object(et.jsx)("td",{children:t.total}),Object(et.jsx)("td",{children:t.remain}),Object(et.jsx)("td",{children:t.man_date}),Object(et.jsx)("td",{children:t.exp_date}),Object(et.jsx)("td",{children:a.toLocaleString("en-GB")})]},n):null})}}]),n}(c.Component),ci=Object(r.h)(ni),ai={LIST_WAREHOUSE:"/inventory/warehouse/list",LIST_BATCH:"/inventory/lot/list?warehouse_id=",LIST_TRANSACTION:"/inventory/transaction/list",LIST_PRODUCT:"/product/list",LIST_PRODUCER:"/product/producer/list",DELETE_PRODUCER:"/product/producer/delete",GET_PRODUCER:"/product/producer/get?id=",EDIT_PRODUCER:"/product/producer/update",POST_PRODUCER:"/product/producer/create",GET_PRODUCT:"/product/get?id=",ALL_BATCH:"/inventory/lot/list",GET_LOT:"/inventory/lot/get?id=",POST_BATCH:"/inventory/lot/create",GET_TRANSACTION:"/inventory/transaction/get?id=",CREATE_TRANSACTION_FOR_LOT:"/inventory/transaction/for_lot"},si=new(function(){function e(){if(Object(l.a)(this,e),e._instance)return e._instance;e._instance=this}return Object(b.a)(e,[{key:"listWareHouse",value:function(){return Ee.get(ai.LIST_WAREHOUSE)}},{key:"listLot",value:function(e){return Ee.get(ai.LIST_BATCH+e)}},{key:"listTransaction",value:function(){return Ee.get(ai.LIST_TRANSACTION)}},{key:"listProduct",value:function(){return Ee.get(ai.LIST_PRODUCT)}},{key:"allLot",value:function(){return Ee.get(ai.ALL_BATCH)}},{key:"deleteLot",value:function(){throw new Error("cannot delete lot")}},{key:"getProduct",value:function(e){return Ee.get(ai.GET_PRODUCT+e)}},{key:"getLot",value:function(e){return Ee.get(ai.GET_LOT+e)}},{key:"getTransaction",value:function(e){return Ee.get(ai.GET_TRANSACTION+e)}},{key:"createTransactionForLot",value:function(e){return Ee.post(ai.CREATE_TRANSACTION_FOR_LOT,e)}},{key:"postProduct",value:function(e){return Ee.post("".concat(ai.BASE,"/create"),e)}},{key:"getProductById",value:function(e){return Ee.get("".concat(ai.BASE,"/get"),{id:e})}},{key:"delProduct",value:function(e){return Ee.post("".concat(ai.BASE,"/delete"),{id:e})}},{key:"editProduct",value:function(e){return Ee.post("".concat(ai.BASE,"/update"),e)}},{key:"getWarehouseList",value:function(){return Ee.get("".concat(ai.BASE,"/warehouse/list"))}},{key:"getLotById",value:function(e){return Ee.get("".concat(ai.BASE,"/lot/get"),{id:e})}},{key:"getLotList",value:function(){return Ee.get("".concat(ai.BASE,"/lot/list"))}},{key:"createLot",value:function(e){return Ee.post(ai.POST_BATCH,e)}},{key:"editLot",value:function(e){return Ee.post("".concat(ai.BASE,"/lot/update"),e)}},{key:"getProducerList",value:function(){return Ee.get("".concat(ai.LIST_PRODUCER))}},{key:"deleteProducer",value:function(e){return Ee.post("".concat(ai.DELETE_PRODUCER),e)}},{key:"getProducerbyId",value:function(e){return Ee.get(ai.GET_PRODUCER+e)}},{key:"editProducer",value:function(e){return Ee.post(ai.EDIT_PRODUCER,e)}},{key:"postProducer",value:function(e){return Ee.post(ai.POST_PRODUCER,e)}}]),e}()),ri=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).onDelete=function(e){c.setState({notiConfirm:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a !!",id:e})},c.answer=function(e){if(e){var t={id:c.state.id};si.deleteLot(t).then((function(){c.setState({notiConfirm:""}),c.getData(),window.location.href="./inventory/lot"})).catch((function(e){c.setState({notiMessage:"L\u1ed7i vui l\xf2ng b\u1ea1n th\u1eed l\u1ea1i sau !!"}),console.log(e)}))}else c.setState({notiConfirm:""})},c.state={id:"",listWareHouse:[],listLot:[],listProduct:[],notiConfirm:"",textSearch:""},c}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this,t=[];t.push(si.allLot()),t.push(si.listWareHouse()),t.push(si.listProduct()),Promise.all(t).then((function(t){var n=Object(wn.a)(t,3),c=n[0],a=n[1],s=n[2],r=c.data,i=a.data,o=s.data;r.map((function(e){var t=o.find((function(t){return e.product_id===t.id}));e.product_name=t?t.name:"NA";var n=i.find((function(t){return e.warehouse_id===t.id}));return e.warehouse_name=n?n.name:"NA",e})),e.setState({listLot:r})})).catch((function(t){e.setState({notiMessage:"L\u1ed7i vui l\xf2ng b\u1ea1n th\u1eed l\u1ea1i sau !!"}),console.log(t)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.listLot,c=t.textSearch,a=n.filter((function(e){var t,n;return null===(t=e.code)||void 0===t||null===(n=t.toUpperCase())||void 0===n?void 0:n.includes("".concat(c.toUpperCase()))})).map((function(t,n){return Object(et.jsx)(ci,{index:n,listLot:t,onDelete:e.onDelete},n)}));return Object(et.jsxs)(rn.a,{xs:{size:"10",offset:"1"},className:"customCard mt-3",children:[Object(et.jsx)("div",{children:Object(et.jsx)("h1",{className:"title-card-lg",children:"Danh s\xe1ch l\xf4"})}),Object(et.jsx)("div",{className:"addNew"}),Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(Vn.a,{xs:1,children:"T\xecm ki\u1ebfm"}),Object(et.jsx)(rn.a,{xs:2,children:Object(et.jsx)(Nn.a,{placeholder:"Nh\u1eadp t\xean l\xf4",type:"search",onChange:function(t){return e.setState({textSearch:t.target.value})}})}),Object(et.jsx)(rn.a,{xs:{size:"2",offset:"7"},className:"end",children:Object(et.jsx)(s.b,{to:"./lot/0",children:Object(et.jsx)(Ze.a,{outline:!0,color:"primary",children:"Th\xeam m\u1edbi"})})})]}),Object(et.jsx)("div",{className:"tableManager pt-10",children:Object(et.jsxs)(qn.a,{className:"managerTable",hover:!0,striped:!0,bordered:!0,children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"STT"}),Object(et.jsx)("th",{children:"S\u1ed1 l\xf4"}),Object(et.jsx)("th",{children:"Product"}),Object(et.jsx)("th",{children:"Kho"}),Object(et.jsx)("th",{children:"S\u1ed1 l\u01b0\u1ee3ng"}),Object(et.jsx)("th",{children:"T\u1ed3n kho"}),Object(et.jsx)("th",{children:"NSX"}),Object(et.jsx)("th",{children:"HSD"}),Object(et.jsx)("th",{children:"Ng\xe0y t\u1ea1o"})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:a})]})}),Object(et.jsx)(tt,{message:this.state.notiConfirm,answer:this.answer})]})}}]),n}(c.Component),ii=n(64),oi=n.n(ii),li=function(){var e=Object(c.useState)({code:"",warehouse_id:"",product_id:"",total:"",man_date:"",exp_date:""}),t=Object(wn.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!0),i=Object(wn.a)(r,2),o=i[0],l=i[1],d=Object(c.useState)(""),u=Object(wn.a)(d,2),b=u[0],m=u[1],x=Object(c.useState)([]),O=Object(wn.a)(x,2),p=O[0],v=O[1],g=Object(c.useState)([]),y=Object(wn.a)(g,2),N=y[0],S=y[1],C=Object(c.useState)(""),_=Object(wn.a)(C,2),T=(_[0],_[1],Object(c.useState)("")),w=Object(wn.a)(T,2),k=w[0],D=w[1];Object(c.useEffect)((function(){L(),E()}),[]);var I=function(e){var t=e.target,n=t.name,c=t.value;a((function(e){return Object(vn.a)(Object(vn.a)({},e),{},Object(f.a)({},n,c))}))},L=function(){var e=Object(j.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,si.listProduct();case 2:t=e.sent,v(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(j.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,si.listWareHouse();case 2:t=e.sent,S(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=N.map((function(e,t){return Object(et.jsx)("option",{value:e.id,children:e.name},t)})),R=function(){if(!n.warehouse_id)return D("B\u1ea1n ch\u01b0a ch\u1ecdn nh\xe0 kho!"),void l(!1);n.code&&n.product_id&&n.total&&n.man_date&&n.exp_date?function(){var e=n;return si.createLot(e)}().then((function(){D("Th\xeam m\u1edbi th\xe0nh c\xf4ng!")})).catch((function(e){console.log(e),D("C\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i!")})):(D("B\u1ea1n ch\u01b0a nh\u1eadp \u0111\u1ee7 th\xf4ng tin!"),l(!1))};return Object(et.jsx)(c.Fragment,{children:Object(et.jsx)("div",{className:"FormLot",children:Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(at,{message:k,done:function(){o?(D(""),a((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{code:"",warehouse_id:"",product_id:"",total:"",man_date:"",exp_date:""})})),m(""),l(!0)):(D(""),l(!0))}}),Object(et.jsx)(rn.a,{xs:"1"}),Object(et.jsxs)(rn.a,{xs:"10",children:[Object(et.jsx)("h1",{className:"title-card-lg",children:"Th\xeam L\xf4 M\u1edbi"}),Object(et.jsx)(Xn.a,{name:"form_item",children:Object(et.jsxs)(sn.a,{children:[Object(et.jsxs)(rn.a,{xs:"5",children:[Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"4",children:Object(et.jsx)(Vn.a,{children:"T\xean kho"})}),Object(et.jsx)(rn.a,{children:Object(et.jsxs)(Nn.a,{type:"select",id:"warehouse_id",name:"warehouse_id",value:n.warehouse_id,onChange:function(e){return I(e)},children:[Object(et.jsx)("option",{children:"Ch\u1ecdn nh\xe0 kho"}),P]})})]}),Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"4",children:Object(et.jsx)(Vn.a,{children:"T\xean l\xf4"})}),Object(et.jsx)(rn.a,{children:Object(et.jsx)(Nn.a,{type:"text",id:"code",name:"code",value:n.code,onChange:function(e){return I(e)},placeholder:"Nh\u1eadp t\xean l\xf4"})})]}),Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"4",children:Object(et.jsx)(Vn.a,{children:"S\u1ea3n ph\u1ea9m"})}),Object(et.jsx)(rn.a,{className:"auto-form-control",children:Object(et.jsx)(oi.a,{items:p,shouldItemRender:function(e,t){return e.name.toLowerCase().indexOf(t.toLowerCase())>-1},getItemValue:function(e){return e.name},renderMenu:function(e){return Object(et.jsx)("div",{className:"menu",children:e.slice(0,9)})},renderItem:function(e){return Object(et.jsx)("div",{children:e.name},e.id)},value:b,onChange:function(e){return function(e){m(e.target.value)}(e)},onSelect:function(e,t){return function(e,t){m(e),a(Object(vn.a)(Object(vn.a)({},n),{},{product_id:t.id}))}(e,t)}})})]})]}),Object(et.jsxs)(rn.a,{xs:{size:"5",offset:"2"},children:[Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"4",children:Object(et.jsx)(Vn.a,{children:"S\u1ed1 l\u01b0\u1ee3ng"})}),Object(et.jsx)(rn.a,{children:Object(et.jsx)(Nn.a,{type:"number",id:"total",name:"total",value:n.total,onChange:function(e){return I(e)},placeholder:"Nh\u1eadp s\u1ed1 l\u01b0\u1ee3ng"})})]}),Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"4",children:Object(et.jsx)(Vn.a,{children:"Ng\xe0y nh\u1eadp"})}),Object(et.jsx)(rn.a,{children:Object(et.jsx)(Nn.a,{type:"date",name:"man_date",id:"man_date",value:n.man_date,onChange:function(e){return I(e)}})})]}),Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"4",children:Object(et.jsx)(Vn.a,{children:"Ng\xe0y h\u1ebft h\u1ea1n"})}),Object(et.jsx)(rn.a,{children:Object(et.jsx)(Nn.a,{type:"date",name:"exp_date",id:"exp_date",value:n.exp_date,onChange:function(e){return I(e)}})}),Object(et.jsx)(rn.a,{xs:12,children:Object(et.jsxs)("div",{className:"btnControlLot",children:[Object(et.jsx)(Ze.a,{outline:!0,color:"primary",className:"btnAddNew",onClick:function(){return R()},children:"Th\xeam m\u1edbi"}),"\xa0 \xa0",Object(et.jsx)(s.b,{to:"/app/inventory/lot",children:Object(et.jsx)(Ze.a,{className:"mr-2",color:"danger",children:"Quay l\u1ea1i"})})]})})]})]})]})})]}),Object(et.jsx)(rn.a,{xs:"1"})]})})})},di=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onDelete=function(t){e.props.onDelete(t)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.listProducer,c=t.index;return Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{scope:"row",children:c+1}),Object(et.jsx)("td",{className:"ID",children:n.id}),Object(et.jsx)("td",{className:"name",children:n.name}),Object(et.jsx)("td",{children:n.description}),Object(et.jsx)("td",{children:Object(et.jsxs)("div",{children:[Object(et.jsxs)(s.b,{to:"./producer/".concat(n.id),className:"btn btn-primary btn-sm",children:["S\u1eeda "," "]})," ",Object(et.jsx)(Ze.a,{className:"btn-sm",color:"danger",onClick:function(){return e.onDelete(n.id)},children:"X\xf3a"})]})})]},c)}}]),n}(c.Component),ui=Object(r.h)(di),hi=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).onDelete=function(e){c.setState({notiConfirm:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a !!",id:e})},c.answer=function(e){if(e){var t={id:c.state.id};console.log(t),si.deleteProducer(t).then((function(){c.setState({notiConfirm:""}),c.getData()})).catch((function(e){c.setState({notiMessage:"L\u1ed7i vui l\xf2ng b\u1ea1n th\u1eed l\u1ea1i sau !!"}),console.log(e)}))}else c.setState({notiConfirm:""})},c.state={id:"",notiConfirm:"",listProducer:[]},c}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this,t=[];t.push(si.getProducerList()),Promise.all(t).then((function(t){var n=Object(wn.a)(t,1)[0].data;e.setState({listProducer:n})})).catch((function(t){e.setState({notiMessage:"L\u1ed7i vui l\xf2ng b\u1ea1n th\u1eed l\u1ea1i sau !!"}),console.log(t)}))}},{key:"render",value:function(){var e=this,t=this.state.listProducer.map((function(t,n){return Object(et.jsx)(ui,{index:n,listProducer:t,onDelete:e.onDelete},n)}));return Object(et.jsxs)(Hc.a,{className:"customCard mt-3",children:[Object(et.jsx)("div",{children:Object(et.jsx)("h1",{className:"title-card-lg",children:"Danh s\xe1ch nh\xe0 s\u1ea3n xu\u1ea5t"})}),Object(et.jsx)("div",{className:"addNew",children:Object(et.jsx)(s.b,{to:"./producer/0",children:Object(et.jsx)(Ze.a,{outline:!0,color:"primary",children:"Th\xeam m\u1edbi"})})}),Object(et.jsx)("div",{className:"tableManager",children:Object(et.jsxs)(qn.a,{className:"managerTable",bordered:!0,hover:!0,striped:!0,children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"STT"}),Object(et.jsx)("th",{className:"ID",children:"ID"}),Object(et.jsx)("th",{children:"T\xean "}),Object(et.jsx)("th",{children:"Th\xf4ng tin nh\xe0 s\u1ea3n xu\u1ea5t"}),Object(et.jsx)("th",{children:"Thu\u1ed9c t\xednh"})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:t})]})}),Object(et.jsx)(tt,{message:this.state.notiConfirm,answer:this.answer})]})}}]),n}(c.Component),ji=function(){var e=Object(r.g)().id,t=Object(c.useState)({name:"",description:""}),n=Object(wn.a)(t,2),a=n[0],i=n[1],o=Object(c.useState)(""),l=Object(wn.a)(o,2),d=l[0],u=l[1],b=Object(c.useState)(""),m=Object(wn.a)(b,2),x=m[0],O=m[1];Object(c.useEffect)((function(){"0"!==e&&p()}),[]);var p=function(){var t=Object(j.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,si.getProducerbyId(e);case 2:n=t.sent,i(n.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),v=function(e){var t=e.target,n=t.name,c=t.value;i((function(e){return Object(vn.a)(Object(vn.a)({},e),{},Object(f.a)({},n,c))}))},g=function(){"0"===e?function(){var e=a;return si.postProducer(e)}().then((function(){O("Th\xeam m\u1edbi !")})).catch((function(e){console.log(e),O("C\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i!")})):u("B\u1ea1n \u0111\u1ed3ng \xfd c\u1eadp nh\u1eadt ?")};return Object(et.jsx)(c.Fragment,{children:Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:2}),Object(et.jsxs)(rn.a,{xs:8,children:[Object(et.jsx)(tt,{message:d,answer:function(e){e?function(){var e=a;return si.editProducer(e)}().then((function(){u(""),O("B\u1ea1n \u0111\xe3 c\u1eadp nh\u1eadt th\xe0nh c\xf4ng!")})).catch((function(){O("C\xf3 l\u1ed7i x\u1ea3y ra, vui l\xf2ng th\u1eed l\u1ea1i!")})):u("")}}),Object(et.jsx)(at,{message:x,done:function(){O("")}}),Object(et.jsx)("h2",{className:"title-card-lg",children:"0"!==e?"Ch\u1ec9nh s\u1eeda Nh\xe0 S\u1ea3n Xu\u1ea5t":"Th\xeam m\u1edbi Nh\xe0 S\u1ea3n Xu\u1ea5t"}),Object(et.jsxs)(Xn.a,{name:"producer",children:[Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"4",children:"T\xean nh\xe0 s\u1ea3n xu\u1ea5t"}),Object(et.jsxs)(rn.a,{xs:"8",children:[" ",Object(et.jsx)(Nn.a,{type:"input",name:"name",id:"name",value:a.name,placeholder:"nh\u1eadp t\xean nh\xe0 sx",onChange:function(e){return v(e)}})]})]}),Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"4",children:"Th\xf4ng tin nh\xe0 s\u1ea3n xu\u1ea5t"}),Object(et.jsxs)(rn.a,{xs:"8",children:[" ",Object(et.jsx)(Nn.a,{type:"input",name:"description",id:"description",value:a.description,placeholder:"Nh\u1eadp th\xf4ng tin nh\xe0 s\u1ea3n xu\u1ea5t",onChange:function(e){return v(e)}})]})]})]}),Object(et.jsxs)("div",{className:"producerCreateControl",children:[Object(et.jsx)(Ze.a,{outline:!0,color:"primary",onClick:function(){return g()},children:"0"!==e?"C\u1eadp nh\u1eadt":"Th\xeam m\u1edbi"}),Object(et.jsxs)(s.b,{to:"/app/inventory/producer",children:[" ",Object(et.jsx)(Ze.a,{className:"mr-2",color:"danger",children:"Quay l\u1ea1i"})]})]})]}),Object(et.jsx)(rn.a,{xs:2})]})})},bi=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).onDelete=function(t){e.props.onDelete(t)},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.listTransaction,n=e.index,c=new Date(t.ctime);return Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{scope:"row",children:n+1}),Object(et.jsx)("td",{className:"batchName",children:t.lot_code}),Object(et.jsx)("td",{children:t.product_name}),Object(et.jsx)("td",{children:t.warehouse_name}),Object(et.jsx)("td",{className:"amount",children:t.amount}),Object(et.jsx)("td",{children:c.toLocaleString("en-GB")})]},n)}}]),n}(c.Component),mi=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).onDelete=function(e){c.setState({notiConfirm:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a !!",id:e})},c.answer=function(e){if(e){var t={id:c.state.id};si.deleteTransaction(t).then((function(){c.setState({notiConfirm:""}),c.getData(),window.location.href="./transaction"})).catch((function(e){c.setState({notiMessage:"L\u1ed7i vui l\xf2ng b\u1ea1n th\u1eed l\u1ea1i sau !!"}),console.log(e)}))}else c.setState({notiConfirm:""})},c.state={id:"",listTransaction:[],listWareHouse:[],listLot:[],notiConfirm:""},c}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this,t=[];t.push(si.listTransaction()),t.push(si.allLot()),t.push(si.listWareHouse()),t.push(xs.listProduct()),Promise.all(t).then((function(t){var n=Object(wn.a)(t,4),c=n[0],a=n[1],s=n[2],r=n[3],i=a.data,o=s.data,l=c.data,d=r.data;l.map((function(e){var t=i.find((function(t){return e.lot_id===t.id}));e.lot_code=t?t.code:"NA";var n=o.find((function(t){return e.warehouse_id===t.id}));e.warehouse_name=n?n.name:"NA";var c=d.find((function(t){return e.product_id===t.id}));return e.product_name=c?c.name:"NA",e})),e.setState({listTransaction:l})})).catch((function(t){e.setState({notiMessage:"L\u1ed7i vui l\xf2ng b\u1ea1n th\u1eed l\u1ea1i sau !!"}),console.log(t)}))}},{key:"render",value:function(){var e=this,t=this.state.listTransaction.map((function(t,n){return Object(et.jsx)(bi,{index:n,listTransaction:t,onDelete:e.onDelete},n)}));return Object(et.jsxs)(Hc.a,{className:"transaction customCard mt-3",children:[Object(et.jsx)("div",{children:Object(et.jsx)("h1",{className:"title-card-lg",children:"Danh s\xe1ch nh\u1eadp xu\u1ea5t"})}),Object(et.jsx)("div",{children:Object(et.jsx)(s.b,{to:"./transaction/create",children:Object(et.jsx)(Ze.a,{className:"btnAdd",outline:!0,color:"primary",children:Object(et.jsx)("span",{children:"Th\xeam M\u1edbi"})})})}),Object(et.jsxs)(qn.a,{className:"transactionTable",hover:!0,bordered:!0,striped:!0,children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"STT"}),Object(et.jsx)("th",{className:"batchName",children:"S\u1ed1 l\xf4"}),Object(et.jsx)("th",{children:"s\u1ea3n ph\u1ea9m"}),Object(et.jsx)("th",{children:"Kho"}),Object(et.jsx)("th",{className:"amount",children:"S\u1ed1 l\u01b0\u1ee3ng"}),Object(et.jsx)("th",{children:"Ng\xe0y t\u1ea1o  "})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:t})]}),Object(et.jsx)(tt,{message:this.state.notiConfirm,answer:this.answer})]})}}]),n}(c.Component),xi=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).onBack=function(){window.history.back()},c.onChange=function(e){c.setState(Object(f.a)({},e.target.name,e.target.value))},c.onSubmit=function(){var e=c.state,t=e.valueL,n=e.valueP,a=e.product_id,s=e.amount,r=e.lot_id,i=e.listLot,o=0;s=-Number(s);var l={ref:"lot",ref_id:r,amount:s,lot_id:r};i.forEach((function(e){e.id==r&&e.product_id==a&&(o=1)})),0==o?c.setState({notiMessage:"S\u1ea3n ph\u1ea9m "+n+" kh\xf4ng c\xf3 trong l\xf4 "+t}):si.createTransactionForLot(l).then((function(){c.setState({notiMessage:"Th\xeam m\u1edbi th\xe0nh c\xf4ng"})})).catch((function(e){c.setState({notiMessage:"L\u1ed7i vui l\xf2ng b\u1ea1n th\u1eed l\u1ea1i sau !!"}),console.log(e)}))},c.onChangeProduct=function(e){c.setState({valueP:e.target.value})},c.onSelectProduct=function(e,t){c.setState({valueP:e,product_id:t.id})},c.onChangeLot=function(e){c.setState({valueL:e.target.value})},c.onSelectLot=function(e,t){c.setState({valueL:e,lot_id:t.id})},c.doneAlert=function(){c.state.notiMessage?window.history.back():c.setState({notiMessage:""})},c.state={id:"",product_id:"",productName:"",amount:0,warehouse_id:"",lot_id:"",notiMessage:"",listWareHouse:[],listProduct:[],listLot:[],valueP:"",valueL:""},c}return Object(b.a)(n,[{key:"componentDidMount",value:function(){var e=this;si.listProduct().then((function(t){e.setState({listProduct:t.data})})).catch((function(t){e.setState({notiMessage:"L\u1ed7i vui l\xf2ng b\u1ea1n th\u1eed l\u1ea1i sau !!"}),console.log(t)})),si.allLot().then((function(t){e.setState({listLot:t.data})})).catch((function(t){e.setState({notiMessage:"L\u1ed7i vui l\xf2ng b\u1ea1n th\u1eed l\u1ea1i sau !!"}),console.log(t)})),si.listWareHouse().then((function(t){e.setState({listWareHouse:t.data})})).catch((function(t){e.setState({notiMessage:"L\u1ed7i vui l\xf2ng b\u1ea1n th\u1eed l\u1ea1i sau !!"}),console.log(t)}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.warehouse_id,c=t.amount,a=t.listWareHouse,s=t.listLot,r=t.listProduct,i=t.valueP,o=t.valueL,l=a.map((function(e,t){return Object(et.jsx)("option",{value:e.id,children:e.name},t)}));return Object(et.jsxs)("section",{className:"transaction",children:[Object(et.jsx)(Hc.a,{children:Object(et.jsx)(sn.a,{children:Object(et.jsxs)(rn.a,{xs:{size:6,offset:3},children:[Object(et.jsx)("div",{children:Object(et.jsx)("h2",{className:"title-card-lg",children:"Th\xeam m\u1edbi xu\u1ea5t kho"})}),Object(et.jsxs)(sa.a,{children:[Object(et.jsxs)(Xn.a,{className:"auto-form-control",children:[Object(et.jsx)(Vn.a,{for:"type",children:"T\xean s\u1ea3n ph\u1ea9m"}),Object(et.jsx)(oi.a,{items:r,renderMenu:function(e){return Object(et.jsx)("div",{className:"menu",children:e.slice(0,9)})},shouldItemRender:function(e,t){return e.name.toLowerCase().indexOf(t.toLowerCase())>-1},getItemValue:function(e){return e.name},renderItem:function(e){return Object(et.jsx)("div",{children:e.name},e.id)},value:i,onChange:this.onChangeProduct,onSelect:function(t,n){return e.onSelectProduct(t,n)}})]}),Object(et.jsxs)(Xn.a,{className:"auto-form-control",children:[Object(et.jsx)(Vn.a,{for:"type",children:"T\xean l\xf4"}),Object(et.jsx)(oi.a,{items:s,renderMenu:function(e){return Object(et.jsx)("div",{className:"menu",children:e.slice(0,9)})},shouldItemRender:function(e,t){return e.code.toLowerCase().indexOf(t.toLowerCase())>-1},getItemValue:function(e){return e.code},renderItem:function(e){return Object(et.jsx)("div",{children:e.code},e.id)},value:o,onChange:this.onChangeLot,onSelect:function(t,n){return e.onSelectLot(t,n)}})]}),Object(et.jsxs)(Xn.a,{children:[Object(et.jsx)(Vn.a,{for:"warehouse_id",children:"Nh\xe0 kho"}),Object(et.jsxs)(Nn.a,{type:"select",name:"warehouse_id",value:n,onChange:this.onChange,children:[Object(et.jsx)("option",{children:" Ch\u1ecdn nh\xe0 kho "}),l]})]}),Object(et.jsxs)(Xn.a,{children:[Object(et.jsx)(Vn.a,{for:"amount",children:"S\u1ed1 l\u01b0\u1ee3ng"}),Object(et.jsx)(Nn.a,{type:"number",name:"amount",value:c,placeholder:"Nh\u1eadp s\u1ed1 l\u01b0\u1ee3ng",onChange:this.onChange})]}),Object(et.jsxs)("div",{className:"btnOptions pt-20",children:[Object(et.jsx)(Ze.a,{outline:!0,color:"primary",type:"button",onClick:this.onSubmit,children:"Th\xeam m\u1edbi"}),Object(et.jsx)(Ze.a,{color:"danger btnDanger",onClick:this.onBack,children:"H\u1ee7y B\u1ecf"})]})]})]})})}),Object(et.jsx)(at,{message:this.state.notiMessage,done:this.doneAlert})]})}}]),n}(c.Component),Oi=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.match.path;return Object(et.jsx)("div",{className:"Inventory",children:Object(et.jsxs)(r.d,{children:[Object(et.jsx)(r.b,{exact:!0,path:"".concat(e),render:function(){return Object(et.jsx)(r.a,{to:"inventory/transaction/create"})}}),Object(et.jsx)(r.b,{path:"".concat(e,"/lot/:id"),exact:!0,component:li}),Object(et.jsx)(r.b,{path:"".concat(e,"/lot"),exact:!0,component:ri}),Object(et.jsx)(r.b,{path:"".concat(e,"/transaction/create"),exact:!0,component:xi}),Object(et.jsx)(r.b,{path:"".concat(e,"/transaction"),exact:!0,component:mi}),Object(et.jsx)(r.b,{path:"".concat(e,"/producer"),exact:!0,component:hi}),Object(et.jsx)(r.b,{path:"".concat(e,"/producer/:id"),exact:!0,component:ji})]})})}}]),n}(c.Component),pi=n(89),fi=n(90),vi=function(e){var t=Object(c.useState)([]),n=Object(wn.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)(""),i=Object(wn.a)(r,2),o=i[0],l=i[1],d=Object(c.useState)(""),u=Object(wn.a)(d,2),h=u[0],j=u[1],b=Object(c.useState)(!1),m=Object(wn.a)(b,2),x=m[0],O=m[1],p=a.map((function(t,n){return Object(et.jsxs)("tr",{className:"pointer",onClick:function(n){var c;(c=t.item).oldestLot?(l(""),O(!1),e.onSelect(c)):j("S\u1ea3n ph\u1ea9m n\xe0y hi\u1ec7n \u0111ang kh\xf4ng b\xe1n!")},children:[Object(et.jsxs)("td",{children:[" ",t.item.id," "]}),Object(et.jsxs)("td",{children:[" ",t.item.name," "]}),Object(et.jsx)("td",{children:t.item.parts.map((function(e,t){return Object(et.jsxs)("span",{children:[e.name,", "]},t)}))}),Object(et.jsxs)("td",{children:[" ",new Intl.NumberFormat("de-DE").format(t.item.price),"\u0111 "]}),Object(et.jsxs)("td",{children:[" ",t.item.oldestLot?t.item.oldestLot.code:"Kh\xf4ng c\xf3"," "]}),Object(et.jsxs)("td",{children:[" ",t.item.oldestLot?t.item.oldestLot.remain:"Kh\xf4ng c\xf3"," "]}),Object(et.jsxs)("td",{children:[" ",Object(et.jsx)("span",{style:{color:t.item.color},children:t.item.totalRemain})," "]})]},n)}));return Object(et.jsxs)("div",{className:"filter",children:[Object(et.jsx)("div",{children:Object(et.jsx)(Nn.a,{onChange:function(e){return function(e){l(e.target.value),o.length>0&&(O(!0),Xr.searchProduct(o).then((function(e){e.data.map((function(e){return e.item.color=e.item.totalRemain<100?"#d26d69":e.item.totalRemain<300?"#28b76b":"black",e})),s(e.data)})).catch((function(e){console.log(e)})))}(e)},className:"pattern-product",placeholder:"Nh\u1eadp t\xean thu\u1ed1c",value:o,disabled:""!==e.order_id,onFocus:function(){O(!0)},onBlur:function(){0===o.length&&O(!1)}})}),""!==o?Object(et.jsx)("div",{children:Object(et.jsxs)(qn.a,{size:"sm",hover:!0,striped:!0,bordered:!0,className:"list-prescription",children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"M\xe3"}),Object(et.jsx)("th",{children:"T\xean"}),Object(et.jsx)("th",{children:"Th\xe0nh ph\u1ea7n"}),Object(et.jsx)("th",{children:"Gi\xe1"}),Object(et.jsx)("th",{children:"L\xf4 c\u0169 nh\u1ea5t"}),Object(et.jsx)("th",{children:"T\u1ed3n kho l\xf4"}),Object(et.jsx)("th",{children:"T\u1ed5ng t\u1ed3n kho"})]})}),Object(et.jsx)("tbody",{children:p})]})}):null,x?Object(et.jsx)("div",{className:"pharmacy-opacity pharmacy-opacity-top"}):null,Object(et.jsx)(at,{message:h,done:function(){j("")}})]})},gi=function(e){var t=JSON.parse(window.sessionStorage.getItem("user")),n=e.cusData,a=n?n.code:null,s=new Date,r=n&&n.contacts?n.contacts[0].phone:null,i=n&&n.contacts?n.contacts[0].address:{},o=new Date(n?n.birthday:null),l=e.etcArr,d=e.etcCode,u=l?l.filter((function(e){return!e.old})).map((function(e,t){return Object(et.jsx)(c.Fragment,{children:e.amount>0?Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{children:t+1}),Object(et.jsx)("td",{children:e.name}),Object(et.jsx)("td",{className:"end",children:e.amount}),Object(et.jsx)("td",{className:"end",children:new Intl.NumberFormat("de-DE").format(e.price)}),Object(et.jsx)("td",{className:"end",children:new Intl.NumberFormat("de-DE").format(e.price*e.amount)})]},t):null})})):null;return Object(c.useEffect)((function(){d&&qe.createEtccode(d,"barCode"),a&&qe.createCusCode(a.toString())}),[d,a]),Object(et.jsx)("div",{className:"border border-secondary receiptContainer",style:{display:"none"},children:Object(et.jsxs)("div",{className:"print-pharmacy medPrintId position-relative",id:"medPrintId",children:[Object(et.jsx)("br",{}),Object(et.jsxs)("div",{className:"PrintEtc",id:"PrintEtc",children:[Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:8,className:"absolute",children:Object(et.jsx)(sn.a,{className:"text-left",children:Object(et.jsx)(tc,{})})}),Object(et.jsx)(rn.a,{xs:4,children:Object(et.jsx)(sn.a,{children:Object(et.jsx)(rn.a,{xs:7,children:Object(et.jsx)("div",{className:"end",children:Object(et.jsx)("canvas",{id:"barCode",style:{height:"13mm"}})})})})})]}),Object(et.jsx)("div",{className:"print-pharmacy-title text-center",children:"BI\xcaN LAI THU TI\u1ec0N"}),Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:2,children:Object(et.jsx)("div",{className:"text-left",children:Object(et.jsx)("canvas",{id:"canvasCustomer",style:{height:"13mm"}})})}),Object(et.jsx)(rn.a,{xs:{size:"6",offset:"2"},children:Object(et.jsx)("div",{children:Object(et.jsxs)("i",{children:["Ng\xe0y ",s.getDate()," Th\xe1ng ",s.getMonth()+1," N\u0103m ",s.getFullYear()]})})})]}),Object(et.jsxs)("div",{className:"info-Cus",children:[Object(et.jsxs)(sn.a,{className:"pb-5",children:[Object(et.jsxs)(rn.a,{sm:"6",children:["H\u1ecd v\xe0 t\xean: ",Object(et.jsx)("b",{children:n?n.full_name:null})]}),Object(et.jsx)(rn.a,{sm:"1"}),Object(et.jsxs)(rn.a,{sm:"5",children:["M\xe3 phi\u1ebfu thu: ",d]})]}),n&&n.gender?Object(et.jsxs)(sn.a,{className:"pb-5",children:[Object(et.jsxs)(rn.a,{sm:"6",children:["Ng\xe0y Sinh: ",o.toLocaleString("en-GB").slice(0,10)]}),Object(et.jsx)(rn.a,{sm:"1"}),Object(et.jsxs)(rn.a,{sm:"5",children:["Gi\u1edbi t\xednh:","male"===n.gender?"Nam":"female"===n.gender?"N\u1eef":""]})]}):null,i.street?Object(et.jsxs)(sn.a,{className:"pb-5",children:[Object(et.jsxs)(rn.a,{sm:"6",children:["\u0110\u1ecba ch\u1ec9 : ",i.street?i.street:i.ward]}),Object(et.jsx)(rn.a,{sm:"1"}),Object(et.jsxs)(rn.a,{sm:"5",children:["S\u1ed1 \u0111i\u1ec7n tho\u1ea1i : ",r]})]}):Object(et.jsx)(sn.a,{className:"pb-5",children:Object(et.jsxs)(rn.a,{sm:"5",children:["S\u1ed1 \u0111i\u1ec7n tho\u1ea1i : ",r]})})]}),Object(et.jsx)("b",{align:"left",children:Object(et.jsx)("p",{className:"pl-10",children:"Danh s\xe1ch \u0111\u01a1n thu\u1ed1c"})}),Object(et.jsx)("div",{className:"justify-content-between pl-10",children:Object(et.jsxs)(qn.a,{bordered:!0,children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"#"}),Object(et.jsx)("th",{children:"Thu\u1ed1c"}),Object(et.jsx)("th",{children:"S\u1ed1 l\u01b0\u1ee3ng"}),Object(et.jsx)("th",{children:"\u0110\u01a1n gi\xe1"}),Object(et.jsx)("th",{children:"Th\xe0nh ti\u1ec1n"})]})}),Object(et.jsx)("tbody",{children:u})]})}),Object(et.jsx)(sn.a,{children:Object(et.jsxs)(rn.a,{className:"end capitalize",children:["T\u1ed5ng ti\u1ec1n:\u2002",Object(et.jsxs)("b",{children:[new Intl.NumberFormat("de-DE").format(e.total),"VN\u0110"]})]})}),Object(et.jsx)(sn.a,{children:Object(et.jsxs)(rn.a,{className:"end capitalize",children:["Vi\u1ebft b\u1eb1ng ch\u1eef: ",Object(et.jsx)("b",{children:Wn(e.total||0)})]})}),Object(et.jsxs)(sn.a,{className:"px-4 pt-20",children:[Object(et.jsxs)(rn.a,{xs:3,className:"middle",children:[Object(et.jsx)("p",{children:"B\u1ec7nh nh\xe2n"}),Object(et.jsx)("i",{children:"(k\xfd, h\u1ecd t\xean)"})]}),Object(et.jsxs)(rn.a,{xs:{size:"3",offset:"6"},className:"middle",children:[Object(et.jsx)("p",{children:"Ng\u01b0\u1eddi thu ti\u1ec1n"}),Object(et.jsx)("br",{}),Object(et.jsx)("i",{children:"(k\xfd, ghi r\xf5 h\u1ecd t\xean)"})," ",Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("b",{className:"mt-5",children:t.full_name})]})]})]})]})})},yi=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).onClickOrder=function(e,t){c.setState({notiConfirm:"Ch\u1eafc ch\u1eafn ch\u1ecdn \u0111\u01a1n n\xe0y?",index:t})},c.answer=function(e){e?(c.props.onSelectOrder(c.state.index),c.setState({notiConfirm:"",index:-1})):c.setState({notiConfirm:"",index:-1})},c.state={notiConfirm:"",index:-1},c}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props.listOrder.map((function(t,n){var c=t.order?new Date(t.order.ctime):0;return Object(et.jsxs)("tr",{className:"pointer",onClick:function(t){return e.onClickOrder(t,n)},children:[Object(et.jsxs)("td",{children:[" ",n+1]}),Object(et.jsx)("td",{children:t.code}),Object(et.jsx)("td",{children:t.order?t.order.type===V.code?V.label:t.order.type===X.code?X.label:t.order.type===q.code?q.label:"":null}),Object(et.jsx)("td",{children:t.order?t.order.status===D?"\u0110\xe3 xong":t.order.status===I?"\u0110\xe3 thanh to\xe1n":"Ch\u01b0a thanh to\xe1n":null}),Object(et.jsx)("td",{children:0!==c?c.toLocaleString("en-GB"):null}),Object(et.jsx)("td",{children:t.order?t.order.items.map((function(e,t){return Object(et.jsxs)("span",{children:[e.ref_value.name,", "]},t)})):null}),Object(et.jsxs)("td",{children:[new Intl.NumberFormat("de-DE").format(t.order?t.order.total:0),"\u0111"]})]},n)}));return Object(et.jsxs)(c.Fragment,{children:[Object(et.jsxs)(qn.a,{children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"STT"}),Object(et.jsx)("th",{children:"M\xe3 \u0111\u01a1n"}),Object(et.jsx)("th",{children:"Lo\u1ea1i \u0111\u01a1n"}),Object(et.jsx)("th",{children:"Tr\u1ea1ng th\xe1i"}),Object(et.jsx)("th",{children:"Ng\xe0y t\u1ea1o "}),Object(et.jsx)("th",{children:"Thu\u1ed1c"}),Object(et.jsx)("th",{children:"Th\xe0nh ti\u1ec1n"})]})}),Object(et.jsx)("tbody",{className:"bodyTable",children:t})]}),Object(et.jsx)(tt,{message:this.state.notiConfirm,answer:this.answer})]})}}]),n}(c.Component),Ni=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).onChangeQ=function(e,t,n){var a=e.target.value;Number(a)||(a=0);var s=c.state.listData,r=c.state.total;r=r-s[t].amount*n*(100-s[t].discount)/100+a*n*(100-s[t].discount)/100,s[t].amount=Number(a),s[t].remain<a?s[t].err="S\u1ed1 l\u01b0\u1ee3ng kh\xf4ng \u0111\u1ee7":delete s[t].err,c.setState({listData:s,total:r})},c.onChangeB=function(e,t){var n=c.state.listData,a=c.state.listLot,s=e.target.value;n[t].lot_id=s,a.forEach((function(e){e.id===s&&(n[t].remain=e.remain,n[t].color=e.color,e.remain<n[t].amount?n[t].err="S\u1ed1 l\u01b0\u1ee3ng kh\xf4ng \u0111\u1ee7":delete n[t].err)})),c.setState({listData:n})},c.onChangeInstruction=function(e,t){var n=c.state.listData;n[t].attrs.instruction=e.target.value,c.setState({listData:n})},c.onChange=function(e){c.setState(Object(f.a)({},e.target.name,e.target.value))},c.onSelect=function(e){var t=c.state,n=t.listData,a=t.orderType,s=t.total,r=t.fakeTable;t.jobSubclinical;r.splice(0,1);var i={amount:1};i.name=e.name,i.product_id=e.id,i.price=e.price,i.discount=0,s+=i.price*(100-i.discount)/100,i.color=e.color,i.lot_id=e.oldestLot.id,i.selected=e.oldestLot.index,i.remain=e.oldestLot.remain,i.parts=e.parts,i.attrs=e.attrs,i.attrs.instruction="Ng\xe0y u\u1ed1ng: "+i.attrs.default_daily_usage+" l\u1ea7n x "+("tablet"===i.attrs.unit?i.attrs.default_quantity/i.attrs.strength+" vi\xean":i.attrs.default_quantity+i.attrs.unit);var o=c.remainDate(e.oldestLot.exp_date);i.color=o<31?"#e09491":o<91?"#80d1a6":"white",n.push(i),a!==q.code?c.setState({fakeTable:r,listData:n,total:s,orderType:q.code}):c.setState({fakeTable:r,listData:n,total:s})},c.onDelete=function(e,t){c.setState({notiConfirm:"B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n x\xf3a ?",index:t})},c.answer=function(e){if(e){var t=c.state,n=t.listData,a=t.index,s=t.total,r=t.fakeTable;if(a<0)c.setState({id:"",notiConfirm:"",orderId:"",orderCode:"",status:"",customer:{},listData:[],total:0,orderType:"",index:-1,doctor:{},jobCtime:"",jobInstruction:"",jobSubclinical:"",retailCustomerName:"",retailCustomerPhone:"",fakeTable:[{},{},{},{},{},{}]});else{var i=n[a];s-=i.amount*i.price*(100-i.discount)/100,n.splice(a,1),n.length<5&&r.push({}),n.length<1?c.setState({listData:n,index:-1,notiConfirm:"",total:s,orderType:"",fakeTable:r}):c.setState({listData:n,index:-1,notiConfirm:"",total:s,fakeTable:r})}}else c.setState({notiConfirm:"",index:-1})},c.OnSubmitOrderId=function(){var e=c.state.orderCode,t=c.state.fakeTable;Xr.getOrder(e).then((function(e){var n=e.data.view_order,a=e.data.user,s=e.data.job.id,r=e.data.job.ctime,i=e.data.job.state.textDiagnosis,o=e.data.job.state.subclinical,l=[],d=n.id,u=n.type,h=n.ref_id,j=c.state.listLot;n.items.forEach((function(e){"product"===e.ref&&l.push(e)}));var b=[],m=0;l.forEach((function(e){var n={};n.itemId=e.id,n.amount=e.quantity,n.name=e.ref_value.name,n.attrs=e.ref_value.attrs,n.attrs.instruction="Ng\xe0y u\u1ed1ng: "+n.attrs.default_daily_usage+" l\u1ea7n x "+("tablet"===n.attrs.unit?n.attrs.default_quantity/n.attrs.strength+" vi\xean":n.attrs.default_quantity+n.attrs.unit),n.product_id=e.ref_id,n.price=e.origin_price,n.discount=e.discount,m+=e.quantity*e.ref_value.price*(100-e.discount)/100;var c=1e4;j.forEach((function(t,a){t.product_id===e.ref_id&&c>t.remainDate&&(c=t.remainDate,n.color=t.color,n.lot_id=t.id,n.selected=a,n.remain=t.remain,t.remain<e.quantity&&(n.err="S\u1ed1 l\u01b0\u1ee3ng kh\xf4ng \u0111\u1ee7"))})),b.push(n),t.length>0&&t.splice(0,1)})),c.setState({status:n.status,customer:n.customer,listData:b,total:m,orderId:d,orderType:u,jobStepId:h,doctor:a,jobId:s,jobCtime:r,jobInstruction:i,jobSubclinical:o,activeTab:"1"})})),Xr.getCustomer(e).then((function(e){var t=e.data;c.setState({customer:t}),Xr.getOrderByCustomer(t.id).then((function(e){var t=e.data.reverse();t.splice(10),c.setState({showOrder:!0,listOrder:t,activeTab:"1"})})).catch((function(e){return console.log(e)}))}))},c.onSubmitProduct=function(){var e=c.state,t=e.listData,n=e.orderType,a=e.orderId,s=e.jobStepId,r=e.jobInstruction,i=e.doctor,o=e.activeTab;t.forEach((function(e){e.err?c.setState({notiMessage:"L\u1ed7i vui l\xf2ng b\u1ea1n th\u1eed l\u1ea1i sau !!"}):(e.amount=-e.amount,delete e.remain,delete e.color,delete e.selected,delete e.discount,delete e.name,delete e.price,delete e.product_id,delete e.attrs,delete e.parts)}));var l={};l.order_id=a,l.items=t,(n===V.code||n===X.code)&&(i.first_name&&(i.last_name,i.first_name)),"2"===o?Xr.createTransactionRetail(l).then((function(){c.setState({listData:[],notiMessage:"X\xe1c nh\u1eadn th\xe0nh c\xf4ng!"}),c.getDataListLot()})).catch((function(e){c.setState({notiMessage:"L\u1ed7i vui l\xf2ng b\u1ea1n th\u1eed l\u1ea1i sau !!"}),console.log(e)})):Xr.createTransaction(l).then((function(){c.setState({listData:[],notiMessage:"X\xe1c nh\u1eadn th\xe0nh c\xf4ng!"}),c.getDataListLot()})).catch((function(e){c.setState({notiMessage:"L\u1ed7i vui l\xf2ng b\u1ea1n th\u1eed l\u1ea1i sau !!"}),console.log(e)}))},c.doneAlert=function(){c.state.refresh?c.setState({id:"",notiMessage:"",orderId:"",orderCode:"",status:"",listData:[],total:0,orderType:"",index:-1,doctor:{},jobCtime:"",jobInstruction:"",refresh:!0}):c.setState({notiMessage:"",refresh:!0})},c.onSubmitCancel=function(){c.setState({notiConfirm:"B\u1ea1n mu\u1ed1n t\u1ea1o \u0111\u01a1n kh\xe1c ?"})},c.refreshOrder=function(){c.setState({listData:[],doctor:{},jobCtime:"",jobInstruction:"",status:"",orderType:q.code,index:-1,total:0,orderCode:"",orderId:"",fakeTable:[{},{},{},{},{}]})},c.createOrder=function(){var e=c.state,t=e.listData,n=e.jobId,a=e.activeTab,s=e.retailCustomerName,r=e.retailCustomerPhone,i=JSON.parse(sessionStorage.getItem("location"));if(t.length>0)if("1"===a){var o=[];t.forEach((function(e){var t={ref:"product"};t.ref_id=e.product_id,t.quantity=e.amount,o.push(t)}));var l={job_id:n,location_id:i.id,type:"buy",order_type:q.code,items:o};Xr.createOrder(l).then((function(e){c.setState({status:_,orderId:e.data.order_id,orderCode:e.data.code,refresh:!1,notiMessage:"T\u1ea1o \u0111\u01a1n m\u1edbi th\xe0nh c\xf4ng!"})})).catch((function(e){c.setState({notiMessage:"L\u1ed7i !!  Vui l\xf2ng ki\u1ec3m tra l\u1ea1i!!"}),console.log(e)}))}else if("2"===a)if(s&&c.setState({refresh:!1,notiMessage:"T\xean b\u1ec7nh nh\xe2n kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng!"}),"0"!==r[0]||10!==r.length)c.setState({refresh:!1,notiMessage:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng \u0111\xfang \u0111\u1ecbnh d\u1ea1ng!"});else{var d=[];t.forEach((function(e){var t={ref:"product"};t.ref_id=e.product_id,t.quantity=e.amount,d.push(t)}));var u={items:d};Xr.createRetailOrder(u).then((function(e){c.setState({status:_,orderId:e.data.id,orderCode:e.data.code,refresh:!1,notiMessage:"T\u1ea1o \u0111\u01a1n m\u1edbi th\xe0nh c\xf4ng!"})})).catch((function(e){c.setState({notiMessage:"L\u1ed7i !!  Vui l\xf2ng ki\u1ec3m tra l\u1ea1i!!"}),console.log(e)}))}else c.setState({notiMessage:"L\u1ed7i !!  Vui l\xf2ng ki\u1ec3m tra l\u1ea1i!!"})},c.handlePayment=function(){var e=c.state,t=e.listData,n=e.arrUpdateQty;t.forEach((function(e){e.err?c.setState({notiMessage:"L\u1ed7i !!  Vui l\xf2ng ki\u1ec3m tra l\u1ea1i!!"}):(n.length>0&&Xr.updateQuantity(n).then((function(e){c.setState({show:!0})})).catch((function(e){console.log(e),c.setState({notiMessage:"Thay \u0111\u1ed5i s\u1ed1 l\u01b0\u1ee3ng thu\u1ed1c th\u1ea5t b\u1ea1i!!"})})),c.setState({show:!0}))}))},c.handleClose=function(){c.setState({show:!1})},c.onClose=function(){if(c.state.listOrder.length>0){var e=c.state.listOrder[0].job_id;c.setState({jobId:e})}else Xr.getJob(c.state.customer.id).then((function(e){var t=e.data.reverse()[0].steps[0].job_id;c.setState({jobId:t})})).catch((function(e){c.setState({notiMessage:"L\u1ed7i !!  Vui l\xf2ng ki\u1ec3m tra l\u1ea1i!!"}),console.log(e)}));c.setState({showOrder:!1})},c.affterPayment=function(){c.setState({status:I})},c.onSelectOrder=function(e){var t=c.state.fakeTable,n=(c.state.jobSubclinical,c.state.listOrder[e].job_id),a=c.state.listOrder[e].order,s=a.items,r=a.id,i=a.code,o=a.status,l=a.type,d=a.ref_id,u=0,h=[];s.forEach((function(e){var n={};n.itemId=e.id,n.amount=e.quantity,n.name=e.ref_value.name,n.product_id=e.ref_value.id,n.price=e.ref_value.price,n.discount=o===I?e.discount:0,u+=n.amount*n.price*(100-n.discount)/100,n.parts=e.ref_value.parts,n.attrs=e.ref_value.attrs,n.attrs.instruction="Ng\xe0y u\u1ed1ng: "+n.attrs.default_daily_usage+" l\u1ea7n x "+("tablet"===n.attrs.unit?n.attrs.default_quantity/n.attrs.strength+" vi\xean":n.attrs.default_quantity+n.attrs.unit);var a=1e4;c.state.listLot.forEach((function(t,c){t.product_id===e.ref_id&&t.remain>0&&a>t.remainDate&&(a=t.remainDate,n.color=t.color,n.lot_id=t.id,n.selected=c,n.remain=t.remain)})),h.push(n),t.length>0&&t.splice(0,1)})),o===D&&(o="",l=q.code,r="",i=""),c.setState({jobId:n,orderId:r,orderCode:i,orderType:l,jobStepId:d,status:o,listData:h,showOrder:!1,total:u})},c.selectTypeCustomer=function(e){c.state.activeTab!==e&&c.setState({activeTab:e})},c.updateOrrder=function(){var e=c.state,t=e.listData;if(e.status===_){var n=[];t.forEach((function(e){n.push({id:e.itemId,quantity:e.amount})})),Xr.updateQuantity(n).then((function(e){c.setState({refresh:!1,notiMessage:"C\u1eadp nh\u1eadt s\u1ed1 l\u01b0\u1ee3ng th\xe0nh c\xf4ng!"})})).catch((function(e){console.log(e),c.setState({notiMessage:"C\u1eadp nh\u1eadt s\u1ed1 l\u01b0\u1ee3ng th\u1ea5t b\u1ea1i!"})}))}},c.state={id:"",notiMessage:"",notiConfirm:"",orderId:"",orderCode:"",jobId:"",jobStepId:"",status:"",customer:{},doctor:{},listProduct:[],listLot:[],listData:[],fakeTable:[{},{},{},{},{}],total:0,orderType:"",jobCtime:"",jobInstruction:"",jobSubclinical:"",index:-1,show:!1,refresh:!0,showOrder:!1,activeTab:"1",retailCustomerName:"",retailCustomerPhone:"",arrUpdateQty:[]},c}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.getDataListLot(),this.getDataListProduct()}},{key:"getDataListProduct",value:function(){var e=this;xs.listProduct().then((function(t){e.setState({listProduct:t.data})})).catch((function(t){console.log(t),e.setState({notiMessage:"L\u1ed7i vui l\xf2ng b\u1ea1n th\u1eed l\u1ea1i sau !!"})}))}},{key:"getDataListLot",value:function(){var e=this;Xr.listLot().then((function(t){var n=[];t.data.forEach((function(t){var c=e.remainDate(t.exp_date);t.color=c<31?"#e09491":c<91?"#80d1a6":"white",t.remainDate=c,t.remain>0&&n.push(t)})),e.setState({listLot:n})})).catch((function(t){console.log(t),e.setState({notiMessage:"L\u1ed7i vui l\xf2ng b\u1ea1n th\u1eed l\u1ea1i sau !!"})}))}},{key:"remainDate",value:function(e){var t=Date.now(),n=(new Date(e).getTime()-t)/he;return Math.ceil(n)}},{key:"render",value:function(){var e=this,t=this.state,n=t.orderCode,a=t.orderId,s=t.listProduct,r=t.listLot,i=t.listData,o=t.status,l=t.customer,d=t.total,u=t.orderType,h=t.doctor,j=t.jobInstruction,b=t.jobCtime,m=t.show,x=t.showOrder,O=t.listOrder,p=t.activeTab,f=t.fakeTable,v=(t.jobSubclinical,t.retailCustomerName),g=t.retailCustomerPhone,y=new Date(b);console.log(l,"cust");var N=i.map((function(t,n){return Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{children:n+1}),Object(et.jsx)("td",{className:"ma",children:t.product_id}),Object(et.jsx)("td",{className:"name",children:t.name}),Object(et.jsx)("td",{children:t.price?new Intl.NumberFormat("de-DE").format(t.price)+"\u0111":""}),Object(et.jsx)("td",{children:Object(et.jsx)(Nn.a,{style:{backgroundColor:t.color},className:"number pointer middle",type:"select",name:"lot_id",onChange:function(t){return e.onChangeB(t,n)},children:r.map((function(e,n){return e.product_id===t.product_id&&e.remain>0?Object(et.jsxs)("option",{className:"pointer",selected:n==t.selected,style:{backgroundColor:e.color},value:e.id,children:[" ",e.code," -- C\xf2n l\u1ea1i: ",e.remain,"   "]},n):null}))})}),Object(et.jsxs)("td",{className:"quantity",children:[Object(et.jsx)(Nn.a,{readOnly:o===I||o===D,style:{borderColor:t.err?"red":""},type:"text",name:"amount",placeholder:"S\u1ed1 l\u01b0\u1ee3ng",value:t.amount,onChange:function(c){return e.onChangeQ(c,n,t.price)}}),Object(et.jsx)("span",{style:{color:"red"},children:t.err})]}),Object(et.jsxs)("td",{children:[" ",t.discount?t.discount+"%":"0%"," "]}),Object(et.jsxs)("td",{children:[t.amount>0?new Intl.NumberFormat("de-DE").format(t.amount*t.price)+"\u0111":"0\u0111"," "]}),Object(et.jsx)("td",{className:"instruction",children:t.attrs?Object(et.jsx)(Nn.a,{name:"instruction",className:"instruction-content",type:"textarea",onChange:function(t){return e.onChangeInstruction(t,n)},value:t.attrs.instruction}):null}),Object(et.jsx)("td",{children:Object(et.jsx)(Ze.a,{disabled:(o!==_||u!==q.code)&&""!==o,className:"btnDelete",color:"danger",onClick:function(t){return e.onDelete(t,n)},children:" X "})})]},n)}));return Object(et.jsxs)(c.Fragment,{children:[Object(et.jsx)(at,{message:this.state.notiMessage,done:this.doneAlert}),Object(et.jsx)(tt,{message:this.state.notiConfirm,answer:this.answer}),Object(et.jsx)("div",{children:Object(et.jsxs)(rn.a,{xs:12,children:[Object(et.jsxs)(sn.a,{className:"searchCode customCard mb-10",children:[Object(et.jsxs)(Vn.a,{className:"title-card",sm:4,children:[Object(et.jsx)("span",{className:"material-icons",children:"playlist_add_check"})," Nh\u1eadp m\xe3 \u0111\u01a1n h\xe0ng/m\xe3 b\u1ec7nh nh\xe2n: "]}),Object(et.jsx)(rn.a,{sm:3,children:Object(et.jsx)(Nn.a,{disabled:u===q.code,type:"text",name:"orderCode",value:n,onChange:this.onChange})}),Object(et.jsx)(rn.a,{sm:1,children:Object(et.jsx)(Ze.a,{type:"button",onClick:this.OnSubmitOrderId,outline:!0,color:"primary",children:Object(et.jsx)("span",{className:"material-icons",children:"search"})})}),Object(et.jsx)(Vn.a,{sm:{size:1,offset:1},children:""===o?"":"Tr\u1ea1ng th\xe1i: "}),Object(et.jsxs)(Vn.a,{sm:2,children:[" ",""===o?"":o===_?"Ch\u01b0a thanh to\xe1n":o===I?"\u0110\xe3 thanh to\xe1n ":"Ho\xe0n t\u1ea5t ",""===o?null:o===_?Object(et.jsx)(pi.a,{color:"red",icon:fi.b}):Object(et.jsx)(pi.a,{color:"green",icon:fi.a})]})]}),Object(et.jsxs)($t.a,{tabs:!0,children:[Object(et.jsx)(Zt.a,{className:"pointer",children:Object(et.jsx)(en.a,{className:Dn()({active:"1"===p}),onClick:function(){e.selectTypeCustomer("1")},children:"Theo \u0111\u01a1n"})}),Object(et.jsx)(Zt.a,{className:"pointer",children:Object(et.jsx)(en.a,{className:Dn()({active:"2"===p}),onClick:function(){e.selectTypeCustomer("2")},children:"B\xe1n l\u1ebb"})})]}),Object(et.jsxs)(gn.a,{activeTab:p,className:"mb-10",children:[Object(et.jsx)(yn.a,{tabId:"1",className:"customCard",children:Object(et.jsxs)(sn.a,{className:"customer pt-0",children:[Object(et.jsxs)(rn.a,{xs:6,className:"no-padding vertical-line",children:[Object(et.jsx)(uc,{data:{code:l.code,full_name:l.full_name,birthday:l.birthday,gender:l.gender,contacts:null===l||void 0===l?void 0:l.contacts},mode:"pharmacy"}),Object(et.jsx)(sn.a,{className:"pt-5 ml-10",children:Object(et.jsx)(rn.a,{xs:11,className:"ml-10",children:Object(et.jsxs)(sn.a,{className:"mb-1",children:[Object(et.jsx)(rn.a,{xs:2,className:"no-padding",children:"Ch\u1ea9n \u0111o\xe1n:"}),Object(et.jsx)(rn.a,{xs:10,className:"no-padding",children:j})]})})})]}),Object(et.jsxs)(rn.a,{xs:{size:"6"},className:"doctor_info pl-40",children:[Object(et.jsxs)("h5",{className:"title-card",children:[Object(et.jsx)("span",{className:"material-icons",children:"person_add"})," Th\xf4ng tin b\xe1c s\u0129"]}),Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(Vn.a,{xs:2,className:"p-0",children:"B\u1ec7nh vi\u1ec7n:"}),Object(et.jsx)(Vn.a,{xs:5,className:"p-0",children:h.hostpital}),Object(et.jsx)(Vn.a,{xs:1,className:"p-0",children:"Khoa:"}),Object(et.jsx)(Vn.a,{xs:4,className:"p-0",children:h.class})]}),Object(et.jsxs)(sn.a,{className:"p0",children:[Object(et.jsx)(Vn.a,{xs:2,className:"p-0",children:"H\u1ecd t\xean:"}),Object(et.jsx)(Vn.a,{xs:5,className:"p-0",children:null===h||void 0===h?void 0:h.full_name}),Object(et.jsx)(Vn.a,{xs:1,className:"p-0",children:"SDT:"}),Object(et.jsx)(Vn.a,{xs:4,className:"p-0",children:h.phone})]}),Object(et.jsxs)(sn.a,{className:"p0",children:[Object(et.jsx)(Vn.a,{xs:2,className:"p-0",children:"Ng\xe0y k\xea \u0111\u01a1n:"}),Object(et.jsxs)(Vn.a,{xs:10,className:"p-0",children:[" ",""!==j?y.toLocaleString("en-GB").slice(0,10):null," "]})]})]})]})}),Object(et.jsx)(yn.a,{tabId:"2",children:Object(et.jsx)(sn.a,{className:"customCard customer",children:Object(et.jsxs)(rn.a,{xs:4,className:"doctor_info min-h-30",children:[Object(et.jsxs)("h5",{className:"title-card",children:[Object(et.jsx)("span",{className:"material-icons",children:"person"})," Th\xf4ng tin kh\xe1ch"]}),Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(Vn.a,{xs:3,children:"H\u1ecd t\xean:"}),Object(et.jsx)(rn.a,{xs:9,children:Object(et.jsx)(Nn.a,{type:"text",name:"retailCustomerName",value:v,onChange:this.onChange})})]}),Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(Vn.a,{xs:3,children:"SDT:"}),Object(et.jsx)(rn.a,{xs:9,children:Object(et.jsx)(Nn.a,{type:"text",name:"retailCustomerPhone",value:g,onChange:this.onChange})})]})]})})})]}),Object(et.jsxs)(sn.a,{className:"search-product customCard mb-10",children:[Object(et.jsxs)(rn.a,{xs:2,className:"title-card pb-10",children:[Object(et.jsx)("span",{className:"material-icons",children:"search"}),"T\xecm ki\u1ebfm thu\u1ed1c"]}),Object(et.jsx)(rn.a,{xs:10,children:Object(et.jsx)(vi,{onSelect:this.onSelect,order_id:a,list:s})})]}),Object(et.jsxs)(sn.a,{className:"info customCard",children:[Object(et.jsxs)(rn.a,{className:"title-card",xs:8,children:[Object(et.jsx)(Tt,{xmlns:"http://www.w3.org/2000/svg",className:"flaticon-icons",fill:"#28b76b"})," Th\xf4ng tin \u0111\u01a1n thu\u1ed1c :"]}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("div",{className:"pharmacy-table",children:Object(et.jsxs)(qn.a,{bordered:!0,children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"STT"}),Object(et.jsx)("th",{className:"ma",children:"M\xe3 thu\u1ed1c"}),Object(et.jsx)("th",{className:"name",children:"T\xean thu\u1ed1c"}),Object(et.jsx)("th",{children:"\u0110\u01a1n gi\xe1"}),Object(et.jsx)("th",{children:"S\u1ed1 l\xf4"}),Object(et.jsx)("th",{className:"quantity",children:"S\u1ed1 l\u01b0\u1ee3ng"}),Object(et.jsx)("th",{children:"Chi\u1ebft kh\u1ea5u"}),Object(et.jsx)("th",{children:"Th\xe0nh ti\u1ec1n"}),Object(et.jsx)("th",{children:"H\u01b0\u1edbng d\u1eabn"}),Object(et.jsx)("th",{})]})}),Object(et.jsxs)("tbody",{className:"bodyTable",children:[N,f.map((function(e,t){return Object(et.jsxs)("tr",{height:"60px",children:[Object(et.jsx)("td",{}),Object(et.jsx)("td",{}),Object(et.jsx)("td",{}),Object(et.jsx)("td",{}),Object(et.jsx)("td",{}),Object(et.jsx)("td",{}),Object(et.jsx)("td",{}),Object(et.jsx)("td",{}),Object(et.jsx)("td",{}),Object(et.jsx)("td",{})]},t)})),Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{}),Object(et.jsx)("td",{className:"ma"}),Object(et.jsx)("td",{className:"name"}),Object(et.jsx)("td",{}),Object(et.jsx)("td",{}),Object(et.jsx)("td",{}),Object(et.jsx)("td",{children:"T\u1ed5ng ti\u1ec1n:"}),Object(et.jsxs)("td",{children:[new Intl.NumberFormat("de-DE").format(d)," \u0111"]}),Object(et.jsx)("td",{className:"instruction"}),Object(et.jsx)("td",{})]})]})]})}),Object(et.jsxs)("div",{className:"options-pharmacy",children:[Object(et.jsx)(Ze.a,{hidden:o!==_||u===q.code,onClick:this.updateOrrder,children:"C\u1eadp nh\u1eadt s\u1ed1 l\u01b0\u1ee3ng"}),Object(et.jsx)(Ze.a,{hidden:o!==_,className:"ml-10","data-index":"10",color:"primary",onClick:this.handlePayment,children:"Thanh to\xe1n"}),Object(et.jsxs)(We.a,{isOpen:m,children:[Object(et.jsx)(Ye.a,{children:"Thu Ng\xe2n"}),Object(et.jsx)(Qe.a,{children:Object(et.jsx)(Bs,{handleClose:this.handleClose,mode:"pharmacy",retail:"2"===p,retailCustomerName:v,affterPayment:this.affterPayment,billID:n})}),Object(et.jsx)($e.a,{children:Object(et.jsx)(Ze.a,{onClick:this.handleClose,children:"Close"})})]}),Object(et.jsx)(Ze.a,{color:"primary",disabled:!(i.length>0),hidden:o!==I&&o!==D,onClick:function(){Ue()({printable:"medPrintId",type:"html",css:"./PrintPharmacy.scss",targetStyles:["*"],style:"@page {\n                                                    size: A4;\n                                                    margin: 0;\n                                                            },\n                                                        @media print {\n                                                            .medPrintId{\n                                                                margin: 0;\n                                                                border: initial;\n                                                                border-radius: initial;\n                                                                width: initial;\n                                                                min-height: initial;\n                                                                box-shadow: initial;\n                                                                background: initial;\n                                                                page-break-after: always;\n                                                            }",header:null,footer:null})},children:"In H\xf3a \u0110\u01a1n"})," ",Object(et.jsx)(Ze.a,{hidden:o!==I,color:"primary",onClick:this.onSubmitProduct,children:"X\xe1c nh\u1eadn l\u1ea5y thu\u1ed1c"}),Object(et.jsx)(Ze.a,{hidden:""!==o||u!==q.code,onClick:this.createOrder,color:"primary",children:"X\xe1c nh\u1eadn t\u1ea1o \u0111\u01a1n m\u1edbi"}),Object(et.jsx)(Ze.a,{hidden:o!==D,onClick:this.refreshOrder,color:"primary",children:"T\u1ea1o \u0111\u01a1n m\u1edbi"}),Object(et.jsx)(Ze.a,{style:{marginLeft:"10px"},color:"danger",onClick:this.onSubmitCancel,children:"H\u1ee7y"})]}),Object(et.jsx)(gi,{etcArr:i,etcCode:n,cusData:"1"===p?l:{full_name:v,contacts:[{phone:g,address:{}}]},total:d})]})]})}),Object(et.jsxs)(We.a,{className:"pharmacy-list-order",isOpen:x,children:[Object(et.jsx)(Ye.a,{children:"L\u1ecbch s\u1eed \u0111\u01a1n thu\u1ed1c"}),Object(et.jsx)(Qe.a,{children:Object(et.jsx)(yi,{onSelectOrder:this.onSelectOrder,listOrder:O})}),Object(et.jsx)($e.a,{children:Object(et.jsx)(Ze.a,{onClick:this.onClose,children:"Close"})})]})]})}}]),n}(c.Component),Si=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.match.path;return Object(et.jsx)("div",{className:"Pharmacy pl-20 pr-20",children:Object(et.jsx)(r.d,{children:Object(et.jsx)(r.b,{path:"".concat(e),exact:!0,component:Ni})})})}}]),n}(c.Component),Ci=new(function(){function e(){if(Object(l.a)(this,e),e._instance)return e._instance;e._instance=this}return Object(b.a)(e,[{key:"getOrderList",value:function(e){return Ee.get("/order/item/list",{order_id:e})}},{key:"getUserbyId",value:function(e){return Ee.get("/org/user/get",{id:e})}},{key:"getUserList",value:function(e){return Ee.get("/org/user/list",e)}},{key:"getHistoryTransactionByTimeAndUserID",value:function(e,t,n){return e===ke?Ee.get("/accounting/transaction/list",{start_date:t,end_date:n}):Ee.get("/accounting/transaction/list",{user_id:e,start_date:t,end_date:n})}},{key:"getBookList",value:function(e){return Ee.get("/accounting/book/list",{status:e})}},{key:"getOrder",value:function(e){return Ee.get("/order/order/get",{code:e})}},{key:"postTransaction",value:function(e){return Ee.post("/accounting/transaction/create",e)}},{key:"getListTransaction",value:function(e){return Ee.get("/job/step/list?customer_code=".concat(e,"&&type=").concat([H,K]))}},{key:"getListStepCancel",value:function(e,t){return Ee.get("/job/job/list?customer_id=".concat(e,"&&date=").concat(t))}},{key:"getCustomer",value:function(e){return Ee.get("/customer/customer/get",{code:e})}},{key:"cancelTransaction",value:function(e){return Ee.post("/job/step/update",e)}},{key:"postEditOrder",value:function(e){return Ee.post("/order/item/update",e)}},{key:"getStep",value:function(e){return Ee.get("/job/step/get",{id:e})}},{key:"exporExcelTransaction",value:function(e,t,n){return"".concat(v,"/accounting/transaction/export-excel?user_id=").concat(e,"&&start_date=").concat(t,"&&end_date=").concat(n)}}]),e}()),_i=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).state={reason:""},c}return Object(b.a)(n,[{key:"render",value:function(){var e,t=this,n=this.props,a=n.isManager,s=n.items,r=n.customerCode,i=n.amountRetail,o=0,l=0,d=0,u=0,h=0,j=0,b=0,m=s.filter((function(e){var t;return null===(t=e.code)||void 0===t?void 0:t.includes("".concat(r))})).map((function(n,c){return n.total=n.exam+n.test+n.xray+n.ent+n.ultrasound+n.buy,o+=+n.exam,l+=+n.test,d+=+n.xray,u+=+n.ent,h+=+n.ultrasound,j+=+n.other,b+=+n.buy,e=o+l+d+u+h+j+b,Object(et.jsxs)("tr",{children:[Object(et.jsxs)("td",{children:[" ",c+1," "]}),Object(et.jsxs)("td",{children:[" ",n.name," "]}),Object(et.jsxs)("td",{children:[" ",n.code," "]}),Object(et.jsxs)("td",{children:[" ",n.phone," "]}),Object(et.jsxs)("td",{children:[" ",n.address," "]}),Object(et.jsxs)("td",{children:[" ",0!==n.exam?ct.formatPrice(n.exam):""," "]}),Object(et.jsxs)("td",{children:[" ",0!==n.test?ct.formatPrice(n.test):""," "]}),Object(et.jsxs)("td",{children:[" ",0!==n.xray?ct.formatPrice(n.xray):""," "]}),Object(et.jsxs)("td",{children:[" ",0!==n.ent?ct.formatPrice(n.ent):""," "]}),Object(et.jsxs)("td",{children:[" ",0!==n.ultrasound?ct.formatPrice(n.ultrasound):""," "]}),Object(et.jsxs)("td",{children:[" ",0!==n.other?ct.formatPrice(n.other):""," "]}),Object(et.jsxs)("td",{children:[" ",0!==n.buy?ct.formatPrice(n.buy):""," "]}),Object(et.jsxs)("td",{children:[" ",ct.formatPrice(n.total)," "]}),a?Object(et.jsx)("td",{className:"transaction-btn-cancel middle pointer",onClick:function(e){return t.props.searchCustomer(e,n.id)},children:"H\u1ee7y"}):null]},c)}));return Object(et.jsx)(c.Fragment,{children:Object(et.jsxs)(qn.a,{children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"#"}),Object(et.jsx)("th",{children:"B\u1ec7nh nh\xe2n"}),Object(et.jsx)("th",{children:"M\xe3 b\u1ec7nh nh\xe2n"}),Object(et.jsx)("th",{children:"\u0110i\u1ec7n tho\u1ea1i"}),Object(et.jsx)("th",{children:"\u0110\u1ecba ch\u1ec9"}),Object(et.jsx)("th",{children:"Kh\xe1m"}),Object(et.jsx)("th",{children:"X\xe9t nghi\u1ec7m"}),Object(et.jsx)("th",{children:"X quang"}),Object(et.jsx)("th",{children:"N\u1ed9i soi"}),Object(et.jsx)("th",{children:"Si\xeau \xe2m"}),Object(et.jsx)("th",{children:"C\u1ea5p c\u1ee9u"}),Object(et.jsx)("th",{children:"Thu\u1ed1c"}),Object(et.jsx)("th",{children:"T\u1ed5ng"}),a?Object(et.jsx)("th",{children:"Options"}):null]})}),Object(et.jsxs)("tbody",{children:[m,i>0?Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{children:s.length}),Object(et.jsx)("td",{children:"KH\xc1CH L\u1eba"}),Object(et.jsx)("td",{}),Object(et.jsx)("td",{}),Object(et.jsx)("td",{}),Object(et.jsx)("td",{}),Object(et.jsx)("td",{}),Object(et.jsx)("td",{}),Object(et.jsx)("td",{}),Object(et.jsx)("td",{}),Object(et.jsx)("td",{}),Object(et.jsx)("td",{children:ct.formatPrice(i)}),Object(et.jsx)("td",{children:ct.formatPrice(i)}),a?Object(et.jsx)("td",{}):null]}):null,Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{}),Object(et.jsx)("th",{}),Object(et.jsx)("th",{}),Object(et.jsx)("th",{}),Object(et.jsx)("th",{children:"T\u1ed5ng: "}),Object(et.jsxs)("th",{children:[ct.formatPrice(o),"\u0111"]}),Object(et.jsxs)("th",{children:[ct.formatPrice(l),"\u0111"]}),Object(et.jsxs)("th",{children:[ct.formatPrice(d),"\u0111"]}),Object(et.jsxs)("th",{children:[ct.formatPrice(u),"\u0111"]}),Object(et.jsxs)("th",{children:[ct.formatPrice(h),"\u0111"]}),Object(et.jsxs)("th",{children:[ct.formatPrice(j),"\u0111"]}),Object(et.jsxs)("th",{children:[ct.formatPrice(b+i),"\u0111"]}),Object(et.jsxs)("th",{children:[ct.formatPrice(e+i),"\u0111"]}),a?Object(et.jsx)("th",{}):null]})]})]})})}}]),n}(c.Component),Ti=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).state={},c}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.customerCode,a=0,s=t.filter((function(e){var t,c;return null===(t=e.order)||void 0===t||null===(c=t.customer)||void 0===c?void 0:c.code.includes("".concat(n))})).map((function(e,t){var n,c,s,r,i,o,l,d,u,h,j,b,m,x,O,p,f,v="buy"===e.job_step.type?null===(n=e.order)||void 0===n?void 0:n.type:null===(c=e.order)||void 0===c||null===(s=c.items[0])||void 0===s||null===(r=s.ref_value)||void 0===r?void 0:r.type;return a+=e.order.total,Object(et.jsxs)("tr",{children:[Object(et.jsxs)("td",{children:[" ",t+1," "]}),Object(et.jsxs)("td",{children:[" ",null===(i=e.order)||void 0===i||null===(o=i.customer)||void 0===o?void 0:o.full_name," "]}),Object(et.jsxs)("td",{children:[" ",null===(l=e.order)||void 0===l||null===(d=l.customer)||void 0===d?void 0:d.code," "]}),Object(et.jsxs)("td",{children:[" ",null===(u=e.order)||void 0===u||null===(h=u.customer)||void 0===h||null===(j=h.contacts[0])||void 0===j?void 0:j.phone," "]}),Object(et.jsxs)("td",{children:[" ",null===(b=e.order)||void 0===b||null===(m=b.customer)||void 0===m||null===(x=m.contacts[0])||void 0===x||null===(O=x.address)||void 0===O?void 0:O.province," "]}),Object(et.jsxs)("td",{children:[" ",e.job_step.type===G?v===V.code?V.label:v===X.code?X.label:q.label:v===R?"Kh\xe1m b\u1ec7nh":v===M?"X\xe9t nghi\u1ec7m":v===A?"X quang":v===B?"Si\xeau \xe2m":v===F?"N\u1ed9i soi":"Kh\xe1c"," "]}),Object(et.jsxs)("td",{children:[" ",null===(p=e.job_step)||void 0===p||null===(f=p.results)||void 0===f?void 0:f.map((function(e){return e.reason}))," "]}),Object(et.jsx)("td",{children:new Date(e.job_step.ctime).toLocaleString("en-GB")}),Object(et.jsx)("td",{children:new Date(e.job_step.mtime).toLocaleString("en-GB")}),Object(et.jsxs)("td",{children:[" ",ct.formatPrice(e.order.total)," "]})]},t)}));return Object(et.jsx)(c.Fragment,{children:Object(et.jsxs)(qn.a,{children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"#"}),Object(et.jsx)("th",{children:"B\u1ec7nh nh\xe2n"}),Object(et.jsx)("th",{children:"M\xe3 b\u1ec7nh nh\xe2n"}),Object(et.jsx)("th",{children:"\u0110i\u1ec7n tho\u1ea1i"}),Object(et.jsx)("th",{children:"\u0110\u1ecba ch\u1ec9"}),Object(et.jsx)("th",{children:"Giao d\u1ecbch h\u1ee7y"}),Object(et.jsx)("th",{children:"L\xfd do"}),Object(et.jsx)("th",{children:"Th\u1eddi gian GD"}),Object(et.jsx)("th",{children:"Th\u1eddi gian h\u1ee7y"}),Object(et.jsx)("th",{children:"Ti\u1ec1n"})]})}),Object(et.jsxs)("tbody",{children:[s,Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{}),Object(et.jsx)("th",{}),Object(et.jsx)("th",{}),Object(et.jsx)("th",{}),Object(et.jsx)("th",{}),Object(et.jsx)("th",{}),Object(et.jsx)("th",{}),Object(et.jsx)("th",{}),Object(et.jsx)("th",{children:"T\u1ed5ng: "}),Object(et.jsxs)("th",{children:[ct.formatPrice(a),"\u0111"]})]})]})]})})}}]),n}(c.Component),wi=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).state={reason:""},c}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.openCancel,c=t.answer;return Object(et.jsx)("div",{className:"CancelModal",children:Object(et.jsxs)(We.a,{isOpen:n,children:[Object(et.jsx)(Ye.a,{children:"H\u1ee7y giao d\u1ecbch"}),Object(et.jsx)(Qe.a,{children:Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(Vn.a,{xs:"1",children:"L\xed do h\u1ee7y: "}),Object(et.jsx)(rn.a,{xs:"11",children:Object(et.jsx)(Nn.a,{type:"text",value:this.state.reason,onChange:function(t){return e.setState({reason:t.target.value})}})})]})}),Object(et.jsxs)($e.a,{children:[Object(et.jsx)(Ze.a,{onClick:function(){c(e.state.reason)},children:"X\xe1c nh\u1eadn"})," ",Object(et.jsx)(Ze.a,{color:"danger",onClick:function(){c()},children:"H\u1ee7y"})]})]})})}}]),n}(a.a.Component),ki=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).cancel=function(e,t){var n=c.props.listStepCancel.find((function(e){var t;return(null===(t=e.job_step)||void 0===t?void 0:t.type)===K}));t.job_step.type===H&&n?c.setState({notiMessage:"Kh\xf4ng th\u1ec3 h\u1ee7y d\u1ecbch v\u1ee5 kh\xe1m n\xe0y v\xec b\u1ec7nh nh\xe2n \u0111\xe3 k\xea x\xe9t nghi\u1ec7m!"}):c.setState({step:t,openCancel:!0})},c.answer=function(e){if(e){var t=c.state.step,n={id:t.order.ref_id,status:k,results:[{reason:e}]};Ci.cancelTransaction(n).then((function(n){c.setState({openCancel:!1,notiMessage:"H\u1ee7y giao d\u1ecbch th\xe0nh c\xf4ng!"}),t.job_step.results=[{reason:e}],c.props.afterCancelDone(t),c.props.closeTrans()})).catch((function(e){console.log(e),c.setState({openCancel:!1,notiMessage:"H\u1ee7y giao d\u1ecbch th\u1ea5t b\u1ea1i!"}),c.props.closeTrans()}))}else c.setState({openCancel:!1})},c.state={openCancel:!1,step:{},notiMessage:""},c}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.listStepCancel,c=t.openTrans,a=this.state,s=a.openCancel,r=a.notiMessage,i=n.map((function(t,n){var c,a,s,r,i,o,l,d,u,h,j,b,m,x,O,p=new Date(null===(c=t.order)||void 0===c?void 0:c.ctime),f=t.job_step.type===G?null===(a=t.order)||void 0===a?void 0:a.type:null===(s=t.order)||void 0===s||null===(r=s.items[0])||void 0===r||null===(i=r.ref_value)||void 0===i?void 0:i.type;return Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{children:n+1}),Object(et.jsx)("td",{children:null===(o=t.order)||void 0===o||null===(l=o.customer)||void 0===l?void 0:l.full_name}),Object(et.jsx)("td",{children:null===(d=t.order)||void 0===d||null===(u=d.customer)||void 0===u||null===(h=u.contacts[0])||void 0===h?void 0:h.phone}),Object(et.jsx)("td",{children:null===(j=t.order)||void 0===j||null===(b=j.customer)||void 0===b||null===(m=b.contacts[0])||void 0===m||null===(x=m.address)||void 0===x?void 0:x.province}),Object(et.jsx)("td",{children:t.job_step.type===G?f===V.code?V.label:f===X.code?X.label:q.label:f===R?"Kh\xe1m b\u1ec7nh":f===M?"X\xe9t nghi\u1ec7m":f===A?"X quang":f===B?"Si\xeau \xe2m":f===F?"N\u1ed9i soi":"Kh\xe1c"}),Object(et.jsxs)("td",{children:[new Intl.NumberFormat("de-DE").format(null===(O=t.order)||void 0===O?void 0:O.total),"\u0111"]}),Object(et.jsx)("td",{children:p.toLocaleString("en-GB")}),t.job_step.type===K&&t.job_step.status!==D||t.job_step.type===H?Object(et.jsx)("td",{onClick:function(n){return e.cancel(n,t)},className:"transaction-btn-cancel middle pointer",children:"H\u1ee7y"}):Object(et.jsx)("td",{})]},n)}));return Object(et.jsxs)("div",{className:"TransactionModal",children:[Object(et.jsx)(wi,{openCancel:s,answer:this.answer}),Object(et.jsx)(at,{message:r,done:function(){return e.setState({notiMessage:""})}}),Object(et.jsxs)(We.a,{isOpen:c,children:[Object(et.jsx)(Ye.a,{children:"Th\xf4ng tin giao d\u1ecbch"}),Object(et.jsx)(Qe.a,{children:Object(et.jsxs)(qn.a,{children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"#"}),Object(et.jsx)("th",{children:"T\xean b\u1ec7nh nh\xe2n"}),Object(et.jsx)("th",{children:"\u0110i\u1ec7n tho\u1ea1i"}),Object(et.jsx)("th",{children:"\u0110\u1ecba ch\u1ec9"}),Object(et.jsx)("th",{children:"Lo\u1ea1i d\u1ecbch v\u1ee5"}),Object(et.jsx)("th",{children:"Gi\xe1 ti\u1ec1n"}),Object(et.jsx)("th",{children:"Th\u1eddi gian giao d\u1ecbch"}),Object(et.jsx)("th",{children:"Thao t\xe1c"})]})}),Object(et.jsx)("tbody",{children:i})]})}),Object(et.jsx)($e.a,{children:Object(et.jsx)(Ze.a,{color:"danger",onClick:this.props.closeTrans,children:"H\u1ee7y"})})]})]})}}]),n}(a.a.Component),Di=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;Object(l.a)(this,n),(c=t.call(this,e)).setShow=function(e){c.setState({show:e})},c.findUserbyId=function(e){return Ci.getUserbyId(e)},c.findHistoryTransaction=function(e,t,n){return Ci.getHistoryTransactionByTimeAndUserID(e,t,n)},c.handleSearch=function(){var e=c.state.form,t=e.start_date,n=e.end_date,a=c.state.selectedUser;void 0==a?c.setNotiMessage("C\xf3 l\u1ed7i! Xin vui l\xf2ng ch\u1ecdn nh\xe2n vi\xean "):c.findHistoryTransaction(a.value,t.value,n.value).then((function(e){var t,n,a,s,r=e.data,i=[],o=[];null===r||void 0===r||r.records.forEach((function(e){var t;(null===(t=e.job_step)||void 0===t?void 0:t.status)===k?o.push(e):i.push(e)}));var l=[],d=[];i.forEach((function(e){var t,n,c,a,s,r,i,o,u,h,j,b,m,x,O,p,f;l.includes(null===(t=e.order)||void 0===t||null===(n=t.customer)||void 0===n?void 0:n.id)||(l.push(null===(c=e.order)||void 0===c||null===(a=c.customer)||void 0===a?void 0:a.id),d.push({id:null===(s=e.order)||void 0===s||null===(r=s.customer)||void 0===r?void 0:r.id,code:null===(i=e.order)||void 0===i||null===(o=i.customer)||void 0===o?void 0:o.code,name:null===(u=e.order)||void 0===u||null===(h=u.customer)||void 0===h?void 0:h.full_name,phone:null===(j=e.order)||void 0===j||null===(b=j.customer)||void 0===b||null===(m=b.contacts[0])||void 0===m?void 0:m.phone,address:null===(x=e.order)||void 0===x||null===(O=x.customer)||void 0===O||null===(p=O.contacts[0])||void 0===p||null===(f=p.address)||void 0===f?void 0:f.province,exam:0,test:0,xray:0,ultrasound:0,ent:0,other:0,buy:0}))})),i.forEach((function(e){d.map((function(t){var n,c;if((null===(n=e.order)||void 0===n||null===(c=n.customer)||void 0===c?void 0:c.id)===t.id){var a,s,r,i;if((null===(a=e.job_step)||void 0===a?void 0:a.type)===H)return t.exam+=e.order.total;if((null===(s=e.job_step)||void 0===s?void 0:s.type)===G)return t.buy+=+(null===(i=e.order)||void 0===i?void 0:i.total);if((null===(r=e.job_step)||void 0===r?void 0:r.type)===K){var o,l,d,u,h,j,b,m,x,O,p,f,v,g,y;if((null===(o=e.order)||void 0===o||null===(l=o.items[0])||void 0===l||null===(d=l.ref_value)||void 0===d?void 0:d.type)===B)return t.ultrasound+=+e.order.total;if((null===(u=e.order)||void 0===u||null===(h=u.items[0])||void 0===h||null===(j=h.ref_value)||void 0===j?void 0:j.type)===M)return t.test+=+e.order.total;if((null===(b=e.order)||void 0===b||null===(m=b.items[0])||void 0===m||null===(x=m.ref_value)||void 0===x?void 0:x.type)===A)return t.xray+=+e.order.total;if((null===(O=e.order)||void 0===O||null===(p=O.items[0])||void 0===p||null===(f=p.ref_value)||void 0===f?void 0:f.type)===F)return t.ent+=+e.order.total;if((null===(v=e.order)||void 0===v||null===(g=v.items[0])||void 0===g||null===(y=g.ref_value)||void 0===y?void 0:y.type)===U)return t.other+=+e.order.total}}}))})),o.map((function(e){Ci.getStep(e.job_step.id).then((function(e){o.find((function(t){if(t.job_step.id===e.data.id)return t.job_step.results=e.data.results,t}))})).catch((function(e){return console.log(e)}))})),c.setShow(!0),c.setState({customers:d,itemsCancel:o,itemsTransaction:i,amountCash:null===r||void 0===r||null===(t=r.revuene)||void 0===t?void 0:t.cash,amountAtm:null===r||void 0===r||null===(n=r.revuene)||void 0===n?void 0:n.atm,amountCancel:null===r||void 0===r||null===(a=r.revuene)||void 0===a?void 0:a.cash,amountRetail:null===r||void 0===r||null===(s=r.revuene)||void 0===s?void 0:s.retail}),0===r.count&&c.setNotiMessage("Kh\xf4ng c\xf3 giao d\u1ecbch trong kho\u1ea3ng th\u1eddi gian n\xe0y")})).catch((function(e){console.log(e),c.setNotiMessage("Kh\xf4ng c\xf3 giao d\u1ecbch trong kho\u1ea3ng th\u1eddi gian n\xe0y"),c.setSubmitLoading(!1)}))},c.getUserList=function(){Ci.getUserList().then((function(e){e.data.unshift({id:ke,full_name:De}),c.setUserList(e.data)}))},c.setNotiMessage=function(e){c.setState({notiMessage:e})},c.setSubmitLoading=function(e){c.setState({submitLoading:e})},c.setUserList=function(e){c.setState({userList:e})},c.handleChangeSelectUser=function(e){c.setState({selectedUser:e})},c.handleExportFile=function(){var e=c.state.form,t=e.start_date,n=e.end_date,a=c.state.selectedUser;if(void 0==a)c.setNotiMessage("C\xf3 l\u1ed7i! Xin vui l\xf2ng ch\u1ecdn nh\xe2n vi\xean ");else{var s=Ci.exporExcelTransaction(a.value,t.value,n.value);window.location.assign(s)}},c.isRole=function(){if(Me.isRole(g.ADMIN.value))c.setState({isManager:!0});else{var e={value:Me.userInfo.id,label:Me.userInfo.full_name};c.setState({selectedUser:e})}},c.searchCustomer=function(){var e=Object(j.a)(h.a.mark((function e(t,n){var a,s,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=c.state,a.listStepCancel,r=a.itemsTransaction,s=r.filter((function(e){var t,c;return(null===(t=e.order)||void 0===t||null===(c=t.customer)||void 0===c?void 0:c.id)===n})),c.setState({listStepCancel:s,openTrans:!0});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),c.closeTrans=function(){c.setState({openTrans:!1,customerCode:"",listStepCancel:[]})},c.afterCancelDone=function(e){var t=c.state,n=t.customers,a=t.itemsCancel,s=t.amountCash,r=t.amountAtm;e.type===we.code?s-=e.amount:r-=e.amount,n.find((function(t){if(t.id===e.order.customer_id){var n=e.order.total;if(e.job_step.type===H)return t.exam=t.exam-n;if(e.job_step.type===G)return t.buy=t.buy-n;if(e.job_step.type===K){var c,a,s,r,i,o,l,d,u,h,j,b,m,x,O;if((null===(c=e.order)||void 0===c||null===(a=c.items[0])||void 0===a||null===(s=a.ref_value)||void 0===s?void 0:s.type)===B)return t.ultrasound=t.ultrasound-n;if((null===(r=e.order)||void 0===r||null===(i=r.items[0])||void 0===i||null===(o=i.ref_value)||void 0===o?void 0:o.type)===M)return t.test=t.test-n;if((null===(l=e.order)||void 0===l||null===(d=l.items[0])||void 0===d||null===(u=d.ref_value)||void 0===u?void 0:u.type)===A)return t.xray=t.xray-n;if((null===(h=e.order)||void 0===h||null===(j=h.items[0])||void 0===j||null===(b=j.ref_value)||void 0===b?void 0:b.type)===F)return t.ent=t.ent-n;if((null===(m=e.order)||void 0===m||null===(x=m.items[0])||void 0===x||null===(O=x.ref_value)||void 0===O?void 0:O.type)===U)return t.other=t.other-n}}})),a.push(e),c.setState({itemsCancel:a,customers:n,amountAtm:r,amountCash:s})},c.changeCustomerCode=function(){};var a=(new Date).toISOString().substr(0,10);return c.state={customers:[],itemsCancel:[],itemsTransaction:[],customerCode:"",listStepCancel:[],isManager:!1,policyPriceList:[],userList:[],notiMessage:"",selectedUser:null,show:!1,activeTab:"1",form:c._getInitFormData({user_id:"",userFirstName:"",userLastName:"",userFullName:"",start_date:a,end_date:a,bookId:"",amount:"",cTime:"",transactionId:""})},c}return Object(b.a)(n,[{key:"transactionTotal",value:function(e){for(var t=0,n=0;n<e.records.length;n++)t+=e.records[n].amount;this.setState({sum:t})}},{key:"transactionProduct",value:function(e){var t=0;e.map((function(e){return t+=e.amount})),this.setState({sumProduct:t})}},{key:"transactionExam",value:function(e){var t=0;e.map((function(e){return t+=e.amount})),this.setState({sumExam:t})}},{key:"transactionRetail",value:function(e){var t=0;e.map((function(e){return t+=e.amount})),this.setState({sumRetail:t})}},{key:"transactionCash",value:function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].amount;this.setState({sumCash:t})}},{key:"transactionOther",value:function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].amount;this.setState({sumOther:t})}},{key:"transactionTest",value:function(e){var t=0;e.map((function(e){return t+=e.amount})),this.setState({sumTest:t})}},{key:"transactionXray",value:function(e){var t=0;e.map((function(e){return t+=e.amount})),this.setState({sumXray:t})}},{key:"transactionUltrasound",value:function(e){var t=0;e.map((function(e){return t+=e.amount})),this.setState({sumUltrasound:t})}},{key:"transactionEnt",value:function(e){var t=0;e.map((function(e){return t+=e.amount})),this.setState({sumEnt:t})}},{key:"componentDidMount",value:function(){document.getElementById("userName").setAttribute("data-index","3"),this.getUserList(),this.isRole()}},{key:"render",value:function(){var e=this,t=this.state.form,n=t.start_date,c=t.end_date,a=this.state,s=a.notiMessage,r=(a.sum,a.sumCash,a.sumOther,a.userList),i=a.selectedUser,o=(a.sumEnt,a.sumTest,a.sumProduct,a.sumUltrasound,a.sumXray,a.sumRetail,a.sumExam,a.activeTab),l=a.customerCode,d=a.listStepCancel,u=a.openTrans,h=(a.cancelTotal,a.customers),j=a.itemsCancel,b=this.state,m=b.amountCash,x=b.amountAtm,O=(b.amountCancel,b.amountRetail),p=r.map((function(e){return{value:e.id,label:e.full_name}}))||[];return Object(et.jsxs)("div",{className:"Transaction-Form ",children:[Object(et.jsx)(at,{message:s,done:function(){return e.setNotiMessage("")}}),Object(et.jsx)(rn.a,{sm:6,children:Object(et.jsx)("legend",{className:"title-card",children:"Th\xf4ng tin giao d\u1ecbch"})}),Object(et.jsx)(ki,{afterCancelDone:this.afterCancelDone,closeTrans:this.closeTrans,openTrans:u,listStepCancel:d}),Object(et.jsxs)(Xn.a,{row:!0,children:[Object(et.jsx)(Vn.a,{className:"end",for:"getUser",sm:1,children:"T\xean nh\xe2n vi\xean"}),Object(et.jsx)(rn.a,{sm:2,className:"username",children:Object(et.jsx)(rn.a,{children:Object(et.jsx)(As.a,{isDisabled:!this.state.isManager,onKeyDown:function(e){return ct.onKeyDown(e)},inputId:"userName",value:i,options:p,placeholder:"Ch\u1ecdn nh\xe2n vi\xean",menuPlacement:"top",openMenuOnFocus:!0,onChange:function(t){e.handleChangeSelectUser(t)}})})}),Object(et.jsx)(rn.a,{sm:1,className:"end",children:Object(et.jsx)("label",{htmlFor:"start_date",children:"T\u1eeb:"})}),Object(et.jsx)(rn.a,{sm:2,children:Object(et.jsx)(Nn.a,{onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"1",autoFocus:!0,type:"date",value:n&&n.value,onChange:function(t){e._setValue(t,"start_date")},required:!0})}),Object(et.jsx)(rn.a,{sm:1,className:"end",children:Object(et.jsx)("label",{htmlFor:"end_date",children:"\u0110\u1ebfn:"})}),Object(et.jsx)(rn.a,{sm:2,children:Object(et.jsx)(Nn.a,{onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"2",type:"date",value:c&&c.value,onChange:function(t){e._setValue(t,"end_date")},required:!0})}),Object(et.jsx)(rn.a,{sm:1,className:"end",children:Object(et.jsx)(Ze.a,{color:"primary",onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"4",onClick:function(){e.handleSearch()},children:"Ch\u1ecdn"})}),Object(et.jsx)(rn.a,{sm:1,className:"end",children:Object(et.jsxs)(Ze.a,{color:"primary",disabled:(null===i||void 0===i?void 0:i.value)===ke,onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"5",onClick:function(){e.handleExportFile()},children:[Object(et.jsx)("span",{className:"material-icons",children:"file_download"}),"T\u1ea3i Excel"]})})]}),Object(et.jsxs)(Xn.a,{row:!0,children:[Object(et.jsx)(Vn.a,{className:"end",for:"getUser",sm:1,children:"M\xe3 b\u1ec7nh nh\xe2n"}),Object(et.jsx)(rn.a,{sm:2,className:"username",children:Object(et.jsx)(Nn.a,{type:"text",placeholder:"Nh\u1eadp m\xe3 b\u1ec7nh nh\xe2n",name:"customerCode",value:l,onChange:function(t){return e.setState({customerCode:t.target.value})}})})]}),Object(et.jsx)(Xn.a,{row:!0,children:Object(et.jsxs)(rn.a,{sm:12,children:[Object(et.jsxs)($t.a,{tabs:!0,children:[Object(et.jsx)(Zt.a,{children:Object(et.jsx)(en.a,{className:"transaction-nav pointer ".concat("1"===o?"active":""),onClick:function(){return e.setState({activeTab:"1"})},children:"Giao d\u1ecbch"})}),Object(et.jsx)(Zt.a,{children:Object(et.jsx)(en.a,{className:"transaction-nav pointer ".concat("2"===o?"active":""),onClick:function(){return e.setState({activeTab:"2"})},children:"\u0110\xe3 h\u1ee7y"})})]}),Object(et.jsxs)(gn.a,{activeTab:o,children:[Object(et.jsxs)(yn.a,{tabId:"1",children:[Object(et.jsx)(_i,{searchCustomer:this.searchCustomer,customerCode:l,isManager:this.state.isManager,items:h,amountRetail:O}),Object(et.jsxs)(sn.a,{className:"accouting-total title-card",children:[Object(et.jsx)(rn.a,{xs:"2",children:Object(et.jsx)("p",{children:"T\u1ed5ng ti\u1ec1n ATM: "})}),Object(et.jsxs)(rn.a,{xs:"10",children:[x?ct.formatPrice(x):0,"\u0111 "]}),Object(et.jsx)(rn.a,{xs:"2",children:Object(et.jsx)("p",{children:"T\u1ed5ng ti\u1ec1n thu: "})}),Object(et.jsxs)(rn.a,{xs:"10",children:[m?ct.formatPrice(m+x+O):0,"\u0111 "]}),Object(et.jsx)(rn.a,{xs:"2",children:Object(et.jsx)("p",{children:"T\u1ed5ng ti\u1ec1n ph\u1ea3i n\u1ed9p: "})}),Object(et.jsxs)(rn.a,{xs:"10",children:[m||O?ct.formatPrice(m+O):0,"\u0111"]})]})]}),Object(et.jsx)(yn.a,{tabId:"2",children:Object(et.jsx)(Ti,{customerCode:l,items:j})})]})]})}),Object(et.jsx)("div",{className:"divNull"})]})}}]),n}(ze),Ii=function(e){var t=e.items,n=e.orderInfo;return Object(c.useEffect)((function(){}),[t,n]),n&&n.length>0?Object(et.jsxs)(qn.a,{hover:!0,bordered:!0,children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"STT"}),Object(et.jsx)("th",{children:"T\xean d\u1ecbch v\u1ee5"}),Object(et.jsx)("th",{children:"\u0110\u01a1n gi\xe1"}),Object(et.jsx)("th",{children:"S\u1ed1 l\u01b0\u1ee3ng"})]})}),Object(et.jsx)("tbody",{children:null===n||void 0===n?void 0:n.filter((function(e){return e.quantity>0})).map((function(e,t){return Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{scope:"row",children:t+1}),Object(et.jsx)("td",{children:e.order.items[0].ref_value.name}),Object(et.jsx)("td",{children:Object(et.jsx)(Es.a,{thousandSeparator:!0,suffix:" VND",displayType:"text",value:Math.ceil(e.order.total)})}),Object(et.jsx)("td",{children:e.order.items[0].quantity})]},e.id)}))})]}):Object(et.jsxs)(qn.a,{hover:!0,bordered:!0,children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"STT"}),Object(et.jsx)("th",{children:"T\xean d\u1ecbch v\u1ee5"}),Object(et.jsx)("th",{children:"\u0110\u01a1n gi\xe1"}),Object(et.jsx)("th",{children:"S\u1ed1 l\u01b0\u1ee3ng"})]})}),Object(et.jsx)("tbody",{children:null===t||void 0===t?void 0:t.filter((function(e){return e.quantity>0})).map((function(e,t){return Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{scope:"row",children:t+1}),Object(et.jsx)("td",{children:e.ref_value.name}),Object(et.jsx)("td",{children:Object(et.jsx)(Es.a,{thousandSeparator:!0,suffix:" VND",displayType:"text",value:Math.ceil(e.price)})}),Object(et.jsx)("td",{children:e.quantity})]},e.id)}))})]})},Li=function(e){var t=JSON.parse(window.sessionStorage.getItem("user")),n=e.data,a=e.items?e.items:[],s=(e.date_pos,e.customerAddress),r=e.customerPhone,i=n.customerName,o=(n.nameService,n.customerBirthday),l=n.totalPrice,d=n.customerGender,u=n?n.customerCode.value:" ",h=new Date;Object(c.useEffect)((function(){u&&(qe.createEtccode(u.toString(),"customerCode"),qe.createEtccode(u,"customerCodeSub"))}),[u]);var j=0;a.filter((function(e){return e.quantity>0})).map((function(e){j+=e.origin_price}));var b;return b=parseInt(j)-parseInt(l.value),Object(et.jsx)(c.Fragment,{children:Object(et.jsx)("div",{className:"d-flex justify-content-center font-print mt-3",children:Object(et.jsx)("div",{className:"border border-secondary AccountingPrintingPreview",style:{display:"none"},children:Object(et.jsxs)("div",{className:"p-2 position-relative",id:"transactionPrint",children:[Object(et.jsxs)("div",{className:"receiptFromPrint",children:[Object(et.jsx)("div",{className:"absolute",children:Object(et.jsx)("div",{className:"text-right",children:Object(et.jsx)("canvas",{id:"customerCode",style:{height:"13mm"}})})}),Object(et.jsx)(tc,{}),Object(et.jsx)("h4",{className:"text-center font-weight-bold",children:Object(et.jsx)("b",{children:"BI\xcaN LAI THU TI\u1ec0N"})}),Object(et.jsx)("div",{className:"text-center",children:"Li\xean 1 : L\u01b0u t\u1ea1i qu\u1ea7y"}),Object(et.jsx)("div",{className:"text-center",children:Object(et.jsxs)("i",{children:[h.getHours()," gi\u1edd ",h.getMinutes()," ph\xfat,Ng\xe0y ",h.getDate()," Th\xe1ng ",h.getMonth()+1," N\u0103m ",h.getFullYear()]})}),Object(et.jsxs)("div",{className:"d-block",children:["H\u1ecd t\xean: ",Object(et.jsx)("b",{children:Object(et.jsx)("span",{className:"text-uppercase font-weight-bold",children:i.value})}),Object(et.jsxs)("span",{className:"ml-15",children:["NS:  ",Zn(o.value)," ","(".concat(Qn(Zn(o.value)),")")]}),Object(et.jsxs)("span",{className:"ml-15 ",children:["GT: ","male"===d.value?" Nam":" N\u1eef"," "]}),Object(et.jsxs)("span",{className:"ml-15",children:["S\u0110T:  ",r]}),Object(et.jsx)("br",{}),Object(et.jsxs)("span",{children:["\u0110\u1ecba ch\u1ec9: ",s]})]}),Object(et.jsx)("div",{className:"d-flex justify-content-between f-flex",children:Object(et.jsxs)("div",{children:["D\u1ecbch v\u1ee5 :",Object(et.jsxs)("b",{style:{fontSize:"13px"},children:[" ",a.filter((function(e){return e.quantity>0})).map((function(e){return e.ref_value.name})).join(",")]}),Object(et.jsx)("br",{}),"Gi\xe1 g\u1ed1c : ",Object(et.jsx)("b",{children:Object(et.jsxs)("span",{className:"font-weight-bold",children:[new Intl.NumberFormat("de-DE").format(j)," VN\u0110"]})}),Object(et.jsxs)("span",{className:"font-weight-bold ml-10",children:[" T\u1ed5ng ti\u1ec1n khuy\u1ebfn m\xe3i: ",Object(et.jsxs)("b",{children:[new Intl.NumberFormat("de-DE").format(b)," VN\u0110"]})," "]}),Object(et.jsx)("br",{})," ",Object(et.jsxs)("span",{className:"font-weight-bold",children:[" T\u1ed5ng s\u1ed1 ti\u1ec1n thanh to\xe1n: ",Object(et.jsxs)("b",{children:[new Intl.NumberFormat("de-DE").format(l.value)," VN\u0110"]})," "]}),Object(et.jsx)("br",{}),"Vi\u1ebft b\u1eb1ng ch\u1eef: ",Object(et.jsx)("span",{className:"font-weight-bold",children:Object(et.jsx)("b",{children:Wn(l.value||0)})})]})}),Object(et.jsx)("br",{}),Object(et.jsxs)("div",{className:"d-flex justify-content-between px-1 ",children:[Object(et.jsxs)("div",{className:"text-center mr-auto ml-5 nt",children:[Object(et.jsx)("b",{children:"Ng\u01b0\u1eddi n\u1ed9p ti\u1ec1n"}),Object(et.jsx)("br",{}),Object(et.jsx)("i",{children:"(k\xfd, h\u1ecd t\xean)"})]}),Object(et.jsxs)("div",{className:"text-center mr-5 tt",children:[Object(et.jsx)("strong",{children:"Ng\u01b0\u1eddi thu ti\u1ec1n"}),Object(et.jsx)("br",{}),Object(et.jsx)("i",{className:"mb-2",children:"(k\xfd, ghi r\xf5 h\u1ecd t\xean)"})," ",Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("b",{className:"mt-5",children:t.full_name})]})]})]}),Object(et.jsxs)("div",{className:"receiptFromPrint",children:[Object(et.jsx)("div",{className:"absolute",children:Object(et.jsx)("div",{className:"text-right",children:Object(et.jsx)("canvas",{id:"customerCodeSub",style:{height:"13mm"}})})}),Object(et.jsx)(tc,{}),Object(et.jsx)("h4",{className:"text-center font-weight-bold",children:Object(et.jsx)("b",{children:"BI\xcaN LAI THU TI\u1ec0N"})}),Object(et.jsx)("div",{className:"text-center",children:"Li\xean 2 : Giao cho b\u1ec7nh nh\xe2n"}),Object(et.jsx)("div",{className:"text-center",children:Object(et.jsxs)("i",{children:[h.getHours()," gi\u1edd ",h.getMinutes()," ph\xfat,Ng\xe0y ",h.getDate()," Th\xe1ng ",h.getMonth()+1," N\u0103m ",h.getFullYear()]})}),Object(et.jsxs)("div",{className:"d-block",children:["H\u1ecd t\xean: ",Object(et.jsx)("b",{children:Object(et.jsx)("span",{className:"text-uppercase font-weight-bold",children:i.value})}),Object(et.jsxs)("span",{className:"ml-15",children:["NS:  ",Zn(o.value)," ","(".concat(Qn(Zn(o.value)),")")]}),Object(et.jsxs)("span",{className:"ml-15 ",children:["GT: ","male"===d.value?" Nam":" N\u1eef"," "]}),Object(et.jsxs)("span",{className:"ml-15",children:["S\u0110T:  ",r]}),Object(et.jsx)("br",{}),Object(et.jsxs)("span",{children:["\u0110\u1ecba ch\u1ec9: ",s]})]}),Object(et.jsx)("div",{className:"d-flex justify-content-between f-flex",children:Object(et.jsxs)("div",{children:["D\u1ecbch v\u1ee5 :",Object(et.jsxs)("b",{style:{fontSize:"13px"},children:[" ",a.filter((function(e){return e.quantity>0})).map((function(e){return e.ref_value.name})).join(",")]}),Object(et.jsx)("br",{}),"Gi\xe1 g\u1ed1c : ",Object(et.jsx)("b",{children:Object(et.jsxs)("span",{className:"font-weight-bold",children:[new Intl.NumberFormat("de-DE").format(j)," VN\u0110"]})}),Object(et.jsxs)("span",{className:"font-weight-bold ml-10",children:[" T\u1ed5ng ti\u1ec1n khuy\u1ebfn m\xe3i: ",Object(et.jsxs)("b",{children:[new Intl.NumberFormat("de-DE").format(b)," VN\u0110"]})," "]}),Object(et.jsx)("br",{})," ",Object(et.jsxs)("span",{className:"font-weight-bold",children:[" T\u1ed5ng s\u1ed1 ti\u1ec1n thanh to\xe1n: ",Object(et.jsxs)("b",{children:[new Intl.NumberFormat("de-DE").format(l.value)," VN\u0110"]})," "]}),Object(et.jsx)("br",{}),"Vi\u1ebft b\u1eb1ng ch\u1eef: ",Object(et.jsx)("span",{className:"font-weight-bold",children:Object(et.jsx)("b",{children:Wn(l.value||0)})})]})}),Object(et.jsx)("br",{}),Object(et.jsxs)("div",{className:"d-flex justify-content-between px-1 ",children:[Object(et.jsxs)("div",{className:"text-center mr-auto ml-5 nt",children:[Object(et.jsx)("b",{children:"Ng\u01b0\u1eddi n\u1ed9p ti\u1ec1n"}),Object(et.jsx)("br",{}),Object(et.jsx)("i",{children:"(k\xfd, h\u1ecd t\xean)"})]}),Object(et.jsxs)("div",{className:"text-center mr-5 tt",children:[Object(et.jsx)("strong",{children:"Ng\u01b0\u1eddi thu ti\u1ec1n"}),Object(et.jsx)("br",{}),Object(et.jsx)("i",{className:"mb-2",children:"(k\xfd, ghi r\xf5 h\u1ecd t\xean)"})," ",Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("br",{}),Object(et.jsx)("b",{className:"mt-1",children:t.full_name})]})]})]})]})})})})},Ei=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).setBookList=function(e){c.setState({bookList:e.filter((function(e){return"active"===e.status}))}),c.setState({bookId:e[0].id})},c.setPaymentList=function(e){c.setState({paymentList:e})},c.getAllBookList=function(){Ci.getBookList("active").then((function(e){c.setBookList(e.data)}))},c.setIsOrderFound=function(e){c.setState({isOrderFound:e})},c.setIsOpenFound=function(e){c.setState({isShowFound:e})},c.setIsPayment=function(e){c.setState({isPayment:e})},c.setNotiMessage=function(e){c.setState({notiMessage:e})},c.toggleUser=function(){c.setState({dropdownBook:!c.state.dropdownBook})},c.resetForm=function(){c._fillForm({cm_code:"",customerCode:"",orderCode:"",customerName:"",customerBirthday:"",totalPrice:"",nameService:"",priceService:"",customerGender:"",cTime:"",orderStatus:"",bookId:""}),c.setState({customerAddress:"",items:[],orderList:[],totalList:0,itemNew:[],orderInfoNew:[],checkItems:[],discount:0}),c.setIsOrderFound(!1)},c.findOrderByCode=function(e){return Ci.getOrder(e)},c.findOrderByCmCode=function(e){return Ci.getListTransaction(e)},c.onChangeCmCode=function(e){c.setState({textCmCode:e.target.value})},c.handleSearchCmCode=function(){var e=c.state,t=e.textCmCode,n=e.totalFirst;c.resetForm();var a=[];t.length>11?c.findOrderByCmCode(t).then((function(e){var s=e.data,r=e.data.filter((function(e){return"buy"!=e.type}));c.setState({orderInfoNew:r,textCmCode:"",searchCmCode:t});var i=s[0].order.customer.contacts[0].address,o=i.street?"".concat(i.street):"",l=i.ward?"  -".concat(i.ward):"",d=i.district?"-".concat(i.district):"",u=i.province?"-".concat(i.province):"",h="".concat(o).concat(l).concat(d).concat(u);(i.province.length>0||i.street.length>0)&&c.setState({customerAddress:h,customerPhone:s[0].order.customer.contacts[0].phone}),c._fillForm({customerCode:s[0].order.customer.code,customerName:s[0].order.customer.full_name,customerBirthday:s[0].order.customer.birthday,totalPrice:"",orderId:"",customerGender:s[0].order.customer.gender,nameService:"",priceService:"",cTime:new Date(s[0].order.ctime).toLocaleString(),orderStatus:s[0].order.status});var j=[];r.map((function(e){e.order.items.map((function(e){j.push(e)}))})),j.map((function(e){n+=e.price}));var b=100*r[0].order.items[0].discount;a.length>0?r.map((function(e,t){a.map((function(t,n){e.order_id!==t.id&&a.push(e.order)}))})):r.map((function(e,t){a.push(e.order)})),c.setState({discount:b,orderInfo:s,items:j,orderList:a,totalFirst:n}),c.setIsOrderFound(!0),c.setIsOpenFound(!0)})).catch((function(e){console.log(e),c.setNotiMessage("Kh\xf4ng t\xecm th\u1ea5y h\xf3a \u0111\u01a1n!")})):c.setNotiMessage("Vui l\xf2ng nh\u1eadp nh\u1eadp \u0111\u1ee7 m\xe3 b\u1ec7nh nh\xe2n!")},c.handleSearch=function(e){c.findOrderByCode(e).then((function(t){var n=t.data,a=n.view_order.customer.contacts[0].address,s=a.street?"".concat(a.street):"",r=a.ward?"  -".concat(a.ward):"",i=a.district?"-".concat(a.district):"",o=a.province?"-".concat(a.province):"",l="".concat(s).concat(r).concat(i).concat(o);(a.province.length>0||a.street.length>0)&&c.setState({customerAddress:l,searchOrderCode:e}),c.setState({date_pos:t.data.job.date_pos,customerPhone:n.view_order.customer.contacts[0].phone}),c._fillForm({customerCode:n.view_order.customer.code,orderCode:n.view_order.code,customerName:n.view_order.customer.full_name,customerBirthday:n.view_order.customer.birthday,totalPrice:n.view_order.total,orderId:n.view_order.id,customerGender:n.view_order.customer.gender,nameService:n.view_order.items[0].ref_value.name,priceService:n.view_order.items[0].ref_value.price,cTime:new Date(n.view_order.ctime).toLocaleString("en-GB"),orderStatus:n.view_order.status}),c.setState({items:n.view_order.items}),c.setIsOrderFound(!0)})).catch((function(e){console.log(e),c.setNotiMessage("Kh\xf4ng t\xecm th\u1ea5y h\xf3a \u0111\u01a1n!")}))},c.handleChangeNote=function(e){c.setState({note:e.target.value})},c.handleChange=function(e){var t=c.state.bookList.filter((function(t){return t.id==e.target.value}));0!=t.length&&c.setState({currentBook:t[0]})},c.handleChangePaymentMethods=function(e){var t=parseInt(e.target.value);c.setState({currentPaymentMethods:c.state.paymentList[t].method})},c.handleSubmit=Object(j.a)(h.a.mark((function e(){var t,n,a,s,r,i,o,l,d,u,j,b,m;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.state.isOrderFound){e.next=3;break}return c.setNotiMessage("B\u1ea1n ch\u01b0a ch\u1ecdn h\xf3a \u0111\u01a1n \u0111\u1ec3 thanh to\xe1n!"),e.abrupt("return");case 3:t=c.state,n=t.orderList,a=t.searchCmCode,s=t.searchOrderCode,r=c.state.form,i=r.orderId,o=r.totalPrice,l=c.state,d=l.bookId,u=l.currentPaymentMethods,j=l.note,a.length>0&&(b=[],n.forEach((function(e,t){var n={ref:"order",ref_id:e.id,book_id:d,amount:e.total,type:u,note:j};c.state.form.isPayment&&c.setNotiMessage(""),b.push(Ci.postTransaction(n))})),Promise.all(b).then((function(e){c.print("transactionPrint"),c.resetForm()})).catch((function(e){console.log(e)}))),s.length>0&&(m={ref:"order",ref_id:i.value,book_id:d,amount:o.value,type:u,note:j},c.state.form.isPayment&&c.setNotiMessage(""),Ci.postTransaction(m).then((function(e){c.setNotiMessage("Thanh to\xe1n th\xe0nh c\xf4ng!"),c.print("transactionPrint"),c.resetForm()})).catch((function(e){console.log(e)})));case 8:case"end":return e.stop()}}),e)}))),c.onClickCheckBox=function(e,t){var n=c.state.checkItems;0==t.quantity?0==e.target.checked?(n.splice(n.findIndex((function(e){return e.id==t.id})),1),c.setState({checkItems:n})):(n.push(t),c.setState({checkItems:n})):1==e.target.checked?(n.splice(n.findIndex((function(e){return e.id==t.id})),1),c.setState({checkItems:n})):(n.push(t),c.setState({checkItems:n}))},c.setSubmmitServiceList=function(){var e=c.state,t=e.checkItems,n=e.orderList,a=c.state.form.totalPrice;if(t.length>0){var s=[];t.map((function(e){e.quantity>0?s.push({id:e.id,quantity:0}):s.push({id:e.id,quantity:1})})),Ci.postEditOrder(s).then((function(e){e.data.forEach((function(e,t){n.forEach((function(t,c){e.id===t.id&&(n[c]=e)}))}));var t=[],s=0;n.map((function(e){s+=e.total,e.items.map((function(e){t.push(e)}))})),a.value=s,c.setState({checkItems:[],orderList:n,items:t,totalPrice:a})})).catch((function(e){console.log(e)}))}else{var r=c.state.items,i=[],o=0;(i=r.filter((function(e){return 1==e.quantity}))).map((function(e){e.quantity>0&&(o+=e.price)})),a.value=o,c.setState({items:i,totalPrice:a})}c.setIsOpenFound(!1)},c.doneAlert=function(){c.setNotiMessage("")},c.print=function(e){Ue()({printable:e,type:"html",targetStyles:["*"],style:"@page {\n          size: Letter landscape;\n        }",header:null,footer:null}),c.setNotiMessage("Thanh to\xe1n th\xe0nh c\xf4ng!")},c.state={bookList:[],paymentList:[{name:"Ti\u1ec1n m\u1eb7t",method:"cash"},{name:"Th\u1ebb ATM",method:"other"}],orderInfoNew:[],currentPaymentMethods:"cash",note:"  ",isPayment:!0,notiMessage:"",date_pos:" ",textCmCode:"",form:c._getInitFormData({cm_code:"",customerCode:"",orderCode:"",customerName:"",customerBirthday:"",totalPrice:0,nameService:"",priceService:"",customerGender:"",cTime:"",orderStatus:"",bookId:""}),totalFirst:0,checkItems:[],searchOrderCode:"",searchCmCode:"",isOrderFound:!1,isShowFound:!1},c}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.getAllBookList()}},{key:"render",value:function(){var e=this,t=this.state.form,n=t.orderCode,c=t.customerName,a=t.customerCode,s=t.customerBirthday,r=t.totalPrice,i=t.customerGender,o=t.cTime,l=t.orderStatus,d=t.note,u=(t.cm_code,this.state),h=u.notiMessage,j=u.customerAddress,b=u.date_pos,m=u.customerPhone,x=(u.discount,u.orderInfoNew),O=u.textCmCode,p=this.state.items?this.state.items:[],v=0;p.filter((function(e){return e.quantity>0})).map((function(e){v+=e.origin_price}));var g;return g=parseInt(v)-parseInt(r.value),Object(et.jsxs)(rn.a,{xs:{size:10,offset:1},children:[Object(et.jsx)(at,{message:h,done:this.doneAlert}),Object(et.jsxs)(rn.a,{sx:12,children:[Object(et.jsxs)(sn.a,{className:"customCard naV",children:[Object(et.jsxs)(rn.a,{sm:4,className:" pl-0 library-book",children:[Object(et.jsxs)(Vn.a,{sm:2,className:"title-card p-0",href:"/",children:[Object(et.jsx)("span",{className:"material-icons",children:"library_books"})," S\u1ed5 thu "]}),Object(et.jsx)(rn.a,{sm:4,children:Object(et.jsx)(Nn.a,{type:"select",name:"select",onChange:this.handleChange,children:this.state.bookList.map((function(e){return Object(et.jsx)("option",{value:e.id,children:e.name},e.id)}))})})]}),Object(et.jsxs)(rn.a,{sm:4,className:"library-book",children:[Object(et.jsxs)(Vn.a,{sm:4,className:"title-card order-code",children:[Object(et.jsx)("span",{className:"material-icons",children:"playlist_add_check"}),"M\xe3 b\u1ec7nh nh\xe2n"]}),Object(et.jsx)(rn.a,{sm:3,className:"input-code",children:Object(et.jsxs)(Ds.a,{children:[Object(et.jsx)(Nn.a,{autoFocus:!0,onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"1",name:"cm_code",className:"inputAcc",value:O,onChange:function(t){e.onChangeCmCode(t)},type:"text",id:"cm_code",placeholder:"Nh\u1eadp m\xe3 b\u1ec7nh nh\xe2n",required:!0}),Object(et.jsx)(Is.a,{addonType:"append",children:Object(et.jsx)(Ze.a,{onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"2",className:"SearchReceipt",color:"primary",onClick:function(){e.handleSearchCmCode()},children:Object(et.jsx)("span",{className:"material-icons",children:"search"})})})]})})]}),Object(et.jsxs)(rn.a,{sm:4,className:"library-book",children:[Object(et.jsxs)(Vn.a,{sm:3,className:"title-card order-code",children:[Object(et.jsx)("span",{className:"material-icons",children:"playlist_add_check"}),"M\xe3 h\xf3a \u0111\u01a1n"]}),Object(et.jsx)(rn.a,{sm:3,className:"input-code",children:Object(et.jsxs)(Ds.a,{children:[Object(et.jsx)(Nn.a,{onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"2",name:"orderCode",className:"inputAcc",onChange:function(t){e._setValue(t,"orderCode")},type:"text",id:"orderCode",placeholder:"Nh\u1eadp m\xe3 h\xf3a \u0111\u01a1n",required:!0}),Object(et.jsx)(Is.a,{addonType:"append",children:Object(et.jsx)(Ze.a,{onKeyDown:function(e){return ct.onKeyDown(e)},className:"SearchReceipt","data-index":"3",color:"primary",onClick:function(){e.handleSearch(n.value)},children:Object(et.jsx)("span",{className:"material-icons",children:"search"})})})]})})]})]}),Object(et.jsxs)(sa.a,{className:"accounting-form",children:[Object(et.jsx)(Xn.a,{className:"customCard min-h-40 customer-form",children:Object(et.jsx)("div",{className:"background",children:Object(et.jsx)(uc,{data:{code:a.value,full_name:c.value,birthday:s.value,gender:i.value,address:j}})})}),Object(et.jsxs)(Xn.a,{className:"customCard info-form",children:[Object(et.jsxs)("p",{className:"title-card info-1",children:[Object(et.jsx)("span",{className:"material-icons",children:"description"})," Th\xf4ng tin \u0111\u01a1n h\xe0ng"]}),Object(et.jsx)(Xn.a,{row:!0,children:Object(et.jsx)(rn.a,{sm:11,className:"table-acc",children:Object(et.jsx)(Ii,{items:this.state.items})})}),Object(et.jsxs)(Xn.a,{row:!0,className:"sum-moneyText p-1r",children:[Object(et.jsx)(Vn.a,{for:"wordPrice",sm:4,children:"G\xeda g\u1ed1c"}),Object(et.jsx)(rn.a,{sm:6,className:"dflex-center",children:Object(et.jsx)(Es.a,Object(f.a)({className:"inputAc",value:v,name:"totalPrice",thousandSeparator:!0,suffix:" VN\u0110",displayType:"text"},"value",Math.ceil(v)))})]}),Object(et.jsxs)(Xn.a,{row:!0,className:"sum-moneyText p-1r",children:[Object(et.jsx)(Vn.a,{for:"wordPrice",sm:4,children:"T\u1ed5ng ti\u1ec1n khuy\u1ebfn m\xe3i"}),Object(et.jsx)(rn.a,{sm:6,className:"dflex-center",children:Object(et.jsx)(Es.a,Object(f.a)({className:"inputAc",value:g,name:"discount_price",thousandSeparator:!0,suffix:" VN\u0110",displayType:"text"},"value",Math.ceil(g)))})]}),Object(et.jsxs)(Xn.a,{row:!0,className:"sum-moneyNumber p-1r",children:[Object(et.jsx)(Vn.a,{for:"totalPrice",sm:4,children:"T\u1ed5ng s\u1ed1 ti\u1ec1n thanh to\xe1n(b\u1eb1ng s\u1ed1)"}),Object(et.jsx)(rn.a,{sm:6,className:"dflex-center",children:Object(et.jsx)(Es.a,Object(f.a)({className:"inputAc",value:r.value,onChange:function(t){e._setValue(t,"totalPrice")},name:"totalPrice",thousandSeparator:!0,suffix:" VND",displayType:"text"},"value",Math.ceil(r.value)))})]}),Object(et.jsxs)(Xn.a,{row:!0,className:"sum-moneyText p-1r",children:[Object(et.jsx)(Vn.a,{for:"wordPrice",sm:4,children:"T\u1ed5ng s\u1ed1 ti\u1ec1n(b\u1eb1ng ch\u1eef)"}),Object(et.jsx)(rn.a,{sm:6,className:"dflex-center",children:Object(et.jsx)(Nn.a,{className:"inputAcc",readOnly:!0,type:"text",name:"wordPrice",id:"wordPrice",value:(r.value?Wn(r.value):"").toUpperCase()})})]}),Object(et.jsxs)(Xn.a,{row:!0,className:"time-create p-1r",children:[Object(et.jsx)(Vn.a,{for:"getTime",sm:4,children:"Th\u1eddi gian t\u1ea1o \u0111\u01a1n"}),Object(et.jsx)(rn.a,{sm:6,className:"dflex-center",children:Object(et.jsx)(Nn.a,{type:"text",name:"totalPrice",className:"inputAcc",value:o.value,onChange:function(t){e._setValue(t,"getTime")}})})]}),Object(et.jsxs)(Xn.a,{row:!0,className:"status-acc p-1r",children:[Object(et.jsx)(Vn.a,{for:"getStatus",sm:4,children:"Tr\u1ea1ng th\xe1i thanh to\xe1n"}),Object(et.jsx)(rn.a,{sm:6,className:"dflex-center",children:Object(et.jsx)(Nn.a,{type:"text",name:"status",className:"inputAcc",onChange:function(t){e._setValue(t,"status")}})})]})]}),Object(et.jsxs)(Xn.a,{row:!0,className:"customCard money-form ",children:[Object(et.jsxs)(Vn.a,{sm:3,className:"title-card",children:[Object(et.jsx)("span",{className:"material-icons",children:"monetization_on"})," Thanh to\xe1n h\xf3a \u0111\u01a1n"]}),Object(et.jsx)(rn.a,{sm:2,children:Object(et.jsx)(Nn.a,{onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"4",type:"select",name:"select",onChange:this.handleChangePaymentMethods,children:this.state.paymentList.map((function(e,t){return Object(et.jsx)("option",{value:t,children:e.name},e.method)}))})}),Object(et.jsx)(rn.a,{sm:5,children:Object(et.jsx)(Nn.a,{value:d,onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"5",onChange:this.handleChangeNote,type:"text",placeholder:"\u0111i\u1ec1n th\xf4ng tin giao d\u1ecbch"})}),Object(et.jsxs)(rn.a,{sm:2,className:"end pl-0",children:[Object(et.jsxs)(Ze.a,{onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"6",onClick:this.handleSubmit,disabled:l.value==I,children:[Object(et.jsx)(Ls.a,{color:"primary",className:this.state.submitLoading?"d-inline-block":"d-none"}),"Thanh To\xe1n"]})," "]})]})]})]}),Object(et.jsxs)(We.a,{isOpen:this.state.isShowFound,children:[Object(et.jsx)(Ye.a,{children:"Danh s\xe1ch d\u1ecbch v\u1ee5 thanh to\xe1n"}),Object(et.jsx)(Qe.a,{children:Object(et.jsxs)(qn.a,{children:[Object(et.jsx)("thead",{children:Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{children:"Stt"}),Object(et.jsx)("th",{children:"T\xf9y ch\u1ecdn"}),Object(et.jsx)("th",{children:"T\xean d\u1ecbch v\u1ee5"}),Object(et.jsx)("th",{children:"S\u1ed1 l\u01b0\u1ee3ng"}),Object(et.jsx)("th",{children:"Gi\xe1"})]})}),x.map((function(t,n){return Object(et.jsxs)("tbody",{children:[Object(et.jsx)("tr",{children:t.order.items.length>0?Object(et.jsx)("td",{colSpan:4,children:t.location.name}):null}),t.order.items.map((function(t,c){return Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{children:c+1}),Object(et.jsx)("td",{children:Object(et.jsx)(Nn.a,{type:"checkbox",defaultChecked:1==t.quantity,onClick:function(a){return e.onClickCheckBox(a,t,n,c)}})}),Object(et.jsx)("td",{children:t.ref_value.name}),Object(et.jsx)("td",{children:t.quantity}),Object(et.jsx)("td",{children:t.ref_value.price})]},t.id)}))]})}))]})}),Object(et.jsxs)($e.a,{children:[Object(et.jsx)(Ze.a,{onClick:function(){e.setSubmmitServiceList()},children:"Ho\xe0n th\xe0nh"}),Object(et.jsx)(Ze.a,{onClick:function(){e.setIsOpenFound(!1),e.resetForm()},color:"danger",children:"\u0110\xf3ng"})]})]}),Object(et.jsx)(Li,{data:this.state.form,items:this.state.items,customerAddress:j,customerPhone:m,date_pos:b})]})}}]),n}(ze),Pi=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;Object(l.a)(this,n),(c=t.call(this,e)).handleSearch=function(){var e=c.state.form,t=e.start_date,n=e.end_date;c.getListTransaction(ke,t.value,n.value)},c.getUserList=function(){Ci.getUserList().then((function(e){e.data.unshift({id:ke,full_name:De}),c.setState({userList:e.data})}))},c.setNotiMessage=function(e){c.setState({notiMessage:e})},c.isRole=function(){if(Me.isRole(g.ADMIN.value))c.setState({isManager:!0});else{var e=Me.userInfo.id;c.setState({selectedUser:e})}};var a=(new Date).toISOString().substr(0,10);return c.state={listStatistical:[],isManager:!1,userList:[],notiMessage:"",selectedUser:"",show:!1,activeTab:"1",form:c._getInitFormData({start_date:a,end_date:a})},c}return Object(b.a)(n,[{key:"getListTransaction",value:function(e,t,n){var c=this;Ci.getHistoryTransactionByTimeAndUserID(e,t,n).then((function(e){var t=e.data.records||[],n=c.state,a=n.userList,s=n.isManager,r=[g.DOCTOR.value,g.TEST_OPERATOR.value,g.ENT.value,g.ULTRASOUND.value,g.XRAY.value,g.ADMIN.value],i=[],o=[];s?t.map((function(e){a.forEach((function(t){var n,c;(null===(n=e.job_step)||void 0===n?void 0:n.created_by)!==t.id&&(null===(c=e.job_step)||void 0===c?void 0:c.modified_by)!==t.id||t.roles.filter((function(e){return r.includes(e)})).length>0&&!i.includes(t.id)&&i.push(t.id)}))})):i.push(c.state.selectedUser),i.forEach((function(e){var n={userId:e,exam:0,test:{perform:0,suggest:0,total:0},xray:{perform:0,suggest:0,total:0},ent:{perform:0,suggest:0,total:0},ultrasound:{perform:0,suggest:0,total:0}};t.forEach((function(t){var c,a,s;if((null===(c=t.job_step)||void 0===c?void 0:c.type)===H&&e===(null===(a=t.job_step)||void 0===a?void 0:a.modified_by)&&n.exam++,(null===(s=t.job_step)||void 0===s?void 0:s.type)===K){var r,i,o,l,d,u,h,j,b,m,x,O;if((null===(r=t.order)||void 0===r||null===(i=r.items[0])||void 0===i||null===(o=i.ref_value)||void 0===o?void 0:o.type)===M){var p,f,v;if(e===(null===(p=t.job_step)||void 0===p?void 0:p.created_by))n.test.suggest++,n.test.total+=null===(v=t.order)||void 0===v?void 0:v.total;e===(null===(f=t.job_step)||void 0===f?void 0:f.modified_by)&&n.test.perform++}if((null===(l=t.order)||void 0===l||null===(d=l.items[0])||void 0===d||null===(u=d.ref_value)||void 0===u?void 0:u.type)===F){var g,y,N;if(e===(null===(g=t.job_step)||void 0===g?void 0:g.created_by))n.ent.suggest++,n.ent.total+=null===(N=t.order)||void 0===N?void 0:N.total;e===(null===(y=t.job_step)||void 0===y?void 0:y.modified_by)&&n.ent.perform++}if((null===(h=t.order)||void 0===h||null===(j=h.items[0])||void 0===j||null===(b=j.ref_value)||void 0===b?void 0:b.type)===A){var S,C,_;if(e===(null===(S=t.job_step)||void 0===S?void 0:S.created_by))n.xray.suggest++,n.xray.total+=null===(_=t.order)||void 0===_?void 0:_.total;e===(null===(C=t.job_step)||void 0===C?void 0:C.modified_by)&&n.xray.perform++}if((null===(m=t.order)||void 0===m||null===(x=m.items[0])||void 0===x||null===(O=x.ref_value)||void 0===O?void 0:O.type)===B){var T,w,k;if(e===(null===(T=t.job_step)||void 0===T?void 0:T.created_by))n.ultrasound.suggest++,n.ultrasound.total+=null===(k=t.order)||void 0===k?void 0:k.total;e===(null===(w=t.job_step)||void 0===w?void 0:w.modified_by)&&n.ultrasound.perform++}}})),o.push(n)})),c.setState({listStatistical:o})})).catch((function(e){console.log(e),c.setNotiMessage("Kh\xf4ng t\xecm th\u1ea5y c\xe1c l\u1ecbch s\u1eed giao d\u1ecbch!")}))}},{key:"componentDidMount",value:function(){this.isRole(),this.getListTransaction(ke),this.getUserList()}},{key:"render",value:function(){var e=this,t=this.state.form,n=t.start_date,c=t.end_date,a=this.state,s=a.notiMessage,r=a.userList,i=a.activeTab,o=a.listStatistical.map((function(e,t){var n=r.find((function(t){return t.id===e.userId})),c="";return Object.values(g).map((function(e,t){e.value===n.roles[0]&&(c=e.name)})),Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{children:t+1}),Object(et.jsx)("td",{children:n.full_name}),Object(et.jsx)("td",{children:c}),Object(et.jsx)("td",{children:e.exam}),Object(et.jsx)("td",{children:e.test.perform}),Object(et.jsx)("td",{children:e.test.suggest}),Object(et.jsx)("td",{children:ct.formatPrice(e.test.total)}),Object(et.jsx)("td",{children:e.ent.perform}),Object(et.jsx)("td",{children:e.ent.suggest}),Object(et.jsx)("td",{children:ct.formatPrice(e.ent.total)}),Object(et.jsx)("td",{children:e.xray.perform}),Object(et.jsx)("td",{children:e.xray.suggest}),Object(et.jsx)("td",{children:ct.formatPrice(e.xray.total)}),Object(et.jsx)("td",{children:e.ultrasound.perform}),Object(et.jsx)("td",{children:e.ultrasound.suggest}),Object(et.jsx)("td",{children:ct.formatPrice(e.ultrasound.total)}),Object(et.jsxs)("td",{children:[ct.formatPrice(e.test.total+e.xray.total+e.ent.total+e.ultrasound.total),"\u0111"]})]})}));return Object(et.jsxs)("div",{className:"Transaction-Form ",children:[Object(et.jsx)(at,{message:s,done:function(){return e.setNotiMessage("")}}),Object(et.jsxs)(Xn.a,{row:!0,children:[Object(et.jsx)(rn.a,{sm:1,className:"end",children:Object(et.jsx)("label",{htmlFor:"start_date",children:"T\u1eeb:"})}),Object(et.jsx)(rn.a,{sm:2,children:Object(et.jsx)(Nn.a,{onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"1",autoFocus:!0,type:"date",value:n&&n.value,onChange:function(t){e._setValue(t,"start_date")},required:!0})}),Object(et.jsx)(rn.a,{sm:1,className:"end",children:Object(et.jsx)("label",{htmlFor:"end_date",children:"\u0110\u1ebfn:"})}),Object(et.jsx)(rn.a,{sm:2,children:Object(et.jsx)(Nn.a,{onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"2",type:"date",value:c&&c.value,onChange:function(t){e._setValue(t,"end_date")},required:!0})}),Object(et.jsx)(rn.a,{sm:1,className:"end",children:Object(et.jsx)(Ze.a,{color:"primary",onKeyDown:function(e){return ct.onKeyDown(e)},"data-index":"4",onClick:function(){e.handleSearch()},children:"Ch\u1ecdn"})})]}),Object(et.jsx)(Xn.a,{row:!0,children:Object(et.jsxs)(rn.a,{sm:12,children:[Object(et.jsx)($t.a,{tabs:!0,children:Object(et.jsx)(Zt.a,{children:Object(et.jsx)(en.a,{className:"transaction-nav pointer ".concat("1"===i?"active":""),onClick:function(){return e.setState({activeTab:"1"})},children:"Th\u1ed1ng k\xea"})})}),Object(et.jsxs)(gn.a,{activeTab:i,children:[Object(et.jsx)(yn.a,{tabId:"1",children:Object(et.jsxs)(qn.a,{children:[Object(et.jsxs)("thead",{children:[Object(et.jsxs)("tr",{children:[Object(et.jsx)("th",{rowSpan:"2",children:"#"}),Object(et.jsx)("th",{rowSpan:"2",children:"T\xean nh\xe2n vi\xean"}),Object(et.jsx)("th",{rowSpan:"2",children:"Vai tr\xf2"}),Object(et.jsx)("th",{rowSpan:"2",children:"Kh\xe1m"}),Object(et.jsx)("th",{colSpan:"3",children:"X\xe9t nghi\u1ec7m"}),Object(et.jsx)("th",{colSpan:"3",children:"N\u1ed9i soi"}),Object(et.jsx)("th",{colSpan:"3",children:"X quang"}),Object(et.jsx)("th",{colSpan:"3",children:"Si\xeau \xe2m"}),Object(et.jsx)("th",{rowSpan:"2",children:"T\u1ed5ng"})]}),Object(et.jsxs)("tr",{children:[Object(et.jsx)("td",{children:"Th\u1ef1c hi\u1ec7n"}),Object(et.jsx)("td",{children:"G\u1ee3i \xfd"}),Object(et.jsx)("td",{children:"T\u1ed5ng ti\u1ec1n"}),Object(et.jsx)("td",{children:"Th\u1ef1c hi\u1ec7n"}),Object(et.jsx)("td",{children:"G\u1ee3i \xfd"}),Object(et.jsx)("td",{children:"T\u1ed5ng ti\u1ec1n"}),Object(et.jsx)("td",{children:"Th\u1ef1c hi\u1ec7n"}),Object(et.jsx)("td",{children:"G\u1ee3i \xfd"}),Object(et.jsx)("td",{children:"T\u1ed5ng ti\u1ec1n"}),Object(et.jsx)("td",{children:"Th\u1ef1c hi\u1ec7n"}),Object(et.jsx)("td",{children:"G\u1ee3i \xfd"}),Object(et.jsx)("td",{children:"T\u1ed5ng ti\u1ec1n"})]})]}),Object(et.jsx)("tbody",{children:o})]})}),Object(et.jsx)(yn.a,{tabId:"2",children:"2"})]})]})}),Object(et.jsx)("div",{className:"divNull"})]})}}]),n}(ze),Ri=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.match.path;return Object(et.jsx)("div",{className:"Transaction",children:Object(et.jsxs)(r.d,{children:[Object(et.jsx)(r.b,{path:"".concat(e,"/order"),component:Ei}),Object(et.jsx)(r.b,{path:"".concat(e,"/transaction"),component:Di}),Object(et.jsx)(r.b,{path:"".concat(e,"/statistical"),component:Pi})]})})}}]),n}(c.Component),Mi={BASE:"/job",GET_LIST_LOCATION:"/location/list",GET_CUS_BY_LOC:"/step/list",GET_XRAY_BY_LOC:"/location/service/list",GET_XRAY_INDEX_LIST_BY_SER_ID:"/service/service/get",UPDATE_XRAY_RESULT:"/step/finish",TAKE_SAMPLE:"/step/update"},Bi=new(function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).userList=[],e.selectedUser=-1,e.takeSample=function(){var e=Object(j.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(Mi.BASE).concat(Mi.TAKE_SAMPLE),e.next=3,Ee.post(n,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n._instance?Object(m.a)(e,n._instance):(n._instance=Object(x.a)(e),e)}return Object(b.a)(n,[{key:"location",get:function(){return JSON.parse(sessionStorage.getItem(P)||"{}")},set:function(e){sessionStorage.setItem(P,JSON.stringify(e))}},{key:"getCustomerByLocationAndStatus",value:function(){var e=Object(j.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(Mi.BASE).concat(Mi.GET_CUS_BY_LOC),e.next=3,Ee.get(n,t);case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getXrayByLocation",value:function(){var e=Object(j.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(Mi.GET_EXAM_BY_LOC),e.next=3,Ee.get(n,t);case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getXrayIndexListByServiceID",value:function(){var e=Object(j.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(Mi.GET_XRAY_INDEX_LIST_BY_SER_ID),e.next=3,Ee.get(n,t);case 3:return e.abrupt("return",e.sent.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getListLocation",value:function(){var e=Object(j.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee.get("".concat(Mi.GET_LIST_LOCATION));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"finishXrayResult",value:function(e){return Ee.post("".concat(Mi.BASE).concat(Mi.UPDATE_XRAY_RESULT),e)}}]),n}(d)),Ai=[{code:"cotay001",name:"X \u2013 QUANG KH\u1edaP C\u1ed4 TAY",results:{description:"- Ch\u01b0a th\u1ea5y h\xecnh \u1ea3nh t\u1ed5n th\u01b0\u01a1ng x\u01b0\u01a1ng c\u1ed5 tay. \n- B\u1edd x\u01b0\u01a1ng nh\u1eb5n, kh\xf4ng h\u1eb9p khe kh\u1edbp.  \n  - Nh\u1eadn x\xe9t kh\xe1c:",conclusion:"Hi\u1ec7n t\u1ea1i ch\u01b0a th\u1ea5y h\xecnh \u1ea3nh b\u1ea5t th\u01b0\u1eddng tr\xean phim ch\u1ee5p xquang."}},{code:"cotsongco001",name:"X \u2013 QUANG C\u1ed8T S\u1ed0NG C\u1ed4",results:{description:"- C\u1ed9t s\u1ed1ng c\u1ed5 c\xf3 \u0111\u01b0\u1eddng cong sinh l\xfd b\xecnh th\u01b0\u1eddng.\n- Kh\xf4ng th\u1ea5y l\xfan x\u1eb9p, tr\u01b0\u1ee3t th\xe2n \u0111\u1ed1t s\u1ed1ng.\n- M\u1ecfm ngang, m\u1ecfm gai c\xe1c \u0111\u1ed1t s\u1ed1ng kh\xf4ng th\u1ea5y b\u1ea5t th\u01b0\u1eddng.\n- Kh\xf4ng th\u1ea5y h\xecnh \u1ea3nh gai x\u01b0\u01a1ng, c\u1ea7u x\u01b0\u01a1ng.  \n  - Nh\u1eadn x\xe9t kh\xe1c:",conclusion:"Hi\u1ec7n t\u1ea1i ch\u01b0a th\u1ea5y h\xecnh \u1ea3nh b\u1ea5t th\u01b0\u1eddng tr\xean phim ch\u1ee5p xquang."}},{code:"thatlung001",name:"X \u2013 QUANG C\u1ed8T S\u1ed0NG TH\u1eaeT L\u01afNG",results:{description:"-C\u1ed9t s\u1ed1ng th\u1eaft l\u01b0ng c\xf3 \u0111\u01b0\u1eddng cong sinh l\xfd b\xecnh th\u01b0\u1eddng. \n- Kh\xf4ng th\u1ea5y l\xfan x\u1eb9p, tr\u01b0\u1ee3t th\xe2n \u0111\u1ed1t s\u1ed1ng.\n- M\u1ecfm ngang, m\u1ecfm gai c\xe1c \u0111\u1ed1t s\u1ed1ng kh\xf4ng th\u1ea5y b\u1ea5t th\u01b0\u1eddng.\n- Kh\xf4ng th\u1ea5y h\xecnh \u1ea3nh gai x\u01b0\u01a1ng, c\u1ea7u x\u01b0\u01a1ng.  \n  - Nh\u1eadn x\xe9t kh\xe1c:",conclusion:"Hi\u1ec7n t\u1ea1i ch\u01b0a th\u1ea5y h\xecnh \u1ea3nh b\u1ea5t th\u01b0\u1eddng tr\xean phim ch\u1ee5p xquang."}},{code:"tietnieu001",name:"X \u2013 QUANG H\u1ec6 TI\u1ebeT NI\u1ec6U",results:{description:"- B\xf3ng th\u1eadn hai b\xean kh\xf4ng to \n- Kh\xf4ng th\u1ea5y h\xecnh \u1ea3nh c\u1ea3n quang b\u1ea5t th\u01b0\u1eddng trong h\u1ed1 th\u1eadn hai b\xean.\n- C\u1ed9t s\u1ed1ng th\u1eaft l\u01b0ng kh\xf4ng th\u1ea5y gai x\u01b0\u01a1ng, m\u1ecf x\u01b0\u01a1ng.\n- Kh\u1edbp c\xf9ng ch\u1eadu hai b\xean c\xe2n \u0111\u1ed1i, kh\xf4ng th\u1ea5y h\u1eb9p khe kh\u1edbp.  \n  - Nh\u1eadn x\xe9t kh\xe1c:",conclusion:"Hi\u1ec7n t\u1ea1i ch\u01b0a th\u1ea5y h\xecnh \u1ea3nh b\u1ea5t th\u01b0\u1eddng tr\xean phim ch\u1ee5p xquang."}},{code:"khopgoi001",name:"X \u2013 QUANG KH\u1edaP G\u1ed0I",results:{description:"- Khe kh\u1edbp kh\xf4ng r\u1ed9ng. \n- X\u01b0\u01a1ng ch\xe0y, x\u01b0\u01a1ng m\xe1c c\xf3 h\xecnh d\u1ea1ng b\xecnh th\u01b0\u1eddng, kh\xf4ng th\u1ea5y ti\xeau x\u01b0\u01a1ng, \u0111\u1eb7c x\u01b0\u01a1ng.\n- X\u01b0\u01a1ng b\xe1nh ch\xe8 c\xf3 h\xecnh th\xe1i b\xecnh th\u01b0\u1eddng.  \n  - Nh\u1eadn x\xe9t kh\xe1c:",conclusion:"Hi\u1ec7n t\u1ea1i ch\u01b0a th\u1ea5y h\xecnh \u1ea3nh b\u1ea5t th\u01b0\u1eddng tr\xean phim ch\u1ee5p xquang."}},{code:"khopvai001",name:"X \u2013 QUANG KH\u1edaP VAI",results:{description:"- Khe kh\u1edbp kh\xf4ng r\u1ed9ng. \n- Kh\xf4ng th\u1ea5y c\u1ea5u tr\xfac v\xf4i ho\xe1 quanh \u1ed5 kh\u1edbp.\n- \u0110\u1ea7u tr\xean x\u01b0\u01a1ng c\xe1nh tay, \u0111\u1ea7u ngo\xe0i x\u01b0\u01a1ng \u0111\xf2n, m\u1ecfm c\xf9ng vai c\xf3 h\xecnh d\u1ea1ng b\xecnh th\u01b0\u1eddng.  \n  - Nh\u1eadn x\xe9t kh\xe1c:",conclusion:"Hi\u1ec7n t\u1ea1i ch\u01b0a th\u1ea5y h\xecnh \u1ea3nh b\u1ea5t th\u01b0\u1eddng tr\xean phim ch\u1ee5p xquang."}},{code:"obung001",name:"X \u2013 QUANG \u1ed4 B\u1ee4NG",results:{description:"- C\xe1c quai ru\u1ed9t kh\xf4ng gi\xe3n, kh\xf4ng th\u1ea5y h\xecnh \u1ea3nh m\u1ee9c n\u01b0\u1edbc, m\u1ee9c h\u01a1i. \n- Kh\xf4ng th\u1ea5y h\xecnh \u1ea3nh li\u1ec1m h\u01a1i d\u01b0\u1edbi v\xf2m ho\xe0nh hai b\xean.\n- Kh\xf4ng th\u1ea5y h\xecnh c\u1ea3n quang b\u1ea5t th\u01b0\u1eddng trong \u1ed5 b\u1ee5ng.  \n  - Nh\u1eadn x\xe9t kh\xe1c:",conclusion:"Hi\u1ec7n t\u1ea1i ch\u01b0a th\u1ea5y h\xecnh \u1ea3nh b\u1ea5t th\u01b0\u1eddng tr\xean phim ch\u1ee5p xquang."}},{code:"xoang001",name:"X \u2013 QUANG XOANG",results:{description:"- Xoang h\xe0m hai b\xean k\xedch th\u01b0\u1edbng b\xecnh th\u01b0\u1eddng, s\xe1ng \u0111\u1ec1u, th\xe0nh m\u1ecfng. \n- H\u1ec7 th\u1ed1ng xoang s\xe0ng s\xe1ng b\xecnh th\u01b0\u1eddng. \n- H\u1ed1c m\u0169i s\xe1ng, v\xe1ch ng\u0103n m\u0169i c\xe2n \u0111\u1ed1i.  \n  - Nh\u1eadn x\xe9t kh\xe1c:",conclusion:"Hi\u1ec7n t\u1ea1i ch\u01b0a th\u1ea5y h\xecnh \u1ea3nh b\u1ea5t th\u01b0\u1eddng tr\xean phim ch\u1ee5p xquang."}},{code:"khuyutay001",name:"X \u2013 QUANG KH\u1edaP  KHU\u1ef6U",results:{description:"- Khe kh\u1edbp kh\xf4ng r\u1ed9ng.\n - Kh\xf4ng th\u1ea5y tr\u1eadt kh\u1edbp c\xe1nh tay \u2013 quay, c\xe1nh tay \u2013 tr\u1ee5 v\xe0 quay tr\u1ee5 tr\xean. \n- Kh\xf4ng th\u1ea5y c\u1ea5u tr\xfac v\xf4i ho\xe1 quanh \u1ed5 kh\u1edbp. \n -\t\u0110\u1ea7u d\u01b0\u1edbi x\u01b0\u01a1ng c\xe1nh tay, \u0111\u1ea7u tr\xean x\u01b0\u01a1ng tr\u1ee5, x\u01b0\u01a1ng quay c\xf3 h\xecnh d\u1ea1ng b\xecnh th\u01b0\u1eddng. \n - M\u1ecfm khu\u1ef7u c\xf3 h\xecnh d\u1ea1ng b\xecnh th\u01b0\u1eddng.  \n  - Nh\u1eadn x\xe9t kh\xe1c:",conclusion:"Hi\u1ec7n t\u1ea1i ch\u01b0a th\u1ea5y h\xecnh \u1ea3nh b\u1ea5t th\u01b0\u1eddng tr\xean phim ch\u1ee5p xquang."}},{code:"ngucthang001",name:"X \u2013 QUANG NG\u1ef0C TH\u1eb2NG",results:{description:"- H\xecnh tim kh\xf4ng to, trung th\u1ea5t kh\xf4ng gi\xe3n, kh\xf4ng th\u1ea5y kh\u1ed1i khu tr\xfa v\xe0 d\u1ea5u hi\u1ec7u b\u1ea5t th\u01b0\u1eddng.\n - L\u1ed3ng ng\u1ef1c c\xe2n \u0111\u1ed1i kh\xf4ng th\u1ea5y t\u1ed5n th\u01b0\u01a1ng x\u01b0\u01a1ng. \n- Nhu m\xf4 ph\u1ed5i s\xe1ng \u0111\u1ec1u kh\xf4ng th\u1ea5y d\u1ea5u hi\u1ec7u b\u1ea5t th\u01b0\u1eddng. \n - C\u01a1 ho\xe0nh hai b\xean b\xecnh th\u01b0\u1eddng, g\xf3c s\u01b0\u1eddn ho\xe0nh hai b\xean nh\u1ecdn.  \n  - Nh\u1eadn x\xe9t kh\xe1c:",conclusion:"Hi\u1ec7n t\u1ea1i ch\u01b0a th\u1ea5y h\xecnh \u1ea3nh b\u1ea5t th\u01b0\u1eddng tr\xean phim ch\u1ee5p xquang."}},{code:"sonao001",name:"X \u2013 QUANG S\u1ecc N\xc3O",results:{description:" - H\u1ed1 y\xean kh\xf4ng r\u1ed9ng, m\u1ecfm y\xean v\xe0 s\u1ea3n y\xean b\xecnh th\u01b0\u1eddng.\n - Kh\xf4ng th\u1ea5y h\xecnh t\u1ed5n th\u01b0\u01a1ng h\u1ed9p s\u1ecd, x\u01b0\u01a1ng h\xe0m m\u1eb7t.\n - C\xe1c kh\u1edbp s\u1ecd kh\xf4ng r\u1ed9ng.\n - Kh\xf4ng th\u1ea5y h\xecnh m\u1ee9c d\u1ecbch trong c\xe1c xoang b\u01b0\u1edbm, xoang tr\xe1n. \n - Kh\xf4ng th\u1ea5y h\xecnh h\u01a1i v\xe0 h\xecnh d\u1ecb v\u1eadt trong h\u1ed9p s\u1ecd. \n - Nh\u1eadn x\xe9t kh\xe1c:",conclusion:"Hi\u1ec7n t\u1ea1i ch\u01b0a th\u1ea5y h\xecnh \u1ea3nh b\u1ea5t th\u01b0\u1eddng tr\xean phim ch\u1ee5p xquang."}}],Fi=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).componentDidUpdate=function(e){var t=c.props.results?c.props.results[0]:{};e.results!==c.props.results&&c.setState({conclusion:t.conclusion||"",description:t.description||"",codeFromService:c.props.codeFromService})},c.onChangeResult=function(e){c.setState(Object(f.a)({},e.target.name,e.target.value))},c.onBlurChangeResult=function(){var e={conclusion:c.state.conclusion,description:c.state.description};c.props.onChangeResult(e)},c.setOnchangeCode=function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.setState({codeFromService:t.target.value});case 2:return e.next=4,c.setResultFrom();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.setResultFrom=function(){var e=c.state.codeFromService;Ai.map((function(t){t.code==e&&c.setState({conclusion:t.results.conclusion,description:t.results.description})})),c.onBlurChangeResult()},c.state={conclusion:"",description:"",nameFromService:"",codeFromService:""},c}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props.activeTab,n=this.state,c=n.conclusion,a=n.description,s=n.codeFromService;return Object(et.jsx)("div",{className:"XrayResult customCard customCard df-h-63",children:Object(et.jsxs)("div",{className:"table-responsive",children:[Object(et.jsxs)("div",{className:"ml-3 d-flex justify-content-between",children:[Object(et.jsx)("div",{className:"title-card ml-3",children:Object(et.jsxs)("p",{children:[Object(et.jsx)("span",{className:"material-icons",children:"create"}),"M\xf4 t\u1ea3 chi ti\u1ebft k\u1ebft qu\u1ea3 x-quang"]})}),Object(et.jsx)("div",{className:"input-fromService",children:Object(et.jsxs)(Nn.a,{type:"select",name:"codeFromService",value:s,onChange:function(t){return e.setOnchangeCode(t)},required:!0,disabled:"2"==t,children:[Object(et.jsx)("option",{value:"",children:"Ch\u1ecdn lo\u1ea1i"}),Ai.map((function(e){return Object(et.jsx)("option",{value:e.code,children:e.name},e.code)}))]})})]}),Object(et.jsx)("textarea",{className:"result-Xray-Description",name:"description",placeholder:"Nh\u1eadp k\u1ebft qu\u1ea3 X-Quang",value:a,onChange:function(t){return e.onChangeResult(t)},onBlur:this.onBlurChangeResult}),Object(et.jsx)("br",{}),Object(et.jsx)("div",{className:"title-card ml-3",children:Object(et.jsxs)("p",{children:[Object(et.jsx)("span",{className:"material-icons",children:"create"}),"K\u1ebft lu\u1eadn"]})}),Object(et.jsx)("br",{}),Object(et.jsx)("textarea",{className:"result-Xray",name:"conclusion",placeholder:"Nh\u1eadp k\u1ebft lu\u1eadn X-Quang",value:c,onChange:function(t){return e.onChangeResult(t)},onBlur:this.onBlurChangeResult})]})})}}]),n}(c.Component),Ui=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).readyJobListAction={refresh:null},c.runningJobListAction={refresh:null},c.refreshJobList=function(){c.readyJobListAction.refresh(),c.runningJobListAction.refresh()},c.onSelectJobRunning=function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.order||!t.order.customer){e.next=6;break}return c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{selectecPatientReady:t.order.customer,stepID:t.id})})),t.code,e.next=5,mc.getJobById({id:t.job_id}).then((function(e){e.state.subclinical=e.state.subclinical||{},c.setState({diagnosis:e.state.textDiagnosis,selectedJob:e})}));case 5:c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{selectedJobStepRunning:t,xrayResult:{id:t.id,results:[{conclusion:"",description:""}]}})}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.onSelectJobDone=function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.order||!t.order.customer){e.next=11;break}return c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{selectecPatientReady:t.order.customer,stepID:t.id})})),e.next=4,mc.getJobById({id:t.job_id}).then((function(e){c.setState({diagnosis:e.state.textDiagnosis})}));case 4:e.prev=4,c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{selectedJobStepRunning:t,xrayResult:{id:t.id,results:t.results}})})),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(4),e.t0;case 11:case"end":return e.stop()}}),e,null,[[4,8]])})));return function(t){return e.apply(this,arguments)}}(),c.handleConfirm=function(e){c.setState((function(t){return Object(vn.a)(Object(vn.a)({},t),{},{modalConfirm:Object(vn.a)(Object(vn.a)({},t.modalConfirm),{},{message:e})})}))},c.handleConfirm=function(e){c.setState((function(t){return Object(vn.a)(Object(vn.a)({},t),{},{modalConfirm:Object(vn.a)(Object(vn.a)({},t.modalConfirm),{},{message:e})})}))},c.handleUpdateResult=function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=18;break}return e.prev=1,c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{modalConfirm:Object(vn.a)(Object(vn.a)({},e.modalConfirm),{},{message:""})})})),e.next=5,Bi.finishXrayResult(c.state.xrayResult).then((function(e){c.refreshJobList()})).catch((function(e){console.log(e)}));case 5:return e.next=7,c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{printResult:"block"})}));case 7:return e.next=9,c.print("printXray");case 9:return e.next=11,c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{printResult:"none",xrayResult:{id:"",results:[{conclusion:"",description:""}]},codeFromService:"1"})}));case 11:e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(1),e.t0;case 16:e.next=19;break;case 18:c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{modalConfirm:Object(vn.a)(Object(vn.a)({},e.modalConfirm),{},{message:""})})}));case 19:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),c.printBarcode=Object(j.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{printResult:"block"})}));case 2:return e.next=4,c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{printResult:"none"})}));case 4:case"end":return e.stop()}}),e)}))),c.print=function(e){qe.print(e)},c.handleChangeResult=function(e){var t=c.state.xrayResult?c.state.xrayResult:[];t.results[0]=e,c.setState({results:t})},c.selectTypeCustomer=function(e){c.state.activeTab!==e&&c.setState({activeTab:e})},c.state={xrayResult:{id:"",results:[{conclusion:"",description:""}]},jobStepReady:[],jobStepRunning:[],selectedJob:[],selectedJobStepRunning:{},selectecPatientReady:{},stepID:"",xrayValue:"",titleWaitForXray:"Danh s\xe1ch b\u1ec7nh nh\xe2n ch\u1edd ch\u1ee5p X-quang:",modalConfirm:{message:"",saveXrayResult:!1},printResult:"none",titleWaitForXrayDone:"Danh s\xe1ch b\u1ec7nh nh\xe2n \u0111\xe3 ho\xe0n th\xe0nh:",activeTab:"1",diagnosis:""},c}return Object(b.a)(n,[{key:"render",value:function(){var e,t=this,n=Bi.location.id,c=this.state,a=c.activeTab,s=c.selectedJobStepRunning;return Object(et.jsxs)("div",{className:"xrayEdit",children:[Object(et.jsxs)(sn.a,{className:"mb-5 title-card",children:[Object(et.jsx)(rn.a,{xs:"6",children:null===(e=Bi.location)||void 0===e?void 0:e.name}),Object(et.jsx)(rn.a,{xs:"6",className:"end pointer pr-30",onClick:function(){Bi.location={},window.location.replace("/app/xray")},children:Object(et.jsx)("u",{children:"Chuy\u1ec3n ph\xf2ng"})})]}),Object(et.jsxs)(sn.a,{className:"content",children:[Object(et.jsxs)(rn.a,{sm:"8",className:"content-left",children:[Object(et.jsx)(sn.a,{className:"info-customer customCard",children:Object(et.jsx)(uc,{data:this.state.selectecPatientReady,className:"CustomerForm",mode:"compact"})}),Object(et.jsx)(sn.a,{className:"from-XrayResult mt-3",children:Object(et.jsx)(Fi,{activeTab:a,codeFromService:this.state.codeFromService,results:this.state.xrayResult.results,onChangeResult:this.handleChangeResult})})]}),Object(et.jsx)(rn.a,{sm:"4",className:"content-right",children:Object(et.jsxs)(sn.a,{className:"CusList customCard",children:[Object(et.jsxs)($t.a,{tabs:!0,className:"selectTabs",children:[Object(et.jsx)(Zt.a,{className:"titleTabs",children:Object(et.jsx)(en.a,{className:Dn()({active:"1"===a}),onClick:function(){t.selectTypeCustomer("1")},children:Object(et.jsx)("b",{className:"title-card",children:"B\u1ec7nh nh\xe2n ch\u1edd"})})}),Object(et.jsx)(Zt.a,{className:"titleTabs",children:Object(et.jsx)(en.a,{className:Dn()({active:"2"===a}),onClick:function(){t.selectTypeCustomer("2")},children:Object(et.jsx)("b",{className:"title-card",children:"B\u1ec7nh nh\xe2n \u0111\xe3 ho\xe0n th\xe0nh"})})})]}),Object(et.jsxs)(gn.a,{activeTab:a,children:[Object(et.jsx)(yn.a,{tabId:"1",className:"customCard",children:Object(et.jsx)(Tn,{titleOfList:this.state.titleWaitForXray,onSelectJobStep:function(e){return t.onSelectJobRunning(e)},location_id:n,status:[T],action:this.readyJobListAction,type:M,mode:"other"})}),Object(et.jsx)(yn.a,{tabId:"2",className:"customCard",children:Object(et.jsx)(Tn,{titleOfList:this.state.titleWaitForXrayDone,onSelectJobStep:function(e){return t.onSelectJobDone(e)},location_id:n,status:[D],action:this.readyJobListAction,type:M,mode:"other"})})]})]})})]}),Object(et.jsx)(sn.a,{className:"btn-Comfirm end",children:Object(et.jsx)(rn.a,{sm:"12",children:Object(et.jsx)(Ze.a,{color:"primary",hidden:!s.id,onClick:function(){return t.handleConfirm("B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n c\u1eadp nh\u1eadt k\u1ebft qu\u1ea3?")},children:"G\u1eedi k\u1ebft qu\u1ea3"})})}),Object(et.jsx)(lr,{style:this.state.printResult,diagnosis:this.state.diagnosis,selectedJobStepRunning:this.state.selectedJobStepRunning,xrayResult:this.state.xrayResult}),Object(et.jsx)(tt,{message:this.state.modalConfirm.message,answer:this.handleUpdateResult})]})}}]),n}(c.Component),Hi=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).componentDidMount=Object(j.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bi.getListLocation();case 2:t=e.sent,n=t.filter((function(e){return e.type===Q})),c.setState({locationList:n});case 5:case"end":return e.stop()}}),e)}))),c.onSelect=function(e){c.props.history.push("xray/room/"+e)},c.state={locationList:[],selectedLocation:-1},c}return Object(b.a)(n,[{key:"render",value:function(){return Object(et.jsx)("div",{style:{padding:"20px"},children:Object(et.jsx)(fc,{list:this.state.locationList,onSelect:this.onSelect})})}}]),n}(ze),Ki=Object(r.h)(Hi),Gi=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.match.path;return Object(et.jsx)("div",{className:"Xray",children:Object(et.jsxs)(r.d,{children:[Object(et.jsx)(r.b,{exact:!0,path:"".concat(e,"/"),render:function(){return Me.hasRole(g.XRAY)||Me.hasRole(g.ADMIN)?Bi.location.id&&Bi.location.type===Q?Object(et.jsx)(r.a,{to:"".concat(e,"/room/").concat(Bi.location.id)}):Object(et.jsx)(Ki,{}):Object(et.jsx)(r.a,{to:"/app/org/notauthorized"})}}),Object(et.jsx)(r.b,{exact:!0,path:"".concat(e,"/room/:id"),component:Ui})]})})}}]),n}(c.Component),Ji=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).componentDidMount=Object(j.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fr.getListLocation();case 2:t=e.sent,n=t.filter((function(e){return e.type===ee})),c.setState({locationList:n});case 5:case"end":return e.stop()}}),e)}))),c.onSelect=function(e){c.props.history.push("endoscopic/room/"+e)},c.state={locationList:[],selectedLocation:-1},c}return Object(b.a)(n,[{key:"render",value:function(){return Object(et.jsx)("div",{style:{padding:"20px"},children:Object(et.jsx)(fc,{list:this.state.locationList,onSelect:this.onSelect})})}}]),n}(ze),Xi=Object(r.h)(Ji),Vi=[{code:"tmh",name:"N\u1ed8I SOI TMH",results:{description:" - TAI TR\xc1I : B\xecnh th\u01b0\u1eddng. \n - TAI PH\u1ea2I : B\xecnh th\u01b0\u1eddng. \n - M\u0168I : B\xecnh th\u01b0\u1eddng. \n - H\u1eccNG : B\xecnh th\u01b0\u1eddng. ",conclusion:"Kh\xf4ng c\xf3 bi\u1ec3u hi\u1ec7n b\u1ea5t th\u01b0\u1eddng."}},{code:"nieudao",name:"SOI T\u01af\u01a0I D\u1ecaCH NI\u1ec6U \u0110\u1ea0O",results:{description:"B\xecnh th\u01b0\u1eddng.",conclusion:"Kh\xf4ng c\xf3 bi\u1ec3u hi\u1ec7n b\u1ea5t th\u01b0\u1eddng."}},{code:"thucquan",name:"N\u1ed8I SOI TH\u1ef0C QU\u1ea2N, D\u1ea0 D\xc0Y, T\xc1 TR\xc0NG",results:{description:" - TH\u1ef0C QU\u1ea2N : B\xecnh th\u01b0\u1eddng. \n - D\u1ea0 D\xc0Y: B\xecnh th\u01b0\u1eddng. \n - T\xc2M V\u0128 : D\xe3n n\u1edf t\u1ed1t. \n - T\xc1 TR\xc0NG: B\xecnh th\u01b0\u1eddng \n - H\xc0NH T\xc1 TR\xc0NG: B\xecnh th\u01b0\u1eddng",conclusion:"Kh\xf4ng c\xf3 bi\u1ec3u hi\u1ec7n b\u1ea5t th\u01b0\u1eddng."}}],qi=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).componentDidUpdate=function(e){var t=c.props.results?c.props.results[0]:{},n=c.props.name_files?c.props.name_files:{};c.props.photos&&c.props.photos;if(e.results!==c.props.results){c.setState({conclusion:t.conclusion||"",description:t.description||"",codeFromService:c.props.codeFromService,rightear:n.rightear||"",leftear:n.leftear||"",nose:n.nose||"",throat:n.throat||"",files:""});var a=c.state.formData;a.delete("img"),c.setState({formData:a});c.props.upload;if(c.props.selectedJobStepRunning!==e.selectedJobStepRunning)if(c.props.upload.length>0){var s=[],r=c.props.upload;r.map((function(e){s.push(fr.downloadPhoto(e.name))}));var i=[];Promise.all(s).then((function(e){e.map((function(e){r.map((function(t){e.config.url.split("download/")[1]==t.name&&i.push({url:e.config.url,metaData:t.metadata})}))}));var t=c.state,n=t.rightearImg,a=t.leftearImg,s=t.noseImg,o=t.throatImg;i.map((function(e){"rightear"==e.metaData&&(n=e.url),"leftear"==e.metaData&&(a=e.url),"nose"==e.metaData&&(s=e.url),"throat"==e.metaData&&(o=e.url)})),c.setState({rightearImg:n,leftearImg:a,noseImg:s,throatImg:o})}))}else c.setState({rightearImg:"",leftearImg:"",noseImg:"",throatImg:""});else c.setState({rightearImg:"",leftearImg:"",noseImg:"",throatImg:""})}},c.onChangeResult=function(e){c.setState(Object(f.a)({},e.target.name,e.target.value))},c.onChangeFile=function(e){var t;c.setState((t={},Object(f.a)(t,e.target.name,e.target.value),Object(f.a)(t,e.target.name+"Img",URL.createObjectURL(e.target.files[0])),t)),c.state.formData.append("img",e.target.name),c.state.formData.append("img",e.target.files[0])},c.onBlurChangeResult=function(){var e={conclusion:c.state.conclusion,description:c.state.description},t={rightearImg:c.state.rightearImg,leftearImg:c.state.leftearImg,noseImg:c.state.noseImg,throatImg:c.state.throatImg},n=c.state.formData;c.props.onChangeResult(e,n,t)},c.setOnchangeCode=function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.setState({codeFromService:t.target.value});case 2:return e.next=4,c.setResultFrom();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.setResultFrom=function(){var e=c.state.codeFromService;Vi.map((function(t){t.code==e&&c.setState({conclusion:t.results.conclusion,description:t.results.description,nameFromService:t.name})})),c.onBlurChangeResult()},c.state={conclusion:"",description:"",nameFromService:"",codeFromService:"",name_files:{rightear:"",leftear:"",nose:"",throat:""},rightearImg:"",leftearImg:"",noseImg:"",throatImg:"",files:"",formData:new FormData},c}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props.activeTab,n=this.state,c=n.conclusion,a=n.description,s=n.codeFromService,r=n.rightear,i=n.leftear,o=n.nose,l=n.throat;return Object(et.jsx)("div",{className:"EndoscopicResult customCard df-h-61",children:Object(et.jsxs)("div",{children:[Object(et.jsxs)("div",{className:"ml-3 d-flex justify-content-between",children:[Object(et.jsx)("div",{children:Object(et.jsxs)("p",{className:"title-card",children:[Object(et.jsx)("span",{className:"material-icons",children:"create"}),"M\xf4 t\u1ea3 chi ti\u1ebft"]})}),Object(et.jsx)("div",{className:"input-fromService",children:Object(et.jsxs)(Nn.a,{type:"select",name:"codeFromService",value:s,onChange:function(t){return e.setOnchangeCode(t)},required:!0,disabled:"2"==t,children:[Object(et.jsx)("option",{value:"",children:"Ch\u1ecdn lo\u1ea1i"}),Vi.map((function(e){return Object(et.jsx)("option",{value:e.code,children:e.name},e.code)}))]})})]}),Object(et.jsx)("div",{className:"text-center",children:Object(et.jsx)("textarea",{className:"result-Ent-Description ",placeholder:" Nh\u1eadp K\u1ebft qu\u1ea3 n\u1ed9i soi",name:"description",value:a,onChange:function(t){return e.onChangeResult(t)},onBlur:this.onBlurChangeResult})}),Object(et.jsx)("div",{className:"title-card ml-3",children:Object(et.jsxs)("p",{children:[Object(et.jsx)("span",{className:"material-icons",children:"create"}),"K\u1ebft lu\u1eadn"]})}),Object(et.jsx)("div",{className:"text-center",children:Object(et.jsx)("textarea",{className:"result-Ent",placeholder:" Nh\u1eadp K\u1ebft lu\u1eadn n\u1ed9i soi",name:"conclusion",value:c,onChange:function(t){return e.onChangeResult(t)},onBlur:this.onBlurChangeResult})}),Object(et.jsx)("div",{className:"title-card ml-3",children:Object(et.jsxs)("p",{children:[Object(et.jsx)("span",{className:"material-icons",children:"create"}),"Ch\u1ecdn \u1ea3nh"]})}),Object(et.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(et.jsxs)("div",{className:"inputSelectImg",children:[Object(et.jsx)("b",{children:"Tai ph\u1ea3i"}),Object(et.jsx)("br",{}),Object(et.jsx)("input",{type:"file",name:"rightear",value:r,accept:"image/*",onBlur:this.onBlurChangeResult,onChange:function(t){return e.onChangeFile(t)}}),Object(et.jsx)("div",{className:"p-2 text-center",children:Object(et.jsx)("img",{className:"resultFile",src:this.state.rightearImg})})]}),Object(et.jsxs)("div",{className:"inputSelectImg",children:[Object(et.jsx)("b",{children:"Tai tr\xe1i"}),Object(et.jsx)("br",{}),Object(et.jsx)("input",{type:"file",name:"leftear",value:i,accept:"image/*",onBlur:this.onBlurChangeResult,onChange:function(t){return e.onChangeFile(t)}}),Object(et.jsx)("div",{className:"p-2 text-center",children:Object(et.jsx)("img",{className:"resultFile",src:this.state.leftearImg})})]}),Object(et.jsxs)("div",{className:"inputSelectImg",children:[Object(et.jsx)("b",{children:"M\u0169i"}),Object(et.jsx)("br",{}),Object(et.jsx)("input",{type:"file",name:"nose",value:o,accept:"image/*",onBlur:this.onBlurChangeResult,onChange:function(t){return e.onChangeFile(t)}}),Object(et.jsx)("div",{className:"p-2 text-center",children:Object(et.jsx)("img",{className:"resultFile",src:this.state.noseImg})})]}),Object(et.jsxs)("div",{className:"inputSelectImg",children:[Object(et.jsx)("b",{children:"H\u1ecdng"}),Object(et.jsx)("br",{}),Object(et.jsx)("input",{type:"file",name:"throat",value:l,accept:"image/*",onBlur:this.onBlurChangeResult,onChange:function(t){return e.onChangeFile(t)}}),Object(et.jsx)("div",{className:"p-2 text-center",children:Object(et.jsx)("img",{className:"resultFile",src:this.state.throatImg})})]})]})]})})}}]),n}(c.Component),zi=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).readyJobListAction={refresh:null},c.runningJobListAction={refresh:null},c.refreshJobList=function(){c.readyJobListAction.refresh(),c.runningJobListAction.refresh()},c.onSelectJobRunning=function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.order||!t.order.customer){e.next=11;break}return c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{selectecPatientReady:t.order.customer,stepID:t.id})})),e.next=4,mc.getJobById({id:t.job_id}).then((function(e){c.setState({diagnosis:e.state.textDiagnosis})}));case 4:e.prev=4,c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{selectedJobStepRunning:t,entResult:{id:t.id,results:[{conclusion:"",description:""}]},array_urls:[]})})),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(4),e.t0;case 11:case"end":return e.stop()}}),e,null,[[4,8]])})));return function(t){return e.apply(this,arguments)}}(),c.onSelectJobDone=function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.order||!t.order.customer){e.next=5;break}return c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{selectecPatientReady:t.order.customer,stepID:t.id})})),e.next=4,mc.getJobById({id:t.job_id}).then((function(e){c.setState({diagnosis:e.state.textDiagnosis})}));case 4:c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{selectedJobStepRunning:t,entResult:{id:t.id,results:t.results},array_urls:t.upload})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.handleConfirm=function(e){c.setState((function(t){return Object(vn.a)(Object(vn.a)({},t),{},{modalConfirm:Object(vn.a)(Object(vn.a)({},t.modalConfirm),{},{message:e})})}))},c.handleUpdateResult=function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=14;break}return c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{modalConfirm:Object(vn.a)(Object(vn.a)({},e.modalConfirm),{},{message:""})})})),c.state.photos.append("ref_id",c.state.stepID),fr.uploadPhoto(c.state.photos).then((function(e){var t=e.data.map((function(e){return e.name}));c.setState({array_urls:t})})).catch((function(e){console.log(e)})),e.next=6,fr.finishEntResult(c.state.entResult).then((function(e){c.refreshJobList()})).catch((function(e){console.log(e)}));case 6:return e.next=8,c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{printResult:"block"})}));case 8:return e.next=10,c.print("printEnt");case 10:return e.next=12,c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{printResult:"none",entResult:Object(vn.a)(Object(vn.a)({},e.entResult),{},{id:"",results:[{conclusion:"",description:""}],name_files:{rightear:"",leftear:"",nose:"",throat:""},array_urls:[]}),codeFromService:"1"})}));case 12:e.next=15;break;case 14:c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{modalConfirm:Object(vn.a)(Object(vn.a)({},e.modalConfirm),{},{message:""})})}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.printBarcode=Object(j.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{printResult:"block"})}));case 2:return e.next=4,c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{printResult:"none"})}));case 4:case"end":return e.stop()}}),e)}))),c.print=function(e){qe.print(e)},c.handleChangeResult=function(e,t,n){var a=c.state.entResult?c.state.entResult:[];a.results[0]=e,c.setState({photos:t,results:a,urlFileImg:n})},c.selectTypeCustomer=function(e){c.state.activeTab!==e&&c.setState({activeTab:e})},c.state={entResult:{id:"",results:[{conclusion:"",description:""}]},jobStepReady:[],jobStepRunning:[],diagnosis:"",selectedJobStepRunning:{},selectecPatientReady:{},stepID:"",titleWaitForEnt:"Danh s\xe1ch b\u1ec7nh nh\xe2n ch\u1edd N\u1ed9i Soi:",titleWaitForEntDone:"Danh s\xe1ch b\u1ec7nh nh\xe2n \u0111\xe3 ho\xe0n th\xe0nh:",modalConfirm:{message:"",saveEntResult:!1},name_files:{rightear:"",leftear:"",nose:"",throat:""},urlFileImg:{rightearImg:"",leftearImg:"",noseImg:"",throatImg:""},photos:new FormData,printResult:"none",activeTab:"1",array_urls:[]},c}return Object(b.a)(n,[{key:"render",value:function(){var e,t=this,n=fr.location.id,c=this.state,a=c.activeTab,s=c.name_files,r=c.selectedJobStepRunning;return Object(et.jsxs)("div",{className:"EntEdit",children:[Object(et.jsxs)(sn.a,{className:"mb-5 title-card",children:[Object(et.jsx)(rn.a,{xs:"6",children:null===(e=fr.location)||void 0===e?void 0:e.name}),Object(et.jsx)(rn.a,{xs:"6",className:"end pointer pr-30",onClick:function(){fr.location={},window.location.replace("/app/endoscopic")},children:Object(et.jsx)("u",{children:"Chuy\u1ec3n ph\xf2ng"})})]}),Object(et.jsxs)(sn.a,{className:"content",children:[Object(et.jsxs)(rn.a,{sm:"8",className:"content-left",children:[Object(et.jsx)(sn.a,{className:"info-customer customCard",children:Object(et.jsx)(rn.a,{children:Object(et.jsx)(uc,{data:this.state.selectecPatientReady,className:"CustomerForm",mode:"compact"})})}),Object(et.jsx)(sn.a,{className:"from-EntResult mt-3",children:Object(et.jsx)(qi,{upload:this.state.array_urls,activeTab:a,selectedJobStepRunning:this.state.selectedJobStepRunning,codeFromService:this.state.codeFromService,results:this.state.entResult.results,name_files:s,photos:this.state.photos,onChangeResult:this.handleChangeResult})})]}),Object(et.jsx)(rn.a,{sm:"4",className:"content-right",children:Object(et.jsxs)(sn.a,{className:"CusList customCard",children:[Object(et.jsxs)($t.a,{tabs:!0,className:"selectTabs",children:[Object(et.jsx)(Zt.a,{className:"titleTabs",children:Object(et.jsx)(en.a,{className:Dn()({active:"1"===a}),onClick:function(){t.selectTypeCustomer("1")},children:Object(et.jsx)("b",{className:"title-card",children:"B\u1ec7nh nh\xe2n ch\u1edd "})})}),Object(et.jsx)(Zt.a,{className:"titleTabs",children:Object(et.jsx)(en.a,{className:Dn()({active:"2"===a}),onClick:function(){t.selectTypeCustomer("2")},children:Object(et.jsx)("b",{className:"title-card",children:"B\u1ec7nh nh\xe2n \u0111\xe3 ho\xe0n th\xe0nh"})})})]}),Object(et.jsxs)(gn.a,{activeTab:a,children:[Object(et.jsx)(yn.a,{tabId:"1",className:"customCard",children:Object(et.jsx)(Tn,{titleOfList:this.state.titleWaitForEnt,onSelectJobStep:function(e){return t.onSelectJobRunning(e)},location_id:n,status:[T],action:this.readyJobListAction,type:M,mode:"other"})}),Object(et.jsx)(yn.a,{tabId:"2",className:"customCard",children:Object(et.jsx)(Tn,{titleOfList:this.state.titleWaitForEntDone,onSelectJobStep:function(e){return t.onSelectJobDone(e)},location_id:n,status:[D],action:this.readyJobListAction,type:M,mode:"other"})})]})]})})]}),Object(et.jsx)(sn.a,{className:"btn-Comfirm end",children:Object(et.jsx)(rn.a,{sm:"12",children:Object(et.jsx)(Ze.a,{color:"primary",hidden:!r.id,onClick:function(){return t.handleConfirm("B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n c\u1eadp nh\u1eadt k\u1ebft qu\u1ea3?")},children:"G\u1eedi k\u1ebft qu\u1ea3"})})}),Object(et.jsx)(vr,{tab:"1",urlFileImg:this.state.urlFileImg,upload:this.state.array_urls,style:this.state.printResult,diagnosis:this.state.diagnosis,selectedJobStepRunning:this.state.selectedJobStepRunning,entResult:this.state.entResult}),Object(et.jsx)(tt,{message:this.state.modalConfirm.message,answer:this.handleUpdateResult})]})}}]),n}(c.Component),Wi=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.match.path;return Object(et.jsx)("div",{className:"Endoscopic",children:Object(et.jsxs)(r.d,{children:[Object(et.jsx)(r.b,{exact:!0,path:"".concat(e,"/"),render:function(){return Me.hasRole(g.ENT)||Me.hasRole(g.ADMIN)?fr.location.id&&fr.location.type===ee?Object(et.jsx)(r.a,{to:"".concat(e,"/room/").concat(fr.location.id)}):Object(et.jsx)(Xi,{}):Object(et.jsx)(r.a,{to:"/app/org/notauthorized"})}}),Object(et.jsx)(r.b,{exact:!0,path:"".concat(e,"/room/:id"),component:zi})]})})}}]),n}(c.Component),Yi=[{code:"obungnam",name:"SI\xcaU \xc2M \u1ed4 B\u1ee4NG NAM",results:{description:" - GAN : Kh\xf4ng to, nhu m\xf4 \u0111\u1ec1u, kh\xf4ng th\u1ea5y kh\u1ed1i b\u1ea5t th\u01b0\u1eddng.\n - T\u0128NH M\u1ea0CH C\u1eecA : Kh\xf4ng gi\xe3n, kh\xf4ng c\xf3 huy\u1ebft kh\u1ed1i. \n - \u0110\u01af\u1edcNG M\u1eacT: Trong gan v\xe0 ngo\xe0i gan kh\xf4ng gi\xe3n, kh\xf4ng c\xf3 s\u1ecfi. \n - T\xdaI M\u1eacT: Kh\xf4ng to, th\xe0nh t\xfai m\u1eadt m\u1ecfng, d\u1ecbch m\u1eadt trong \n - T\u1ee4Y: K\xedch th\u01b0\u1edbc kh\xf4ng to, nhu m\xf4 \u0111\u1ec1u, \u1ed1ng t\u1ee5y kh\xf4ng gi\xe3n, kh\xf4ng c\xf3 s\u1ecfi, quanh t\u1ee5y kh\xf4ng th\u1ea5y b\u1ea5t th\u01b0\u1eddng.\n - L\xc1CH: K\xedch th\u01b0\u1edbc kh\xf4ng to, nhu m\xf4 \u0111\u1ec1u. \n - TH\u1eacN PH\u1ea2I: K\xedch th\u01b0\u1edbc b\xecnh th\u01b0\u1eddng, nhu m\xf4 \u0111\u1ec1u, \u0111\xe0i b\u1ec3 th\u1eadn kh\xf4ng gi\xe3n, kh\xf4ng c\xf3 s\u1ecfi. Ni\u1ec7u qu\u1ea3n kh\xf4ng gi\xe3n, kh\xf4ng c\xf3 s\u1ecfi. \n - TH\u1eacN TR\xc1I: K\xedch th\u01b0\u1edbc b\xecnh th\u01b0\u1eddng, nhu m\xf4 \u0111\u1ec1u, \u0111\xe0i b\u1ec3 th\u1eadn kh\xf4ng gi\xe3n, kh\xf4ng c\xf3 s\u1ecfi. Ni\u1ec7u qu\u1ea3n kh\xf4ng gi\xe3n, kh\xf4ng c\xf3 s\u1ecfi. \n - B\xc0NG QUANG : N\u01b0\u1edbc ti\u1ec3u v\u1eeba, th\xe0nh \u0111\u1ec1u, kh\xf4ng c\xf3 s\u1ecfi \n - Ti\u1ec1n li\u1ec7t tuy\u1ebfn: K\xedch th\u01b0\u1edbc b\xecnh th\u01b0\u1eddng, nhu m\xf4 \u0111\u1ec1u.  \n  - Nh\u1eadn x\xe9t kh\xe1c:",conclusion:"Hi\u1ec7n t\u1ea1i ch\u01b0a th\u1ea5y h\xecnh \u1ea3nh b\u1ea5t th\u01b0\u1eddng tr\xean si\xeau \xe2m \u1ed5 b\u1ee5ng."}},{code:"obungnu",name:"SI\xcaU \xc2M \u1ed4 B\u1ee4NG N\u1eee",results:{description:" - GAN : Kh\xf4ng to, nhu m\xf4 \u0111\u1ec1u, kh\xf4ng th\u1ea5y kh\u1ed1i b\u1ea5t th\u01b0\u1eddng.\n - T\u0128NH M\u1ea0CH C\u1eecA: Kh\xf4ng gi\xe3n, kh\xf4ng c\xf3 huy\u1ebft kh\u1ed1i. \n - \u0110\u01af\u1edcNG M\u1eacT : Trong gan v\xe0 ngo\xe0i gan kh\xf4ng gi\xe3n, kh\xf4ng c\xf3 s\u1ecfi. \n - T\xdaI M\u1eacT: Kh\xf4ng to, th\xe0nh t\xfai m\u1eadt m\u1ecfng, d\u1ecbch m\u1eadt trong \n - T\u1ee4Y: K\xedch th\u01b0\u1edbc kh\xf4ng to, nhu m\xf4 \u0111\u1ec1u, \u1ed1ng t\u1ee5y kh\xf4ng gi\xe3n, kh\xf4ng c\xf3 s\u1ecfi, quanh t\u1ee5y kh\xf4ng th\u1ea5y b\u1ea5t th\u01b0\u1eddng.\n - L\xc1CH: K\xedch th\u01b0\u1edbc kh\xf4ng to, nhu m\xf4 \u0111\u1ec1u. \n - TH\u1eacN PH\u1ea2I: K\xedch th\u01b0\u1edbc b\xecnh th\u01b0\u1eddng, nhu m\xf4 \u0111\u1ec1u, \u0111\xe0i b\u1ec3 th\u1eadn kh\xf4ng gi\xe3n, kh\xf4ng c\xf3 s\u1ecfi. Ni\u1ec7u qu\u1ea3n kh\xf4ng gi\xe3n, kh\xf4ng c\xf3 s\u1ecfi. \n - TH\u1eacN TR\xc1I: K\xedch th\u01b0\u1edbc b\xecnh th\u01b0\u1eddng, nhu m\xf4 \u0111\u1ec1u, \u0111\xe0i b\u1ec3 th\u1eadn kh\xf4ng gi\xe3n, kh\xf4ng c\xf3 s\u1ecfi. Ni\u1ec7u qu\u1ea3n kh\xf4ng gi\xe3n, kh\xf4ng c\xf3 s\u1ecfi. \n - B\xc0NG QUANG: N\u01b0\u1edbc ti\u1ec3u v\u1eeba, th\xe0nh \u0111\u1ec1u, kh\xf4ng c\xf3 s\u1ecfi. \n - T\u1eec CUNG PH\u1ea6N PH\u1ee4 : Kh\xf4ng to, \xe2m vang \u0111\u1ed3ng nh\u1ea5t. Bu\u1ed3ng tr\u1ee9ng hai b\xean kh\xf4ng th\u1ea5y b\u1ea5t th\u01b0\u1eddng.  \n  - Nh\u1eadn x\xe9t kh\xe1c:",conclusion:"Hi\u1ec7n t\u1ea1i ch\u01b0a th\u1ea5y h\xecnh \u1ea3nh b\u1ea5t th\u01b0\u1eddng tr\xean si\xeau \xe2m \u1ed5 b\u1ee5ng."}},{code:"tuyengiap",name:"SI\xcaU \xc2M TUY\u1ebeN GI\xc1P",results:{description:" - V\u1eca TR\xcd : Tuy\u1ebfn gi\xe1p n\u1eb1m \u0111\xfang v\u1ecb tr\xed gi\u1ea3i ph\u1eabu.\n - TH\xd9Y PH\u1ea2I : K\xedch th\u01b0\u1edbc b\xecnh th\u01b0\u1eddng, nhu m\xf4 \u0111\u1ec1u, kh\xf4ng c\xf3 kh\u1ed1i khu tr\xfa. \n - TH\xd9Y TR\xc1I : K\xedch th\u01b0\u1edbc b\xecnh th\u01b0\u1eddng, nhu m\xf4 \u0111\u1ec1u, kh\xf4ng c\xf3 kh\u1ed1i khu tr\xfa.\n - EO TUY\u1ebeN : Nhu m\xf4 \u0111\u1ec1u, kh\xf4ng c\xf3 kh\u1ed1i khu tr\xfa. \n  - Nh\u1eadn x\xe9t kh\xe1c: ",conclusion:"Hi\u1ec7n t\u1ea1i ch\u01b0a th\u1ea5y h\xecnh \u1ea3nh b\u1ea5t th\u01b0\u1eddng tr\xean si\xeau \xe2m tuy\u1ebfn gi\xe1p."}},{code:"thai",name:"SI\xcaU \xc2M THAI",results:{description:" - T\u1eed cung: S\u1ed1 l\u01b0\u1ee3ng 01, to h\u01a1n b\xecnh th\u01b0\u1eddng. \n - S\u1ed1 l\u01b0\u1ee3ng thai: \n - Ng\xf4i: \n - \u0110\u01b0\u1eddng k\xednh l\u01b0\u1ee1ng \u0111\u1ec9nh (BPD):   mm \n - Chu vi \u0111\u1ea7u (HC): mm\n - Chu vi b\u1ee5ng (AC): mm \n - Chi\u1ec1u d\xe0i x\u01b0\u01a1ng \u0111\xf9i (FL):  ; mm \n - Tim thai:      Chu k\u1ef3/ ph\xfat, nh\u1ecbp \u0111\u1ec1u.\n - Rau b\xe1m: m\u1eb7t \n - N\u01b0\u1edbc \u1ed1i: G\xf3c \u1ed1i s\xe2u nh\u1ea5t;  AFI:  \n - D\xe2y r\u1ed1n: 2 \u0111\u1ed9ng m\u1ea1ch 1 t\u0129nh m\u1ea1ch. \n - Tu\u1ed5i thai \u01b0\u1edbc t\xednh:     tu\u1ea7n    ng\xe0y. C\xe2n n\u1eb7ng \u01b0\u1edbc t\xednh ~    g. \n  - Nh\u1eadn x\xe9t kh\xe1c:",conclusion:"H\xecnh \u1ea3nh 01 thai t\u01b0\u01a1ng \u0111\u01b0\u01a1ng 20 tu\u1ea7n theo si\xeau \xe2m."}}],Qi=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).componentDidUpdate=function(e){var t=c.props.results?c.props.results[0]:{};if(e.results!==c.props.results){c.setState({conclusion:t.conclusion||"",description:t.description||"",codeFromService:c.props.codeFromService,file:c.props.file});var n=c.state.formData;if(n.delete("img"),c.setState({formData:n}),c.props.jobStep!==e.jobStep)if(c.props.upload.length>0){var a=[];c.props.upload.map((function(e){a.push(ir.downloadPhoto(e.name))})),Promise.all(a).then((function(e){c.setState({fileImg:e[0].config.url})}))}else c.setState({fileImg:""});else c.setState({fileImg:""})}},c.onChangeResult=function(e,t){var n;c.setState((n={},Object(f.a)(n,e.target.name,e.target.value),Object(f.a)(n,"stt",t),n))},c.onChangeResultFile=function(e){c.setState(Object(f.a)({},e.target.name+"Img",URL.createObjectURL(e.target.files[0]))),c.state.formData.append("img",e.target.name),c.state.formData.append("img",e.target.files[0])},c.onBlurChangeResult=function(){var e={conclusion:c.state.conclusion,description:c.state.description},t={fileImg:c.state.fileImg},n=c.state.formData;c.props.onChangeResult(e,n,t)},c.setOnchangeCode=function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.setState({codeFromService:t.target.value});case 2:return e.next=4,c.setResultFrom();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.setResultFrom=function(){var e=c.state.codeFromService;Yi.map((function(t){t.code==e&&c.setState({conclusion:t.results.conclusion,description:t.results.description,nameFromService:t.name})})),c.onBlurChangeResult()},c.state={conclusion:"",description:"",file:"",fileImg:"",nameFromService:"",codeFromService:"",stt:"",formData:new FormData},c}return Object(b.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.activeTab,c=(t.jobStep,this.state),a=c.conclusion,s=c.description,r=c.file,i=c.codeFromService;return Object(et.jsxs)("div",{className:"UltralResult customCard df-h-62 max-h-65",children:[Object(et.jsxs)("div",{className:"ml-3 d-flex justify-content-between",children:[Object(et.jsx)("div",{children:Object(et.jsxs)("p",{className:"title-card",children:[Object(et.jsx)("span",{className:"material-icons",children:"create"}),"M\xf4 t\u1ea3 chi ti\u1ebft k\u1ebft qu\u1ea3 si\xeau \xe2m"]})}),Object(et.jsx)("div",{className:"input-fromService",children:Object(et.jsxs)(Nn.a,{type:"select",name:"codeFromService",value:i,onChange:function(t){return e.setOnchangeCode(t)},required:!0,disabled:"2"==n,children:[Object(et.jsx)("option",{value:"",children:"Ch\u1ecdn lo\u1ea1i"}),Yi.map((function(e){return Object(et.jsx)("option",{value:e.code,children:e.name},e.code)}))]})})]}),Object(et.jsx)("div",{className:"text-center",children:Object(et.jsx)("textarea",{className:"result-Ultra-Description ",placeholder:" Nh\u1eadp K\u1ebft qu\u1ea3 si\xeau \xe2m",name:"description",value:s,onChange:function(t){return e.onChangeResult(t)},onBlur:this.onBlurChangeResult})}),Object(et.jsxs)("div",{children:[Object(et.jsx)("div",{className:"title-card ml-3",children:Object(et.jsxs)("p",{children:[Object(et.jsx)("span",{className:"material-icons",children:"create"}),"K\u1ebft lu\u1eadn"]})}),Object(et.jsx)("textarea",{className:"result-Ultra",placeholder:" Nh\u1eadp K\u1ebft lu\u1eadn si\xeau \xe2m",name:"conclusion",value:a,onChange:function(t){return e.onChangeResult(t)},onBlur:this.onBlurChangeResult}),Object(et.jsx)("b",{className:"end title-card",children:"\u1ea2nh si\xeau \xe2m"}),Object(et.jsx)("br",{}),Object(et.jsxs)("div",{className:"inputSelectImg  text-center",children:[Object(et.jsx)("input",{type:"file",name:"file",value:r,accept:"image/*",onBlur:this.onBlurChangeResult,onChange:function(t){return e.onChangeResultFile(t)}}),Object(et.jsx)("div",{className:"p-2",children:Object(et.jsx)("img",{className:"resultFile",src:this.state.fileImg})})]})]})]})}}]),n}(c.Component),$i=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).state={},c}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.jobStep,t=e?e.order:{},n=t?t.customer:{};new Date(t?t.ctime:0).toLocaleString("en-GB");return Object(et.jsx)("div",{style:{display:"none"},children:Object(et.jsxs)("div",{className:"printBarCode",id:"barCodeCus",children:[n.full_name,Object(et.jsx)("br",{})," ",n.birthday,Object(et.jsx)("div",{className:"canvas",children:Object(et.jsx)("canvas",{id:"canvas_id",style:{height:"13mm",width:"40mm"}})})]})})}}]),n}(a.a.Component),Zi=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).readyJobListAction={refresh:null},c.runningJobListAction={refresh:null},c.refreshJobList=function(){c.readyJobListAction.refresh(),c.runningJobListAction.refresh()},c.onSelectJobRunning=function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.order||!t.order.customer){e.next=12;break}c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{selectecPatientReady:t.order.customer,stepID:t.id})})),t.code,mc.getJobById({id:t.job_id}).then((function(e){c.setState({diagnosis:e.state.textDiagnosis})})),e.prev=4,t.code,c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{selectedJobStepRunning:t,ultraResult:{id:t.id,results:[{conclusion:"",description:""}]},array_urls:[],file:""})})),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(4),e.t0;case 12:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t){return e.apply(this,arguments)}}(),c.onSelectJobDone=function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.order||!t.order.customer){e.next=5;break}return c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{selectecPatientReady:t.order.customer,stepID:t.id})})),e.next=4,mc.getJobById({id:t.job_id}).then((function(e){c.setState({diagnosis:e.state.textDiagnosis})}));case 4:c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{selectedJobStepRunning:t,ultraResult:{id:t.id,results:t.results},array_urls:t.upload})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.handleConfirm=function(e){c.setState((function(t){return Object(vn.a)(Object(vn.a)({},t),{},{modalConfirm:Object(vn.a)(Object(vn.a)({},t.modalConfirm),{},{message:e})})}))},c.handleUpdateResult=function(){var e=Object(j.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=20;break}return e.prev=1,c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{modalConfirm:Object(vn.a)(Object(vn.a)({},e.modalConfirm),{},{message:""})})})),c.state.photos.append("ref_id",c.state.stepID),ir.uploadPhoto(c.state.photos).then((function(e){console.log("th\xe0nh c\xf4ng")})).catch((function(e){console.log(e)})),e.next=7,ir.finishUtralResult(c.state.ultraResult).then((function(e){c.refreshJobList()})).catch((function(e){console.log(e)}));case 7:return e.next=9,c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{printResult:"block"})}));case 9:return e.next=11,c.print("printUltra");case 11:return e.next=13,c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{printResult:"none",ultraResult:Object(vn.a)(Object(vn.a)({},e.ultraResult),{},{id:"",results:[{conclusion:"",description:""}]}),array_urls:[],codeFromService:"1",file:""})}));case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(1),e.t0;case 18:e.next=21;break;case 20:c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{modalConfirm:Object(vn.a)(Object(vn.a)({},e.modalConfirm),{},{message:""})})}));case 21:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),c.printBarcode=Object(j.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{printResult:"block"})}));case 2:return e.next=4,qe.printBarCode("barCodeCus");case 4:return e.next=6,c.setState((function(e){return Object(vn.a)(Object(vn.a)({},e),{},{printResult:"none"})}));case 6:case"end":return e.stop()}}),e)}))),c.print=function(e){qe.print(e)},c.handleChangeResult=function(e,t,n){var a=c.state.ultraResult?c.state.ultraResult:[];a.results[0]=e,c.setState({results:a,photos:t,urlFileImg:n})},c.selectTypeCustomer=function(e){c.state.activeTab!==e&&c.setState({activeTab:e})},c.state={ultraName:"",subclinical:"",ultraConclusion:"",ctime:"",ultraResult:{id:"",results:[{conclusion:"",description:""}]},jobStepReady:[],jobStepRunning:[],selectedJob:[],selectedJobStepRunning:{},selectecPatientReady:{},stepID:"",titleWaitForUltra:"Danh s\xe1ch b\u1ec7nh nh\xe2n ch\u1edd si\xeau \xe2m:",titleWaitForUltraDone:"Danh s\xe1ch b\u1ec7nh nh\xe2n \u0111\xe3 ho\xe0n th\xe0nh:",modalConfirm:{message:"",saveUltraResult:!1},urlFileImg:{fileImg:""},photos:new FormData,array_urls:[],printResult:"none",activeTab:"1",diagnosis:"",tab:"1",file:""},c}return Object(b.a)(n,[{key:"render",value:function(){var e,t=this,n=ir.location.id,c=this.state,a=c.activeTab,s=c.selectedJobStepRunning;return Object(et.jsxs)("div",{className:"UltrasoundEdit",children:[Object(et.jsxs)(sn.a,{className:"mb-5 title-card",children:[Object(et.jsx)(rn.a,{xs:"6",children:null===(e=ir.location)||void 0===e?void 0:e.name}),Object(et.jsx)(rn.a,{xs:"6",className:"end pointer pr-30",onClick:function(){ir.location={},window.location.replace("/app/ultrasound")},children:Object(et.jsx)("u",{children:"Chuy\u1ec3n ph\xf2ng"})})]}),Object(et.jsxs)(sn.a,{className:"content",children:[Object(et.jsxs)(rn.a,{sm:"8",className:"content-left",children:[Object(et.jsx)(sn.a,{className:"info-customer customCard",children:Object(et.jsx)(uc,{data:this.state.selectecPatientReady,mode:"compact"})}),Object(et.jsx)(sn.a,{className:"from-ExamResult mt-3",children:Object(et.jsx)(Qi,{results:this.state.ultraResult.results,jobStep:this.state.selectedJobStepRunning,activeTab:a,codeFromService:this.state.codeFromService,onChangeResult:this.handleChangeResult,upload:this.state.array_urls,file:this.state.file})})]}),Object(et.jsx)(rn.a,{sm:"4",className:"content-right",children:Object(et.jsxs)(sn.a,{className:"CusList customCard",children:[Object(et.jsxs)($t.a,{tabs:!0,className:"selectTabs",children:[Object(et.jsx)(Zt.a,{className:"titleTabs",children:Object(et.jsx)(en.a,{className:Dn()({active:"1"===a}),onClick:function(){t.selectTypeCustomer("1")},children:Object(et.jsx)("b",{className:"title-card",children:"B\u1ec7nh nh\xe2n ch\u1edd"})})}),Object(et.jsx)(Zt.a,{className:"titleTabs",children:Object(et.jsx)(en.a,{className:Dn()({active:"2"===a}),onClick:function(){t.selectTypeCustomer("2")},children:Object(et.jsx)("b",{className:"title-card",children:"B\u1ec7nh nh\xe2n \u0111\xe3 ho\xe0n th\xe0nh"})})})]}),Object(et.jsxs)(gn.a,{activeTab:a,children:[Object(et.jsx)(yn.a,{tabId:"1",className:"customCard",children:Object(et.jsx)(Tn,{titleOfList:this.state.titleWaitForUltra,onSelectJobStep:function(e){return t.onSelectJobRunning(e)},location_id:n,status:[T],action:this.readyJobListAction,type:M,mode:"other"})}),Object(et.jsx)(yn.a,{tabId:"2",className:"customCard",children:Object(et.jsx)(Tn,{titleOfList:this.state.titleWaitForUltraDone,onSelectJobStep:function(e){return t.onSelectJobDone(e)},location_id:n,status:[D],action:this.readyJobListAction,type:M,mode:"other"})})]})]})})]}),Object(et.jsx)(sn.a,{className:"btn-Comfirm end",children:Object(et.jsx)(rn.a,{sm:"12",children:Object(et.jsx)(Ze.a,{color:"primary",hidden:!s.id,onClick:function(){return t.handleConfirm("B\u1ea1n ch\u1eafc ch\u1eafn mu\u1ed1n c\u1eadp nh\u1eadt k\u1ebft qu\u1ea3?")},children:"G\u1eedi k\u1ebft qu\u1ea3"})})}),Object(et.jsx)(or,{upload:this.state.array_urls,tab:this.state.tab,urlFileImg:this.state.urlFileImg,ultraName:this.state.ultraName,style:this.state.printResult,selectedJobStepRunning:this.state.selectedJobStepRunning,ultraResult:this.state.ultraResult,ctime:this.state.ctime,diagnosis:this.state.diagnosis}),Object(et.jsx)($i,{jobStep:this.state.selectedJobStepRunning}),Object(et.jsx)(tt,{message:this.state.modalConfirm.message,answer:this.handleUpdateResult})]})}}]),n}(c.Component),eo=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).componentDidMount=Object(j.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ir.getListLocation();case 2:t=e.sent,n=t.filter((function(e){return e.type===Z})),c.setState({locationList:n});case 5:case"end":return e.stop()}}),e)}))),c.onSelect=function(e){c.props.history.push("ultrasound/room/"+e)},c.state={locationList:[],selectedLocation:-1},c}return Object(b.a)(n,[{key:"render",value:function(){return Object(et.jsx)("div",{style:{padding:"20px"},children:Object(et.jsx)(fc,{list:this.state.locationList,onSelect:this.onSelect})})}}]),n}(ze),to=Object(r.h)(eo),no=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.match.path;return Object(et.jsx)("div",{className:"Ultrasonic",children:Object(et.jsxs)(r.d,{children:[Object(et.jsx)(r.b,{exact:!0,path:"".concat(e,"/"),render:function(){return Me.hasRole(g.ULTRASOUND)||Me.hasRole(g.ADMIN)?ir.location.id&&ir.location.type===Z?Object(et.jsx)(r.a,{to:"".concat(e,"/room/").concat(ir.location.id)}):Object(et.jsx)(to,{}):Object(et.jsx)(r.a,{to:"/app/org/notauthorized"})}}),Object(et.jsx)(r.b,{exact:!0,path:"".concat(e,"/room/:id"),component:Zi})]})})}}]),n}(c.Component),co=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(b.a)(n,[{key:"render",value:function(){var e=this.props.match.path;return Object(et.jsxs)("div",{className:"App",children:[Object(et.jsx)(ln,{}),Object(et.jsxs)(r.d,{children:[Object(et.jsx)(r.b,{exact:!0,path:"".concat(e),render:function(){return Me.hasRole(g.RECEPTIONIST)||Me.hasRole(g.ADMIN)?Object(et.jsx)(r.a,{to:"/app/reception"}):Me.hasRole(g.RECEPTIONIST)||Me.hasRole(g.ADMIN)?Object(et.jsx)(r.a,{to:"/app/transaction/order"}):Me.hasRole(g.DOCTOR)||Me.hasRole(g.ADMIN)?Object(et.jsx)(r.a,{to:"/app/doctor"}):Me.hasRole(g.TEST_OPERATOR)||Me.hasRole(g.ADMIN)?Object(et.jsx)(r.a,{to:"/app/exam"}):Me.hasRole(g.ACCOUNTER)||Me.hasRole(g.ADMIN)?Object(et.jsx)(r.a,{to:"/app/reception"}):Me.hasRole(g.PHARMACIST)||Me.hasRole(g.ADMIN)?Object(et.jsx)(r.a,{to:"/app/pharmacy"}):Object(et.jsx)(r.a,{to:"/app/org/notauthorized"})}}),Object(et.jsx)(r.b,{path:"".concat(e,"/order"),component:Ri}),Object(et.jsx)(r.b,{path:"".concat(e,"/reception"),component:Ws}),Object(et.jsx)(r.b,{path:"".concat(e,"/transaction"),component:Ri}),Object(et.jsx)(r.b,{path:"".concat(e,"/doctor"),component:ti}),Object(et.jsx)(r.b,{path:"".concat(e,"/exam"),component:Nc}),Object(et.jsx)(r.b,{path:"".concat(e,"/pharmacy"),component:Si}),Object(et.jsx)(r.b,{path:"".concat(e,"/customer"),component:Uc}),Object(et.jsx)(r.b,{path:"".concat(e,"/location"),component:ma}),Object(et.jsx)(r.b,{path:"".concat(e,"/service"),component:Va}),Object(et.jsx)(r.b,{path:"".concat(e,"/product"),component:ks}),Object(et.jsx)(r.b,{path:"".concat(e,"/inventory"),component:Oi}),Object(et.jsx)(r.b,{path:"".concat(e,"/org"),component:fa}),Object(et.jsx)(r.b,{path:"".concat(e,"/user"),component:hs}),Object(et.jsx)(r.b,{path:"".concat(e,"/xray"),component:Gi}),Object(et.jsx)(r.b,{path:"".concat(e,"/endoscopic"),component:Wi}),Object(et.jsx)(r.b,{path:"".concat(e,"/ultrasound"),component:no})]})]})}}]),n}(a.a.Component),ao=Object(r.h)(co),so=function(e){Object(O.a)(n,e);var t=Object(p.a)(n);function n(e){var c;return Object(l.a)(this,n),(c=t.call(this,e)).state={locationList:[],notiMessage:"",form:c._getInitFormData({username:"",password:""})},c}return Object(b.a)(n,[{key:"login",value:function(){var e=this,t=this.state.form,n=t.username,c=t.password;Me.login(n.value,c.value).then((function(t){window.sessionStorage.setItem(L,t.id),Me.getUserInfo().then((function(t){var n=t.user;if(window.sessionStorage.setItem(E,JSON.stringify(n)),Me.userInfo=n,n.roles.includes(g.ADMIN.value))e.goTo("app/doctor");else if(n.roles.includes(g.RECEPTIONIST.value))e.goTo("app/reception");else if(n.roles.includes(g.ACCOUNTER.value))e.goTo("app/transaction/order");else if(n.roles.includes(g.DOCTOR.value))e.goTo("app/doctor");else if(n.roles.includes(g.TEST_OPERATOR.value))e.goTo("app/exam");else if(n.roles.includes(g.PHARMACIST.value)){var c=e.state.locationList.filter((function(e){return e.type===Y}));window.sessionStorage.setItem(P,JSON.stringify(c[0])),e.goTo("app/pharmacy")}else n.roles.includes(g.INVENTORY.value)?e.goTo("app/product"):n.roles.includes(g.ULTRASOUND.value)?e.goTo("app/ultrasound"):n.roles.includes(g.XRAY.value)?e.goTo("app/xray"):n.roles.includes(g.ENT.value)?e.goTo("app/endoscopic"):e.goTo("app/reception")})).catch((function(t){console.log("Err",t),e.setState({notiMessage:"C\xf3 l\u1ed7i x\u1ea3y ra trong l\xfac l\u1ea5y th\xf4ng tin ng\u01b0\u1eddi d\xf9ng, xin th\u1eed l\u1ea1i sau!"})}))})).catch((function(t){console.log("Err",t),e.setState({notiMessage:"C\xf3 l\u1ed7i x\u1ea3y ra trong l\xfac \u0111\u0103ng nh\u1eadp, xin th\u1eed l\u1ea1i sau!"})}))}},{key:"goTo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=window.location.origin+"/"+e,window.location.replace(e)}},{key:"render",value:function(){var e=this,t=this.state,n=t.username,a=t.password;return Object(et.jsx)(c.Fragment,{children:Object(et.jsxs)("div",{className:"loginCard",children:[Object(et.jsx)("h2",{children:"\u0110\u0103ng Nh\u1eadp"}),Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"4",children:"T\xean \u0110\u0103ng Nh\u1eadp: "}),Object(et.jsx)(rn.a,{children:Object(et.jsx)(Nn.a,{type:"text",placeholder:"User Name",value:n,name:"username",autoComplete:"off",onChange:function(t){return e._setValue(t,"username")}})})]}),Object(et.jsxs)(sn.a,{children:[Object(et.jsx)(rn.a,{xs:"4",children:"M\u1eadt Kh\u1ea9u: "}),Object(et.jsx)(rn.a,{children:Object(et.jsx)(Nn.a,{type:"text",placeholder:"Password",value:a,name:"password",autoComplete:"off",className:"password",onChange:function(t){return e._setValue(t,"password")},onKeyPress:function(t){"Enter"===t.key&&e.login()}})})]}),Object(et.jsx)(sn.a,{children:Object(et.jsx)(rn.a,{className:"end",children:Object(et.jsx)(Ze.a,{outline:!0,color:"primary",title:"Login",onClick:function(){return e.login()},children:"\u0110\u0103ng Nh\u1eadp"})})}),Object(et.jsx)(at,{message:this.state.notiMessage,done:function(){return e.setState({notiMessage:""})}})]})})}}]),n}(ze),ro=Object(r.h)(so),io=(n(228),n(229),!!Me.userInfo),oo=Object(et.jsx)(s.a,{children:Object(et.jsx)(c.Fragment,{children:Object(et.jsx)(r.d,{children:Object(et.jsxs)(c.Suspense,{children:[Object(et.jsx)(r.b,{exact:!0,path:"/",render:function(){return io?Object(et.jsx)(r.a,{to:"/app"}):Object(et.jsx)(r.a,{to:"/login"})}}),Object(et.jsx)(r.b,{path:"/login",render:function(){return io?Object(et.jsx)(r.a,{to:"/app"}):Object(et.jsx)(ro,{})}}),Object(et.jsx)(r.b,{path:"/app",render:function(){return io?Object(et.jsx)(ao,{}):Object(et.jsx)(r.a,{to:"/login"})}})]})})})});o.a.render(oo,document.getElementById("root"));t.default=oo}},[[230,1,2]]]);